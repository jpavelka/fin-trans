{"version":3,"sources":["firebase.js","utils/utils.js","auth/Auth.js","auth/Login.js","table/tableIcons.js","table/Table.js","plot/utils.js","plot/SinglePeriodPlot.js","plot/TrendPlot.js","plot/Plot.js","selections/utils.js","selections/CategoryModal.js","selections/TagModal.js","selections/Selections.js","utils/transactions.js","Home.js","loadData/LoadData.js","nav/Nav.js","edit/EditTransactions.js","App.js","index.js"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","firestore","sortedUniqueArray","array","reverse","arr","Array","from","Set","sort","AuthContext","React","createContext","monthFormat","AuthProvider","children","useState","minLoadMonth","setMinLoadMonth","maxLoadMonth","setMaxLoadMonth","allListenMonths","setAllListenMonths","txData","setTxData","settings","setSettings","currentUser","setCurrentUser","loadingData","setLoadingData","useEffect","auth","onAuthStateChanged","user","Object","keys","length","collection","where","FieldPath","documentId","onSnapshot","query","newSettings","docs","doc","k","id","data","general","minMonth","dayjs","maxMonth","add","format","month","listenMonths","m","includes","push","filter","newAllListenMonths","concat","newData","transactions","tx","comments","comment","d","Provider","value","Login","history","useContext","googleProvider","GoogleAuthProvider","className","onClick","signInWithPopup","then","res","catch","error","console","log","message","tableIcons","Add","forwardRef","props","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","Table","filterValues","columns","title","field","type","col","defaultFilter","icons","options","filtering","getGroupedData","allTx","groupOn","includeAll","isArray","slice","thisGroupOn","nextGroupOn","thisIncludeAll","nextIncludeAll","allGroups","map","x","groupedData","group","incrementTime","timeFrame","time","currencyFormat","Intl","NumberFormat","style","currency","dateFormat","dateFormatInv","plotColors","getPlotData","plotData","hoverinfo","y","text","cat","amount","reduce","a","b","getPlotLayout","txType","metaCategory","autosize","hovermode","SinglePeriodPlot","plotTx","setTableFilters","plotLayout","layout","useResizeHandler","width","height","e","filters","points","minTime","maxTime","subTitle","includeAverages","entries","catData","catName","yVal","totalY","_cat","_groupOn","name","legendgroup","avgY","avgData","_isAvg","line","dash","showlegend","traces","i","trace","shading","c","color","fade","rgb","string","addColors","replace","repeat","IncludeAvgCheckbox","setIncludeAverages","margin","checked","onChange","target","TrendPlot","date","Plot","selectionValues","plotType","sanitize","s","MetaCatCheckBoxes","show","metaCat","metaCategories","checkChanged","setCheckChanged","disabledMetaCategories","setDisabledMetaCategories","marginTop","display","getMetaCatId","defaultChecked","inactiveMetaCategories","changeCheckChanged","catOrMetaCat","key","for","marginLeft","getCatId","inactiveCategories","disabled","metaCats","other","v","thisObj","otherObj","obj","getOptions","originalValue","label","mc","CategoryModal","setShow","setSelectionValues","selectedOption","setSelectedOption","cats","selS","handleClose","Modal","Header","Body","defaultValue","opt","Footer","imc","ic","TagModal","allTags","originalStatuses","tag","requiredTags","forbiddenTags","statuses","setStatuses","statusesToSet","newObj","t","textAlign","padding","DropdownFromList","selectionKey","changeSelectionValue","val","setValueFunc","newMinTime","newTime","newValue","Selections","allMetaCats","allTimes","showCategoryModal","setShowCategoryModal","showTagModal","setShowTagModal","content","dropdownArgs","categoryChanges","lastInd","getDropdownArgs","selGroup","selGroupContent","sel","marginRight","transformTransactions","categoriesToChange","metaCatInverse","category","tags","split","trim","year","Math","abs","Home","metaCatVersion","undefined","categoryChangeVersion","tableFilters","waitForLoad","setWaitForLoad","_default","allTimesBetween","window","confirm","signOut","Accordion","defaultActiveKey","Toggle","eventKey","Collapse","monthsRef","uploadData","allMonths","oldMonthTx","newMonthTx","getMonthObject","set","merge","alert","queryForMonthObject","monthObject","get","exists","newMonthFunc","generalSettingsRef","LoadData","cssClass","parserOptions","header","dynamicTyping","skipEmptyLines","transformHeader","toLowerCase","onFileLoaded","onError","NavMenu","Navbar","bg","variant","expand","Brand","as","Link","to","aria-controls","Nav","EditTransactions","modifiedMonths","setModifiedMonths","getTableDataFromTxData","tData","values","dArray","join","tableData","setTableData","monthData","when","defaultSort","editable","onRowAdd","Promise","resolve","reject","setTimeout","onRowUpdate","oldData","dataUpdate","onRowDelete","dataDelete","index","splice","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c119a287.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst app = firebase.initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\n});\nconst db = firebase.firestore();\n\nexport { app, db };\n","import dayjs from \"dayjs\";\n\nexport const sortedUniqueArray = ({ array, reverse = false }) => {\n  let arr = Array.from(new Set(array)).sort();\n  if (reverse) {\n    return arr.reverse();\n  }\n  return arr;\n};\n\nexport const allTimesBetween = ({\n  minTime,\n  maxTime,\n  timeFrame,\n  reverse = false,\n}) => {\n  let allTimes = [];\n  let time = minTime;\n  while (time <= maxTime) {\n    const t = time;\n    allTimes.push(t);\n    time = dayjs(t + (timeFrame === \"month\" ? \"-01\" : \"-01-01\"))\n      .add(1, timeFrame)\n      .format(timeFrame === \"month\" ? \"YYYY-MM\" : \"YYYY\");\n  }\n  if (reverse){\n    allTimes.reverse()\n  }\n  return allTimes;\n};\n","import firebase from \"firebase/app\";\nimport React, { useEffect, useState } from \"react\";\nimport { app, db } from \"../firebase\";\nimport dayjs from \"dayjs\";\nimport { sortedUniqueArray } from \"../utils/utils\";\n\nexport const AuthContext = React.createContext();\nconst monthFormat = \"YYYY-MM\";\n\nexport const AuthProvider = ({ children }) => {\n  const [minLoadMonth, setMinLoadMonth] = useState();\n  const [maxLoadMonth, setMaxLoadMonth] = useState();\n  const [allListenMonths, setAllListenMonths] = useState([]);\n  const [txData, setTxData] = useState();\n  const [settings, setSettings] = useState({});\n  const [currentUser, setCurrentUser] = useState();\n  const [loadingData, setLoadingData] = useState(true);\n  useEffect(() => {\n    app.auth().onAuthStateChanged((user) => {\n      if (!!user) {\n        setCurrentUser(user);\n        if (Object.keys(settings).length === 0) {\n          db.collection(\"settings\")\n            .where(firebase.firestore.FieldPath.documentId(), \"in\", [\n              \"categoryChanges\",\n              \"metaCategories\",\n              \"general\",\n            ])\n            .onSnapshot((query) => {\n              let newSettings = {};\n              for (let doc of query.docs) {\n                const k = doc.id;\n                const data = doc.data() || {};\n                newSettings[k] = data;\n              }\n              setSettings(newSettings);\n            });\n        }\n        if (!!settings.general) {\n          if (minLoadMonth !== settings.general.minMonth) {\n            setMinLoadMonth(\n              dayjs(settings.general.maxMonth)\n                .add(-11, \"month\")\n                .format(monthFormat)\n            );\n            setMaxLoadMonth(\n              dayjs(settings.general.maxMonth).format(monthFormat)\n            );\n          }\n          let month = dayjs(minLoadMonth + \"-01\").format(monthFormat);\n          let listenMonths = [];\n          while (month <= maxLoadMonth) {\n            const m = month;\n            if (!Object.keys(txData || {}).includes(m)) {\n              listenMonths.push(m);\n            }\n            month = dayjs(month + \"-01\")\n              .add(1, \"month\")\n              .format(monthFormat);\n          }\n          if (\n            listenMonths.filter((m) => !allListenMonths.includes(m)).length > 0\n          ) {\n            const newAllListenMonths = sortedUniqueArray({\n              array: allListenMonths.concat(listenMonths),\n            });\n            db.collection(\"months\")\n              .where(\n                firebase.firestore.FieldPath.documentId(),\n                \">=\",\n                newAllListenMonths[0]\n              )\n              .where(\n                firebase.firestore.FieldPath.documentId(),\n                \"<=\",\n                newAllListenMonths[newAllListenMonths.length - 1]\n              )\n              .onSnapshot((query) => {\n                setLoadingData(true);\n                let newData = {};\n                for (let doc of query.docs) {\n                  const m = doc.id;\n                  const data = doc.data() || {};\n                  let transactions = data.transactions || [];\n                  for (let tx of transactions) {\n                    if (\n                      Object.keys(tx).includes(\"comment\") &&\n                      !Object.keys(tx).includes(\"comments\")\n                    ) {\n                      tx.comments = tx.comment;\n                    }\n                  }\n                  newData[m] = transactions;\n                }\n                setTxData((d) => {\n                  return { ...d, ...newData };\n                });\n                setLoadingData(false);\n              });\n            setAllListenMonths(newAllListenMonths);\n          }\n        }\n      }\n    });\n  }, [minLoadMonth, maxLoadMonth, txData, settings, allListenMonths]);\n  return (\n    <AuthContext.Provider\n      value={{\n        currentUser,\n        txData,\n        setMinLoadMonth,\n        setCurrentUser,\n        settings,\n        minLoadMonth,\n        maxLoadMonth,\n        loadingData,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nconst signOutFunc = () => {\n  const confirmed = window.confirm(\"Are you sure you want to sign out?\");\n  if (!confirmed) {\n    return;\n  }\n  app.auth().signOut();\n};\n\nexport { signOutFunc };\n","import firebase from \"firebase/app\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"./Auth\";\n\nconst Login = ({ history }) => {\n  const { currentUser } = useContext(AuthContext);\n  if (!!currentUser) {\n    history.push(\"/\");\n  }\n  const auth = firebase.auth();\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n  const signInWithGoogle = () => {\n    auth\n      .signInWithPopup(googleProvider)\n      .then((res) => {\n        history.push(\"/\");\n      })\n      .catch((error) => {\n        console.log(error.message);\n      });\n  };\n  return (\n    <button className=\"login-provider-button\" onClick={signInWithGoogle}>\n      <span>Sign in with Google</span>\n    </button>\n  );\n};\n\nexport default Login;\n","import { forwardRef } from \"react\";\n\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\nexport default tableIcons;\n","import MaterialTable from \"material-table\";\nimport React from \"react\";\nimport tableIcons from \"./tableIcons\";\n\nconst Table = ({ transactions, filterValues = {} }) => {\n  const columns = [\n    { title: \"Date\", field: \"date\" },\n    { title: \"Amount\", field: \"amount\", type: \"currency\" },\n    { title: \"Category\", field: \"category\" },\n    { title: \"Meta Category\", field: \"metaCategory\" },\n    { title: \"Account\", field: \"account\" },\n    { title: \"Tags\", field: \"tags\" },\n    { title: \"Description\", field: \"description\" },\n    { title: \"Comments\", field: \"comments\" },\n  ];\n  for (let col of columns) {\n    if (Object.keys(filterValues).includes(col.field)) {\n      col.defaultFilter = filterValues[col.field];\n    }\n  }\n  return (\n    <div>\n      <MaterialTable\n        title={\"Transactions\"}\n        data={transactions}\n        columns={columns}\n        icons={tableIcons}\n        options={{ filtering: true }}\n      />\n    </div>\n  );\n};\n\nexport default Table;\n","import dayjs from \"dayjs\";\nimport color from \"color\";\nimport { sortedUniqueArray } from \"../utils/utils\";\n\nexport const getGroupedData = ({ allTx, groupOn, includeAll }) => {\n  const [thisGroupOn, nextGroupOn] = Array.isArray(groupOn)\n    ? [groupOn[0], groupOn.slice(1)]\n    : [groupOn, []];\n  const [thisIncludeAll, nextIncludeAll] = Array.isArray(includeAll)\n    ? [includeAll[0], includeAll.slice(1)]\n    : [includeAll, []];\n  const allGroups = sortedUniqueArray({\n    array: allTx.map((x) => x[thisGroupOn]),\n  });\n  let groupedData = {};\n  for (const group of allGroups) {\n    groupedData[group] = [];\n  }\n  for (const tx of allTx) {\n    groupedData[tx[thisGroupOn]].push(tx);\n  }\n  if (thisIncludeAll) {\n    groupedData[\"_all\"] = allTx;\n  }\n  if (nextGroupOn.length > 0) {\n    for (const group of Object.keys(groupedData)) {\n      groupedData[group] = getGroupedData({\n        allTx: groupedData[group],\n        groupOn: nextGroupOn,\n        includeAll: nextIncludeAll,\n      });\n    }\n  }\n  return groupedData;\n};\n\nexport const incrementTime = ({ timeFrame, time }) => {\n  return timeFrame === \"month\"\n    ? dayjs(time + \"-01\")\n        .add(1, \"month\")\n        .format(\"YYYY-MM\")\n    : dayjs(time + \"-01-01\")\n        .add(1, \"year\")\n        .format(\"YYYY\");\n};\n\nexport const currencyFormat = (x) => {\n  var formatter = new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n  });\n  return formatter.format(x);\n};\n\nexport const dateFormat = ({ d, timeFrame }) => {\n  return timeFrame === \"month\" ? dayjs(d + \"-01\").format(\"MMM YYYY\") : d;\n};\n\nexport const dateFormatInv = ({ d, timeFrame }) => {\n  return timeFrame === \"month\" ? dayjs(\"1 \" + d).format(\"YYYY-MM\") : d;\n};\n\nexport const plotColors = [\n  \"#1f77b4\",\n  \"#ff7f0e\",\n  \"#2ca02c\",\n  \"#d62728\",\n  \"#9467bd\",\n  \"#8c564b\",\n  \"#e377c2\",\n  \"#7f7f7f\",\n  \"#bcbd22\",\n  \"#17becf\",\n];\n\nexport const addColors = (traces) => {\n  let i = 0;\n  for (const trace of traces) {\n    trace.line = trace.line || {};\n    let shading = 0;\n    if (trace._isAvg) {\n      i -= 1;\n      shading = 0.5;\n    }\n    const c = color(plotColors[i % plotColors.length]);\n    trace.line.color = c.fade(shading).rgb().string();\n    i += 1;\n  }\n  return traces;\n};\n","import Plot from \"react-plotly.js\";\nimport { sortedUniqueArray } from \"../utils/utils.js\";\nimport { currencyFormat, dateFormat, getGroupedData } from \"./utils.js\";\n\nexport const SinglePeriodPlot = ({\n  plotTx,\n  metaCategory,\n  timeFrame,\n  time,\n  txType,\n  setTableFilters\n}) => {\n  const groupOn = metaCategory === \"_all\" ? \"metaCategory\" : \"category\";\n  const groupedData = getGroupedData({\n    allTx: plotTx,\n    groupOn: [groupOn],\n    includeAll: [false],\n  });\n  const plotData = getPlotData({ groupedData: groupedData });\n  const plotLayout = getPlotLayout({\n    timeFrame: timeFrame,\n    time: time,\n    txType: txType,\n    metaCategory: metaCategory,\n  });\n  return (\n    <Plot\n      layout={plotLayout}\n      data={plotData}\n      useResizeHandler={true}\n      style={{ width: \"100%\", height: \"100%\" }}\n      onClick={(e) => {\n        let filters = {}\n        filters[groupOn] = e.points[0].x;\n        setTableFilters(filters);\n      }}\n    />\n  );\n};\n\nconst getPlotData = ({ groupedData }) => {\n  let plotData = {\n    type: \"bar\",\n    hoverinfo: \"text\",\n    x: [],\n    y: [],\n    text: [],\n  };\n  for (const cat of sortedUniqueArray({ array: Object.keys(groupedData) })) {\n    const data = groupedData[cat];\n    const y = data.map((d) => d.amount).reduce((a, b) => a + b, 0);\n    plotData.x.push(cat);\n    plotData.y.push(y);\n    plotData.text.push(`${cat}<br>${currencyFormat(y)}`);\n  }\n  return [plotData];\n};\n\nconst getPlotLayout = ({ timeFrame, time, txType, metaCategory }) => {\n  const title = `${metaCategory === '_all' ? 'All' : metaCategory} ${\n    txType === \"expense\" ? \"Expenses\" : \"Income\"\n  } - ${dateFormat({ d: time, timeFrame: timeFrame })}`;\n  return {\n    title: title,\n    autosize: true,\n    hovermode: \"closest\",\n  };\n};\n\nexport default SinglePeriodPlot;\n","import { useState } from \"react\";\nimport Plot from \"react-plotly.js\";\nimport {\n  getGroupedData,\n  dateFormat,\n  dateFormatInv,\n  currencyFormat,\n  incrementTime,\n  addColors,\n} from \"./utils\";\n\nconst TrendPlot = ({\n  plotTx,\n  txType,\n  metaCategory,\n  timeFrame,\n  minTime,\n  maxTime,\n  setTableFilters,\n}) => {\n  const [includeAverages, setIncludeAverages] = useState(true);\n  const groupOn = metaCategory === \"_all\" ? \"metaCategory\" : \"category\";\n  const groupedData = getGroupedData({\n    allTx: plotTx,\n    groupOn: [groupOn, timeFrame],\n    includeAll: [true, false],\n  });\n  const plotData = getPlotData({\n    groupedData: groupedData,\n    groupOn: groupOn,\n    timeFrame: timeFrame,\n    minTime: minTime,\n    maxTime: maxTime,\n    includeAverages: includeAverages,\n  });\n  const plotLayout = getPlotLayout({\n    timeFrame: timeFrame,\n    minTime: minTime,\n    maxTime: maxTime,\n    txType: txType,\n    metaCategory: metaCategory,\n  });\n  return (\n    <>\n      <IncludeAvgCheckbox includeAverages={includeAverages} setIncludeAverages={setIncludeAverages} />\n      <Plot\n        layout={plotLayout}\n        data={plotData}\n        useResizeHandler={true}\n        style={{ width: \"100%\", height: \"100%\" }}\n        onClick={(e) => {\n          const data = e.points[0].data;\n          if (data._isAvg) {\n            return;\n          }\n          let filters = {\n            date: dateFormatInv({ d: e.points[0].x, timeFrame: timeFrame }),\n          };\n          if (data._cat !== \"_all\") {\n            filters[groupOn] = data._cat;\n          }\n          setTableFilters(filters);\n        }}\n      />\n    </>\n  );\n};\n\nconst getPlotLayout = ({\n  timeFrame,\n  minTime,\n  maxTime,\n  txType,\n  metaCategory,\n}) => {\n  const title = `${timeFrame === \"month\" ? \"Month\" : \"Year\"}ly Trends - ${\n    txType === \"expense\" ? \"Expenses\" : \"Income\"\n  }${metaCategory === \"_all\" ? \"\" : \" - \" + metaCategory}`;\n  const subTitle = `${dateFormat({\n    d: minTime,\n    timeFrame: timeFrame,\n  })} - ${dateFormat({ d: maxTime, timeFrame: timeFrame })}`;\n  return {\n    title: `${title}<br><sub>${subTitle}</sub>`,\n    autosize: true,\n    hovermode: \"closest\",\n  };\n};\n\nconst getPlotData = ({\n  groupedData,\n  groupOn,\n  timeFrame,\n  minTime,\n  maxTime,\n  includeAverages,\n}) => {\n  let plotData = [];\n  for (const [cat, catData] of Object.entries(groupedData)) {\n    let time = minTime;\n    let x = [];\n    let y = [];\n    let text = [];\n    const catName = cat === \"_all\" ? \"Total\" : cat;\n    while (time <= maxTime) {\n      x.push(dateFormat({ d: time, timeFrame: timeFrame }));\n      let yVal = 0;\n      for (const tx of catData[time] || []) {\n        yVal += tx.amount;\n      }\n      y.push(yVal);\n      text.push(\n        `${catName}<br>${dateFormat({\n          d: time,\n          timeFrame: timeFrame,\n        })}<br>${currencyFormat(yVal)}`\n      );\n      time = incrementTime({ timeFrame: timeFrame, time: time });\n    }\n    const totalY = y.reduce((a, b) => a + b, 0);\n    const newData = {\n      _cat: cat,\n      _groupOn: groupOn,\n      name: `${catName} - ${currencyFormat(totalY)}`,\n      legendgroup: cat,\n      type: \"scatter\",\n      hoverinfo: \"text\",\n      text: text,\n      x: x,\n      y: y,\n    };\n    plotData.push(newData);\n    if (includeAverages) {\n      const avgY = totalY / newData.y.length;\n      const avgData = {\n        ...newData,\n        ...{\n          _cat: newData._cat + \"_avg\",\n          _isAvg: true,\n          line: {dash: 'dash'},\n          showlegend: false,\n          text: `Avg. ${catName}<br>${currencyFormat(avgY)}`,\n          y: newData.y.map((y) => avgY),\n        },\n      };\n      plotData.push(avgData);\n    }\n  }\n  plotData = plotData.sort((a, b) => {\n    [a, b] = [a, b].map((x) => x._cat.replace(\"_\", \"A\".repeat(10)));\n    return a < b ? -1 : 1;\n  });\n  plotData = addColors(plotData);\n  return plotData;\n};\n\nconst IncludeAvgCheckbox = ({ includeAverages, setIncludeAverages }) => {\n  return (\n    <div style={{ margin: \"5pt 10pt\" }}>\n      {`Include Avg. `}\n      <input\n        type=\"checkbox\"\n        checked={includeAverages}\n        onChange={(e) => setIncludeAverages(e.target.checked)}\n      />\n    </div>\n  );\n};\n\nexport default TrendPlot;\n","import React from \"react\";\nimport SinglePeriodPlot from \"./SinglePeriodPlot\";\nimport TrendPlot from \"./TrendPlot\";\n\nconst Plot = ({ plotTx, selectionValues, setTableFilters }) => {\n  return (\n    <div style={{ height: \"550px\" }}>\n      {selectionValues.plotType === \"trend\" ? (\n        <TrendPlot\n          plotTx={plotTx}\n          txType={selectionValues.txType}\n          metaCategory={selectionValues.metaCategory}\n          timeFrame={selectionValues.timeFrame}\n          minTime={selectionValues.minTime}\n          maxTime={selectionValues.maxTime}\n          setTableFilters={setTableFilters}\n        />\n      ) : (\n        <SinglePeriodPlot\n          plotTx={plotTx}\n          txType={selectionValues.txType}\n          metaCategory={selectionValues.metaCategory}\n          timeFrame={selectionValues.timeFrame}\n          time={selectionValues.maxTime}\n          setTableFilters={setTableFilters}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Plot;\n","export const getDropdownArgs = ({\n  settings,\n  allMetaCats,\n  selectionValues,\n  allTimes,\n}) => {\n  const dropdownArgs = [\n    [\n      {\n        label: \"Category Grouping\",\n        options: Object.keys(settings.metaCategories).filter(\n          (mc) => mc !== \"_default\"\n        ),\n        selectionKey: \"metaCatVersion\",\n      },\n      {\n        label: \"Category Changes\",\n        options: Object.keys(settings.categoryChanges).filter(\n          (mc) => mc !== \"_default\"\n        ),\n        selectionKey: \"categoryChangeVersion\",\n      },\n    ],\n    [\n      {\n        label: \"Transaction Type\",\n        options: [{ value: \"expense\", label: \"Expense\" }],\n        selectionKey: \"txType\",\n      },\n      {\n        label: \"Plot Type\",\n        options: [\n          { value: \"trend\", label: \"Trend\" },\n          { value: \"singlePeriod\", label: \"Single Period\" },\n        ],\n        selectionKey: \"plotType\",\n      },\n      {\n        label: \"Meta Category\",\n        options: allMetaCats,\n        selectionKey: \"metaCategory\",\n      },\n    ],\n    [\n      {\n        label: \"Time Frame\",\n        options: [\n          { value: \"month\", label: \"Month\" },\n          { value: \"year\", label: \"Year\" },\n        ],\n        selectionKey: \"timeFrame\",\n      },\n    ],\n  ];\n  const lastInd = dropdownArgs.length - 1;\n  if (selectionValues.plotType === \"trend\") {\n    dropdownArgs[lastInd] = dropdownArgs[lastInd].concat([\n      {\n        label: `Start ${\n          selectionValues.timeFrame === \"month\" ? \"Month\" : \"Year\"\n        }`,\n        options: allTimes,\n        selectionKey: \"minTime\",\n      },\n      {\n        label: `End ${\n          selectionValues.timeFrame === \"month\" ? \"Month\" : \"Year\"\n        }`,\n        options: allTimes,\n        selectionKey: \"maxTime\",\n      },\n    ]);\n  } else {\n    dropdownArgs[lastInd] = dropdownArgs[lastInd].concat([\n      {\n        label: selectionValues.timeFrame === \"month\" ? \"Month\" : \"Year\",\n        options: allTimes,\n        selectionKey: \"maxTime\",\n      },\n    ]);\n  }\n  return dropdownArgs;\n};\n\nexport const sanitize = (s) => {\n  return s.replace(\"-\", \"\").replace(\"/\", \"\").replace(\" \", \"\");\n};\n","import React, { useState } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Select from \"react-select\";\nimport { sanitize } from \"./utils\";\nimport { sortedUniqueArray } from \"../utils/utils\";\n\nconst CategoryModal = ({\n  show,\n  setShow,\n  metaCategories,\n  selectionValues,\n  setSelectionValues,\n}) => {\n  const options = getOptions(metaCategories);\n  const [selectedOption, setSelectedOption] = useState(options[0]);\n  const [disabledMetaCategories, setDisabledMetaCategories] = useState([]);\n  const [checkChanged, setCheckChanged] = useState({\n    metaCats: {},\n    cats: {},\n  });\n  const selS = selectedOption.originalValue;\n  const handleClose = () => {\n    setCheckChanged({ metaCats: {}, cats: {} });\n    setShow(false);\n  };\n  return (\n    <div>\n      <Modal show={show}>\n        <Modal.Header>\n          <h3>Category Detail</h3>\n        </Modal.Header>\n        <Modal.Body>\n          Select a meta-category\n          <Select\n            options={options}\n            defaultValue={selectedOption}\n            onChange={(opt) => setSelectedOption(opt)}\n          ></Select>\n          {Object.keys(metaCategories).map((mc) => {\n            return (\n              <MetaCatCheckBoxes\n                metaCat={mc}\n                metaCategories={metaCategories}\n                checkChanged={checkChanged}\n                setCheckChanged={setCheckChanged}\n                selectionValues={selectionValues}\n                disabledMetaCategories={disabledMetaCategories}\n                setDisabledMetaCategories={setDisabledMetaCategories}\n                show={mc === selS}\n              />\n            );\n          })}\n        </Modal.Body>\n        <Modal.Footer>\n          <button\n            onClick={() => {\n              setSelectionValues((v) => {\n                let imc = v.inactiveMetaCategories;\n                for (const mc of Object.keys(checkChanged.metaCats)) {\n                  if (checkChanged.metaCats[mc]) {\n                    if (imc.includes(mc)) {\n                      imc = imc.filter((x) => x !== mc);\n                    } else {\n                      imc.push(mc);\n                    }\n                  }\n                }\n                let ic = v.inactiveCategories;\n                for (const c of Object.keys(checkChanged.cats)) {\n                  if (checkChanged.cats[c]) {\n                    if (ic.includes(c)) {\n                      ic = ic.filter((x) => x !== c);\n                    } else {\n                      ic.push(c);\n                    }\n                  }\n                }\n                return {\n                  ...v,\n                  ...{ inactiveMetaCategories: imc, inactiveCategories: ic },\n                };\n              });\n              handleClose();\n            }}\n          >\n            Save\n          </button>\n          <button onClick={() => handleClose()}>Cancel</button>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  );\n};\n\nconst MetaCatCheckBoxes = ({\n  show,\n  metaCat,\n  metaCategories,\n  checkChanged,\n  setCheckChanged,\n  selectionValues,\n  disabledMetaCategories,\n  setDisabledMetaCategories,\n}) => {\n  return (\n    <div\n      style={{ ...{ marginTop: \"5pt\" }, ...(show ? {} : { display: \"none\" }) }}\n    >\n      <input\n        type=\"checkbox\"\n        id={getMetaCatId(metaCat)}\n        defaultChecked={\n          !selectionValues.inactiveMetaCategories.includes(metaCat)\n        }\n        onChange={(e) => {\n          changeCheckChanged({\n            catOrMetaCat: \"metaCats\",\n            key: metaCat,\n            setCheckChanged: setCheckChanged,\n          });\n        }}\n      />\n      <label for={getMetaCatId(metaCat)}>&nbsp;&nbsp;{metaCat}</label>\n      <div style={{ marginLeft: \"5pt\" }}>\n        {metaCategories[metaCat].map((x) => {\n          return (\n            <div>\n              <input\n                id={getCatId(x)}\n                type=\"checkbox\"\n                defaultChecked={!selectionValues.inactiveCategories.includes(x)}\n                disabled={\n                  (selectionValues.inactiveMetaCategories.includes(metaCat) &&\n                    !checkChanged.metaCats[metaCat]) ||\n                  (!selectionValues.inactiveMetaCategories.includes(metaCat) &&\n                    !!checkChanged.metaCats[metaCat])\n                }\n                onChange={() =>\n                  changeCheckChanged({\n                    catOrMetaCat: \"cats\",\n                    key: x,\n                    setCheckChanged: setCheckChanged,\n                  })\n                }\n              />\n              <label for={getCatId(x)}>&nbsp;&nbsp;{x}</label>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst changeCheckChanged = ({ catOrMetaCat, key, setCheckChanged }) => {\n  const other = catOrMetaCat === \"cats\" ? \"metaCats\" : \"cats\";\n  setCheckChanged((v) => {\n    let thisObj = v[catOrMetaCat];\n    const otherObj = v[other];\n    thisObj[key] = !thisObj[key];\n    let obj = {};\n    obj[catOrMetaCat] = thisObj;\n    obj[other] = otherObj;\n    return obj;\n  });\n};\n\nconst getOptions = (metaCategories) => {\n  return sortedUniqueArray({ array: Object.keys(metaCategories) }).map((c) => {\n    return {\n      originalValue: c,\n      value: sanitize(c),\n      label: c,\n    };\n  });\n};\n\nconst getMetaCatId = (mc) => {\n  return `${sanitize(mc)}MetaCatSel`;\n};\n\nconst getCatId = (c) => {\n  return `${sanitize(c)}CatSel`;\n};\n\nexport default CategoryModal;\n","import React, { useState } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nconst TagModal = ({show, setShow, selectionValues, setSelectionValues, allTags}) => {\n    const originalStatuses = {}\n    for (const tag of allTags){\n        originalStatuses[tag] = selectionValues.requiredTags.includes(tag) ? 'must' : (\n            selectionValues.forbiddenTags.includes(tag) ? 'cannot' : 'can'\n        )\n    }\n    const [statuses, setStatuses] = useState(originalStatuses)\n    const handleClose = (statusesToSet) => {\n        setSelectionValues(v => {\n            let newObj = {\n                requiredTags: Object.keys(statusesToSet).filter(t => statusesToSet[t] === 'must'),\n                forbiddenTags: Object.keys(statusesToSet).filter(t => statusesToSet[t] === 'cannot')\n            }\n            return {...v, ...newObj}\n        })\n        setShow(false)\n    }\n    return (\n        <div>\n      <Modal show={show}>\n        <Modal.Header>\n          <h3>Tag Detail</h3>\n        </Modal.Header>\n        <Modal.Body>\n            <table>\n                <thead>\n                    <tr>\n                    <td></td>\n                    {['Can Have', 'Must Have', \"Can't Have\"].map(s => {\n                        return <td style={{textAlign: 'center', padding: '5pt'}}>{s}</td>\n                    })}\n                    </tr>\n                </thead>\n                <tbody>\n                    {allTags.map(tag => {\n                        return(\n                            <tr>\n                                <td>{tag}</td>\n                                {['can', 'must', 'cannot'].map(v => {\n                                    const checked = (statuses[tag] || 'can') === v\n                                    return(<td style={{textAlign: 'center'}}>\n                                        <input type='radio' name={tag} value={v} defaultChecked={checked} onChange={(e) => {\n                                            setStatuses(s => {\n                                                let newObj = {}\n                                                newObj[e.target.name] = e.target.value;\n                                                return {...s, ...newObj}\n                                            })\n                                        }}/>\n                                    </td>)\n                                })}\n                            </tr>\n                        )\n                    })}\n                </tbody>\n            </table>\n        </Modal.Body>\n        <Modal.Footer>\n          <button\n            onClick={() => handleClose(statuses)}\n          >\n            Save\n          </button>\n          <button onClick={() => handleClose(originalStatuses)}>Cancel</button>\n        </Modal.Footer>\n      </Modal>\n    </div>\n    )\n}\n\nexport default TagModal\n","import React, { useContext, useState } from \"react\";\nimport Select from \"react-select\";\nimport { AuthContext } from \"../auth/Auth\";\nimport CategoryModal from \"./CategoryModal\";\nimport TagModal from \"./TagModal\";\nimport { getDropdownArgs, sanitize } from \"./utils\";\n\nconst Selections = ({\n  selectionValues,\n  setSelectionValues,\n  allMetaCats,\n  allTimes,\n  metaCategories,\n  allTags,\n}) => {\n  const { settings, minLoadMonth, setMinLoadMonth } = useContext(AuthContext);\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [showTagModal, setShowTagModal] = useState(false);\n  allMetaCats = [{ value: \"_all\", label: \"All\" }].concat(allMetaCats);\n  const dropdownArgs = getDropdownArgs({\n    settings: settings,\n    allMetaCats: allMetaCats,\n    selectionValues: selectionValues,\n    allTimes: allTimes,\n  });\n  const content = dropdownArgs.map((selGroup) => {\n    const selGroupContent = selGroup.map((sel) => {\n      return (\n        <DropdownFromList\n          key={sel.selectionKey}\n          selectionValues={selectionValues}\n          setSelectionValues={setSelectionValues}\n          minLoadMonth={minLoadMonth}\n          setMinLoadMonth={setMinLoadMonth}\n          {...sel}\n        />\n      );\n    });\n    return (\n      <div\n        style={{ display: \"flex\", marginTop: \"5pt\" }}\n        key={selGroup[0].selectionKey}\n      >\n        {selGroupContent}\n      </div>\n    );\n  });\n  content.push(\n    <div style={{margin: '10pt'}}>\n      <button onClick={() => setShowCategoryModal(true)} style={{marginRight: '5pt'}}>\n        Category Detail\n      </button>\n      <button onClick={() => setShowTagModal(true)}>Tag Detail</button>\n      <CategoryModal\n        show={showCategoryModal}\n        setShow={setShowCategoryModal}\n        selectionValues={selectionValues}\n        setSelectionValues={setSelectionValues}\n        metaCategories={metaCategories}\n      />\n      <TagModal\n        show={showTagModal}\n        setShow={setShowTagModal}\n        selectionValues={selectionValues}\n        setSelectionValues={setSelectionValues}\n        allTags={allTags}\n      />\n    </div>\n  );\n  content.push(<hr />);\n  return <>{content}</>;\n};\n\nconst DropdownFromList = ({\n  label,\n  options,\n  selectionKey,\n  selectionValues,\n  setSelectionValues,\n  minLoadMonth,\n  setMinLoadMonth,\n}) => {\n  options = options\n    .map((opt) => {\n      return typeof opt === \"string\" ? (opt = { value: opt, label: opt }) : opt;\n    })\n    .map((opt) => {\n      return {\n        originalValue: opt.value,\n        value: sanitize(opt.value),\n        label: opt.label,\n      };\n    });\n  let defaultValue = options.filter(\n    (opt) => opt.originalValue === selectionValues[selectionKey]\n  );\n  const onChange = (e) => {\n    const value = e.originalValue\n    changeSelectionValue({\n      key: selectionKey,\n      val: value,\n      setValueFunc: setSelectionValues,\n    });\n    if (selectionKey === 'timeFrame'){\n      if (selectionValues.plotType === 'trend'){\n        if (value === 'year'){\n          const newMinTime = selectionValues.minTime.slice(0, 4)\n          changeSelectionValue({\n            key: 'minTime',\n            val: newMinTime,\n            setValueFunc: setSelectionValues\n          })\n          changeSelectionValue({\n            key: 'maxTime',\n            val: selectionValues.maxTime.slice(0, 4),\n            setValueFunc: setSelectionValues\n          })\n          if (newMinTime + '-01' < minLoadMonth){\n            setMinLoadMonth(newMinTime + '-01')\n          }\n        }\n        else {\n\n          changeSelectionValue({\n            key: 'minTime',\n            val: selectionValues.minTime + '-01',\n            setValueFunc: setSelectionValues\n          })\n          changeSelectionValue({\n            key: 'maxTime',\n            val: selectionValues.maxTime + '-12',\n            setValueFunc: setSelectionValues\n          })\n        }\n      } else {\n        if (value === 'year'){\n          const newTime = selectionValues.maxTime.slice(0, 4)\n          changeSelectionValue({\n            key: 'maxTime',\n            val: newTime,\n            setValueFunc: setSelectionValues\n          })\n          if (newTime + '-01' < minLoadMonth){\n            setMinLoadMonth(newTime + '-01')\n          }\n        } else {\n          changeSelectionValue({\n            key: 'maxTime',\n            val: selectionValues.maxTime + '-01',\n            setValueFunc: setSelectionValues\n          })\n        }\n      }\n    }\n  };\n  return (\n    <div style={{ width: \"100pt\", marginLeft: \"10pt\" }}>\n      {label}\n      <Select options={options} value={defaultValue} onChange={onChange} />\n    </div>\n  );\n};\n\nconst changeSelectionValue = ({ key, val, setValueFunc }) => {\n  setValueFunc((v) => {\n    let newValue = {};\n    newValue[key] = val;\n    return { ...v, ...newValue };\n  });\n};\n\nexport default Selections;\n","import dayjs from \"dayjs\";\n\nconst transformTransactions = ({\n  transactions,\n  metaCategories,\n  categoryChanges,\n}) => {\n  const categoriesToChange = Object.keys(categoryChanges || {});\n  let metaCatInverse = {};\n  for (const mc of Object.keys(metaCategories || {})) {\n    for (const c of metaCategories[mc]) {\n      metaCatInverse[c] = mc;\n    }\n  }\n  for (let tx of transactions) {\n    if (categoriesToChange.includes(tx.category)) {\n      tx.category = categoryChanges[tx.category];\n    }\n    tx.metaCategory = metaCatInverse[tx.category] || \"Misc\";\n    tx.type = tx.amount < 0 ? \"expense\" : \"income\";\n    tx.tags = tx.tags || [];\n    if (typeof tx.tags === \"string\") {\n      tx.tags = tx.tags.split(\",\");\n    }\n    tx.tags = tx.tags.filter((t) => t.trim() !== \"\");\n    tx.month = dayjs(tx.date).format(\"YYYY-MM\");\n    tx.year = dayjs(tx.date).format(\"YYYY\");\n  }\n  return transactions\n    .filter((tx) => tx.metaCategory !== \"Ignore\")\n    .map((tx) => {\n      return { ...tx, ...{ amount: Math.abs(tx.amount) } };\n    });\n};\n\nexport default transformTransactions;\n","import { useContext, useState, useEffect } from \"react\";\nimport { AuthContext, signOutFunc } from \"./auth/Auth\";\nimport { Accordion } from \"react-bootstrap\";\nimport Table from \"./table/Table\";\nimport Plot from \"./plot/Plot\";\nimport Selections from \"./selections/Selections\";\nimport transformTransactions from \"./utils/transactions\";\nimport { sortedUniqueArray, allTimesBetween } from \"./utils/utils\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nconst Home = ({ history }) => {\n  const {\n    currentUser,\n    setCurrentUser,\n    txData,\n    settings,\n    minLoadMonth,\n    maxLoadMonth,\n    setMinLoadMonth,\n    loadingData,\n  } = useContext(AuthContext);\n  const [selectionValues, setSelectionValues] = useState({\n    metaCatVersion: undefined,\n    categoryChangeVersion: undefined,\n    txType: \"expense\",\n    inactiveCategories: [],\n    inactiveMetaCategories: [],\n    requiredTags: [],\n    forbiddenTags: [],\n    plotType: \"trend\",\n    metaCategory: \"_all\",\n    timeFrame: \"month\",\n    minTime: undefined,\n    maxTime: undefined,\n  });\n  const [tableFilters, setTableFilters] = useState({});\n  const [waitForLoad, setWaitForLoad] = useState(loadingData);\n  useEffect(() => {\n    setWaitForLoad(loadingData);\n  }, [loadingData]);\n  useEffect(() => {\n    if (!!selectionValues.minTime) {\n      setMinLoadMonth((m) => {\n        const newTime =\n          selectionValues.minTime.length === 4\n            ? selectionValues.minTime + \"-01\"\n            : selectionValues.minTime;\n        return newTime < m ? newTime : m;\n      });\n    }\n  }, [selectionValues.minTime, setMinLoadMonth]);\n  useEffect(() => {\n    if (!!settings && !!minLoadMonth && !!maxLoadMonth) {\n      setSelectionValues((v) => {\n        let newObj = {};\n        if (!!!v.metaCatVersion) {\n          newObj.metaCatVersion = (settings.metaCategories || {})._default;\n        }\n        if (!!!v.categoryChanges) {\n          newObj.categoryChangeVersion = (\n            settings.categoryChanges || {}\n          )._default;\n        }\n        if (!!!v.minTime) {\n          newObj.minTime = minLoadMonth;\n        }\n        if (!!!v.maxTime) {\n          newObj.maxTime = maxLoadMonth;\n        }\n        return { ...v, ...newObj };\n      });\n    }\n  }, [settings, minLoadMonth, maxLoadMonth]);\n  let allTx = [];\n  for (const k of Object.keys(txData || {})) {\n    allTx = allTx.concat(\n      transformTransactions({\n        transactions: txData[k],\n        metaCategories: settings.metaCategories[selectionValues.metaCatVersion],\n        categoryChanges:\n          settings.categoryChanges[selectionValues.categoryChangeVersion],\n      })\n    );\n  }\n  if (!!!currentUser) {\n    history.push(\"/login\");\n  }\n  if (\n    !!!settings ||\n    !!!selectionValues.metaCatVersion ||\n    !!!selectionValues.categoryChangeVersion\n  ) {\n    return <div>Loading...</div>;\n  }\n  let allTags = []\n  for (const tx of allTx){\n    allTags = allTags.concat(tx.tags || [])\n  }\n  allTags = sortedUniqueArray({array: allTags})\n  allTx = allTx.filter((tx) => {\n    return (\n      tx[selectionValues.timeFrame] >= selectionValues.minTime &&\n      tx[selectionValues.timeFrame] <= selectionValues.maxTime &&\n      tx.type === selectionValues.txType &&\n      !selectionValues.inactiveCategories.includes(tx.category) &&\n      !selectionValues.inactiveMetaCategories.includes(tx.metaCategory) &&\n      ((tx.tags || []).map(tag => {\n        return selectionValues.requiredTags.includes(tag) ? 1 : 0\n      }).reduce((a, b) => a + b, 0) === selectionValues.requiredTags.length) &&\n      (tx.tags || []).map(tag => {\n        return selectionValues.forbiddenTags.includes(tag) ? 1 : 0\n      }).reduce((a, b) => a + b, 0) === 0\n    );\n  });\n  allTx = allTx.filter((tx) => {\n    return selectionValues.plotType === 'trend' ? (\n      tx[selectionValues.timeFrame] >= selectionValues.minTime &&\n      tx[selectionValues.timeFrame] <= selectionValues.maxTime\n    ) : (\n      tx[selectionValues.timeFrame] === selectionValues.maxTime\n    )\n  })\n  const allMetaCats = sortedUniqueArray({\n    array: allTx.map((tx) => tx.metaCategory),\n  });\n  allTx = allTx.filter((tx) => {\n    return selectionValues.metaCategory === \"_all\"\n      ? true\n      : tx.metaCategory === selectionValues.metaCategory;\n  });\n  const allTimes = allTimesBetween({\n    minTime: settings.general.minMonth,\n    maxTime: settings.general.maxMonth,\n    timeFrame: selectionValues.timeFrame,\n    reverse: true,\n  });\n  return (\n    <>\n      <button\n        onClick={() => {\n          signOutFunc();\n          setCurrentUser();\n          history.push(\"/login\");\n        }}\n      >\n        Sign Out\n      </button>\n      <Selections\n        selectionValues={selectionValues}\n        setSelectionValues={setSelectionValues}\n        allMetaCats={allMetaCats}\n        allTimes={allTimes}\n        metaCategories={settings.metaCategories[selectionValues.metaCatVersion]}\n        allTags={allTags}\n      />\n      {waitForLoad ? (\n        <h3 style={{ textAlign: \"center\" }}>Waiting for data to load...</h3>\n      ) : (\n        <>\n          <Accordion defaultActiveKey=\"0\">\n            <Accordion.Toggle eventKey=\"0\">Toggle Plot</Accordion.Toggle>\n            <Accordion.Collapse eventKey=\"0\">\n              <Plot\n                plotTx={allTx}\n                selectionValues={selectionValues}\n                setTableFilters={setTableFilters}\n              />\n            </Accordion.Collapse>\n          </Accordion>\n          <hr/>\n          <Accordion defaultActiveKey=\"0\">\n            <Accordion.Toggle eventKey=\"0\">Toggle Table</Accordion.Toggle>\n            <Accordion.Collapse eventKey=\"0\">\n              <Table transactions={allTx} filterValues={tableFilters} />\n            </Accordion.Collapse>\n          </Accordion>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Home;\n","import CSVReader from \"react-csv-reader\";\nimport { db } from \"../firebase\";\nimport { sortedUniqueArray } from \"../utils/utils\";\n\nconst monthsRef = db.collection(\"months\");\n\nconst LoadData = () => {\n  const papaparseOptions = {\n    header: true,\n    dynamicTyping: true,\n    skipEmptyLines: true,\n    transformHeader: (header) => header.toLowerCase().replace(/\\W/g, \"_\"),\n  };\n  return (\n    <CSVReader\n      cssClass=\"csv-reader-input\"\n      label=\"Select CSV to upload\"\n      parserOptions={papaparseOptions}\n      onFileLoaded={uploadData}\n      onError={(e) => console.log(e)}\n    />\n  );\n};\n\nconst uploadData = async (data) => {\n  const allMonths = sortedUniqueArray({\n    array: data.map((d) => d.date.slice(0, 7)),\n  });\n  let oldMonthTx = {};\n  let newMonthTx = {};\n  for (const m of allMonths) {\n    newMonthTx[m] = [];\n    oldMonthTx[m] = await getMonthObject(m);\n  }\n  data.map((d) => {\n    return newMonthTx[d.date.slice(0, 7)].push(d);\n  });\n  for (const m of allMonths) {\n    let allTx = oldMonthTx[m].concat(newMonthTx[m]);\n    monthsRef\n      .doc(m)\n      .set({ transactions: allTx }, { merge: true })\n      .then(() => {\n        window.alert(\"Transactions uploaded successfully for month \" + m);\n      })\n      .catch((e) => {\n        window.alert(\"There was an issue uploading the transactions: \", e);\n      });\n  }\n};\n\nconst getMonthObject = async (m) => {\n  let monthObject = await queryForMonthObject(m);\n  return monthObject.transactions || [];\n};\n\nconst queryForMonthObject = (m) => {\n  let monthData = monthsRef\n    .doc(m)\n    .get()\n    .then(function (doc) {\n      if (doc.exists) {\n        return doc.data();\n      } else {\n        newMonthFunc(m);\n        return { transactions: [] };\n      }\n    })\n    .catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n      return null;\n    });\n  return monthData;\n};\n\nfunction newMonthFunc(m) {\n  const generalSettingsRef = db.doc(\"settings/general\");\n  generalSettingsRef\n    .get()\n    .then(function (doc) {\n      const data = doc.data();\n      if (m < data.minMonth) {\n        generalSettingsRef.set({ minMonth: m }, { merge: true });\n      } else if (m > data.maxMonth) {\n        generalSettingsRef.set({ maxMonth: m }, { merge: true });\n      }\n    })\n    .catch(function (error) {\n      console.log(\"Error getting settings: \", error);\n      return null;\n    });\n}\n\nexport default LoadData;\n\nexport { monthsRef, newMonthFunc };\n","import { Navbar, Nav } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\n\nconst NavMenu = () => {\n  return (\n    <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\">\n      <Navbar.Brand as={Link} to=\"/\">\n        Transactions\n      </Navbar.Brand>\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n      <Navbar.Collapse id=\"basic-navbar-nav\">\n        <Nav className=\"mr-auto\">\n          <Nav.Link as={Link} to=\"/upload\">\n            Upload\n          </Nav.Link>\n          <Nav.Link as={Link} to=\"/edit\">\n            Edit\n          </Nav.Link>\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  );\n};\n\nexport default NavMenu;\n","import MaterialTable from \"material-table\";\nimport React, { useContext, useState } from \"react\";\nimport { Prompt } from \"react-router\";\nimport { AuthContext } from \"../auth/Auth\";\nimport { monthsRef, newMonthFunc } from \"../loadData/LoadData\";\nimport tableIcons from \"../table/tableIcons\";\nimport { sortedUniqueArray } from \"../utils/utils\";\n\nconst EditTransactions = () => {\n  const { currentUser, txData } = useContext(AuthContext);\n  const [modifiedMonths, setModifiedMonths] = useState([]);\n  const getTableDataFromTxData = () => {\n    const tData = [];\n    for (const dArray of Object.values(txData || {})) {\n      for (const d of dArray) {\n        if (!!d.tags) {\n          d.tags = typeof d.tags === \"string\" ? d.tags : d.tags.join(\",\");\n        }\n        tData.push(d);\n      }\n    }\n    return tData;\n  };\n  const [tableData, setTableData] = useState(getTableDataFromTxData());\n  if (!currentUser) {\n    return <div>Loading...</div>;\n  }\n  const saveChanges = () => {\n    for (const m of sortedUniqueArray({ array: modifiedMonths })) {\n      const monthData = tableData.filter((d) => d.date.slice(0, 7) === m);\n      monthsRef\n        .doc(m)\n        .set({ transactions: monthData }, { merge: true })\n        .then(() => {\n          window.alert(\"Transactions uploaded successfully for month \" + m);\n        })\n        .catch((e) => {\n          window.alert(\"There was an issue uploading the transactions: \", e);\n        });\n      if (!Object.keys(txData).includes(m)) {\n        newMonthFunc(m);\n      }\n    }\n    setModifiedMonths([]);\n  };\n  const columns = [\n    { title: \"Date\", field: \"date\", defaultSort: \"desc\" },\n    { title: \"Description\", field: \"description\" },\n    { title: \"Amount\", field: \"amount\" },\n    { title: \"Category\", field: \"category\" },\n    { title: \"Comments\", field: \"comments\" },\n    { title: \"Tags\", field: \"tags\" },\n    { title: \"Account\", field: \"account\" },\n    { title: \"Amortization (Months)\", field: \"amortize\" },\n  ];\n  return (\n    <div>\n      <button\n        onClick={() => {\n          setTableData(getTableDataFromTxData());\n          setModifiedMonths([]);\n        }}\n      >\n        Undo All\n      </button>\n      <button onClick={saveChanges}>Save All</button>\n      <Prompt\n        when={modifiedMonths.length > 0}\n        message={\n          \"You have unsaved changes. Please either save or undo changes.\"\n        }\n      />\n      <MaterialTable\n        title={\"Raw Transaction Data\"}\n        data={tableData}\n        columns={columns}\n        icons={tableIcons}\n        options={{ filtering: true }}\n        editable={{\n          onRowAdd: (newData) =>\n            new Promise((resolve, reject) => {\n              setTimeout(() => {\n                setTableData([...tableData, newData]);\n                setModifiedMonths([\n                  ...modifiedMonths,\n                  newData.date.slice(0, 7),\n                ]);\n                resolve();\n              }, 1000);\n            }),\n          onRowUpdate: (newData, oldData) =>\n            new Promise((resolve, reject) => {\n              setTimeout(() => {\n                const dataUpdate = [...tableData];\n                const index = oldData.tableData.id;\n                dataUpdate[index] = newData;\n                setTableData([...dataUpdate]);\n                setModifiedMonths([\n                  ...modifiedMonths,\n                  newData.date.slice(0, 7),\n                  oldData.date.slice(0, 7),\n                ]);\n                resolve();\n              }, 1000);\n            }),\n          onRowDelete: (oldData) =>\n            new Promise((resolve, reject) => {\n              setTimeout(() => {\n                const dataDelete = [...tableData];\n                const index = oldData.tableData.id;\n                dataDelete.splice(index, 1);\n                setTableData([...dataDelete]);\n                setModifiedMonths([\n                  ...modifiedMonths,\n                  oldData.date.slice(0, 7),\n                ]);\n                resolve();\n              }, 1000);\n            }),\n        }}\n      />\n    </div>\n  );\n};\n\nexport default EditTransactions;\n","import Login from \"./auth/Login\";\nimport Home from \"./Home\";\nimport LoadData from \"./loadData/LoadData\";\nimport NavMenu from \"./nav/Nav\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { AuthProvider } from \"./auth/Auth\";\nimport EditTransactions from \"./edit/EditTransactions\";\n\nconst App = () => {\n  return (\n    <AuthProvider>\n      <Router>\n        <NavMenu />\n        <Switch>\n          <div style={{ margin: \"5pt\" }}>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/upload\" component={LoadData} />\n            <Route exact path=\"/edit\" component={EditTransactions} />\n          </div>\n        </Switch>\n      </Router>\n    </AuthProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}