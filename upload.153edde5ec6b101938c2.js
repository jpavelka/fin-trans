/*! For license information please see upload.153edde5ec6b101938c2.js.LICENSE.txt */
(()=>{var t={6981:(t,e,n)=>{"use strict";n(1983);var r,i=(r=n(115))&&r.__esModule?r:{default:r};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},1983:(t,e,n)=>{"use strict";n(6266),n(990),n(911),n(4160),n(6197),n(6728),n(4039),n(3568),n(8051),n(8250),n(5434),n(4952),n(6337),n(5666)},6099:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,o=n(655),a=n(4589),s=n(909),u=n(4594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Yd("@firebase/app"),v=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",(function(){return u}),"PUBLIC"));try{for(var c=(0,o.XA)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.r3)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new s.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.r3)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(s){var u,c,h=s.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==s.serviceProps&&(0,a.ZB)(f,s.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,s.multipleInstances?t:[])}}try{for(var p=(0,o.XA)(Object.keys(e)),v=p.next();!v.done;v=p.next()){var y=v.value;e[y]._addComponent(s)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.ZB)(e,t)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=y;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(b);const w=b},8481:(t,e,n)=>{"use strict";var r=n(6099);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(n=n(o=r[t=t[t.length-1]]))!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.i(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.i(t)},e.prototype.g=function(t){this.h(2,t)},e.prototype.i=function(t){this.h(1,t)},e.prototype.h=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Pa(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Pa(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++_)}var m="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now;function x(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function C(t,e,n){this.code=N+t,this.message=e||P[t]||"",this.a=n||null}function A(t){var e=t&&t.code;return e?new C(e.substring(N.length),t.message,t.serverResponse):null}x(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var k,N="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function M(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function F(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function j(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}k=O("__EID__")?"__EID__":void 0,x(D,Error),D.prototype.name="CustomError",x(L,D),L.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var q=new j((function(){return new H}),(function(t){t.reset()}));function B(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function H(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=q.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},J=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=G(t,e)}function Q(t,e){var n;return(n=0<=(e=G(t,e)))&&Array.prototype.splice.call(t,e,1),n}function X(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function $(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var ht=u.navigator;if(ht){var ft=ht.userAgent;if(ft){tt=ft;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function yt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _t(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===St&&e||"",this.b=Tt}function wt(t){return t instanceof bt&&t.constructor===bt&&t.b===Tt?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var Et,Tt={},St={};function xt(){if(void 0===Et){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){u.console&&u.console.error(t.message)}Et=t}else Et=t}return Et}function It(t,e){this.a=e===Pt?t:""}function Ct(t){return t instanceof It&&t.constructor===It?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function At(t,e){var n=wt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=xt();return new It(t=e?e.createScriptURL(t):t,Pt)}(t=n.replace(kt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?wt(t):encodeURIComponent(String(t))})))}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var kt=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pt={};function Rt(t,e){this.a=e===Ut?t:""}function Ot(t){return t instanceof Rt&&t.constructor===Rt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Mt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Dt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t))t=new Rt(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Dt);t=e&&Mt.test(e[1])?new Rt(t,Ut):null}return t}function jt(t){return t instanceof Rt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Ut))}var Ut={},Vt=new Rt("about:invalid#zClosurez",Ut);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Ht(t,e,n,r){return t=t instanceof Rt?t:jt(t),e=e||u,n=n instanceof bt?wt(n):n||"",e.open(Ot(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=f;var Kt,Jt,Yt=pt("Opera"),Qt=pt("Trident")||pt("MSIE"),Xt=pt("Edge"),$t=Xt||Qt,Zt=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=(Jt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Jt):Xt?/Edge\/([\d\.]+)/.exec(Jt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Jt):te?/WebKit\/(\S+)/.exec(Jt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Jt):void 0);if(re&&(ne=re?re[1]:""),Qt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Kt=String(ie);break t}}Kt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Kt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=lt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||lt(0==a[2].length,0==s[2].length)||lt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}u.document&&Qt?oe=ee()||parseInt(Kt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Jt){}var ce=!Qt||9<=Number(ue);function le(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function he(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){a="function"==typeof o.item;break t}}a=!1}z(a?Z(o):o,r)}}}function ye(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){u.setTimeout((function(){throw t}),0)}function me(t,e){pe||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);pe=function(){t.then(we)}}else pe=function(){var t=we;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!pt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(fe||(fe=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ye(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=E((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),fe(t)):u.setImmediate(t)}}(),_e||(pe(),_e=!0),be.add(t,e)}var _e=!1,be=new V;function we(){for(var t;t=B();){try{t.a.call(t.b)}catch(t){ge(t)}U(q,t)}_e=!1}function Ee(t,e){if(this.a=Te,this.h=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,t!=f)try{var n=this;t.call(e,(function(t){Le(n,Se,t)}),(function(t){if(!(t instanceof He))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,xe,t)}))}catch(t){Le(this,xe,t)}}var Te=0,Se=2,xe=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new j((function(){return new Ie}),(function(t){t.reset()}));function Ae(t,e,n){var r=Ce.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof Ee)return t;var e=new Ee(f);return Le(e,Se,t),e}function Ne(t){return new Ee((function(e,n){n(t)}))}function Pe(t,e,n){Fe(t,e,n,null)||me(T(e,t))}function Re(t){return new Ee((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Pe(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Te&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ue(n),Ve(n,i,xe,e)))}t.c=null}else Le(t,xe,e)}function Me(t,e){t.b||t.a!=Se&&t.a!=xe||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function De(t,e,n,r){var i=Ae(null,null,null);return i.a=new Ee((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof He?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Me(t,i),i.a}function Le(t,e,n){t.a==Te&&(t===n&&(e=xe,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.Zc,t.$c,t)||(t.h=n,t.a=e,t.c=null,je(t),e!=xe||n instanceof He||function(t,e){t.g=!0,me((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Ee)return Me(t,Ae(e||f,n||null,r)),!0;if(M(t))return t.then(e,n,r),!0;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function je(t){t.i||(t.i=!0,me(t.fc,t))}function Ue(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ve(t,e,n,r){if(n==xe&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){Be.call(null,t)}U(Ce,e)}function qe(t,e,n){e==Se?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ee.prototype.then=function(t,e,n){return De(this,v(t)?t:null,v(e)?e:null,n)},Ee.prototype.$goog_Thenable=!0,(t=Ee.prototype).na=function(t,e){return(t=Ae(t,t,e)).c=!0,Me(this,t),this},t.o=function(t,e){return De(this,null,t,e)},t.cancel=function(t){if(this.a==Te){var e=new He(t);me((function(){Oe(this,e)}),this)}},t.Zc=function(t){this.a=Te,Le(this,Se,t)},t.$c=function(t){this.a=Te,Le(this,xe,t)},t.fc=function(){for(var t;t=Ue(this);)Ve(this,t,this.a,this.h);this.i=!1};var Be=ge;function He(t){D.call(this,t)}function Ge(){0!=ze&&(We[g(this)]=this),this.xa=this.xa,this.oa=this.oa}x(He,D),He.prototype.name="cancel";var ze=0,We={};function Ke(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=ze)){var e=g(t);if(0!=ze&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete We[e]}}Ge.prototype.xa=!1,Ge.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Je=Object.freeze||function(t){return t},Ye=!Qt||9<=Number(ue),Qe=Qt&&!se("9"),Xe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},x(Ze,$e);var tn=Je({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++nn,this.va=this.Oa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Oa=!1)):((e=new rn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=En(n),t&&t[en]?Sn(t,e,n,y(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i,s=bn(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=_n,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=En(n),t&&t[en]?xn(t,e,n,y(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=En(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bn(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function yn(t){return t in ln?ln[t]:ln[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&vn(t),n.call(r,e)}function _n(t,e){if(t.va)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Ze(e,this))}function bn(t){return(t=t[cn])instanceof an?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return v(t)?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function Tn(){Ge.call(this),this.v=new an(this),this.$b=this,this.fb=null}function Sn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function xn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Ua||a.src;a.Oa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Cn(t,e,n){if(v(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function An(t){var e=null;return new Ee((function(n,r){-1==(e=Cn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function kn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];On(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)On(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}x(Tn,Ge),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){hn(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;mt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=In(a,r,!0,t)&&i}if(i=In(a=t.b=n,r,!0,t)&&i,i=In(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(a=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=Pn.prototype).V=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return On(this.b,t)?this.b[t]:e},t.set=function(t,e){On(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.i=this.c="",this.h=!1,t instanceof Dn?(this.h=void 0!==e?e:t.h,Ln(this,t.f),this.l=t.l,this.a=t.a,Fn(this,t.g),this.c=t.c,jn(this,rr(t.b)),this.i=t.i):t&&(n=String(t).match(Mn))?(this.h=!!e,Ln(this,n[1]||"",!0),this.l=Hn(n[2]||""),this.a=Hn(n[3]||"",!0),Fn(this,n[4]),this.c=Hn(n[5]||"",!0),jn(this,n[6]||"",!0),this.i=Hn(n[7]||"")):(this.h=!!e,this.b=new Xn(null,this.h))}function Ln(t,e,n){t.f=n?Hn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Xn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.h)):(n||(e=Gn(e,Yn)),t.b=new Xn(e,t.h))}function Un(t,e,n){t.b.set(e,n)}function Vn(t,e){return t.b.get(e)}function qn(t){return t instanceof Dn?new Dn(t):new Dn(t,void 0)}function Bn(t,e,n,r){var i=new Dn(null,void 0);return t&&Ln(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.c=r),i}function Hn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Gn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Jn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Gn(n,Qn)),t.join("")},Dn.prototype.resolve=function(t){var e=new Dn(this),n=!!t.f;n?Ln(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Fn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?jn(e,rr(t.b)):n=!!t.i,n&&(e.i=t.i),e};var Wn=/[#\/\?@]/g,Kn=/[#\?:]/g,Jn=/[#\?]/g,Yn=/[#\?@]/g,Qn=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new Pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Xn(null,void 0);t=kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){$n(t),e=ir(t,e),On(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,On((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return $n(t),e=ir(t,e),On(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new Xn;return e.c=t.c,t.a&&(e.a=new Pn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),lr(r,n),n.push(":"),sr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":lr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Xn.prototype).add=function(t,e){$n(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){$n(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){$n(this);var e=[];if("string"==typeof t)er(this,t)&&(e=$(e,this.a.get(ir(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function hr(){var t=Pr();return Qt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||u.window;var n="about:blank";t&&(n=Ot(Ft(t)||Vt)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Pr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function yr(t){t=t||u.window;try{t.close()}catch(t){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Pr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Ar(Pr())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft(void 0!==n.href?n.href:String(n))||Vt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(_t(a=ye(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:jt(e),a.href=Ot(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Ht("",r,n,a),t=Ot(e),a&&($t&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new qt(t=(r=xt())?r.createHTML(t):t,null,Bt),r=a.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Ht(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function br(){var t=null;return new Ee((function(e){"complete"==u.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function wr(t){return t=t||Pr(),!("file:"!==Lr()&&"ionic:"!==Lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function Sr(){return r.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.Z.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function xr(){var t=Sr();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Cr="Chrome";function Ar(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Ir:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Cr:"Safari"}var kr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in kr)i[kr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Sr())?r=Ar(i=Pr()):"Worker"===r&&(r=Ar(i=Pr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Pr(){return u.navigator&&u.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Or(){try{var t=u.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!hr()||!!u.indexedDB}catch(t){return Tr()&&!!u.indexedDB}return!1}function Mr(){return(Dr()||"chrome-extension:"===Lr()||wr())&&!xr()&&Or()&&!Tr()}function Dr(){return"http:"===Lr()||"https:"===Lr()}function Lr(){return u.location&&u.location.protocol||null}function Fr(t){return!vr(t=t||Pr())&&Ar(t)!=Ir}function jr(t){return void 0===t?null:or(t)}function Ur(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Vr(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=Ar(t=t||Pr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Hr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Pr(),e=Sr(),this.b=vr(t)||"ReactNative"===e}function zr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Kr(){return!(!Rr("fireauth.oauthhelper",u)&&!Rr("fireauth.iframe",u))}Gr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Dr()&&"chrome-extension:"!==Lr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Jr,Yr={};function Qr(t){Yr[t]||(Yr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Xr={};Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:2}),Jr=2==Xr.abcd}catch(Jt){Jr=!1}function $r(t,e,n){Jr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ai]),$r(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),$r(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[pi],r=t[vi],i=t[yi];if(t=ri(t[di]),!i||i!=hi&&i!=fi&&!n||i==fi&&!r||i==li&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[mi]=n||null,e[bi]=n||null,e[gi]=r):(e[mi]=r||null,e[bi]=r||null,e[gi]=n||null),e[_i]=t||null,$r(this,Ei,i),$r(this,wi,ei(e))}x(ui,ni),ui.prototype.w=function(){var t=ui.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var li="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",vi="newEmail",yi="requestType",gi="email",mi="fromEmail",_i="multiFactorInfo",bi="previousEmail",wi="data",Ei="operation";function Ti(t){var e=Vn(t=qn(t),Si)||null,n=Vn(t,xi)||null,r=Vn(t,Ai)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new C("argument-error",Si+", "+xi+"and "+Ai+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:Vn(t,Ii)||null,languageCode:Vn(t,Ci)||null,tenantId:Vn(t,ki)||null})}var Si="apiKey",xi="oobCode",Ii="continueUrl",Ci="languageCode",Ai="mode",ki="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:hi,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Pi(t){try{return new Ti(t)}catch(t){return null}}function Ri(t){var e=t[Fi];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.i=e,this.b=this.a=null,this.g=!1;var n=t[Oi];if(n&&"object"==typeof n){e=n[Vi];var r=n[ji];if(n=n[Ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new C("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",Vi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",Oi+" property must be a non null object when specified.");if(this.f=null,(e=t[Li])&&"object"==typeof e){if("string"==typeof(e=e[qi])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",Li+" property must be a non null object when specified.");if(void 0!==(e=t[Di])&&"boolean"!=typeof e)throw new C("argument-error",Di+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Mi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",Mi+" property must be a non empty string when specified.");this.h=t||null}var Oi="android",Mi="dynamicLinkDomain",Di="handleCodeInApp",Li="iOS",Fi="url",ji="installApp",Ui="minimumVersion",Vi="packageName",qi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.i,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.h,e)null===e[n]&&delete e[n];return e}var Hi=null;function Gi(t){var e=Wi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.i=t,this.a=e.exp,this.h=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Gi(t)}catch(t){return null}}function Wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}Gi.prototype.S=function(){return this.f},Gi.prototype.l=function(){return this.c},Gi.prototype.toString=function(){return this.i};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ji=["client_id","response_type","scope","redirect_uri","state"],Yi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Ji},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Ji},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Ji},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Ki},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Qi(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function Xi(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[$i])return new to(t)}catch(t){}return null}var $i="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[$i]){var n=zi(t[$i]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function eo(t){to.call(this,t),$r(this,"profile",ei((t=Vr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function ao(t){var e=qn(t),n=Vn(e,"link"),r=Vn(qn(n),"link");return e=Vn(e,"deep_link_id"),Vn(qn(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}x(eo,to),x(no,eo),x(ro,eo),x(io,eo),x(oo,eo);var uo="enroll",co="signin";function lo(){}function ho(t,e){return t.then((function(t){if(t[Za]){var n=zi(t[Za]);if(!n||e!=n.h)throw new C("user-mismatch");return t}throw new C("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new C("user-mismatch"):t}))}function fo(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function yo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new yo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function _o(t,e){this.Pc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Qi(t)||{}).Ja||null,this.nb=null}function bo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');_o.call(this,t,[])}function wo(t){_o.call(this,t,Ji),this.a=[]}function Eo(){wo.call(this,"facebook.com")}function To(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function So(){wo.call(this,"github.com")}function xo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function Io(){wo.call(this,"google.com"),this.Ca("profile")}function Co(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new Io).credential({idToken:n,accessToken:e})}function Ao(){_o.call(this,"twitter.com",Ki)}function ko(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new yo("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Ro(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Mo(e)))throw new C("argument-error","Invalid email link!");return new No(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function Mo(t){return(t=Pi(t=ao(t)))&&t.operation===hi?t:null}function Do(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new C("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Lo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Do(e)}return null}function Fo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function jo(t){try{this.a=t||r.Z.auth()}catch(t){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Do({cb:t,bb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Co(o,n);case"facebook.com":return To(n);case"github.com":return xo(n);case"twitter.com":return ko(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new fo(e,a):new yo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new wo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function Bo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.h=o||null,this.i=a||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Ho(t){return(t=t||{}).type?new Bo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&A(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}so.prototype.Ha=function(){return this.a?ke(this.a):ke(this.b)},so.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},lo.prototype.ja=function(){},lo.prototype.b=function(){},lo.prototype.c=function(){},lo.prototype.w=function(){},fo.prototype.ja=function(t){return bs(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ws(t,n)},fo.prototype.c=function(t,e){return ho(Es(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},yo.prototype.ja=function(t){return bs(t,go(this))},yo.prototype.b=function(t,e){var n=go(this);return n.idToken=e,ws(t,n)},yo.prototype.c=function(t,e){return ho(Es(t,go(this)),e)},yo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},_o.prototype.Ka=function(t){return this.Hb=yt(t),this},x(bo,_o),x(wo,_o),wo.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},wo.prototype.Pb=function(){return Z(this.a)},wo.prototype.credential=function(t,e){var n;if(!(n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new yo(this.providerId,n,this.providerId)},x(Eo,wo),$r(Eo,"PROVIDER_ID","facebook.com"),$r(Eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),x(So,wo),$r(So,"PROVIDER_ID","github.com"),$r(So,"GITHUB_SIGN_IN_METHOD","github.com"),x(Io,wo),$r(Io,"PROVIDER_ID","google.com"),$r(Io,"GOOGLE_SIGN_IN_METHOD","google.com"),x(Ao,_o),$r(Ao,"PROVIDER_ID","twitter.com"),$r(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ja=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ns,{email:this.a,oobCode:this.f}):ru(t,$s,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ps,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Gs,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return ho(this.ja(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Ro,{PROVIDER_ID:"password"}),Zr(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ja=function(t){return t.eb(Fo(this))},Do.prototype.b=function(t,e){var n=Fo(this);return n.idToken=e,ru(t,tu,n)},Do.prototype.c=function(t,e){var n=Fo(this);return n.operation="REAUTH",ho(t=ru(t,eu,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},jo.prototype.eb=function(t,e){var n=this.a.a;return ke(e.verify()).then((function(r){if("string"!=typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=y(t)?t.session:null,o=y(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,Ws,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Ks,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(jo,{PROVIDER_ID:"phone"}),Zr(jo,{PHONE_SIGN_IN_METHOD:"phone"}),Bo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.i&&t.push(this.i),t.join("-")},Bo.prototype.S=function(){return this.i},Bo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,tenantId:this.i,error:this.a&&this.a.w()}};var zo,Wo=null;function Ko(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function Jo(t,e,n){C.call(this,t,n),(t=e||{}).Ib&&$r(this,"email",t.Ib),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Yb&&$r(this,"tenantId",t.Yb)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Vo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new Jo(e,n,t.message)}return null}function Qo(){}function Xo(t){return t.c||(t.c=t.b())}function $o(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ta(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.pc,this),this.a.onerror=E(this.Rb,this),this.a.onprogress=E(this.qc,this),this.a.ontimeout=E(this.uc,this)}function na(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ra(t,e,n){this.reset(t,e,n,void 0,void 0)}function ia(t){this.f=t,this.b=this.c=this.a=null}function oa(t,e){this.name=t,this.value=e}x(Ko,C),x(Jo,C),Jo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Jo.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,x($o,Qo),$o.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},zo=new $o,x(ta,Qo),ta.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(t=ea.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,na(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",na(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,na(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ra.prototype.a=null,ra.prototype.reset=function(t,e,n,r,i){r||S(),delete this.a},oa.prototype.toString=function(){return this.name};var aa=new oa("SEVERE",1e3),sa=new oa("WARNING",900),ua=new oa("CONFIG",700),ca=new oa("FINE",500);function la(t){return t.c?t.c:t.a?la(t.a):(F("Root logger has no level set."),null)}ia.prototype.log=function(t,e,n){if(t.value>=la(this).value)for(v(e)&&(e=e()),t=new ra(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ha={},fa=null;function pa(t){var e;if(fa||(fa=new ia(""),ha[""]=fa,fa.c=ua),!(e=ha[t])){e=new ia(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=pa(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ha[t]=e}return e}function da(t,e){t&&t.log(ca,e,void 0)}function va(t){this.f=t}function ya(t){Tn.call(this),this.u=t,this.i=void 0,this.readyState=ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.h=pa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}x(va,Qo),va.prototype.a=function(){return new ya(this.f)},va.prototype.b=function(t){return function(){return t}}({}),x(ya,Tn);var ga=0;function ma(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function _a(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ba(t)}function ba(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function wa(t){Tn.call(this),this.headers=new Pn,this.O=t||null,this.c=!1,this.A=this.a=null,this.i=this.P=this.l="",this.f=this.N=this.h=this.G=!1,this.g=0,this.s=null,this.m=Ea,this.u=this.R=!1}(t=ya.prototype).open=function(t,e){if(this.readyState!=ga)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ba(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.i,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,_a(this)),this.readyState=ga},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ba(this)),this.a&&(this.readyState=3,ba(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ma(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?_a(this):ba(this),3==this.readyState&&ma(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,_a(this))},t.rc=function(t){this.a&&(this.response=t,_a(this))},t.Ta=function(t){var e=this.h;e&&e.log(sa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&_a(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(sa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(sa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return"include"===this.i},set:function(t){this.i=t?"include":"same-origin"}}),x(wa,Tn);var Ea="";wa.prototype.b=pa("goog.net.XhrIo");var Ta=/^https?$/i,Sa=["POST","PUT"];function xa(t){return"content-type"==t.toLowerCase()}function Ia(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.i=e,Ca(t),ka(t)}function Ca(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Aa(t){if(t.c&&void 0!==s)if(t.A[1]&&4==Pa(t)&&2==Ra(t))da(t.b,Oa(t,"Local request error detected and ignored"));else if(t.h&&4==Pa(t))Cn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Pa(t)){da(t.b,Oa(t,"Request complete")),t.c=!1;try{var e,n=Ra(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Mn)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ta.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Pa(t)?t.a.statusText:""}catch(e){da(t.b,"Can not get status: "+e.message),c=""}t.i=c+" ["+Ra(t)+"]",Ca(t)}}finally{ka(t)}}}function ka(t,e){if(t.a){Na(t);var n=t.a,r=t.A[0]?f:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(aa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Na(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Pa(t){return t.a?t.a.readyState:0}function Ra(t){try{return 2<Pa(t)?t.a.status:-1}catch(t){return-1}}function Oa(t,e){return e+" ["+t.P+" "+t.l+" "+Ra(t)+"]"}function Ma(t){var e=za;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.h=!1,this.i=0,this.b=null,this.l=0}function Da(t,e,n){t.a=!0,t.c=n,t.f=!e,Ua(t)}function La(t){if(t.a){if(!t.m)throw new Va(t);t.m=!1}}function Fa(t,e,n,r){t.g.push([e,n,r]),t.a&&Ua(t)}function ja(t){return J(t.g,(function(t){return v(t[1])}))}function Ua(t){if(t.i&&t.a&&ja(t)){var e=t.i,n=Ha[e];n&&(u.clearTimeout(n.a),delete Ha[e]),t.i=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.h;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(M(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.h=!0)}catch(r){e=r,t.f=!0,ja(t)||(n=!0)}}t.c=e,r&&(s=E(t.v,t,!0),r=E(t.v,t,!1),e instanceof Ma?(Fa(e,s,r),e.A=!0):e.then(s,r)),n&&(e=new Ba(e),Ha[e.a]=e,t.i=e.a)}function Va(){D.call(this)}function qa(){D.call(this)}function Ba(t){this.a=u.setTimeout(E(this.c,this),0),this.b=t}(t=wa.prototype).Ma=function(){void 0!==s&&this.a&&(this.i="Timed out after "+this.g+"ms, aborting",da(this.b,Oa(this,this.i)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(da(this.b,Oa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ka(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ka(this,!0)),wa.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.h||this.f?Aa(this):this.Ic())},t.Ic=function(){Aa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ea:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(aa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return da(this.b,"Can not get response: "+t.message),null}},Ma.prototype.cancel=function(t){if(this.a)this.c instanceof Ma&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.m=!0,this.a||(t=new qa(this),La(this),Da(this,!1,t))}},Ma.prototype.v=function(t,e){this.h=!1,Da(this,t,e)},Ma.prototype.then=function(t,e,n){var r,i,o=new Ee((function(t,e){r=t,i=e}));return Fa(this,r,(function(t){t instanceof qa?o.cancel():i(t)})),o.then(t,e,n)},Ma.prototype.$goog_Thenable=!0,x(Va,D),Va.prototype.message="Deferred has already fired",Va.prototype.name="AlreadyCalledError",x(qa,D),qa.prototype.message="Deferred was canceled",qa.prototype.name="CanceledError",Ba.prototype.c=function(){throw delete Ha[this.a],this.b};var Ha={};function Ga(t){var e={},n=e.document||document,r=Ct(t).toString(),i=ye(document,"SCRIPT"),o={Vb:i,Ma:void 0},a=new Ma(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Wa(i,!0);var t=new Ya(Ja,"Timeout reached for loading script "+r);La(a),Da(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Wa(i,e.wd||!1,s),La(a),Da(a,!0,null))},i.onerror=function(){Wa(i,!0,s);var t=new Ya(Ka,"Error while loading script "+r);La(a),Da(a,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),he(i,o),function(t,e){_t(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=h(e.document):(null===l&&(l=h(u.document)),e=l),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function za(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Wa(t,!0,this.Ma)}}function Wa(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ka=0,Ja=1;function Ya(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Qa(t){this.f=t}function Xa(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||ts,this.g=yt(t.secureTokenHeaders||es),this.i=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||ns,this.a=yt(t.firebaseHeaders||rs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Sr(),!(n=u.XMLHttpRequest||n&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new va(self):xr()?this.f=new Qa(n):this.f=new ta,this.b=null}x(Ya,D),x(Qa,Qo),Qa.prototype.a=function(){return new this.f},Qa.prototype.b=function(){return{}};var $a,Za="idToken",ts=new Gr(3e4,6e4),es={"Content-Type":"application/x-www-form-urlencoded"},ns=new Gr(3e4,6e4),rs={"Content-Type":"application/json"};function is(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function os(t,e){e&&(t.l=as("https://securetoken.googleapis.com/v1/token",e),t.i=as("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.h=as("https://identitytoolkit.googleapis.com/v2/",e))}function as(t,e){return t=qn(t),e=qn(e.url),t.c=t.a+t.c,Ln(t,e.f),t.a=e.a,Fn(t,e.g),t.toString()}function ss(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function us(t,e,n,r,i,o,a){(function(){var t=Pr();return!((t=Ar(t)!=Cr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&ue&&!(9<ue))})()||Tr()?t=E(t.u,t):($a||($a=new Ee((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[ls]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Fa(t,null,e,void 0)}(Ga(At(cs,{onload:ls})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=E(t.s,t)),t(e,n,r,i,o,a)}Xa.prototype.S=function(){return this.b},Xa.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new wa(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Sn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return da(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),xn(a,"ready",(function(){s&&clearTimeout(s),Ke(this)})),xn(a,"timeout",(function(){s&&clearTimeout(s),Ke(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.i="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():zo.a(),t.A=t.O?Xo(t.O):Xo(zo),t.a.onreadystatechange=E(t.Ub,t);try{da(t.b,Oa(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return da(t.b,Oa(t,"Error opening Xhr: "+e.message)),void Ia(t,e)}e=r||"";var o=new Pn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)z(t,e,void 0);else for(var n=Nn(t),r=kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=xa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Y(Sa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Na(t),0<t.g&&(t.u=function(t){return Qt&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),da(t.b,Oa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ma,t)):t.s=Cn(t.Ma,t.g,t)),da(t.b,Oa(t,"Sending request")),t.h=!0,t.a.send(e),t.h=!1}catch(e){da(t.b,Oa(t,"Send error: "+e.message)),Ia(t,e)}}(a,t,n,r,i)};var cs=new bt(St,"https://apis.google.com/js/client.js?onload=%{onload}"),ls="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t){if("string"!=typeof(t=t.email)||!_r.test(t))throw new C("invalid-email")}function fs(t){"email"in t&&hs(t)}function ps(t){if(!t[Za]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,yt(t));throw new C("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Xa.prototype.s=function(t,e,n,r,i){var o=this;$a.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xa.prototype.yb=function(){return ru(this,zs,{})},Xa.prototype.Ab=function(t,e){return ru(this,Hs,{idToken:t,email:e})},Xa.prototype.Bb=function(t,e){return ru(this,Gs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ys(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function gs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function ms(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new Xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function _s(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function bs(t,e){return e.returnIdpCredential=!0,ru(t,Js,e)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Qs,e)}function Es(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ys,e)}function Ts(t){if(!t.oobCode)throw new C("invalid-action-code")}(t=Xa.prototype).Cb=function(t,e){var n={idToken:t},r=[];return dt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Hs,n)},t.ub=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,js,t)},t.vb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ds,t)},t.tb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ls,t)},t.Db=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.eb=function(t){return ru(this,Zs,t)},t.mb=function(t,e){return ru(this,qs,{oobCode:t,newPassword:e})},t.Qa=function(t){return ru(this,xs,{oobCode:t})},t.ib=function(t){return ru(this,Ss,{oobCode:t})};var Ss={endpoint:"setAccountInfo",B:Ts,Z:"email",C:!0},xs={endpoint:"resetPassword",B:Ts,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},C:!0},Is={endpoint:"signupNewUser",B:function(t){if(hs(t),!t.password)throw new C("weak-password")},F:ps,U:!0,C:!0},Cs={endpoint:"createAuthUri",C:!0},As={endpoint:"deleteAccount",M:["idToken"]},ks={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new C("internal-error")}},Ns={endpoint:"emailLinkSignin",M:["email","oobCode"],B:hs,F:ps,U:!0,C:!0},Ps={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:hs,F:ps,U:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ys,F:ps,C:!0,Na:!0},Os={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ys,F:ps,C:!0,Na:!0},Ms={endpoint:"getAccountInfo"},Ds={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");hs(t)},Z:"email",C:!0},Ls={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",C:!0},Fs={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",C:!0},js={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");hs(t)},Z:"email",C:!0},Us={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Vs={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},qs={endpoint:"resetPassword",B:Ts,Z:"email",C:!0},Bs={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Hs={endpoint:"setAccountInfo",M:["idToken"],B:fs,U:!0},Gs={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(fs(t),!t.password)throw new C("weak-password")},F:ps,U:!0},zs={endpoint:"signupNewUser",F:ps,U:!0,C:!0},Ws={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},C:!0,Na:!0},Ks={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},C:!0,Na:!0},Js={endpoint:"verifyAssertion",B:gs,Xa:ms,F:_s,U:!0,C:!0},Ys={endpoint:"verifyAssertion",B:gs,Xa:ms,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},U:!0,C:!0},Qs={endpoint:"verifyAssertion",B:function(t){if(gs(t),!t.idToken)throw new C("internal-error")},Xa:ms,F:_s,U:!0},Xs={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new C("invalid-custom-token")},F:ps,U:!0,C:!0},$s={endpoint:"verifyPassword",B:function(t){if(hs(t),!t.password)throw new C("wrong-password")},F:ps,U:!0,C:!0},Zs={endpoint:"verifyPhoneNumber",B:ds,F:ps,C:!0},tu={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new C("internal-error");ds(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);ps(t)}},eu={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:ds,F:ps,C:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Za]^!!t.refreshToken)throw new C("internal-error")},C:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Ne(new C("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return ke(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=qn(e+n);Un(s,"key",t.c),a&&Un(s,"cb",S().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(s,c,i[c]);return new Ee((function(e,n){us(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new C("network-request-failed"))}),r,u?void 0:or(Ur(i)),t.a,t.m.get())}))}(t,i?t.h:t.i,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new C("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=jr(t)),new C("internal-error",e)}function au(t){this.b=t,this.a=null,this.qb=function(t){return(lu||(lu=new Ee((function(t,e){function n(){Hr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Hr(),e(Error("Network Error"))},timeout:uu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},ke(Ga(r=At(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new Ee((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new bt(St,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Gr(3e4,6e4),cu=new Gr(5e3,15e3),lu=null;function hu(t,e,n,r){this.l=t,this.i=e,this.h=n,this.g=r,this.f=null,t=this.g?Bn((t=qn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Un(this.a,"apiKey",this.i),Un(this.a,"appName",this.h),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.v=r,this.m=o,this.h=this.g=this.l=null,this.a=i,this.i=this.f=null}function pu(t){try{return r.Z.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.h=i||null,this.l=this.u=this.A=null,this.i=[],this.v=this.a=null}function vu(t){var e=fr();return function(t){return ru(t,Us,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=qn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:mr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ko(fr())}))}function yu(t){return t.v||(t.v=br().then((function(){if(!t.u){var e=t.c,n=t.h,r=pu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.m=new au(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ho(e.authEvent),n=0;n<t.i.length;n++)r=t.i[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(t)}))),t.v}function gu(t){return t.l||(t.A=t.c?Nr(t.c,pu(t.b)):null,t.l=new Xa(t.g,O(t.h),t.A),t.f&&os(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new fu(t,e,n,r,i,h)).l=o,t.g=a,t.h=s,t.b=yt(u||null),t.f=c,t.xb(l).toString()}function _u(t){if(this.a=t||r.Z.INTERNAL.reactNative&&r.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=E(this.c,this)}hu.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},fu.prototype.xb=function(t){return this.i=t,this},fu.prototype.toString=function(){if(this.m){var t=qn(this.m.url);t=Bn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Un(t,"apiKey",this.s),Un(t,"appName",this.c),Un(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=r.Z.app(this.c).auth().ka()}catch(t){n=null}for(var i in e.nb=n,Un(t,"providerId",this.a.providerId),e=Ur((n=this.a).Hb))e[i]=e[i].toString();i=n.Pc,e=yt(e);for(var o=0;o<i.length;o++){var a=i[o];a in e&&delete e[a]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),vt(e)||Un(t,"customParameters",jr(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Un(t,"scopes",n.join(",")),this.l?Un(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Un(t,"eventId",this.g):tr(t.b,"eventId"),this.h?Un(t,"v",this.h):tr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Vn(t,s)&&Un(t,s,this.b[s]);return this.i?Un(t,"tid",this.i):tr(t.b,"tid"),this.f?Un(t,"eid",this.f):tr(t.b,"eid"),(s=pu(this.c)).length&&Un(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Nb=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,a=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return yu(t).then((function(){return function(t,e){return t.qb.then((function(){return new Ee((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&yr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ee((function(e){return function n(){An(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return An(n).then((function(){e(r)}))}))},t.Wb=function(){var t=Pr();return!Fr(t)&&!Br(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,a,s){if(!t)return Ne(new C("popup-blocked"));if(a&&!Fr())return this.la().o((function(e){yr(t),i(e)})),r(),ke();this.a||(this.a=vu(gu(this)));var u=this;return this.a.then((function(){var e=u.la().o((function(e){throw yr(t),i(e),e}));return r(),e})).then((function(){qo(n),a||pr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.h,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=vu(gu(this)));var i=this;return this.a.then((function(){qo(e),pr(mu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.h,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return yu(this).then((function(){return t.m.qb})).o((function(){throw t.a=null,new C("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.i.push(t)},t.Ra=function(t){X(this.i,(function(e){return e==t}))},(t=_u.prototype).get=function(t){return ke(this.a.getItem(t)).then((function(t){return t&&Vr(t)}))},t.set=function(t,e){return ke(this.a.setItem(t,jr(e)))},t.T=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Eu=[];function Tu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Su(t){this.a=t}function xu(t){this.c=t,this.b=!1,this.a=[]}function Iu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ne(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ee((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Cu(t,c),e})).o((function(e){throw Cu(t,c),e}))}function Cu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(t.a,(function(t){return t==e}))}}function Au(){if(!Ru())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=u.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.s=!1,this.i=null;var t=this;Tr()&&self?(this.m=function(){var t=Tr()?self:null;if(z(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);Eu.push(e)}return e}(),Tu(this.m,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),Tu(this.m,"ping",(function(){return ke(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?ke().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):ke(null)}().then((function(e){(t.i=e)&&(t.g=new xu(new Su(e)),Iu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function ku(t){return new Ee((function(e,n){var r=t.v.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ee((function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return ku(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Nu(t){return t.h||(t.h=ku(t)),t.h}function Pu(t,e){var n=0;return new Ee((function r(i,o){Nu(t).then(e).then(i).o((function(e){if(!(3<++n))return Nu(t).then((function(e){return e.close(),t.h=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!u.indexedDB}catch(t){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function Mu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Du(t){return new Ee((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lu(t,e){return t.g&&t.i&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.i?Iu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):ke()}function Fu(t){return Nu(t).then((function(t){var e=Ou(Mu(t,!1));return e.getAll?Du(e.getAll()):new Ee((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function ju(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then((function(){if(Ru()){var t=qr(),r="__sak"+t;return wu||(wu=new Au),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function Vu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==Sr();if(!(t=Bu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Bu()||r.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=u.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Hu(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Sr();if(!(t=zu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=zu()||r.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zu(){try{var t=u.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Wu(){var t={};t.Browser=Yu,t.Node=Qu,t.ReactNative=Xu,t.Worker=$u,this.a=t[Sr()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(ke().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Su.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},xu.prototype.close=function(){for(;0<this.a.length;)Cu(this,this.a[0]);this.b=!0},(t=Au.prototype).set=function(t,e){var n=this,r=!1;return Pu(this,(function(e){return Du((e=Ou(Mu(e,!0))).get(t))})).then((function(i){return Pu(n,(function(o){if(o=Ou(Mu(o,!0)),i)return i.value=e,Du(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Du(o.add(a))}))})).then((function(){return n.c[t]=e,Lu(n,t)})).na((function(){r&&n.b--}))},t.get=function(t){return Pu(this,(function(e){return Du(Ou(Mu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=this,n=!1;return Pu(this,(function(r){return n=!0,e.b++,Du(Ou(Mu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Lu(e,t)})).na((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){ju(t),function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t})),0==this.a.length&&ju(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t}))},(t=Vu.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.T=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return ke().then((function(){return Vr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=jr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&hn(u.window,"storage",t)},t.ia=function(t){u.window&&dn(u.window,"storage",t)},(t=Hu.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.T=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return ke().then((function(){return Vr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=jr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Ku,Ju,Yu={D:qu,ab:Gu},Qu={D:qu,ab:Gu},Xu={D:_u,ab:Hu},$u={D:qu,ab:Hu},Zu={qd:"local",NONE:"none",sd:"session"};function tc(){var t=!(Br(Pr())||!Er()),e=Fr(),n=Or();this.v=t,this.i=e,this.l=n,this.a={},Ku||(Ku=new Wu),t=Ku;try{this.g=!hr()&&Kr()||!u.indexedDB?new t.a.D:new Uu(Tr()?new Vu:new t.a.D)}catch(t){this.g=new Vu,this.i=!0}try{this.h=new t.a.ab}catch(t){this.h=new Vu}this.m=new Vu,this.f=E(this.Xb,this),this.b={}}function ec(){return Ju||(Ju=new tc),Ju}function nc(t,e){switch(e){case"session":return t.h;case"none":return t.m;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.D&&(t.b[n]=null),nc(t,e.D).T(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.D).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.i||(hr()||!Kr())&&u.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(X(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.v)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.lb(e))},Qt&&ue&&10==ue&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,E(this.lb,this))},t.lb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",D:"local"};function cc(){this.a=ec()}function lc(t,e){this.b=hc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.h=t,this.i=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=u.Int32Array?new Int32Array(mc):mc),this.reset()}x(lc,(function(){this.b=-1}));for(var hc=64,fc=hc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=$(128,pc);function yc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|sc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function gc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(yc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(yc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.i):Z(this.i)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _c(){lc.call(this,8,bc)}x(_c,lc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.m=t,this.h=e,this.l=n,this.v=r||null,this.u=i||null,this.s=o,this.i=e+":"+n,this.A=new cc,this.g=new ac(this.i),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new C("invalid-cordova-configuration",t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Sc(t){return t.f||(t.f=t.la().then((function(){return new Ee((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),xc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Vr(Vn(o=qn(i),"firebaseError")||null))?A(o):null)?new Bo(r.c,r.b,null,null,o,null,r.S()):new Bo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}Tc(t,i)}))}var n=new Bo("unknown",null,null,null,new C("no-auth-event")),r=!1,i=An(500).then((function(){return xc(t).then((function(){r||Tc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Wo||(Wo=new Go),function(t){var e=Wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function xc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Ho(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Ic(t){this.a=t,this.b=ec()}(t=wc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?br().then((function(){return new Ee((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ne(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",u))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",u))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",u))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",u))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new C("cordova-not-ready")}))},t.Nb=function(t,e){return e(new C("operation-not-supported-in-this-environment")),ke()},t.Lb=function(){return Ne(new C("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return Ne(new C("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=ke().then((function(){return qo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Bo(e,r,null,o,new C("no-auth-event"),null,i),s=Rr("BuildInfo.packageName",u);if("string"!=typeof s)throw new C("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",u),l={};if(Pr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!Pr().toLowerCase().match(/android/))return Ne(new C("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=function(t){var e=new _c;gc(e,t),t=[];var n=8*e.g;56>e.c?gc(e,vc,56-e.c):gc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(yc(e),r=n=0;r<e.h;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=mu(t.m,t.h,t.l,e,n,null,r,t.v,l,t.u,i,t.s);return t.la().then((function(){var e=t.i;return t.A.a.set(uc,a.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",u)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",u)))throw new C("invalid-cordova-configuration");e=Pr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ee((function(t,e){s=function(){var e=Rr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=An(2e3).then((function(){e(new C("redirect-cancelled-by-user"))})))},l=function(){zr()&&c()},o.addEventListener("resume",c,!1),Pr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return xc(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Ra(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bo("unknown",null,null,null,new C("no-auth-event")),t(e))}))},t.Ra=function(t){X(this.b,(function(e){return e==t}))};var Cc={name:"pendingRedirect",D:"session"};function Ac(t){return ic(t.b,Cc,t.a)}function kc(t,e,n,r){this.h={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.i=[],this.f=!1,this.l=E(this.s,this),this.b=new Gc,this.A=new Yc,this.g=new Ic(Bc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Nc(this.O,this.m,this.v,k,this.G)}function Nc(t,e,n,i,o){var a=r.Z.SDK_VERSION||null;return wr()?new wc(t,e,n,a,i,o):new du(t,e,n,a,i,o)}function Pc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Wb()&&Pc(t).o((function(e){var n=new Bo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Sb()||zc(t.b)}function Oc(t,e){Y(t.i,e)||t.i.push(e),t.f||function(t){return t.b.get(Cc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ac(t.g).then((function(){Pc(t).o((function(e){var n=new Bo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function Mc(t,e){X(t.i,(function(t){return t==e}))}kc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Nc(this.O,this.m,this.v,null,this.G),this.h={}},kc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=S()-this.u&&(this.h={},this.u=0),t&&t.getUid()&&this.h.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.i.length;n++){var r=this.i[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.i(t,r),t&&(t.f||t.b)&&(this.h[t.getUid()]=!0,this.u=S())),e=!0;break}}return zc(this.b),e};var Dc=new Gr(2e3,1e4),Lc=new Gr(3e4,6e4);function Fc(t,e,n,r,i,o,a){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Uc(t,e,n,r,i){var o;return function(t){return t.b.set(Cc,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).o((function(e){if(jc(e))throw new C("operation-not-supported-in-this-environment");return o=e,Ac(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new Ee((function(){})):Ac(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Vc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Dc.get())}kc.prototype.qa=function(){return this.b.qa()};var qc={};function Bc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Hc(t,e,n,r){var i=Bc(e,n,r);return qc[i]||(qc[i]=new kc(t,e,n,r)),qc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.h=this.g=!1}function zc(t){t.g||(t.g=!0,Jc(t,!1,null,null))}function Wc(t){t.g&&!t.h&&Jc(t,!1,null,null)}function Kc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ne(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Kc(t,n):Kc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Qc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Xc(t,e){this.a=e,$r(this,"verificationId",t)}function $c(t,e,n,r){return new jo(t).eb(e,n).then((function(t){return new Xc(t,r)}))}function Zc(t){var e=Wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function tl(t,e,n){var r=e&&e[nl];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=yt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;z(e[el]||[],(function(t){(t=ri(t))&&i.b.push(t)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.i=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.h=!(!i&&!o),"unknown"!=n||i||o?t.a?(Jc(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.h,a=e.S(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Jc(t,s,e,null)})).o((function(e){Jc(t,s,null,e)}))}(this,t,e):Ne(new C("invalid-auth-event")):(Jc(this,!1,null,null),ke())}else Ne(new C("invalid-auth-event"))},Gc.prototype.qa=function(){var t=this;return new Ee((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=An(Lc.get()).then((function(){t.b||(t.g=!0,Jc(t,!0,null,e))}))}(t))}))},Yc.prototype.i=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.h).then((function(t){e.ma(r,t,null,n)})).o((function(t){e.ma(r,null,t,n)}))}(t,e):Ne(new C("invalid-auth-event"))}else Ne(new C("invalid-auth-event"))},Xc.prototype.confirm=function(t){return t=Uo(this.verificationId,t),this.a(t)};var el="mfaInfo",nl="mfaPendingCredential";function rl(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new tl(t,e,n),$r(this,"resolver",this.b)}function il(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rl(e,t.serverResponse,n,t.message)}catch(t){}return null}function ol(){}function al(t){$r(this,"factorId",t.fa),this.a=t}function sl(t){if(al.call(this,t),this.a.fa!=jo.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ul(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function cl(t,e){this.a=t,this.b=[],this.c=E(this.xc,this),hn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),ll(this,n)}function ll(t,e){t.b=e,$r(t,"enrolledFactors",e)}function hl(t,e,n){if(this.i=t,this.h=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fl(t,e){t.stop(),t.b=An(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return zr()||!t?ke():new Ee((function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.i()})).then((function(){fl(t,!0)})).o((function(e){t.h(e)&&fl(t,!1)}))}function pl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function dl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vl(t,e){t.b=zi(e[Za]||""),t.a=e.refreshToken,dl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function yl(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function gl(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ml(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION):null;this.a=new Xa(this.l,O(k),i),t.emulatorConfig&&os(this.a,t.emulatorConfig),this.b=new pl(this.a),Il(this,e[Za]),vl(this.b,e),$r(this,"refreshToken",this.b.a),kl(this,n||{}),Tn.call(this),this.P=!1,this.s&&Mr()&&(this.h=Hc(this.s,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new hl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.$=E(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.i)},this.ba=null,this.za=function(t){os(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){wl(o,t.f)},this.aa=null,this.N=new cl(this,n),$r(this,"multiFactor",this.N)}function _l(t,e){t.ba&&dn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&hn(e,"languageCodeChanged",t.Ba)}function bl(t,e){t.W&&dn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&hn(e,"emulatorConfigChanged",t.za)}function wl(t,e){t.X=e,ss(t.a,r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION,t.X):null)}function El(t,e){t.aa&&dn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&hn(e,"frameworkChanged",t.Aa)}function Tl(t){try{return r.Z.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Sl(t){t.A||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.$),hn(t,"tokenChanged",t.$))}function xl(t){dn(t,"tokenChanged",t.$),t.u.stop()}function Il(t,e){t.ya=e,$r(t,"_lat",e)}function Cl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Re(e).then((function(){return t}))}function Al(t){t.h&&!t.P&&(t.P=!0,Oc(t.h,t))}function kl(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Nl(){}function Pl(t){return ke().then((function(){if(t.A)throw new C("app-deleted")}))}function Rl(t){return K(t.providerData,(function(t){return t.providerId}))}function Ol(t,e){e&&(Ml(t,e.providerId),t.providerData.push(e))}function Ml(t,e){X(t.providerData,(function(t){return t.providerId==e}))}function Dl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Ll(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?$r(t,"metadata",function(t){return new yl(t.a,t.b)}(e.metadata)):$r(t,"metadata",new yl),z(e.providerData,(function(e){Ol(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),$r(t,"refreshToken",t.b.a),ll(t.N,e.N.b))}function Fl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ms,{idToken:e}).then(E(t.Jc,t))}(t,e).then((function(){return n||Dl(t,"isAnonymous",!1),e}))}))}function jl(t,e){e[Za]&&t.ya!=e[Za]&&(vl(t.b,e),t.dispatchEvent(new ul("tokenChanged")),Il(t,e[Za]),Dl(t,"refreshToken",t.b.a))}function Ul(t,e){return Fl(t).then((function(){if(Y(Rl(t),e))return Cl(t).then((function(){throw new C("provider-already-linked")}))}))}function Vl(t,e,n){return ti({user:t,credential:Vo(e),additionalUserInfo:e=Xi(e),operationType:n})}function ql(t,e){return jl(t,e),t.reload().then((function(){return t}))}function Bl(t,e,n,i,o){if(!Mr())return Ne(new C("operation-not-supported-in-this-environment"));if(t.f&&!o)return Ne(t.f);var a=Qi(n.providerId),s=qr(t.uid+":::"),u=null;(!Fr()||Er())&&t.s&&n.isOAuthProvider&&(u=mu(t.s,t.l,t.m,e,n,null,s,r.Z.SDK_VERSION||null,null,null,t.tenantId));var c=gr(u,a&&a.ua,a&&a.ta);return i=i().then((function(){if(Gl(t),!o)return t.I().then((function(){}))})).then((function(){return Fc(t.h,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Ee((function(n,r){t.ma(e,null,new C("cancelled-popup-request"),t.i||null),t.g=n,t.O=r,t.i=s,t.c=Vc(t.h,t,e,c,s)}))})).then((function(t){return c&&yr(c),t?ti(t):null})).o((function(t){throw c&&yr(c),t})),zl(t,i,o)}function Hl(t,e,n,r,i){if(!Mr())return Ne(new C("operation-not-supported-in-this-environment"));if(t.f&&!i)return Ne(t.f);var o=null,a=qr(t.uid+":::");return r=r().then((function(){if(Gl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Cl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Jl,t.w(),e.a)),e})).then((function(){return Uc(t.h,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Yl(t.ha);throw o})).then((function(){if(o)throw o})),zl(t,r,i)}function Gl(t){if(!t.h||!t.P){if(t.h&&!t.P)throw new C("internal-error");throw new C("auth-domain-config-required")}}function zl(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Ne(t.f)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new ul("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){Q(t.G,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=il(e.w(),Tl(t),E(t.ic,t))),n||e}))}function Wl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Za]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new ml(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&Ol(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Kl(t){this.a=t,this.b=ec()}tl.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=yt(e.f);return delete n[el],delete n[nl],mt(n,t),e.g(n)}))},x(rl,C),ol.prototype.rb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Fo(t.a)}),ru(e,Rs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Fo(t.a)}),ru(e,Os,n)}))}(this,t,e)},x(al,ol),x(sl,al),x(ul,$e),(t=cl.prototype).xc=function(t){ll(this,function(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new so(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return jl(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=W(e.b,(function(t){return t.uid!=n}));return ll(e,r),jl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},hl.prototype.start=function(){this.a=this.c,fl(this,!0)},hl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},pl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},pl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ne(new C("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ee((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?us(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.v.get()):r(new C("internal-error"))}))}(t.f,e).then((function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,dl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},yl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},x(ml,Tn),ml.prototype.wa=function(t){this.pa=t,is(this.a,t)},ml.prototype.ka=function(){return this.pa},ml.prototype.Ga=function(){return Z(this.X)},ml.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(ml.prototype,"providerId","firebase"),(t=ml.prototype).reload=function(){var t=this;return zl(this,Pl(this).then((function(){return Fl(t).then((function(){return Cl(t)})).then(Nl)})))},t.nc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return zl(this,Pl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.ya&&(Il(e,t.accessToken),e.dispatchEvent(new ul("tokenChanged"))),Dl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");kl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new gl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ol(this,e[n]);Dl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ul("userReloaded",{gd:t}))},t.Kc=function(t){return Qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return zl(this,t.c(this.a,this.uid).then((function(t){return jl(e,t),n=Vl(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return Qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return zl(this,Ul(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Vl(e,t,"link"),ql(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return zl(this,Ul(this,"phone").then((function(){return $c(Tl(n),t,e,E(n.pb,n))})))},t.Lc=function(t,e){var n=this;return zl(this,ke().then((function(){return $c(Tl(n),t,e,E(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return zl(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return jl(e,t),e.reload()})))},t.dd=function(t){var e=this;return zl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return jl(e,t),e.reload()})))},t.Bb=function(t){var e=this;return zl(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return jl(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Pl(this);var e=this;return zl(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return jl(e,t),Dl(e,"displayName",t.displayName||null),Dl(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))})),Cl(e)})).then(Nl))},t.bd=function(t){var e=this;return zl(this,Fl(this).then((function(n){return Y(Rl(e),t)?function(t,e,n){return ru(t,ks,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(Rl(e),(function(t){n[t]||Ml(e,t)})),n[jo.PROVIDER_ID]||$r(e,"phoneNumber",null),Cl(e)})):Cl(e).then((function(){throw new C("no-such-provider")}))})))},t.delete=function(){var t=this;return zl(this,this.I().then((function(e){return ru(t.a,As,{idToken:e})})).then((function(){t.dispatchEvent(new ul("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");_l(t,null),bl(t,null),El(t,null),t.G=[],t.A=!0,xl(t),$r(t,"refreshToken",null),t.h&&Mc(t.h,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.i||null)==e&&this.g||"reauthViaPopup"==t&&(this.i||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.i||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.i||null)?E(this.Jb,this):"reauthViaPopup"==t&&e==(this.i||null)?E(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?E(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?E(this.Kb,this):null},t.Dc=function(t){var e=this;return Bl(this,"linkViaPopup",t,(function(){return Ul(e,t.providerId).then((function(){return Cl(e)}))}),!1)},t.Mc=function(t){return Bl(this,"reauthViaPopup",t,(function(){return ke()}),!0)},t.Ec=function(t){var e=this;return Hl(this,"linkViaRedirect",t,(function(){return Ul(e,t.providerId)}),!1)},t.Nc=function(t){return Hl(this,"reauthViaRedirect",t,(function(){return ke()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zl(this,this.I().then((function(n){return ws(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Vl(i,t,"link"),ql(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zl(this,ke().then((function(){return ho(Es(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Vl(i,t,"reauthenticate"),jl(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return zl(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Bi(new Ri(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return zl(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return zl(this,t=ho(ke(t),n.uid).then((function(t){return e=Vl(n,t,"reauthenticate"),jl(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.N.w()),t};var Jl={name:"redirectUser",D:"session"};function Yl(t){return ic(t.b,Jl,t.a)}function Ql(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=Zl("local"),n=Zl("session"),r=Zl("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.D);return t.get(e,n).then((function(o){var a=null;try{a=Vr(u.localStorage.getItem(r))}catch(t){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get($l,t.a).then((function(t){return t?Zl(t):e}))}))}))})).then((function(e){return t.c=e,Xl(t,e.D)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zl("local"),this.a,E(this.g,this))}function Xl(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,Zl(Zu[n]),t.a));return r.push(ic(t.b,$l,t.a)),function(t){return new Ee((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Pe(t[s],T(o,s),a);else e(i)}))}(r)}Ql.prototype.g=function(){var t=this,e=Zl("local");rh(this,(function(){return ke().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Xl(t,"local").then((function(){t.c=e}))}))}))};var $l={name:"persistence",D:"session"};function Zl(t){return{name:"authUser",D:t}}function th(t,e){return rh(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function eh(t){return rh(t,(function(){return ic(t.b,t.c,t.a)}))}function nh(t,e,n){return rh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Wl(t||{})}))}))}function rh(t,e){return t.f=t.f.then(e,e),t.f}function ih(t){if(this.m=!1,$r(this,"settings",new Qc),$r(this,"app",t),!fh(this).options||!fh(this).options.apiKey)throw new C("invalid-api-key");t=r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION):null,this.a=new Xa(fh(this).options&&fh(this).options.apiKey,O(k),t),this.R=[],this.u=[],this.P=[],this.ac=r.Z.INTERNAL.createSubscribe(E(this.yc,this)),this.X=void 0,this.bc=r.Z.INTERNAL.createSubscribe(E(this.zc,this)),lh(this,null),this.l=new Ql(fh(this).options.apiKey+":"+fh(this).name),this.G=new Kl(fh(this).options.apiKey+":"+fh(this).name),this.$=yh(this,function(t){var e=fh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Jl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Wl(t||{})}))}(t.G,fh(t).options.authDomain).then((function(e){return(t.s=e)&&(e.ha=t.G),Yl(t.G)}));return yh(t,e)}(t).then((function(){return nh(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.s&&(t.s.ga||null)==(e.ga||null)?e:e.reload().then((function(){return th(t.l,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:eh(t.l)}))):null})).then((function(e){lh(t,e||null)}));return yh(t,n)}(this)),this.h=yh(this,function(t){return t.$.then((function(){return ch(t)})).o((function(){})).then((function(){if(!t.m)return t.pa()})).o((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Zl("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=E(this.Yc,this),this.Ba=E(this.da,this),this.ya=E(this.kc,this),this.za=E(this.vc,this),this.Aa=E(this.wc,this),this.b=null,function(t){var e=fh(t).options.authDomain,n=fh(t).options.apiKey;e&&Mr()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Hc(e,n,fh(t).name,t.f),Oc(t.b,t),ph(t)&&Al(ph(t)),t.s){Al(t.s);var r=t.s;r.wa(t.ka()),_l(r,t),wl(r=t.s,t.N),El(r,t),os((r=t.s).a,t.f),bl(r,t),t.s=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.Fc,this),this.A=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function oh(t){$e.call(this,"languageCodeChanged"),this.i=t}function ah(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function sh(t){$e.call(this,"frameworkChanged"),this.f=t}function uh(t){return t.gb||Ne(new C("auth-domain-config-required"))}function ch(t){if(!Mr())return Ne(new C("operation-not-supported-in-this-environment"));var e=uh(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return yh(t,e)}function lh(t,e){ph(t)&&(function(t,e){X(t.R,(function(t){return t==e}))}(ph(t),t.Ba),dn(ph(t),"tokenChanged",t.ya),dn(ph(t),"userDeleted",t.za),dn(ph(t),"userInvalidated",t.Aa),xl(ph(t))),e&&(e.R.push(t.Ba),hn(e,"tokenChanged",t.ya),hn(e,"userDeleted",t.za),hn(e,"userInvalidated",t.Aa),0<t.A&&Sl(e)),$r(t,"currentUser",e),e&&(e.wa(t.ka()),_l(e,t),wl(e,t.N),El(e,t),os(e.a,t.f),bl(e,t))}function hh(t,e){var n=null,r=null;return yh(t,e.then((function(e){return n=Vo(e),r=Xi(e),function(t,e){var n={};return n.apiKey=fh(t).options.apiKey,n.authDomain=fh(t).options.authDomain,n.appName=fh(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new ml(t,e);return n&&(i.ha=n),r&&wl(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return ph(t)&&e.uid==ph(t).uid?(Ll(ph(t),e),t.da(e)):(lh(t,e),Al(e),t.da(e))})).then((function(){vh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=il(e.w(),t,E(t.jc,t))),n||e})).then((function(){return ti({user:ph(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function fh(t){return t.app}function ph(t){return t.currentUser}function dh(t){return ph(t)&&ph(t)._lat||null}function vh(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](dh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](dh(t))}}function yh(t,e){return t.R.push(e),e.na((function(){Q(t.R,e)})),e}function gh(){}function mh(){this.a={},this.b=1e12}Ql.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Sr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Or()&&"none"!==t)throw n}}(t),rh(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Xl(n,t)})).then((function(){if(n.c=Zl(t),e)return n.b.set(n.c,e,n.a)})):ke()}))},x(ih,Tn),x(oh,$e),x(ah,$e),x(sh,$e),(t=ih.prototype).wb=function(t){return yh(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,is(this.a,this.aa),this.dispatchEvent(new oh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t,e){if(!this.f){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");!function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&br().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))}(!!e&&!!e.disableWarnings),this.f={url:t},this.settings.hb=!0,os(this.a,this.f),this.dispatchEvent(new ah(this.f))}},t.Fc=function(t){this.N.push(t),ss(this.a,r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION,this.N):null),this.dispatchEvent(new sh(this.N))},t.Ga=function(){return Z(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:fh(this).options.apiKey,authDomain:fh(this).options.authDomain,appName:fh(this).name,currentUser:ph(this)&&ph(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.i==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.i==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.i==e&&this.g?E(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return hh(i,bs(i.a,o))}))},t.Wc=function(t){if(!Mr())return Ne(new C("operation-not-supported-in-this-environment"));var e=this,n=Qi(t.providerId),i=qr(),o=null;(!Fr()||Er())&&fh(this).options.authDomain&&t.isOAuthProvider&&(o=mu(fh(this).options.authDomain,fh(this).options.apiKey,fh(this).name,"signInViaPopup",t,null,i,r.Z.SDK_VERSION||null,null,null,this.S(),this.f));var a=gr(o,n&&n.ua,n&&n.ta);return yh(this,n=uh(this).then((function(n){return Fc(n,a,"signInViaPopup",t,i,!!o,e.S())})).then((function(){return new Ee((function(t,n){e.ma("signInViaPopup",null,new C("cancelled-popup-request"),e.i),e.g=t,e.O=n,e.i=i,e.c=Vc(e.b,e,"signInViaPopup",a,i)}))})).then((function(t){return a&&yr(a),t?ti(t):null})).o((function(t){throw a&&yr(a),t})))},t.Xc=function(t){if(!Mr())return Ne(new C("operation-not-supported-in-this-environment"));var e=this;return yh(this,uh(this).then((function(){return function(t){return rh(t,(function(){return t.b.set($l,t.c.D,t.a)}))}(e.l)})).then((function(){return Uc(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return ch(this).then((function(e){return t.b&&Wc(t.b.b),e})).o((function(e){throw t.b&&Wc(t.b.b),e}))},t.cd=function(t){if(!t)return Ne(new C("null-user"));if(this.W!=t.tenantId)return Ne(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=fh(this).options.apiKey,n.authDomain=fh(this).options.authDomain,n.appName=fh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Za]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new ml(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&wl(e,r),Ll(e,t),e}(t,n,e.G,e.Ga());return yh(this,this.h.then((function(){if(fh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ph(e)&&t.uid==ph(e).uid?(Ll(ph(e),t),e.da(t)):(lh(e,r),Al(r),e.da(r))})).then((function(){vh(e)})))},t.zb=function(){var t=this;return yh(this,this.h.then((function(){return t.b&&Wc(t.b.b),ph(t)?(lh(t,null),eh(t.l).then((function(){vh(t)}))):ke()})))},t.Yc=function(){var t=this;return nh(this.l,fh(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=ph(t)&&e){n=ph(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Ll(ph(t),e),ph(t).I();(ph(t)||e)&&(lh(t,e),e&&(Al(e),e.ha=t.G),t.b&&Oc(t.b,t),vh(t))}}))},t.da=function(t){return th(this.l,t)},t.kc=function(){vh(this),this.da(ph(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.h.then((function(){return hh(e,ke(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ph(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),yh(t,t.h.then((function(){!t.m&&Y(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(dh(t)))})))}(this,(function(){t.next(ph(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ph(r)):"function"==typeof t.next&&t.next(ph(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(ph(r)):"function"==typeof t.next&&t.next(ph(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return yh(this,this.h.then((function(){return ph(e)?ph(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.h.then((function(){return hh(e,ru(e.a,Xs,{token:t}))})).then((function(t){var n=t.user;return Dl(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.h.then((function(){return hh(n,ru(n.a,$s,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return hh(n,ru(n.a,Is,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.h.then((function(){return hh(e,t.ja(e.a))}))},t.Rc=function(t){return Qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.h.then((function(){var e=ph(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return hh(t,t.a.yb()).then((function(e){var n=e.user;return Dl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ph(this)&&ph(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&ph(this)&&Sl(ph(this))},t.Oc=function(t){var e=this;z(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&ph(this)&&xl(ph(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),yh(this,this.h.then((function(){e.m||Y(e.u,t)&&t(dh(e))})))},t.removeAuthTokenListener=function(t){X(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Zl("local"),t.a,this.pa),this.b&&(Mc(this.b,this),Wc(this.b.b)),Promise.resolve()},t.gc=function(t){return yh(this,function(t,e){return ru(t,Cs,{identifier:e,continueUri:Dr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!Mo(t)},t.vb=function(t,e){var n=this;return yh(this,ke().then((function(){var t=new Ri(e);if(!t.c)throw new C("argument-error",Di+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return yh(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return yh(this,this.a.Qa(t).then((function(t){return new ci(t)})))},t.ib=function(t){return yh(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return yh(this,ke().then((function(){return void 0===e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return yh(this,$c(this,t,e,E(this.Za,this)))},t.Uc=function(t,e){var n=this;return yh(this,ke().then((function(){var r=e||fr(),i=Oo(t,r);if(!(r=Mo(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new C("tenant-id-mismatch");return n.Za(i)})))},gh.prototype.render=function(){},gh.prototype.reset=function(){},gh.prototype.getResponse=function(){},gh.prototype.execute=function(){};var _h=null;function bh(t,e){return(e=wh(e))&&t.a[e]||null}function wh(t){return(t=void 0===t?1e12:t)?t.toString():null}function Eh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.i="invisible"!==this.c.size,this.f=le(t);var n=this;this.h=function(){n.execute()},this.i?this.execute():hn(this.f,"click",this.h)}function Th(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Sh(){}function xh(){}mh.prototype.render=function(t,e){return this.a[this.b.toString()]=new Eh(t,e),this.b++},mh.prototype.reset=function(t){var e=bh(this,t);t=wh(t),e&&t&&(e.delete(),delete this.a[t])},mh.prototype.getResponse=function(t){return(t=bh(this,t))?t.getResponse():null},mh.prototype.execute=function(t){(t=bh(this,t))&&t.execute()},Eh.prototype.getResponse=function(){return Th(this),this.b},Eh.prototype.execute=function(){Th(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.i&&t.execute()}),6e4)}),500))},Eh.prototype.delete=function(){Th(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.h)},$r(Sh,"FACTOR_ID","phone"),xh.prototype.g=function(){return _h||(_h=new mh),ke(_h)},xh.prototype.c=function(){};var Ih=null;function Ch(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ah=new bt(St,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),kh=new Gr(3e4,6e4);Ch.prototype.g=function(t){var e=this;return new Ee((function(n,r){var i=setTimeout((function(){r(new C("network-request-failed"))}),kh.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete u[e.a]},ke(Ga(At(Ah,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Ch.prototype.c=function(){this.b--};var Nh=null;function Ph(t,e,n,r,i,o,a){if($r(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,a?(Ih||(Ih=new xh),a=Ih):(Nh||(Nh=new Ch),a=Nh),this.v=a,this.a=n||{theme:"light",type:"image"},this.i=[],this.a[Mh])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Dh],!u.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.h&&le(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xa(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Rh];this.a[Rh]=function(t){if(Lh(s,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Rr(c,u);"function"==typeof e&&e(t)}};var l=this.a[Oh];this.a[Oh]=function(){if(Lh(s,null),"function"==typeof l)l();else if("string"==typeof l){var t=Rr(l,u);"function"==typeof t&&t()}}}var Rh="callback",Oh="expired-callback",Mh="sitekey",Dh="size";function Lh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Fh(t,e){return t.i.push(e),e.na((function(){Q(t.i,e)})),e}function jh(t){if(t.A)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Uh(t,e,n){var i=!1;try{this.b=n||r.Z.app()}catch(t){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION,a):null,Ph.call(this,n,t,e,(function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t}),a,O(k),i)}function Vh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=qh.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=qh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(t=Ph.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Fh(this,ke().then((function(){if(Dr()&&!Tr())return br();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Vs,{})})).then((function(e){t.a[Mh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){jh(this);var t=this;return Fh(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.h){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',zt(a.name),'"'),a.type){o.push(' type="',zt(a.type),'"');var s={};mt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ye(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):he(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){jh(this);var t=this;return Fh(this,this.render().then((function(e){return new Ee((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){X(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.h&&t.g.execute(t.c)}}))})))},t.reset=function(){jh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){jh(this),this.A=!0,this.v.c();for(var t=0;t<this.i.length;t++)this.i[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=le(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},x(Uh,Ph);var qh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Bh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Hh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Gh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function zh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Wh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Kh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Jh(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yh(t){return y(t)&&"string"==typeof t.uid}function Qh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Xh(t,e){for(var n in e){var r=e[n].name;t[r]=tf(r,t[n],e[n].j)}}function $h(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){Vh(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function Zh(t,e,n,r){t[e]=tf(e,n,r)}function tf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Vh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Xh(ih.prototype,{ib:{name:"applyActionCode",j:[Bh("code")]},Qa:{name:"checkActionCode",j:[Bh("code")]},mb:{name:"confirmPasswordReset",j:[Bh("code"),Bh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Bh("email"),Bh("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Bh("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Bh("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Qh(Gh(),zh(),"nextOrObserver"),zh("opt_error",!0),zh("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Qh(Gh(),zh(),"nextOrObserver"),zh("opt_error",!0),zh("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Bh("email"),Qh(Gh("opt_actionCodeSettings",!0),Wh(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Bh("email"),Gh("actionCodeSettings")]},wb:{name:"setPersistence",j:[Bh("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Kh()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Kh()]},Sc:{name:"signInWithCustomToken",j:[Bh("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Bh("email"),Bh("password")]},Uc:{name:"signInWithEmailLink",j:[Bh("email"),Bh("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Qh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof ml)}},Wh(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Bh(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Bh("url"),Gh("options",!0)]},hd:{name:"verifyPasswordResetCode",j:[Bh("code")]}}),$h(ih.prototype,{lc:{name:"languageCode",jb:Qh(Bh(),Wh(),"languageCode")},ti:{name:"tenantId",jb:Qh(Bh(),Wh(),"tenantId")}}),ih.Persistence=Zu,ih.Persistence.LOCAL="local",ih.Persistence.SESSION="session",ih.Persistence.NONE="none",Xh(ml.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Hh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Hh("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Kh()]},pb:{name:"linkWithCredential",j:[Kh()]},Cc:{name:"linkWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Kh()]},sb:{name:"reauthenticateWithCredential",j:[Kh()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Qh(Gh("opt_actionCodeSettings",!0),Wh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Bh(null,!0)]},bd:{name:"unlink",j:[Bh("provider")]},Ab:{name:"updateEmail",j:[Bh("email")]},Bb:{name:"updatePassword",j:[Bh("password")]},dd:{name:"updatePhoneNumber",j:[Kh("phone")]},Cb:{name:"updateProfile",j:[Gh("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Bh("email"),Qh(Gh("opt_actionCodeSettings",!0),Wh(null,!0),"opt_actionCodeSettings",!0)]}}),Xh(mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xh(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xh(Ee.prototype,{na:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$h(Qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Hh("appVerificationDisabledForTesting")}}),Xh(Xc.prototype,{confirm:{name:"confirm",j:[Bh("verificationCode")]}}),Zh(lo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,Po,Lo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Qh(Bh(),Gh(),"json")]),Zh(Ro,"credential",(function(t,e){return new No(t,e)}),[Bh("email"),Bh("password")]),Xh(No.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(Eo.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),Zh(Eo,"credential",To,[Qh(Bh(),Gh(),"token")]),Zh(Ro,"credentialWithLink",Oo,[Bh("email"),Bh("emailLink")]),Xh(So.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),Zh(So,"credential",xo,[Qh(Bh(),Gh(),"token")]),Xh(Io.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),Zh(Io,"credential",Co,[Qh(Bh(),Qh(Gh(),Wh()),"idToken"),Qh(Bh(),Wh(),"accessToken",!0)]),Xh(Ao.prototype,{Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),Zh(Ao,"credential",ko,[Qh(Bh(),Gh(),"token"),Bh("secret",!0)]),Xh(wo.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},credential:{name:"credential",j:[Qh(Bh(),Qh(Gh(),Wh()),"optionsOrIdToken"),Qh(Bh(),Wh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gh("customOAuthParameters")]}}),Xh(yo.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(fo.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Zh(jo,"credential",Uo,[Bh("verificationId"),Bh("verificationCode")]),Xh(jo.prototype,{eb:{name:"verifyPhoneNumber",j:[Qh(Bh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Jh(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jh(t.session,co)&&Yh(t.multiFactorHint):t.session&&t.multiFactorUid?Jh(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Xh(Do.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(C.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(Jo.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(Ko.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(rl.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(tl.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Xh(cl.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Bh("displayName",!0)]},ad:{name:"unenroll",j:[Qh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Yh},Bh(),"multiFactorInfoIdentifier")]}}),Xh(Uh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zh(Ti,"parseLink",Pi,[Bh("link")]),Zh(Sh,"assertion",(function(t){return new sl(t)}),[Kh("phone")]),function(){if(void 0===r.Z||!r.Z.INTERNAL||!r.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ih,AuthCredential:lo,Error:C};Zh(t,"EmailAuthProvider",Ro,[]),Zh(t,"FacebookAuthProvider",Eo,[]),Zh(t,"GithubAuthProvider",So,[]),Zh(t,"GoogleAuthProvider",Io,[]),Zh(t,"TwitterAuthProvider",Ao,[]),Zh(t,"OAuthProvider",wo,[Bh("providerId")]),Zh(t,"SAMLAuthProvider",bo,[Bh("providerId")]),Zh(t,"PhoneAuthProvider",jo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof ih)}}]),Zh(t,"RecaptchaVerifier",Uh,[Qh(Bh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof r.Z.app.App)}}]),Zh(t,"ActionCodeURL",Ti,[]),Zh(t,"PhoneMultiFactorGenerator",Sh,[]),r.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ih(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:E((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:E(t.mc,t),addAuthTokenListener:E(t.cc,t),removeAuthTokenListener:E(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.Z.registerVersion("@firebase/auth","0.16.1"),r.Z.INTERNAL.extendNamespace({User:ml})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},909:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u,zt:()=>s});var r=n(655),i=n(4589),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:a,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(a)}catch(t){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.CR)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(l);c.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.fl)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===a?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},9446:(t,e,n)=>{"use strict";var r=n(6099),i=n(655),o=n(4589),a=n(4594),s=n(909);t=n.hmd(t);var u,c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(t){}return new l},f=h("localStorage"),p=h("sessionStorage"),d=new a.Yd("@firebase/database"),v=(u=1,function(){return u++}),y=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=g.apply(null,i):n+="object"==typeof i?(0,o.Pz)(i):i,n+=" "}return n},m=null,_=!0,b=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=a.in.VERBOSE,m=d.log.bind(d),e&&p.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,p.remove("logging_enabled"))},w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===m&&!0===p.get("logging_enabled")&&b(!0)),m){var n=g.apply(null,t);m(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];w.apply(void 0,(0,i.fl)([t],e))}},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,(0,i.fl)(t));d.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,(0,i.fl)(t));throw d.error(n),new Error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,(0,i.fl)(t));d.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},C="[MIN_NAME]",A="[MAX_NAME]",k=function(t,e){if(t===e)return 0;if(t===C||e===A)return-1;if(e===C||t===A)return 1;var n=K(t),r=K(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},N=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},R=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.Pz)(e[i]),r+=":",r+=R(t[e[i]]);return r+"}"},O=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function M(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D,L,F,j,U,V,q,B,H,G,z=function(t){(0,o.hu)(!I(t),"Invalid JSON number");var e,n,r,i,a;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},W=new RegExp("^-?(0*)\\d{1,10}$"),K=function(t){if(W.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},J=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw x("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Y=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Q=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=k(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),X=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=(0,o.ug)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=(0,o.ug)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),$="firebaseio.com",Z="websocket",tt="long_polling",et=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if((0,o.hu)("string"==typeof t,"typeof type must == string"),(0,o.hu)("object"==typeof e,"typeof params must == object"),t===Z)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==tt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return M(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),nt=function(t,e){var n=rt(t),r=n.namespace;"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&x("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new et(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new Q(n.pathString)}},rt=function(t){var e="",n="",r="",o="",a="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=(0,i.XA)(t.split("&")),a=o.next();!a.done;a=o.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):x("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),a=r}"ns"in p&&(a=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:o,namespace:a}},it=/[\[\].#$\/\u0000-\u001F\u007F]/,ot=/[\[\].#$\u0000-\u001F\u007F]/,at=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return"string"==typeof t&&0!==t.length&&!ot.test(t)},ct=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},lt=function(t,e,n,r,i){i&&void 0===n||ht((0,o.gK)(t,e,i),n,r)},ht=function(t,e,n){var r=n instanceof Q?new X(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(I(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>at/3&&(0,o.ug)(e)>at)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,a=!1;if(M(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(a=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ht(t,n,r),r.pop()})),i&&a)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ft=function(t,e,n,r,i){if(!i||void 0!==n){var a=(0,o.gK)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];M(n,(function(t,e){var n=new Q(t);if(ht(a,e,r.child(n)),".priority"===n.getBack()&&!ct(e))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Q.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(a,s)}},pt=function(t,e,n,r){if(!r||void 0!==n){if(I(n))throw new Error((0,o.gK)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ct(n))throw new Error((0,o.gK)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},vt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error((0,o.gK)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yt=function(t,e,n,r){if(!(r&&void 0===n||ut(n)))throw new Error((0,o.gK)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yt(t,e,n,r)},mt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},_t=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ut(t)}(r))throw new Error((0,o.gK)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e,r)+"must be a boolean.")},wt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel",1,t,!0);var e=new o.BH;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove",this.path_),(0,o.Wj)("OnDisconnect.remove",1,t,!0);var e=new o.BH;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set",this.path_),lt("OnDisconnect.set",1,t,this.path_,!1),(0,o.Wj)("OnDisconnect.set",2,e,!0);var n=new o.BH;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority",this.path_),lt("OnDisconnect.setWithPriority",1,t,this.path_,!1),pt("OnDisconnect.setWithPriority",2,e,!1),(0,o.Wj)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.BH;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),mt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,x("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ft("OnDisconnect.update",1,t,this.path_,!1),(0,o.Wj)("OnDisconnect.update",2,e,!0);var i=new o.BH;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Et=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Tt=(D="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",L=0,F=[],function(t){var e,n=t===L;L=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=D.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===F[e];e--)F[e]=0;F[e]++}else for(e=0;e<12;e++)F[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=D.charAt(F[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),St=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),xt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new St(C,t),r=new St(C,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return St.MIN},t}(),It=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return j},set:function(t){j=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return k(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(A,j)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new St(t,j)},e.prototype.toString=function(){return".key"},e}(xt),Ct=new It,At=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},kt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===U||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===U||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Nt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),kt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+At(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Pt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?k(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(A,new Nt("[PRIORITY-POST]",B))},e.prototype.makePost=function(t,e){var n=q(t);return new St(e,new Nt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(xt)),Rt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ot=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Mt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ot(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ot.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ot.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Rt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Rt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Rt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Rt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Mt,t}(),Lt=Math.log(2),Ft=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Lt,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),jt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Ot(a,o.node,Ot.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new Ot(a,o.node,Ot.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Ot(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Ot.BLACK):(s(h,Ot.BLACK),s(h,Ot.RED))}return o}(new Ft(t.length));return new Dt(r||e,o)},Ut={},Vt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(Ut&&Pt,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Ut},{".priority":Pt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==Ct,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(St.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?jt(a,e.getCompare()):Ut;var l=e.toString(),h=(0,i.pi)({},this.indexSet_);h[l]=e;var f=(0,i.pi)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,(function(t,i){var a=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(a,"Missing index implementation for "+i),t===Ut){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(St.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),jt(s,a.getCompare())}return Ut}var l=n.get(e.name),h=t;return l&&(h=h.remove(new St(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,(function(t){if(t===Ut)return t;var r=n.get(e.name);return r?t.remove(new St(e.name,r)):t})),this.indexSet_)},t}();function qt(t,e){return k(t.name,e.name)}function Bt(t,e){return k(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&kt(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return G||(G=new t(new Dt(Bt),null,Vt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||G},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?G:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new St(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?G:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;(0,o.hu)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Pt,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+At(this.getPriority().val())+":"),this.forEachChild(Pt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new St(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,St.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,St.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gt?-1:0},t.prototype.withIndex=function(e){if(e===Ct||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ct||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Pt),r=e.getIterator(Pt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ct?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Gt=new(function(t){function e(){return t.call(this,new Dt(Bt),Ht.EMPTY_NODE,Vt.Default)||this}return(0,i.ZT)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function zt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Nt(t,zt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return M(t,(function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=zt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(zt(e))}var r=[],i=!1;if(M(t,(function(t,e){if("."!==t.substring(0,1)){var n=zt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new St(t,n)))}})),0===r.length)return Ht.EMPTY_NODE;var a=jt(r,qt,(function(t){return t.name}),Bt);if(i){var s=jt(r,Pt.getCompare());return new Ht(a,zt(e),new Vt({".priority":s},{".priority":Pt}))}return new Ht(a,zt(e),Vt.Default)}Object.defineProperties(St,{MIN:{value:new St(C,Ht.EMPTY_NODE)},MAX:{value:new St(A,Gt)}}),It.__EMPTY_NODE=Ht.EMPTY_NODE,Nt.__childrenNodeConstructor=Ht,U=Gt,B=Gt,function(t){q=t}(zt);var Wt,Kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?k(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return St.MAX},e.prototype.makePost=function(t,e){var n=zt(t);return new St(e,n)},e.prototype.toString=function(){return".value"},e}(xt)),Jt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return(0,i.ZT)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?k(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=zt(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new St(e,r)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,Gt);return new St(A,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(xt),Yt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),yt("DataSnapshot.child",1,e,!1);var n=new Q(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Pt)},t.prototype.hasChild=function(t){(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),yt("DataSnapshot.hasChild",1,t,!1);var e=new Q(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if((0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Pt))}))},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Qt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Xt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),$t=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Qt("value",this,new Yt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,o.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,(0,o.r3)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Qt(t.type,this,new Yt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,o.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),te=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,o.hu)(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ct){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==C)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==A)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Pt){if(null!=e&&!ct(e)||null!=n&&!ct(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof Jt||t.getIndex()===Kt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return(0,o.Dv)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){(0,o.Dv)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),(0,o.Wj)("Query.on",2,n,!1);var a=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,a.cancel,a.context);else{var s={};s[e]=n,this.onChildEvent(s,a.cancel,a.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new $t(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Zt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){(0,o.Dv)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),(0,o.Wj)("Query.off",2,e,!0),(0,o.lb)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var a=e||null;r=new $t(a,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Zt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var a=this;(0,o.Dv)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),(0,o.Wj)("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.BH;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,a.off(e,l),n&&n.bind(s.context)(t),c.resolve(t))};return this.on(e,l,(function(t){a.off(e,l),s.cancel&&s.cancel.bind(s.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if((0,o.Dv)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if((0,o.Dv)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if((0,o.Dv)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');yt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Q(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Jt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){(0,o.Dv)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ct);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Pt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){(0,o.Dv)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),lt("Query.startAt",1,e,this.path,!0),vt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),lt("Query.endAt",1,e,this.path,!0),vt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if((0,o.Dv)("Query.equalTo",1,2,arguments.length),lt("Query.equalTo",1,t,this.path,!1),vt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=R(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),a=this.queryIdentifier()===e.queryIdentifier();return r&&i&&a},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,(0,o.Wj)(t,3,r.cancel,!0),r.context=n,(0,o.lb)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ee=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ne=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),re=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ie(t[".sv"],e,n):"object"==typeof t[".sv"]?oe(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ie=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},oe=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!=typeof a?r:a+r},ae=function(t,e,n,r){return ue(e,new ne(n,t),r)},se=function(t,e,n){return ue(t,new ee(e),n)};function ue(t,e,n){var r,i=t.getPriority().val(),o=re(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=re(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Nt(s,zt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Nt(o))),u.forEachChild(Pt,(function(t,i){var o=ue(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Pt,(function(t,e){n.remember(new Q(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Q(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ce||(ce={}));var he,fe,pe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,(0,o.hu)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ce.ACK_USER_WRITE,this.source=pe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Q(e));return new t(Q.Empty,n,this.revert)}return(0,o.hu)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ve=function(){function t(t,e){void 0===e&&(he||(he=new Dt(N)),e=he),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return M(e,(function(t,e){n=n.set(new Q(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Q(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Q.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Q.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Q.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Q.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),ye=function(){function t(t,e){this.source=t,this.path=e,this.type=ce.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty):new t(this.source,this.path.popFront())},t}(),ge=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ce.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),me=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ce.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new ge(this.source,Q.Empty,n.value):new t(this.source,Q.Empty,n)}return(0,o.hu)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),_e=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new _e(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new _e(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new _e(Ht.EMPTY_NODE,!1,!1),new _e(Ht.EMPTY_NODE,!1,!1)),t}(),we=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Ee=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(we.childRemovedChange(e,s)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(we.childAddedChange(e,n)):a.trackChildChange(we.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Pt,(function(t,r){e.hasChild(t)||n.trackChildChange(we.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Pt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(we.childChangedChange(e,r,i))}else n.trackChildChange(we.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Te=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)(e===we.CHILD_ADDED||e===we.CHILD_CHANGED||e===we.CHILD_REMOVED,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===we.CHILD_ADDED&&i===we.CHILD_REMOVED)this.changeMap.set(n,we.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===we.CHILD_REMOVED&&i===we.CHILD_ADDED)this.changeMap.delete(n);else if(e===we.CHILD_REMOVED&&i===we.CHILD_CHANGED)this.changeMap.set(n,we.childRemovedChange(n,r.oldSnap));else if(e===we.CHILD_CHANGED&&i===we.CHILD_ADDED)this.changeMap.set(n,we.childAddedChange(n,t.snapshotNode));else{if(e!==we.CHILD_CHANGED||i!==we.CHILD_CHANGED)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,we.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Se=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),xe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new _e(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ie=function(t,e){this.viewCache=t,this.changes=e},Ce=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){(0,o.hu)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),(0,o.hu)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var a,s,u=new Te;if(n.type===ce.OVERWRITE){var c=n;c.source.fromUser?a=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),a=this.applyServerOverwrite_(e,c.path,c.snap,r,i,s,u))}else if(n.type===ce.MERGE){var l=n;l.source.fromUser?a=this.applyUserMerge_(e,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.getServerCache().isFiltered(),a=this.applyServerMerge_(e,l.path,l.children,r,i,s,u))}else if(n.type===ce.ACK_USER_WRITE){var h=n;a=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ce.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);a=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,a,f),new Ie(a,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(we.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var a=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,u=void 0;if(e.isEmpty())if((0,o.hu)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=c instanceof Ht?c:Ht.EMPTY_NODE,h=n.calcCompleteEventChildren(l);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),f,i)}else{var p=e.getFront();if(".priority"===p){(0,o.hu)(1===e.getLength(),"Can't have a priority with additional path components");var d=a.getNode();u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,d,u);s=null!=v?this.filter_.updatePriority(d,v):a.getNode()}else{var y=e.popFront(),g=void 0;if(a.isCompleteForChild(p)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,a.getNode(),u);g=null!=m?a.getNode().getImmediateChild(p).updateChild(y,m):a.getNode().getImmediateChild(p)}else g=n.calcCompleteChild(p,t.getServerCache());s=null!=g?this.filter_.updateChild(a.getNode(),p,g,y,r,i):a.getNode()}}return t.updateEventSnap(s,a.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Se,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new xe(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new xe(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Ht.EMPTY_NODE}if(f.equals(p))a=t;else{var v=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:ve.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new Q(e),h,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new Q(e),f,r,i,o,a)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=ve.Empty;return s.getNode().forEachChild(Ct,(function(t,e){u=u.set(new Q(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=ve.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Se,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var a;if(null!=n.shadowingWrite(e))return t;var s=new xe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();(0,o.hu)(h instanceof Ht,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}l=l,c=this.filter_.updateFullNode(u,l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),s,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ht.EMPTY_NODE,e.popFront(),s,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,a,i))}return a=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Q.Empty),t.updateEventSnap(c,a,this.filter_.filtersNodes())},t}(),Ae=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===we.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(we.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,we.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,we.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,we.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,we.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,we.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw(0,o.g5)("Should only compare child_ events.");var n=new St(t.childName,t.snapshotNode),r=new St(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),ke=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Ee(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ce(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ht.EMPTY_NODE,a.getNode(),null),c=new _e(s,o.isFullyInitialized(),r.filtersNodes()),l=new _e(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Ae(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){(0,o.hu)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],a=0;a<this.eventRegistrations_.length;++a){var s=this.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(a+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ce.MERGE&&null!==t.source.queryId&&((0,o.hu)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),(0,o.hu)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),(0,o.hu)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Pt,(function(t,e){n.push(we.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(we.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Ne=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,o.hu)(fe,"Reference.ts has not been loaded"),fe},set:function(t){(0,o.hu)(!fe,"__referenceConstructor has already been defined"),fe=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,a,s=t.source.queryId;if(null!==s){var u=this.views.get(s);return(0,o.hu)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=(0,i.XA)(this.views.values()),h=l.next();!h.done;h=l.next())u=h.value,c=c.concat(u.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof Ht?(s=n.calcCompleteEventChildren(r),u=!1):(s=Ht.EMPTY_NODE,u=!1);var c=new be(new _e(s,u,!1),new _e(r,i,!1));a=new ke(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,a,s=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===s)try{for(var h=(0,i.XA)(this.views.entries()),f=h.next();!f.done;f=h.next()){var p=(0,i.CR)(f.value,2),d=p[0],v=p[1];c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(d),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery()))}}catch(t){o={error:t}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}else(v=this.views.get(s))&&(c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(s),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=(0,i.XA)(this.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;a.getQuery().getQueryParams().loadsAllData()||n.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=(0,i.XA)(this.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=(0,i.XA)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Pe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ve(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=Q.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new ve(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return M(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ve.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Q.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Pt,(function(e,n){t.push(new St(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new St(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ve(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return Re(Q.Empty,this.writeTree_,t)},t.Empty=new t(new ve(null)),t}();function Re(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Re(t.child(e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Oe=function(){function t(){this.visibleWrites_=Pe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Me(t,this)},t.prototype.addOverwrite=function(t,e,n,r){(0,o.hu)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){(0,o.hu)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,a=!1,s=this.allWrites_.length-1;i&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(a=!0)),s--}return!!i&&(a?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):M(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(Q.Empty)){var a=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);return c=n||Ht.EMPTY_NODE,a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(Q.Empty)){var c=n||Ht.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Pt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Pt,(function(t,e){var r=i.childCompoundWrite(new Q(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){(0,o.hu)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var a=this.visibleWrites_.childCompoundWrite(i);return a.isEmpty()?r.getChild(e):a.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(Q.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Q.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Pe.Empty,i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)n.contains(s)?(u=Q.relativePath(n,s),r=r.addWrite(u,a.snap)):s.contains(n)&&(u=Q.relativePath(s,n),r=r.addWrite(Q.Empty,a.snap.getChild(u)));else{if(!a.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(n.contains(s))u=Q.relativePath(n,s),r=r.addWrites(u,a.children);else if(s.contains(n))if((u=Q.relativePath(s,n)).isEmpty())r=r.addWrites(Q.Empty,a.children);else{var c=(0,o.DV)(a.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(Q.Empty,l)}}}}}return r},t}(),Me=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),De=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ve.Empty,this.pendingWriteTree_=new Oe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ge(pe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ve.fromObject(e);return this.applyOperationToSyncPoints_(new me(pe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ve.Empty;return null!=n.snap?r=r.set(Q.Empty,!0):M(n.children,(function(t,e){r=r.set(new Q(t),e)})),this.applyOperationToSyncPoints_(new de(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ge(pe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ve.fromObject(e);return this.applyOperationToSyncPoints_(new me(pe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ye(pe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Q.relativePath(a,e),c=new ge(pe.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Q.relativePath(a,e),c=ve.fromObject(n),l=new me(pe.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=Q.relativePath(o,e),u=new ye(pe.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,a=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Q.relativePath(t,r);i=i||e.getCompleteServerCache(n),a=a||e.hasCompleteView()}));var s,u=this.syncPointTree_.get(r);u?(a=a||u.hasCompleteView(),i=i||u.getCompleteServerCache(Q.Empty)):(u=new Ne,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?s=!0:(s=!1,i=Ht.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Q.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);(0,o.hu)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,s);if(!c&&!a){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Q.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),M(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),a=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,a.hashFn,a.onComplete),u=this.syncPointTree_.subtree(r);if(i)(0,o.hu)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),M(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);(0,o.hu)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Q.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Q.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Q.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Q.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Le=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Fe=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),je=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Fe),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ue=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,i.pi)({},t);return this.last_&&M(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Ve=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ue(t);var n=1e4+2e4*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;M(e,(function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),qe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Be(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Be=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();m&&w("event: "+e.toString()),J(n)}}},t.prototype.getPath=function(){return this.path_},t}(),He=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,i.fl)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Ge=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return(0,i.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(He),ze=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return(0,i.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(He),We=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&J((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ke="start",Je="close",Ye=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=je.getCollection(e),this.urlFn=function(t){return e.connectionURL(tt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new We(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Qe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,i.CR)(t,5),o=r[0],a=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ke)n.id=a,n.password=s;else{if(o!==Je)throw new Error("Unrecognized command received: "+o);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,i.CR)(t,2),o=r[0],a=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,a)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf($)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=O(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Qe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){w("frame writing exception"),t.stack&&w(t.stack),w(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||w("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){w("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),Xe="";function $e(t){Xe=t}var Ze=null;"undefined"!=typeof MozWebSocket?Ze=MozWebSocket:"undefined"!=typeof WebSocket&&(Ze=WebSocket);var tn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=je.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf($)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Z,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+Xe+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},a=process.env,s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new Ze(this.connURL,[],i)}else i={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Ze(this.connURL,[],i)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ze&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=O(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),en=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ye,tn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=tn&&tn.isAvailable(),a=o&&!tn.previouslyFailed();if(e.webSocketOnly&&(o||x("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[tn];else{var s=this.transports_=[];try{for(var u=(0,i.XA)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),nn=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new en(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Y((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=P("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?T("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):T("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&x("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Y((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),rn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),on=1e3,an=function(t){function e(n,r,i,a,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=E("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=on,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Ge.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ze.getInstance().on("online",l.onOnline_,l),l}return(0,i.ZT)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.BH,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[a];void 0!==t&&i===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),a=t.path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();x("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):T("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=on,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=on,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=on),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+e.nextConnectionId_++,s=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){(0,o.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,l=new nn(a,s.repoInfo_,s.applicationId_,n,r,i,(function(t){x(t+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),u))})).then(null,(function(e){s.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&x(e),h())}))}},e.prototype.interrupt=function(t){w("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){w("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=on,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return R(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Q(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){w("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=(0,i.XA)(this.listens.values()),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,(0,i.XA)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Xe.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ze.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(rn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=E("p:rest:"),i.listens_={},i}return(0,i.ZT)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),(0,o.DV)(a.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var a=i&&i.accessToken;a&&(e.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=(0,o.cI)(u.responseText)}catch(t){x("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&x("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},e}(rn),un="repo_interrupt",cn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=je.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new an(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=je.getOrCreateReporter(this.repoInfo_,(function(){return new Ve(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Le,this.infoSyncTree_=new De({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e.path);return a.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new De({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var a=[];if(r)if(n){var s=(0,o.UI)(e,(function(t){return zt(t)}));a=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var u=zt(e);a=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=(0,o.UI)(e,(function(t){return zt(t)}));a=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=zt(e);a=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;a.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,a)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;M(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Q("/.info/"+t),r=zt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=zt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Yt(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+(0,o.Pz)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Yt(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=zt(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=se(a,s,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||x("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(M(e,(function(e,n){i=!1,a[e]=ae(t.child(e),zt(n),r.serverSyncTree_,o)})),i)w("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||x("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),M(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree(Q.Empty,(function(r,i){var o=ae(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Q.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath(Q.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=zt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=zt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if((0,o.xb)(e))return w("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&M(e,(function(e,n){var i=zt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(un)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(un)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ue(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);M(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),w.apply(void 0,(0,i.fl)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&J((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new wn(this))},enumerable:!1,configurable:!0}),t}(),ln=function(){function t(e){this.indexedFilter_=new Ee(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new St(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);var i=this;return e.forEachChild(Pt,(function(t,e){i.matches(new St(t,e))||(r=r.updateImmediateChild(t,Ht.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),hn=function(){function t(t){this.rangedFilter_=new ln(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new St(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new St(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:a(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(we.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(we.childRemovedChange(e,f));var v=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(we.childAddedChange(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(we.childRemovedChange(l.name,l.node)),i.trackChildChange(we.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ht.EMPTY_NODE)):t},t}(),fn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:C},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Pt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Pt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Ee(this.getIndex()):this.hasLimit()?new hn(this):new ln(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Pt?e=n.PRIORITY_INDEX:this.index_===Kt?e=n.VALUE_INDEX:this.index_===Ct?e=n.KEY_INDEX:((0,o.hu)(this.index_ instanceof Jt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=(0,o.Pz)(e),this.startSet_&&(r[n.START_AT]=(0,o.Pz)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+(0,o.Pz)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=(0,o.Pz)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+(0,o.Pz)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),pn=function(t){function e(e,n){if(!(e instanceof cn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,fn.DEFAULT,!1)||this}return(0,i.ZT)(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Q||(null===this.path.getFront()?gt("Reference.child",1,t,!1):yt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){(0,o.Dv)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),mt("Reference.set",this.path),lt("Reference.set",1,t,this.path,!1),(0,o.Wj)("Reference.set",2,e,!0);var n=new o.BH;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),mt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,x("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ft("Reference.update",1,t,this.path,!1),(0,o.Wj)("Reference.update",2,e,!0);var i=new o.BH;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if((0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority",this.path),lt("Reference.setWithPriority",1,t,this.path,!1),pt("Reference.setWithPriority",2,e,!1),(0,o.Wj)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.BH;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return(0,o.Dv)("Reference.remove",0,1,arguments.length),mt("Reference.remove",this.path),(0,o.Wj)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if((0,o.Dv)("Reference.transaction",1,3,arguments.length),mt("Reference.transaction",this.path),(0,o.Wj)("Reference.transaction",1,t,!1),(0,o.Wj)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.BH;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Et(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority",this.path),pt("Reference.setPriority",1,t,!1),(0,o.Wj)("Reference.setPriority",2,e,!0);var n=new o.BH;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){(0,o.Dv)("Reference.push",0,2,arguments.length),mt("Reference.push",this.path),lt("Reference.push",1,t,this.path,!0),(0,o.Wj)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Tt(r),a=this.child(i),s=this.child(i);return n=null!=t?a.set(t,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),a},e.prototype.onDisconnect=function(){return mt("Reference.onDisconnect",this.path),new wt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(te);te.__referenceConstructor=pn,Ne.__referenceConstructor=pn;var dn,vn=function(){this.children={},this.childCount=0,this.value=null},yn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new vn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Q?e:new Q(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,(0,o.DV)(r.node_.children,i)||new vn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){(0,o.hu)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;M(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=(0,o.r3)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(dn||(dn={})),cn.MAX_TRANSACTION_RETRIES_=25,cn.prototype.transactionsInit_=function(){this.transactionQueueTree_=new yn},cn.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},a=new pn(this,t);a.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:v(),applyLocally:r,retryCount:0,unwatcher:function(){a.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new Yt(s.currentInputSnapshot,new pn(this,s.path),Pt);s.onComplete(null,!1,l)}}else{ht("transaction failed: Data returned ",c,s.path),s.status=dn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(s),h.setValue(f);var p=void 0;"object"==typeof c&&null!==c&&(0,o.r3)(c,".priority")?(p=(0,o.DV)(c,".priority"),(0,o.hu)(ct(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),p=p;var d=this.generateServerValues(),y=zt(c,p),g=se(y,u,d);s.currentOutputSnapshotRaw=y,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,g,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},cn.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},cn.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===dn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},cn.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),a=i,s=i.hash(),u=0;u<e.length;u++){var c=e[u];(0,o.hu)(c.status===dn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=dn.SENT,c.retryCount++;var l=Q.relativePath(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=dn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new pn(n,e[a].path),c=new Yt(s,u,Pt);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),a=0;a<o.length;a++)J(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===dn.SENT_NEEDS_ABORT?e[a].status=dn.NEEDS_ABORT:e[a].status=dn.RUN;else for(x("transaction at "+f.toString()+" failed: "+r),a=0;a<e.length;a++)e[a].status=dn.NEEDS_ABORT,e[a].abortReason=r;n.rerunTransactions_(t)}}),s)},cn.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},cn.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],a=t.filter((function(t){return t.status===dn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var u=t[s],c=Q.relativePath(e,u.path),l=!1,h=void 0;if((0,o.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===dn.NEEDS_ABORT)l=!0,h=u.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===dn.RUN)if(u.retryCount>=cn.MAX_TRANSACTION_RETRIES_)l=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,a);u.currentInputSnapshot=f;var p=t[s].update(f.val());if(void 0!==p){ht("transaction failed: Data returned ",p,u.path);var d=zt(p);"object"==typeof p&&null!=p&&(0,o.r3)(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=u.currentWriteId,y=this.generateServerValues(),g=se(d,f,y);u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=g,u.currentWriteId=this.getNextWriteId_(),a.splice(a.indexOf(v),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(u.path,g,u.currentWriteId,u.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(v,!0))}else l=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[s].status=dn.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var m=new pn(this,t[s].path),_=t[s].currentInputSnapshot,b=new Yt(_,m,Pt);r.push(t[s].onComplete.bind(null,null,!1,b))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<r.length;s++)J(r[s]);this.sendReadyTransactions_()}},cn.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},cn.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},cn.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},cn.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==dn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},cn.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},cn.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,a=0;a<e.length;a++)e[a].status===dn.SENT_NEEDS_ABORT||(e[a].status===dn.SENT?((0,o.hu)(i===a-1,"All SENT items should be at beginning of queue."),i=a,e[a].status=dn.SENT_NEEDS_ABORT,e[a].abortReason="set"):((0,o.hu)(e[a].status===dn.RUN,"Unexpected transaction status in abort"),e[a].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[a].currentWriteId,!0)),e[a].onComplete&&n.push(e[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),a=0;a<n.length;a++)J(n[a])}};var gn,mn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',x(t)},t}(),_n=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),bn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return gn||(gn=new t),gn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=(0,i.XA)(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,(0,i.XA)(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next()){var l=c.value;this.repos_[s][l].interrupt()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=(0,i.XA)(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,(0,i.XA)(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next()){var l=c.value;this.repos_[s][l].resume()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new et(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new _n)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,a=nt(i,r),s=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+s.namespace,s=(a=nt(i,r)).repoInfo):o=!a.repoInfo.secure;var c=r&&o?new _n:new mn(t,e);return _t("Invalid Firebase Database URL",1,a),a.path.isEmpty()||S("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,c).database},t.prototype.deleteRepo=function(t){var e=(0,o.DV)(this.repos_,t.app.name);e&&(0,o.DV)(e,t.key)===t||S("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=(0,o.DV)(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=(0,o.DV)(r,t.toURLString());return i&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new cn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),wn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return this.checkDeleted_("delete"),bn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof cn||S("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new pn(this.repo_,Q.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?S("Cannot call useEmulator() after instance has already been initialized."):bn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),(0,o.Dv)("database.ref",0,1,arguments.length),t instanceof pn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),(0,o.Dv)(e,1,1,arguments.length);var n=nt(t,this.repo_.repoInfo_.nodeAdmin);_t(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||S(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&S("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){(0,o.Dv)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){(0,o.Dv)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),En=Object.freeze({__proto__:null,forceLongPolling:function(){tn.forceDisallow(),Ye.forceAllow()},forceWebSockets:function(){Ye.forceDisallow()},isWebSocketsAvailable:function(){return tn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,u=void 0!==a&&a;$e(r);var c=new s.zt("auth-internal",new s.H0("database-standalone"));return c.setComponent(new s.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:bn.getInstance().databaseFromApp(e,c,n,u),namespace:o}}}),Tn=an;an.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},an.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Sn=nn,xn=et,In=Object.freeze({__proto__:null,DataConnection:Tn,RealTimeConnection:Sn,hijackHash:function(t){var e=an.prototype.put;return an.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){an.prototype.put=e}},ConnectionTarget:xn,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){bn.getInstance().forceRestClient(t)}}),Cn=wn.ServerValue;!function(e){$e(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new s.wA("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return bn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:pn,Query:te,Database:wn,DataSnapshot:Yt,enableLogging:b,INTERNAL:En,ServerValue:Cn,TEST_ACCESS:In}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},4594:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>p});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},4589:(t,e,n)=>{"use strict";n.d(e,{BH:()=>f,LL:()=>C,ZR:()=>I,gQ:()=>V,zI:()=>x,hu:()=>i,g5:()=>o,US:()=>s,h$:()=>u,$s:()=>Q,r3:()=>D,ne:()=>q,p$:()=>l,ZB:()=>h,gK:()=>z,z$:()=>p,GJ:()=>M,jU:()=>y,ru:()=>g,d:()=>_,xb:()=>F,w1:()=>b,hl:()=>T,uI:()=>d,UG:()=>v,Yr:()=>E,b$:()=>m,Mn:()=>w,w9:()=>O,cI:()=>N,UI:()=>j,xO:()=>U,DV:()=>L,ug:()=>Y,dS:()=>J,Pz:()=>P,Dv:()=>G,Wj:()=>W,lb:()=>K,eu:()=>S});var r=n(655),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return s.encodeByteArray(e,!0)},c=function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function v(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function g(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return p().indexOf("Electron/")>=0}function b(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return p().indexOf("MSAppHost/")>=0}function E(){return!1}function T(){return"indexedDB"in self&&null!=indexedDB}function S(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function x(){return!(!navigator||!navigator.cookieEnabled)}var I=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?A(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new I(i,s,r);return u},t}();function A(t,e){return t.replace(k,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var k=/\{\$([^}]+)}/g;function N(t){return JSON.parse(t)}function P(t){return JSON.stringify(t)}var R=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=N(c(o[0])||""),n=N(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},O=function(t){var e=R(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},M=function(t){var e=R(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var V=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function H(){}var G=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function W(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e,r)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e,r)+"must be a valid context object.")}var J=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Y=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Q(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},8655:(t,e,n)=>{n(5128).default.auth().onAuthStateChanged((function(t){t||window.location.assign("./login.html")}))},167:(t,e,n)=>{var r=n(5128);r.default.initializeApp({apiKey:"AIzaSyDIpxHzHlYDZ1jthEAl5FqVVvH1-Wa-iic",authDomain:"finances-270712.firebaseapp.com",databaseURL:"https://finances-270712.firebaseio.com",projectId:"finances-270712",storageBucket:"finances-270712.appspot.com",messagingSenderId:"974035741943",appId:"1:974035741943:web:f224ddab12679fe27477f2",measurementId:"G-ZKVF7P5MTW"}),document.querySelector("#logout-btn").addEventListener("click",(function(t){t.preventDefault(),r.default.auth().signOut(),window.location.assign("./login.html")}))},6632:(t,e,n)=>{function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){s(o,r,i,a,u,"next",t)}function u(t){s(o,r,i,a,u,"throw",t)}a(void 0)}))}}var c,l,h=n(5128),f=n(1332),p=n(3671),d=(n(8655),n(1332).tsv,h.default.firestore()),v=d.collection("months"),y=d.doc("settings/general");function g(t){return _.apply(this,arguments)}function _(){return(_=u(regeneratorRuntime.mark((function t(e){var n,o,a,s,u,c,l,h,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.target.result,t.prev=1,o=JSON.parse(n),t.next=10;break;case 5:return t.prev=5,t.t0=t.catch(1),t.next=9,b(n);case 9:o=t.sent;case 10:o=w(o),y.onSnapshot((function(t){return I(t)})),a={},s={},u=r(new Set(o.map((function(t){return E(t)})))),c=i(u),t.prev=16,c.s();case 18:if((l=c.n()).done){t.next=26;break}return m=l.value,s[m]=[],t.next=23,S(m);case 23:a[m]=t.sent;case 24:t.next=18;break;case 26:t.next=31;break;case 28:t.prev=28,t.t1=t.catch(16),c.e(t.t1);case 31:return t.prev=31,c.f(),t.finish(31);case 34:if(o.map((function(t){s[E(t)].push(t)})),"yes"==window.prompt("Are you sure you want to upload (yes/no)?").toLowerCase()){h=i(u);try{for(h.s();!(f=h.n()).done;)m=f.value,p=a[m].concat(s[m]),v.doc(m).set({transactions:p},{merge:!0}).then((function(){window.alert("Transactions uploaded successfully for month "+m)})).catch((function(t){window.alert("There was an issue uploading the transactions: ",t)}))}catch(t){h.e(t)}finally{h.f()}}else window.alert("No transactions will be uploaded");case 37:case"end":return t.stop()}}),t,null,[[1,5],[16,28,31,34]])})))).apply(this,arguments)}function b(t){return p().fromString(t).then((function(t){return t}))}function w(t){var e,n=t.map((function(t){return Object.fromEntries(Object.entries(t).map((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,n)||o(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],a=r[1];return[i.toLowerCase(),a]})))})),r=i(n);try{for(r.s();!(e=r.n()).done;)tx=e.value,tx.date=new Date(tx.date).toISOString().slice(0,10),"string"==typeof tx.tags&&(tx.tags=tx.tags.split(",")),tx.tags=tx.tags.map((function(t){return t.trim()}))}catch(t){r.e(t)}finally{r.f()}return n}function E(t){return t.date.slice(0,7)}function T(t){return v.doc(t).get().then((function(e){return e.exists?e.data():(function(t){t>l&&y.set({maxMonth:t},{merge:!0}),t<c&&y.set({minMonth:t},{merge:!0})}(t),{transactions:[]})})).catch((function(t){return console.log("Error getting documents: ",t),null}))}function S(t){return x.apply(this,arguments)}function x(){return(x=u(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:return n=t.sent,t.abrupt("return",n.transactions||[]);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){var e=t.data();c=e.minMonth,l=e.maxMonth}f.select("body").append("input").attr("type","file").attr("id","file-selector"),document.getElementById("file-selector").addEventListener("change",(function(){var t=new FileReader;t.onload=g,t.readAsText(this.files[0])}))},6266:(t,e,n)=>{n(5767),n(8132),n(8388),n(7470),n(4882),n(1520),n(7476),n(9622),n(9375),n(3533),n(4672),n(4157),n(5095),n(9892),n(5115),n(9176),n(8838),n(6253),n(9730),n(6059),n(8377),n(1084),n(4299),n(1246),n(726),n(1901),n(5972),n(3403),n(2516),n(9371),n(6479),n(1736),n(1889),n(5177),n(6943),n(6503),n(6786),n(932),n(7526),n(1591),n(9073),n(347),n(579),n(4669),n(7710),n(5789),n(3514),n(9978),n(8472),n(6946),n(5068),n(413),n(191),n(8306),n(4564),n(9115),n(9539),n(6620),n(2850),n(823),n(7732),n(856),n(703),n(1539),n(5292),n(6629),n(3694),n(7648),n(7795),n(4531),n(3605),n(6780),n(9937),n(511),n(1822),n(9977),n(1031),n(6331),n(1560),n(774),n(522),n(8295),n(7842),n(110),n(75),n(4336),n(1802),n(8837),n(6773),n(5745),n(3057),n(3750),n(3369),n(9564),n(2e3),n(8977),n(2310),n(4899),n(1842),n(6997),n(3946),n(8269),n(6108),n(6774),n(1466),n(9357),n(6142),n(1876),n(851),n(8416),n(8184),n(147),n(9192),n(142),n(1786),n(5368),n(6964),n(2152),n(4821),n(9103),n(1303),n(3318),n(162),n(3834),n(1572),n(2139),n(685),n(5535),n(7347),n(3049),n(6633),n(8989),n(8270),n(4510),n(3984),n(5769),n(55),n(6014),t.exports=n(5645)},911:(t,e,n)=>{n(1268),t.exports=n(5645).Array.flatMap},990:(t,e,n)=>{n(2773),t.exports=n(5645).Array.includes},5434:(t,e,n)=>{n(3276),t.exports=n(5645).Object.entries},8051:(t,e,n)=>{n(8351),t.exports=n(5645).Object.getOwnPropertyDescriptors},8250:(t,e,n)=>{n(6409),t.exports=n(5645).Object.values},4952:(t,e,n)=>{"use strict";n(851),n(9865),t.exports=n(5645).Promise.finally},6197:(t,e,n)=>{n(2770),t.exports=n(5645).String.padEnd},4160:(t,e,n)=>{n(1784),t.exports=n(5645).String.padStart},4039:(t,e,n)=>{n(4325),t.exports=n(5645).String.trimRight},6728:(t,e,n)=>{n(5869),t.exports=n(5645).String.trimLeft},3568:(t,e,n)=>{n(9665),t.exports=n(8787).f("asyncIterator")},115:(t,e,n)=>{n(4579),t.exports=n(1327).global},5663:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},2159:(t,e,n)=>{var r=n(6727);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},1327:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},9216:(t,e,n)=>{var r=n(5663);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},9666:(t,e,n)=>{t.exports=!n(7929)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},7467:(t,e,n)=>{var r=n(6727),i=n(3938).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},3856:(t,e,n)=>{var r=n(3938),i=n(1327),o=n(9216),a=n(1818),s=n(7069),u=function(t,e,n){var c,l,h,f=t&u.F,p=t&u.G,d=t&u.S,v=t&u.P,y=t&u.B,g=t&u.W,m=p?i:i[e]||(i[e]={}),_=m.prototype,b=p?r:d?r[e]:(r[e]||{}).prototype;for(c in p&&(n=e),n)(l=!f&&b&&void 0!==b[c])&&s(m,c)||(h=l?b[c]:n[c],m[c]=p&&"function"!=typeof b[c]?n[c]:y&&l?o(h,r):g&&b[c]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):v&&"function"==typeof h?o(Function.call,h):h,v&&((m.virtual||(m.virtual={}))[c]=h,t&u.R&&_&&!_[c]&&a(_,c,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},7929:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},3938:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},7069:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},1818:(t,e,n)=>{var r=n(4743),i=n(3101);t.exports=n(9666)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},3758:(t,e,n)=>{t.exports=!n(9666)&&!n(7929)((function(){return 7!=Object.defineProperty(n(7467)("div"),"a",{get:function(){return 7}}).a}))},6727:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},4743:(t,e,n)=>{var r=n(2159),i=n(3758),o=n(3206),a=Object.defineProperty;e.f=n(9666)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},3101:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},3206:(t,e,n)=>{var r=n(6727);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},4579:(t,e,n)=>{var r=n(3856);r(r.G,{global:n(3938)})},4963:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},3365:(t,e,n)=>{var r=n(2032);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},7722:(t,e,n)=>{var r=n(6314)("unscopables"),i=Array.prototype;null==i[r]&&n(7728)(i,r,{}),t.exports=function(t){i[r][t]=!0}},6793:(t,e,n)=>{"use strict";var r=n(4496)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},3328:t=>{t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},7007:(t,e,n)=>{var r=n(5286);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},5216:(t,e,n)=>{"use strict";var r=n(508),i=n(2337),o=n(875);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),h=1;for(u<s&&s<u+l&&(h=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=h,u+=h;return n}},6852:(t,e,n)=>{"use strict";var r=n(508),i=n(2337),o=n(875);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},9315:(t,e,n)=>{var r=n(2110),i=n(875),o=n(2337);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},50:(t,e,n)=>{var r=n(741),i=n(9797),o=n(508),a=n(875),s=n(6886);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,p=e||s;return function(e,s,d){for(var v,y,g=o(e),m=i(g),_=r(s,d,3),b=a(m.length),w=0,E=n?p(e,b):u?p(e,0):void 0;b>w;w++)if((f||w in m)&&(y=_(v=m[w],w,g),t))if(n)E[w]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:E.push(v)}else if(l)return!1;return h?-1:c||l?l:E}}},7628:(t,e,n)=>{var r=n(4963),i=n(508),o=n(9797),a=n(875);t.exports=function(t,e,n,s,u){r(e);var c=i(t),l=o(c),h=a(c.length),f=u?h-1:0,p=u?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=p;break}if(f+=p,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=p)f in l&&(s=e(s,l[f],f,c));return s}},2736:(t,e,n)=>{var r=n(5286),i=n(4302),o=n(6314)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},6886:(t,e,n)=>{var r=n(2736);t.exports=function(t,e){return new(r(t))(e)}},4398:(t,e,n)=>{"use strict";var r=n(4963),i=n(5286),o=n(7242),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},1488:(t,e,n)=>{var r=n(2032),i=n(6314)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},2032:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},9824:(t,e,n)=>{"use strict";var r=n(9275).f,i=n(2503),o=n(4408),a=n(741),s=n(3328),u=n(3531),c=n(2923),l=n(5436),h=n(2974),f=n(7057),p=n(4728).fastKey,d=n(1616),v=f?"_s":"size",y=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,null!=r&&u(r,n,t[c],t)}));return o(l.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),r=y(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){d(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(d(this,e),t)}}),f&&r(l.prototype,"size",{get:function(){return d(this,e)[v]}}),l},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,n){c(t,e,(function(t,n){this._t=d(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?l(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,l(1))}),n?"entries":"values",!n,!0),h(e)}}},3657:(t,e,n)=>{"use strict";var r=n(4408),i=n(4728).getWeak,o=n(7007),a=n(5286),s=n(3328),u=n(3531),c=n(50),l=n(9181),h=n(1616),f=c(5),p=c(6),d=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return f(t.a,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t((function(t,r){s(t,c,e,"_i"),t._t=e,t._i=d++,t._l=void 0,null!=r&&u(r,n,t[o],t)}));return r(c.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(h(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(h(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},5795:(t,e,n)=>{"use strict";var r=n(3816),i=n(2985),o=n(7234),a=n(4408),s=n(4728),u=n(3531),c=n(3328),l=n(5286),h=n(4253),f=n(7462),p=n(2943),d=n(266);t.exports=function(t,e,n,v,y,g){var m=r[t],_=m,b=y?"set":"add",w=_&&_.prototype,E={},T=function(t){var e=w[t];o(w,t,"delete"==t||"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(g||w.forEach&&!h((function(){(new _).entries().next()})))){var S=new _,x=S[b](g?{}:-0,1)!=S,I=h((function(){S.has(1)})),C=f((function(t){new _(t)})),A=!g&&h((function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)}));C||((_=e((function(e,n){c(e,_,t);var r=d(new m,e,_);return null!=n&&u(n,y,r[b],r),r}))).prototype=w,w.constructor=_),(I||A)&&(T("delete"),T("has"),y&&T("get")),(A||x)&&T(b),g&&w.clear&&delete w.clear}else _=v.getConstructor(e,t,y,b),a(_.prototype,n),s.NEED=!0;return p(_,t),E[t]=_,i(i.G+i.W+i.F*(_!=m),E),g||v.setStrong(_,t,y),_}},5645:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},2811:(t,e,n)=>{"use strict";var r=n(9275),i=n(681);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},741:(t,e,n)=>{var r=n(4963);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},3537:(t,e,n)=>{"use strict";var r=n(4253),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},870:(t,e,n)=>{"use strict";var r=n(7007),i=n(1689),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),t!=o)}},1355:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},7057:(t,e,n)=>{t.exports=!n(4253)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},2457:(t,e,n)=>{var r=n(5286),i=n(3816).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},4430:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},5541:(t,e,n)=>{var r=n(7184),i=n(4548),o=n(4682);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},2985:(t,e,n)=>{var r=n(3816),i=n(5645),o=n(7728),a=n(7234),s=n(741),u=function(t,e,n){var c,l,h,f,p=t&u.F,d=t&u.G,v=t&u.S,y=t&u.P,g=t&u.B,m=d?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,_=d?i:i[e]||(i[e]={}),b=_.prototype||(_.prototype={});for(c in d&&(n=e),n)h=((l=!p&&m&&void 0!==m[c])?m:n)[c],f=g&&l?s(h,r):y&&"function"==typeof h?s(Function.call,h):h,m&&a(m,c,h,t&u.U),_[c]!=h&&o(_,c,f),y&&b[c]!=h&&(b[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},8852:(t,e,n)=>{var r=n(6314)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},4253:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},8082:(t,e,n)=>{"use strict";n(8269);var r=n(7234),i=n(7728),o=n(4253),a=n(1355),s=n(6314),u=n(1165),c=s("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=s(t),p=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),d=p?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!e})):void 0;if(!p||!d||"replace"===t&&!l||"split"===t&&!h){var v=/./[f],y=n(a,f,""[t],(function(t,e,n,r,i){return e.exec===u?p&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=y[0],m=y[1];r(String.prototype,t,g),i(RegExp.prototype,f,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},3218:(t,e,n)=>{"use strict";var r=n(7007);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},3325:(t,e,n)=>{"use strict";var r=n(4302),i=n(5286),o=n(875),a=n(741),s=n(6314)("isConcatSpreadable");t.exports=function t(e,n,u,c,l,h,f,p){for(var d,v,y=l,g=0,m=!!f&&a(f,p,3);g<c;){if(g in u){if(d=m?m(u[g],g,n):u[g],v=!1,i(d)&&(v=void 0!==(v=d[s])?!!v:r(d)),v&&h>0)y=t(e,n,d,o(d.length),y,h-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=d}y++}g++}return y}},3531:(t,e,n)=>{var r=n(741),i=n(8851),o=n(6555),a=n(7007),s=n(875),u=n(9002),c={},l={},h=t.exports=function(t,e,n,h,f){var p,d,v,y,g=f?function(){return t}:u(t),m=r(n,h,e?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=s(t.length);p>_;_++)if((y=e?m(a(d=t[_])[0],d[1]):m(t[_]))===c||y===l)return y}else for(v=g.call(t);!(d=v.next()).done;)if((y=i(v,m,d.value,e))===c||y===l)return y};h.BREAK=c,h.RETURN=l},18:(t,e,n)=>{t.exports=n(3825)("native-function-to-string",Function.toString)},3816:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},9181:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},7728:(t,e,n)=>{var r=n(9275),i=n(681);t.exports=n(7057)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},639:(t,e,n)=>{var r=n(3816).document;t.exports=r&&r.documentElement},1734:(t,e,n)=>{t.exports=!n(7057)&&!n(4253)((function(){return 7!=Object.defineProperty(n(2457)("div"),"a",{get:function(){return 7}}).a}))},266:(t,e,n)=>{var r=n(5286),i=n(7375).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},7242:t=>{t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},9797:(t,e,n)=>{var r=n(2032);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},6555:(t,e,n)=>{var r=n(2803),i=n(6314)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},4302:(t,e,n)=>{var r=n(2032);t.exports=Array.isArray||function(t){return"Array"==r(t)}},8367:(t,e,n)=>{var r=n(5286),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},5286:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},5364:(t,e,n)=>{var r=n(5286),i=n(2032),o=n(6314)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},8851:(t,e,n)=>{var r=n(7007);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},9988:(t,e,n)=>{"use strict";var r=n(2503),i=n(681),o=n(2943),a={};n(7728)(a,n(6314)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},2923:(t,e,n)=>{"use strict";var r=n(4461),i=n(2985),o=n(7234),a=n(7728),s=n(2803),u=n(9988),c=n(2943),l=n(468),h=n(6314)("iterator"),f=!([].keys&&"next"in[].keys()),p="keys",d="values",v=function(){return this};t.exports=function(t,e,n,y,g,m,_){u(n,e,y);var b,w,E,T=function(t){if(!f&&t in C)return C[t];switch(t){case p:case d:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",x=g==d,I=!1,C=t.prototype,A=C[h]||C["@@iterator"]||g&&C[g],k=A||T(g),N=g?x?T("entries"):k:void 0,P="Array"==e&&C.entries||A;if(P&&(E=l(P.call(new t)))!==Object.prototype&&E.next&&(c(E,S,!0),r||"function"==typeof E[h]||a(E,h,v)),x&&A&&A.name!==d&&(I=!0,k=function(){return A.call(this)}),r&&!_||!f&&!I&&C[h]||a(C,h,k),s[e]=k,s[S]=v,g)if(b={values:x?k:T(d),keys:m?k:T(p),entries:N},_)for(w in b)w in C||o(C,w,b[w]);else i(i.P+i.F*(f||I),e,b);return b}},7462:(t,e,n)=>{var r=n(6314)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},5436:t=>{t.exports=function(t,e){return{value:e,done:!!t}}},2803:t=>{t.exports={}},4461:t=>{t.exports=!1},3086:t=>{var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},4934:(t,e,n)=>{var r=n(1801),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),c=r(t);return i<u?c*(i/u/a+1/o-1/o)*u*a:(n=(e=(1+a/o)*i)-(e-i))>s||n!=n?c*(1/0):c*n}},6206:t=>{t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},1801:t=>{t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},4728:(t,e,n)=>{var r=n(3953)("meta"),i=n(5286),o=n(9181),a=n(9275).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(4253)((function(){return u(Object.preventExtensions({}))})),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t}}},4351:(t,e,n)=>{var r=n(3816),i=n(4193).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(2032)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var h=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},3499:(t,e,n)=>{"use strict";var r=n(4963);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},5345:(t,e,n)=>{"use strict";var r=n(7057),i=n(7184),o=n(4548),a=n(4682),s=n(508),u=n(9797),c=Object.assign;t.exports=!c||n(4253)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r}))?function(t,e){for(var n=s(t),c=arguments.length,l=1,h=o.f,f=a.f;c>l;)for(var p,d=u(arguments[l++]),v=h?i(d).concat(h(d)):i(d),y=v.length,g=0;y>g;)p=v[g++],r&&!f.call(d,p)||(n[p]=d[p]);return n}:c},2503:(t,e,n)=>{var r=n(7007),i=n(5588),o=n(4430),a=n(9335)("IE_PROTO"),s=function(){},u=function(){var t,e=n(2457)("iframe"),r=o.length;for(e.style.display="none",n(639).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},9275:(t,e,n)=>{var r=n(7007),i=n(1734),o=n(1689),a=Object.defineProperty;e.f=n(7057)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},5588:(t,e,n)=>{var r=n(9275),i=n(7007),o=n(7184);t.exports=n(7057)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},8693:(t,e,n)=>{var r=n(4682),i=n(681),o=n(2110),a=n(1689),s=n(9181),u=n(1734),c=Object.getOwnPropertyDescriptor;e.f=n(7057)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},9327:(t,e,n)=>{var r=n(2110),i=n(616).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},616:(t,e,n)=>{var r=n(189),i=n(4430).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},4548:(t,e)=>{e.f=Object.getOwnPropertySymbols},468:(t,e,n)=>{var r=n(9181),i=n(508),o=n(9335)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},189:(t,e,n)=>{var r=n(9181),i=n(2110),o=n(9315)(!1),a=n(9335)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},7184:(t,e,n)=>{var r=n(189),i=n(4430);t.exports=Object.keys||function(t){return r(t,i)}},4682:(t,e)=>{e.f={}.propertyIsEnumerable},3160:(t,e,n)=>{var r=n(2985),i=n(5645),o=n(4253);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},1131:(t,e,n)=>{var r=n(7057),i=n(7184),o=n(2110),a=n(4682).f;t.exports=function(t){return function(e){for(var n,s=o(e),u=i(s),c=u.length,l=0,h=[];c>l;)n=u[l++],r&&!a.call(s,n)||h.push(t?[n,s[n]]:s[n]);return h}}},7643:(t,e,n)=>{var r=n(616),i=n(4548),o=n(7007),a=n(3816).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},7743:(t,e,n)=>{var r=n(3816).parseFloat,i=n(9599).trim;t.exports=1/r(n(4644)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},5960:(t,e,n)=>{var r=n(3816).parseInt,i=n(9599).trim,o=n(4644),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},188:t=>{t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},94:(t,e,n)=>{var r=n(7007),i=n(5286),o=n(3499);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},681:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4408:(t,e,n)=>{var r=n(7234);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},7234:(t,e,n)=>{var r=n(3816),i=n(7728),o=n(9181),a=n(3953)("src"),s=n(18),u="toString",c=(""+s).split(u);n(5645).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,a)||i(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[a]||s.call(this)}))},7787:(t,e,n)=>{"use strict";var r=n(1488),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},1165:(t,e,n)=>{"use strict";var r,i,o=n(3218),a=RegExp.prototype.exec,s=String.prototype.replace,u=a,c=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(t){var e,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),c&&(e=u.lastIndex),r=a.call(u,t),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=u},7195:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},7375:(t,e,n)=>{var r=n(5286),i=n(7007),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(741)(Function.call,n(8693).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},2974:(t,e,n)=>{"use strict";var r=n(3816),i=n(9275),o=n(7057),a=n(6314)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},2943:(t,e,n)=>{var r=n(9275).f,i=n(9181),o=n(6314)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},9335:(t,e,n)=>{var r=n(3825)("keys"),i=n(3953);t.exports=function(t){return r[t]||(r[t]=i(t))}},3825:(t,e,n)=>{var r=n(5645),i=n(3816),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(4461)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},8364:(t,e,n)=>{var r=n(7007),i=n(4963),o=n(6314)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},7717:(t,e,n)=>{"use strict";var r=n(4253);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},4496:(t,e,n)=>{var r=n(1467),i=n(1355);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},2094:(t,e,n)=>{var r=n(5364),i=n(1355);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},9395:(t,e,n)=>{var r=n(2985),i=n(4253),o=n(1355),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},5442:(t,e,n)=>{var r=n(875),i=n(8595),o=n(1355);t.exports=function(t,e,n,a){var s=String(o(t)),u=s.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return s;var h=l-u,f=i.call(c,Math.ceil(h/c.length));return f.length>h&&(f=f.slice(0,h)),a?f+s:s+f}},8595:(t,e,n)=>{"use strict";var r=n(1467),i=n(1355);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},9599:(t,e,n)=>{var r=n(2985),i=n(1355),o=n(4253),a=n(4644),s="["+a+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(t,e,n){var i={},s=o((function(){return!!a[t]()||"​"!="​"[t]()})),u=i[t]=s?e(h):a[t];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},4644:t=>{t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},4193:(t,e,n)=>{var r,i,o,a=n(741),s=n(7242),u=n(639),c=n(2457),l=n(3816),h=l.process,f=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=l.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},_=function(t){m.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},p=function(t){delete g[t]},"process"==n(2032)(h)?r=function(t){h.nextTick(a(m,t,1))}:v&&v.now?r=function(t){v.now(a(m,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:f,clear:p}},2337:(t,e,n)=>{var r=n(1467),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},4843:(t,e,n)=>{var r=n(1467),i=n(875);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},1467:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},2110:(t,e,n)=>{var r=n(9797),i=n(1355);t.exports=function(t){return r(i(t))}},875:(t,e,n)=>{var r=n(1467),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},508:(t,e,n)=>{var r=n(1355);t.exports=function(t){return Object(r(t))}},1689:(t,e,n)=>{var r=n(5286);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},8440:(t,e,n)=>{"use strict";if(n(7057)){var r=n(4461),i=n(3816),o=n(4253),a=n(2985),s=n(9383),u=n(1125),c=n(741),l=n(3328),h=n(681),f=n(7728),p=n(4408),d=n(1467),v=n(875),y=n(4843),g=n(2337),m=n(1689),_=n(9181),b=n(1488),w=n(5286),E=n(508),T=n(6555),S=n(2503),x=n(468),I=n(616).f,C=n(9002),A=n(3953),k=n(6314),N=n(50),P=n(9315),R=n(8364),O=n(6997),M=n(2803),D=n(7462),L=n(2974),F=n(6852),j=n(5216),U=n(9275),V=n(8693),q=U.f,B=V.f,H=i.RangeError,G=i.TypeError,z=i.Uint8Array,W="ArrayBuffer",K="SharedArrayBuffer",J="BYTES_PER_ELEMENT",Y=Array.prototype,Q=u.ArrayBuffer,X=u.DataView,$=N(0),Z=N(2),tt=N(3),et=N(4),nt=N(5),rt=N(6),it=P(!0),ot=P(!1),at=O.values,st=O.keys,ut=O.entries,ct=Y.lastIndexOf,lt=Y.reduce,ht=Y.reduceRight,ft=Y.join,pt=Y.sort,dt=Y.slice,vt=Y.toString,yt=Y.toLocaleString,gt=k("iterator"),mt=k("toStringTag"),_t=A("typed_constructor"),bt=A("def_constructor"),wt=s.CONSTR,Et=s.TYPED,Tt=s.VIEW,St="Wrong length!",xt=N(1,(function(t,e){return Nt(R(t,t[bt]),e)})),It=o((function(){return 1===new z(new Uint16Array([1]).buffer)[0]})),Ct=!!z&&!!z.prototype.set&&o((function(){new z(1).set({})})),At=function(t,e){var n=d(t);if(n<0||n%e)throw H("Wrong offset!");return n},kt=function(t){if(w(t)&&Et in t)return t;throw G(t+" is not a typed array!")},Nt=function(t,e){if(!w(t)||!(_t in t))throw G("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Rt(R(t,t[bt]),e)},Rt=function(t,e){for(var n=0,r=e.length,i=Nt(t,r);r>n;)i[n]=e[n++];return i},Ot=function(t,e,n){q(t,e,{get:function(){return this._d[n]}})},Mt=function(t){var e,n,r,i,o,a,s=E(t),u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,f=C(s);if(null!=f&&!T(f)){for(a=f.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(h&&u>2&&(l=c(l,arguments[2],2)),e=0,n=v(s.length),i=Nt(this,n);n>e;e++)i[e]=h?l(s[e],e):s[e];return i},Dt=function(){for(var t=0,e=arguments.length,n=Nt(this,e);e>t;)n[t]=arguments[t++];return n},Lt=!!z&&o((function(){yt.call(new z(1))})),Ft=function(){return yt.apply(Lt?dt.call(kt(this)):kt(this),arguments)},jt={copyWithin:function(t,e){return j.call(kt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return et(kt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return F.apply(kt(this),arguments)},filter:function(t){return Pt(this,Z(kt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return nt(kt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return rt(kt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){$(kt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ot(kt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(kt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ft.apply(kt(this),arguments)},lastIndexOf:function(t){return ct.apply(kt(this),arguments)},map:function(t){return xt(kt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(kt(this),arguments)},reduceRight:function(t){return ht.apply(kt(this),arguments)},reverse:function(){for(var t,e=this,n=kt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return tt(kt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(kt(this),t)},subarray:function(t,e){var n=kt(this),r=n.length,i=g(t,r);return new(R(n,n[bt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===e?r:g(e,r))-i))}},Ut=function(t,e){return Pt(this,dt.call(kt(this),t,e))},Vt=function(t){kt(this);var e=At(arguments[1],1),n=this.length,r=E(t),i=v(r.length),o=0;if(i+e>n)throw H(St);for(;o<i;)this[e+o]=r[o++]},qt={entries:function(){return ut.call(kt(this))},keys:function(){return st.call(kt(this))},values:function(){return at.call(kt(this))}},Bt=function(t,e){return w(t)&&t[Et]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ht=function(t,e){return Bt(t,e=m(e,!0))?h(2,t[e]):B(t,e)},Gt=function(t,e,n){return!(Bt(t,e=m(e,!0))&&w(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?q(t,e,n):(t[e]=n.value,t)};wt||(V.f=Ht,U.f=Gt),a(a.S+a.F*!wt,"Object",{getOwnPropertyDescriptor:Ht,defineProperty:Gt}),o((function(){vt.call({})}))&&(vt=yt=function(){return ft.call(this)});var zt=p({},jt);p(zt,qt),f(zt,gt,qt.values),p(zt,{slice:Ut,set:Vt,constructor:function(){},toString:vt,toLocaleString:Ft}),Ot(zt,"buffer","b"),Ot(zt,"byteOffset","o"),Ot(zt,"byteLength","l"),Ot(zt,"length","e"),q(zt,mt,{get:function(){return this[Et]}}),t.exports=function(t,e,n,u){var c=t+((u=!!u)?"Clamped":"")+"Array",h="get"+t,p="set"+t,d=i[c],g=d||{},m=d&&x(d),_=!d||!s.ABV,E={},T=d&&d.prototype,C=function(t,n){q(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[h](n*e+r.o,It)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[p](n*e+i.o,r,It)}(this,n,t)},enumerable:!0})};_?(d=n((function(t,n,r,i){l(t,d,c,"_d");var o,a,s,u,h=0,p=0;if(w(n)){if(!(n instanceof Q||(u=b(n))==W||u==K))return Et in n?Rt(d,n):Mt.call(d,n);o=n,p=At(r,e);var g=n.byteLength;if(void 0===i){if(g%e)throw H(St);if((a=g-p)<0)throw H(St)}else if((a=v(i)*e)+p>g)throw H(St);s=a/e}else s=y(n),o=new Q(a=s*e);for(f(t,"_d",{b:o,o:p,l:a,e:s,v:new X(o)});h<s;)C(t,h++)})),T=d.prototype=S(zt),f(T,"constructor",d)):o((function(){d(1)}))&&o((function(){new d(-1)}))&&D((function(t){new d,new d(null),new d(1.5),new d(t)}),!0)||(d=n((function(t,n,r,i){var o;return l(t,d,c),w(n)?n instanceof Q||(o=b(n))==W||o==K?void 0!==i?new g(n,At(r,e),i):void 0!==r?new g(n,At(r,e)):new g(n):Et in n?Rt(d,n):Mt.call(d,n):new g(y(n))})),$(m!==Function.prototype?I(g).concat(I(m)):I(g),(function(t){t in d||f(d,t,g[t])})),d.prototype=T,r||(T.constructor=d));var A=T[gt],k=!!A&&("values"==A.name||null==A.name),N=qt.values;f(d,_t,!0),f(T,Et,c),f(T,Tt,!0),f(T,bt,d),(u?new d(1)[mt]==c:mt in T)||q(T,mt,{get:function(){return c}}),E[c]=d,a(a.G+a.W+a.F*(d!=g),E),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o((function(){g.of.call(d,1)})),c,{from:Mt,of:Dt}),J in T||f(T,J,e),a(a.P,c,jt),L(c),a(a.P+a.F*Ct,c,{set:Vt}),a(a.P+a.F*!k,c,qt),r||T.toString==vt||(T.toString=vt),a(a.P+a.F*o((function(){new d(1).slice()})),c,{slice:Ut}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!o((function(){T.toLocaleString.call([1,2])}))),c,{toLocaleString:Ft}),M[c]=k?A:N,r||k||f(T,gt,N)}}else t.exports=function(){}},1125:(t,e,n)=>{"use strict";var r=n(3816),i=n(7057),o=n(4461),a=n(9383),s=n(7728),u=n(4408),c=n(4253),l=n(3328),h=n(1467),f=n(875),p=n(4843),d=n(616).f,v=n(9275).f,y=n(6852),g=n(2943),m="ArrayBuffer",_="DataView",b="Wrong index!",w=r.ArrayBuffer,E=r.DataView,T=r.Math,S=r.RangeError,x=r.Infinity,I=w,C=T.abs,A=T.pow,k=T.floor,N=T.log,P=T.LN2,R="buffer",O="byteLength",M="byteOffset",D=i?"_b":R,L=i?"_l":O,F=i?"_o":M;function j(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,l=23===e?A(2,-24)-A(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=C(t))!=t||t===x?(i=t!=t?1:0,r=u):(r=k(N(t)/P),t*(o=A(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?l/o:l*A(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*A(2,e),r+=c):(i=t*A(2,c-1)*A(2,e),r=0));e>=8;a[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function U(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-x:x;r+=A(2,e),l-=a}return(c?-1:1)*r*A(2,l-e)}function V(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function q(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function H(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function G(t){return j(t,52,8)}function z(t){return j(t,23,4)}function W(t,e,n){v(t.prototype,e,{get:function(){return this[n]}})}function K(t,e,n,r){var i=p(+n);if(i+e>t[L])throw S(b);var o=t[D]._b,a=i+t[F],s=o.slice(a,a+e);return r?s:s.reverse()}function J(t,e,n,r,i,o){var a=p(+n);if(a+e>t[L])throw S(b);for(var s=t[D]._b,u=a+t[F],c=r(+i),l=0;l<e;l++)s[u+l]=c[o?l:e-l-1]}if(a.ABV){if(!c((function(){w(1)}))||!c((function(){new w(-1)}))||c((function(){return new w,new w(1.5),new w(NaN),w.name!=m}))){for(var Y,Q=(w=function(t){return l(this,w),new I(p(t))}).prototype=I.prototype,X=d(I),$=0;X.length>$;)(Y=X[$++])in w||s(w,Y,I[Y]);o||(Q.constructor=w)}var Z=new E(new w(2)),tt=E.prototype.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||u(E.prototype,{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else w=function(t){l(this,w,m);var e=p(t);this._b=y.call(new Array(e),0),this[L]=e},E=function(t,e,n){l(this,E,_),l(t,w,_);var r=t[L],i=h(e);if(i<0||i>r)throw S("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw S("Wrong length!");this[D]=t,this[F]=i,this[L]=n},i&&(W(w,O,"_l"),W(E,R,"_b"),W(E,O,"_l"),W(E,M,"_o")),u(E.prototype,{getInt8:function(t){return K(this,1,t)[0]<<24>>24},getUint8:function(t){return K(this,1,t)[0]},getInt16:function(t){var e=K(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=K(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return V(K(this,4,t,arguments[1]))},getUint32:function(t){return V(K(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return U(K(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return U(K(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){J(this,1,t,q,e)},setUint8:function(t,e){J(this,1,t,q,e)},setInt16:function(t,e){J(this,2,t,B,e,arguments[2])},setUint16:function(t,e){J(this,2,t,B,e,arguments[2])},setInt32:function(t,e){J(this,4,t,H,e,arguments[2])},setUint32:function(t,e){J(this,4,t,H,e,arguments[2])},setFloat32:function(t,e){J(this,4,t,z,e,arguments[2])},setFloat64:function(t,e){J(this,8,t,G,e,arguments[2])}});g(w,m),g(E,_),s(E.prototype,a.VIEW,!0),e.ArrayBuffer=w,e.DataView=E},9383:(t,e,n)=>{for(var r,i=n(3816),o=n(7728),a=n(3953),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},3953:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},575:(t,e,n)=>{var r=n(3816).navigator;t.exports=r&&r.userAgent||""},1616:(t,e,n)=>{var r=n(5286);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},6074:(t,e,n)=>{var r=n(3816),i=n(5645),o=n(4461),a=n(8787),s=n(9275).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},8787:(t,e,n)=>{e.f=n(6314)},6314:(t,e,n)=>{var r=n(3825)("wks"),i=n(3953),o=n(3816).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},9002:(t,e,n)=>{var r=n(1488),i=n(6314)("iterator"),o=n(2803);t.exports=n(5645).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},2e3:(t,e,n)=>{var r=n(2985);r(r.P,"Array",{copyWithin:n(5216)}),n(7722)("copyWithin")},5745:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(4);r(r.P+r.F*!n(7717)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},8977:(t,e,n)=>{var r=n(2985);r(r.P,"Array",{fill:n(6852)}),n(7722)("fill")},8837:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(2);r(r.P+r.F*!n(7717)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},4899:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(7722)(o)},2310:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(5),o="find",a=!0;o in[]&&Array(1).find((function(){a=!1})),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(7722)(o)},4336:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(0),o=n(7717)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},522:(t,e,n)=>{"use strict";var r=n(741),i=n(2985),o=n(508),a=n(8851),s=n(6555),u=n(875),c=n(2811),l=n(9002);i(i.S+i.F*!n(7462)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,h,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,g=0,m=l(f);if(y&&(v=r(v,d>2?arguments[2]:void 0,2)),null==m||p==Array&&s(m))for(n=new p(e=u(f.length));e>g;g++)c(n,g,y?v(f[g],g):f[g]);else for(h=m.call(f),n=new p;!(i=h.next()).done;g++)c(n,g,y?a(h,v,[i.value,g],!0):i.value);return n.length=g,n}})},3369:(t,e,n)=>{"use strict";var r=n(2985),i=n(9315)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(7717)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},774:(t,e,n)=>{var r=n(2985);r(r.S,"Array",{isArray:n(4302)})},6997:(t,e,n)=>{"use strict";var r=n(7722),i=n(5436),o=n(2803),a=n(2110);t.exports=n(2923)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},7842:(t,e,n)=>{"use strict";var r=n(2985),i=n(2110),o=[].join;r(r.P+r.F*(n(9797)!=Object||!n(7717)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},9564:(t,e,n)=>{"use strict";var r=n(2985),i=n(2110),o=n(1467),a=n(875),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(7717)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},1802:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(1);r(r.P+r.F*!n(7717)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},8295:(t,e,n)=>{"use strict";var r=n(2985),i=n(2811);r(r.S+r.F*n(4253)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},3750:(t,e,n)=>{"use strict";var r=n(2985),i=n(7628);r(r.P+r.F*!n(7717)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},3057:(t,e,n)=>{"use strict";var r=n(2985),i=n(7628);r(r.P+r.F*!n(7717)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},110:(t,e,n)=>{"use strict";var r=n(2985),i=n(639),o=n(2032),a=n(2337),s=n(875),u=[].slice;r(r.P+r.F*n(4253)((function(){i&&u.call(i)})),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=a(t,n),c=a(e,n),l=s(c-i),h=new Array(l),f=0;f<l;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},6773:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(3);r(r.P+r.F*!n(7717)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},75:(t,e,n)=>{"use strict";var r=n(2985),i=n(4963),o=n(508),a=n(4253),s=[].sort,u=[1,2,3];r(r.P+r.F*(a((function(){u.sort(void 0)}))||!a((function(){u.sort(null)}))||!n(7717)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},1842:(t,e,n)=>{n(2974)("Array")},1822:(t,e,n)=>{var r=n(2985);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},1031:(t,e,n)=>{var r=n(2985),i=n(3537);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},9977:(t,e,n)=>{"use strict";var r=n(2985),i=n(508),o=n(1689);r(r.P+r.F*n(4253)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},1560:(t,e,n)=>{var r=n(6314)("toPrimitive"),i=Date.prototype;r in i||n(7728)(i,r,n(870))},6331:(t,e,n)=>{var r=Date.prototype,i="Invalid Date",o=r.toString,a=r.getTime;new Date(NaN)+""!=i&&n(7234)(r,"toString",(function(){var t=a.call(this);return t==t?o.call(this):i}))},9730:(t,e,n)=>{var r=n(2985);r(r.P,"Function",{bind:n(4398)})},8377:(t,e,n)=>{"use strict";var r=n(5286),i=n(468),o=n(6314)("hasInstance"),a=Function.prototype;o in a||n(9275).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},6059:(t,e,n)=>{var r=n(9275).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||n(7057)&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8416:(t,e,n)=>{"use strict";var r=n(9824),i=n(1616),o="Map";t.exports=n(5795)(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,o),t);return e&&e.v},set:function(t,e){return r.def(i(this,o),0===t?0:t,e)}},r,!0)},6503:(t,e,n)=>{var r=n(2985),i=n(6206),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},6786:(t,e,n)=>{var r=n(2985),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},932:(t,e,n)=>{var r=n(2985),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},7526:(t,e,n)=>{var r=n(2985),i=n(1801);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},1591:(t,e,n)=>{var r=n(2985);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},9073:(t,e,n)=>{var r=n(2985),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},347:(t,e,n)=>{var r=n(2985),i=n(3086);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},579:(t,e,n)=>{var r=n(2985);r(r.S,"Math",{fround:n(4934)})},4669:(t,e,n)=>{var r=n(2985),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},7710:(t,e,n)=>{var r=n(2985),i=Math.imul;r(r.S+r.F*n(4253)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},5789:(t,e,n)=>{var r=n(2985);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},3514:(t,e,n)=>{var r=n(2985);r(r.S,"Math",{log1p:n(6206)})},9978:(t,e,n)=>{var r=n(2985);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},8472:(t,e,n)=>{var r=n(2985);r(r.S,"Math",{sign:n(1801)})},6946:(t,e,n)=>{var r=n(2985),i=n(3086),o=Math.exp;r(r.S+r.F*n(4253)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},5068:(t,e,n)=>{var r=n(2985),i=n(3086),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},413:(t,e,n)=>{var r=n(2985);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},1246:(t,e,n)=>{"use strict";var r=n(3816),i=n(9181),o=n(2032),a=n(266),s=n(1689),u=n(4253),c=n(616).f,l=n(8693).f,h=n(9275).f,f=n(9599).trim,p="Number",d=r.Number,v=d,y=d.prototype,g=o(n(2503)(y))==p,m="trim"in String.prototype,_=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=m?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?u((function(){y.valueOf.call(n)})):o(n)!=p)?a(new v(_(e)),n,d):_(e)};for(var b,w=n(7057)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;w.length>E;E++)i(v,b=w[E])&&!i(d,b)&&h(d,b,l(v,b));d.prototype=y,y.constructor=d,n(7234)(r,p,d)}},5972:(t,e,n)=>{var r=n(2985);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},3403:(t,e,n)=>{var r=n(2985),i=n(3816).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},2516:(t,e,n)=>{var r=n(2985);r(r.S,"Number",{isInteger:n(8367)})},9371:(t,e,n)=>{var r=n(2985);r(r.S,"Number",{isNaN:function(t){return t!=t}})},6479:(t,e,n)=>{var r=n(2985),i=n(8367),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},1736:(t,e,n)=>{var r=n(2985);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},1889:(t,e,n)=>{var r=n(2985);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},5177:(t,e,n)=>{var r=n(2985),i=n(7743);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},6943:(t,e,n)=>{var r=n(2985),i=n(5960);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},726:(t,e,n)=>{"use strict";var r=n(2985),i=n(1467),o=n(3365),a=n(8595),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",h="0",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},p=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call(h,7-n.length)+n}return e},v=function(t,e,n){return 0===e?n:e%2==1?v(t,e-1,n*t):v(t*t,e/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4253)((function(){s.call({})}))),"Number",{toFixed:function(t){var e,n,r,s,u=o(this,l),c=i(t),y="",g=h;if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*v(2,69,1))-69)<0?u*v(2,-e,1):u/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(v(10,r,1),0),r=e-1;r>=23;)p(1<<23),r-=23;p(1<<r),f(1,1),p(2),g=d()}else f(0,n),f(1<<-e,0),g=d()+a.call(h,c);return c>0?y+((s=g.length)<=c?"0."+a.call(h,c-s)+g:g.slice(0,s-c)+"."+g.slice(s-c)):y+g}})},1901:(t,e,n)=>{"use strict";var r=n(2985),i=n(4253),o=n(3365),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},5115:(t,e,n)=>{var r=n(2985);r(r.S+r.F,"Object",{assign:n(5345)})},8132:(t,e,n)=>{var r=n(2985);r(r.S,"Object",{create:n(2503)})},7470:(t,e,n)=>{var r=n(2985);r(r.S+r.F*!n(7057),"Object",{defineProperties:n(5588)})},8388:(t,e,n)=>{var r=n(2985);r(r.S+r.F*!n(7057),"Object",{defineProperty:n(9275).f})},9375:(t,e,n)=>{var r=n(5286),i=n(4728).onFreeze;n(3160)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},4882:(t,e,n)=>{var r=n(2110),i=n(8693).f;n(3160)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},9622:(t,e,n)=>{n(3160)("getOwnPropertyNames",(function(){return n(9327).f}))},1520:(t,e,n)=>{var r=n(508),i=n(468);n(3160)("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},9892:(t,e,n)=>{var r=n(5286);n(3160)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},4157:(t,e,n)=>{var r=n(5286);n(3160)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},5095:(t,e,n)=>{var r=n(5286);n(3160)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},9176:(t,e,n)=>{var r=n(2985);r(r.S,"Object",{is:n(7195)})},7476:(t,e,n)=>{var r=n(508),i=n(7184);n(3160)("keys",(function(){return function(t){return i(r(t))}}))},4672:(t,e,n)=>{var r=n(5286),i=n(4728).onFreeze;n(3160)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},3533:(t,e,n)=>{var r=n(5286),i=n(4728).onFreeze;n(3160)("seal",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},8838:(t,e,n)=>{var r=n(2985);r(r.S,"Object",{setPrototypeOf:n(7375).set})},6253:(t,e,n)=>{"use strict";var r=n(1488),i={};i[n(6314)("toStringTag")]="z",i+""!="[object z]"&&n(7234)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},4299:(t,e,n)=>{var r=n(2985),i=n(7743);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},1084:(t,e,n)=>{var r=n(2985),i=n(5960);r(r.G+r.F*(parseInt!=i),{parseInt:i})},851:(t,e,n)=>{"use strict";var r,i,o,a,s=n(4461),u=n(3816),c=n(741),l=n(1488),h=n(2985),f=n(5286),p=n(4963),d=n(3328),v=n(3531),y=n(8364),g=n(4193).set,m=n(4351)(),_=n(3499),b=n(188),w=n(575),E=n(94),T="Promise",S=u.TypeError,x=u.process,I=x&&x.versions,C=I&&I.v8||"",A=u.Promise,k="process"==l(x),N=function(){},P=i=_.f,R=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(6314)("species")]=function(t){t(N,N)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(N)instanceof e&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),O=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;m((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(i||(2==t._h&&F(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?c(S("Promise-chain cycle")):(o=O(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!a&&l.exit(),c(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&D(t)}))}},D=function(t){g.call(u,(function(){var e,n,r,i=t._v,o=L(t);if(o&&(e=b((function(){k?x.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=k||L(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){g.call(u,(function(){var e;k?x.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},j=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},U=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=O(t))?m((function(){var r={_w:n,_d:!1};try{e.call(t,c(U,r,1),c(j,r,1))}catch(t){j.call(r,t)}})):(n._v=t,n._s=1,M(n,!1))}catch(t){j.call({_w:n,_d:!1},t)}}};R||(A=function(t){d(this,A,T,"_h"),p(t),r.call(this);try{t(c(U,this,1),c(j,this,1))}catch(t){j.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(4408)(A.prototype,{then:function(t,e){var n=P(y(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(U,t,1),this.reject=c(j,t,1)},_.f=P=function(t){return t===A||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!R,{Promise:A}),n(2943)(A,T),n(2974)(T),a=n(5645).Promise,h(h.S+h.F*!R,T,{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!R),T,{resolve:function(t){return E(s&&this===a?A:this,t)}}),h(h.S+h.F*!(R&&n(7462)((function(t){A.all(t).catch(N)}))),T,{all:function(t){var e=this,n=P(e),r=n.resolve,i=n.reject,o=b((function(){var n=[],o=0,a=1;v(t,!1,(function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=P(e),r=n.reject,i=b((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},1572:(t,e,n)=>{var r=n(2985),i=n(4963),o=n(7007),a=(n(3816).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(4253)((function(){a((function(){}))})),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return a?a(r,e,u):s.call(r,e,u)}})},2139:(t,e,n)=>{var r=n(2985),i=n(2503),o=n(4963),a=n(7007),s=n(5286),u=n(4253),c=n(4398),l=(n(3816).Reflect||{}).construct,h=u((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),f=!u((function(){l((function(){}))}));r(r.S+r.F*(h||f),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,p=i(s(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},685:(t,e,n)=>{var r=n(9275),i=n(2985),o=n(7007),a=n(1689);i(i.S+i.F*n(4253)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},5535:(t,e,n)=>{var r=n(2985),i=n(8693).f,o=n(7007);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},7347:(t,e,n)=>{"use strict";var r=n(2985),i=n(7007),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(9988)(o,"Object",(function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},6633:(t,e,n)=>{var r=n(8693),i=n(2985),o=n(7007);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},8989:(t,e,n)=>{var r=n(2985),i=n(468),o=n(7007);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},3049:(t,e,n)=>{var r=n(8693),i=n(468),o=n(9181),a=n(2985),s=n(5286),u=n(7007);a(a.S,"Reflect",{get:function t(e,n){var a,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[n]:(a=r.f(e,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(c=i(e))?t(c,n,l):void 0}})},8270:(t,e,n)=>{var r=n(2985);r(r.S,"Reflect",{has:function(t,e){return e in t}})},4510:(t,e,n)=>{var r=n(2985),i=n(7007),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},3984:(t,e,n)=>{var r=n(2985);r(r.S,"Reflect",{ownKeys:n(7643)})},5769:(t,e,n)=>{var r=n(2985),i=n(7007),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},6014:(t,e,n)=>{var r=n(2985),i=n(7375);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},55:(t,e,n)=>{var r=n(9275),i=n(8693),o=n(468),a=n(9181),s=n(2985),u=n(681),c=n(7007),l=n(5286);s(s.S,"Reflect",{set:function t(e,n,s){var h,f,p=arguments.length<4?e:arguments[3],d=i.f(c(e),n);if(!d){if(l(f=o(e)))return t(f,n,s,p);d=u(0)}if(a(d,"value")){if(!1===d.writable||!l(p))return!1;if(h=i.f(p,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=s,r.f(p,n,h)}else r.f(p,n,u(0,s));return!0}return void 0!==d.set&&(d.set.call(p,s),!0)}})},3946:(t,e,n)=>{var r=n(3816),i=n(266),o=n(9275).f,a=n(616).f,s=n(5364),u=n(3218),c=r.RegExp,l=c,h=c.prototype,f=/a/g,p=/a/g,d=new c(f)!==f;if(n(7057)&&(!d||n(4253)((function(){return p[n(6314)("match")]=!1,c(f)!=f||c(p)==p||"/a/i"!=c(f,"i")})))){c=function(t,e){var n=this instanceof c,r=s(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(d?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:h,c)};for(var v=function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},y=a(l),g=0;y.length>g;)v(y[g++]);h.constructor=c,c.prototype=h,n(7234)(r,"RegExp",c)}n(2974)("RegExp")},8269:(t,e,n)=>{"use strict";var r=n(1165);n(2985)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},6774:(t,e,n)=>{n(7057)&&"g"!=/./g.flags&&n(9275).f(RegExp.prototype,"flags",{configurable:!0,get:n(3218)})},1466:(t,e,n)=>{"use strict";var r=n(7007),i=n(875),o=n(6793),a=n(7787);n(8082)("match",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var u=r(t),c=String(this);if(!u.global)return a(u,c);var l=u.unicode;u.lastIndex=0;for(var h,f=[],p=0;null!==(h=a(u,c));){var d=String(h[0]);f[p]=d,""===d&&(u.lastIndex=o(c,i(u.lastIndex),l)),p++}return 0===p?null:f}]}))},9357:(t,e,n)=>{"use strict";var r=n(7007),i=n(508),o=n(875),a=n(1467),s=n(6793),u=n(7787),c=Math.max,l=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(8082)("replace",2,(function(t,e,n,d){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=d(n,t,this,e);if(i.done)return i.value;var h=r(t),f=String(this),p="function"==typeof e;p||(e=String(e));var y=h.global;if(y){var g=h.unicode;h.lastIndex=0}for(var m=[];;){var _=u(h,f);if(null===_)break;if(m.push(_),!y)break;""===String(_[0])&&(h.lastIndex=s(f,o(h.lastIndex),g))}for(var b,w="",E=0,T=0;T<m.length;T++){_=m[T];for(var S=String(_[0]),x=c(l(a(_.index),f.length),0),I=[],C=1;C<_.length;C++)I.push(void 0===(b=_[C])?b:String(b));var A=_.groups;if(p){var k=[S].concat(I,x,f);void 0!==A&&k.push(A);var N=String(e.apply(void 0,k))}else N=v(S,f,x,I,A,e);x>=E&&(w+=f.slice(E,x)+N,E=x+S.length)}return w+f.slice(E)}];function v(t,e,r,o,a,s){var u=r+t.length,c=o.length,l=p;return void 0!==a&&(a=i(a),l=f),n.call(s,l,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var f=h(l/10);return 0===f?n:f<=c?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s}))}}))},6142:(t,e,n)=>{"use strict";var r=n(7007),i=n(7195),o=n(7787);n(8082)("search",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=r(t),u=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var l=o(s,u);return i(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]}))},1876:(t,e,n)=>{"use strict";var r=n(5364),i=n(7007),o=n(8364),a=n(6793),s=n(875),u=n(7787),c=n(1165),l=n(4253),h=Math.min,f=[].push,p=4294967295,d=!l((function(){RegExp(p,"y")}));n(8082)("split",2,(function(t,e,n,l){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,d=void 0===e?p:e>>>0,v=new RegExp(t.source,l+"g");(o=c.call(v,i))&&!((a=v.lastIndex)>h&&(u.push(i.slice(h,o.index)),o.length>1&&o.index<i.length&&f.apply(u,o.slice(1)),s=o[0].length,h=a,u.length>=d));)v.lastIndex===o.index&&v.lastIndex++;return h===i.length?!s&&v.test("")||u.push(""):u.push(i.slice(h)),u.length>d?u.slice(0,d):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(t,e){var r=l(v,t,this,e,v!==n);if(r.done)return r.value;var c=i(t),f=String(this),y=o(c,RegExp),g=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(d?"y":"g"),_=new y(d?c:"^(?:"+c.source+")",m),b=void 0===e?p:e>>>0;if(0===b)return[];if(0===f.length)return null===u(_,f)?[f]:[];for(var w=0,E=0,T=[];E<f.length;){_.lastIndex=d?E:0;var S,x=u(_,d?f:f.slice(E));if(null===x||(S=h(s(_.lastIndex+(d?0:E)),f.length))===w)E=a(f,E,g);else{if(T.push(f.slice(w,E)),T.length===b)return T;for(var I=1;I<=x.length-1;I++)if(T.push(x[I]),T.length===b)return T;E=w=S}}return T.push(f.slice(w)),T}]}))},6108:(t,e,n)=>{"use strict";n(6774);var r=n(7007),i=n(3218),o=n(7057),a="toString",s=/./.toString,u=function(t){n(7234)(RegExp.prototype,a,t,!0)};n(4253)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?u((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):s.name!=a&&u((function(){return s.call(this)}))},8184:(t,e,n)=>{"use strict";var r=n(9824),i=n(1616);t.exports=n(5795)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},856:(t,e,n)=>{"use strict";n(9395)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},703:(t,e,n)=>{"use strict";n(9395)("big",(function(t){return function(){return t(this,"big","","")}}))},1539:(t,e,n)=>{"use strict";n(9395)("blink",(function(t){return function(){return t(this,"blink","","")}}))},5292:(t,e,n)=>{"use strict";n(9395)("bold",(function(t){return function(){return t(this,"b","","")}}))},9539:(t,e,n)=>{"use strict";var r=n(2985),i=n(4496)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},6620:(t,e,n)=>{"use strict";var r=n(2985),i=n(875),o=n(2094),a="endsWith",s="".endsWith;r(r.P+r.F*n(8852)(a),"String",{endsWith:function(t){var e=o(this,t,a),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),u=void 0===n?r:Math.min(i(n),r),c=String(t);return s?s.call(e,c,u):e.slice(u-c.length,u)===c}})},6629:(t,e,n)=>{"use strict";n(9395)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},3694:(t,e,n)=>{"use strict";n(9395)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},7648:(t,e,n)=>{"use strict";n(9395)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},191:(t,e,n)=>{var r=n(2985),i=n(2337),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},2850:(t,e,n)=>{"use strict";var r=n(2985),i=n(2094),o="includes";r(r.P+r.F*n(8852)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},7795:(t,e,n)=>{"use strict";n(9395)("italics",(function(t){return function(){return t(this,"i","","")}}))},9115:(t,e,n)=>{"use strict";var r=n(4496)(!0);n(2923)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},4531:(t,e,n)=>{"use strict";n(9395)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},8306:(t,e,n)=>{var r=n(2985),i=n(2110),o=n(875);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},823:(t,e,n)=>{var r=n(2985);r(r.P,"String",{repeat:n(8595)})},3605:(t,e,n)=>{"use strict";n(9395)("small",(function(t){return function(){return t(this,"small","","")}}))},7732:(t,e,n)=>{"use strict";var r=n(2985),i=n(875),o=n(2094),a="startsWith",s="".startsWith;r(r.P+r.F*n(8852)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},6780:(t,e,n)=>{"use strict";n(9395)("strike",(function(t){return function(){return t(this,"strike","","")}}))},9937:(t,e,n)=>{"use strict";n(9395)("sub",(function(t){return function(){return t(this,"sub","","")}}))},511:(t,e,n)=>{"use strict";n(9395)("sup",(function(t){return function(){return t(this,"sup","","")}}))},4564:(t,e,n)=>{"use strict";n(9599)("trim",(function(t){return function(){return t(this,3)}}))},5767:(t,e,n)=>{"use strict";var r=n(3816),i=n(9181),o=n(7057),a=n(2985),s=n(7234),u=n(4728).KEY,c=n(4253),l=n(3825),h=n(2943),f=n(3953),p=n(6314),d=n(8787),v=n(6074),y=n(5541),g=n(4302),m=n(7007),_=n(5286),b=n(508),w=n(2110),E=n(1689),T=n(681),S=n(2503),x=n(9327),I=n(8693),C=n(4548),A=n(9275),k=n(7184),N=I.f,P=A.f,R=x.f,O=r.Symbol,M=r.JSON,D=M&&M.stringify,L=p("_hidden"),F=p("toPrimitive"),j={}.propertyIsEnumerable,U=l("symbol-registry"),V=l("symbols"),q=l("op-symbols"),B=Object.prototype,H="function"==typeof O&&!!C.f,G=r.QObject,z=!G||!G.prototype||!G.prototype.findChild,W=o&&c((function(){return 7!=S(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=N(B,e);r&&delete B[e],P(t,e,n),r&&t!==B&&P(B,e,r)}:P,K=function(t){var e=V[t]=S(O.prototype);return e._k=t,e},J=H&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},Y=function(t,e,n){return t===B&&Y(q,e,n),m(t),e=E(e,!0),m(n),i(V,e)?(n.enumerable?(i(t,L)&&t[L][e]&&(t[L][e]=!1),n=S(n,{enumerable:T(0,!1)})):(i(t,L)||P(t,L,T(1,{})),t[L][e]=!0),W(t,e,n)):P(t,e,n)},Q=function(t,e){m(t);for(var n,r=y(e=w(e)),i=0,o=r.length;o>i;)Y(t,n=r[i++],e[n]);return t},X=function(t){var e=j.call(this,t=E(t,!0));return!(this===B&&i(V,t)&&!i(q,t))&&(!(e||!i(this,t)||!i(V,t)||i(this,L)&&this[L][t])||e)},$=function(t,e){if(t=w(t),e=E(e,!0),t!==B||!i(V,e)||i(q,e)){var n=N(t,e);return!n||!i(V,e)||i(t,L)&&t[L][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=R(w(t)),r=[],o=0;n.length>o;)i(V,e=n[o++])||e==L||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===B,r=R(n?q:w(t)),o=[],a=0;r.length>a;)!i(V,e=r[a++])||n&&!i(B,e)||o.push(V[e]);return o};H||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(q,n),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),W(this,t,T(1,n))};return o&&z&&W(B,t,{configurable:!0,set:e}),K(t)}).prototype,"toString",(function(){return this._k})),I.f=$,A.f=Y,n(616).f=x.f=Z,n(4682).f=X,C.f=tt,o&&!n(4461)&&s(B,"propertyIsEnumerable",X,!0),d.f=function(t){return K(p(t))}),a(a.G+a.W+a.F*!H,{Symbol:O});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var rt=k(p.store),it=0;rt.length>it;)v(rt[it++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return i(U,t+="")?U[t]:U[t]=O(t)},keyFor:function(t){if(!J(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!H,"Object",{create:function(t,e){return void 0===e?S(t):Q(S(t),e)},defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var ot=c((function(){C.f(1)}));a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return C.f(b(t))}}),M&&a(a.S+a.F*(!H||c((function(){var t=O();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!J(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!J(e))return e}),r[1]=e,D.apply(M,r)}}),O.prototype[F]||n(7728)(O.prototype,F,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},142:(t,e,n)=>{"use strict";var r=n(2985),i=n(9383),o=n(1125),a=n(7007),s=n(2337),u=n(875),c=n(5286),l=n(3816).ArrayBuffer,h=n(8364),f=o.ArrayBuffer,p=o.DataView,d=i.ABV&&l.isView,v=f.prototype.slice,y=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(l!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return d&&d(t)||c(t)&&y in t}}),r(r.P+r.U+r.F*n(4253)((function(){return!new f(2).slice(1,void 0).byteLength})),g,{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(h(this,f))(u(i-r)),c=new p(this),l=new p(o),d=0;r<i;)l.setUint8(d++,c.getUint8(r++));return o}}),n(2974)(g)},1786:(t,e,n)=>{var r=n(2985);r(r.G+r.W+r.F*!n(9383).ABV,{DataView:n(1125).DataView})},162:(t,e,n)=>{n(8440)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},3834:(t,e,n)=>{n(8440)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},4821:(t,e,n)=>{n(8440)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},1303:(t,e,n)=>{n(8440)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},5368:(t,e,n)=>{n(8440)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},9103:(t,e,n)=>{n(8440)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},3318:(t,e,n)=>{n(8440)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},6964:(t,e,n)=>{n(8440)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},2152:(t,e,n)=>{n(8440)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},147:(t,e,n)=>{"use strict";var r,i=n(3816),o=n(50)(0),a=n(7234),s=n(4728),u=n(5345),c=n(3657),l=n(5286),h=n(1616),f=n(1616),p=!i.ActiveXObject&&"ActiveXObject"in i,d="WeakMap",v=s.getWeak,y=Object.isExtensible,g=c.ufstore,m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},_={get:function(t){if(l(t)){var e=v(t);return!0===e?g(h(this,d)).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(h(this,d),t,e)}},b=t.exports=n(5795)(d,m,_,c,!0,!0);f&&p&&(u((r=c.getConstructor(m,d)).prototype,_),s.NEED=!0,o(["delete","has","get","set"],(function(t){var e=b.prototype,n=e[t];a(e,t,(function(e,i){if(l(e)&&!y(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)}))})))},9192:(t,e,n)=>{"use strict";var r=n(3657),i=n(1616),o="WeakSet";n(5795)(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,o),t,!0)}},r,!1,!0)},1268:(t,e,n)=>{"use strict";var r=n(2985),i=n(3325),o=n(508),a=n(875),s=n(4963),u=n(6886);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(7722)("flatMap")},2773:(t,e,n)=>{"use strict";var r=n(2985),i=n(9315)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(7722)("includes")},3276:(t,e,n)=>{var r=n(2985),i=n(1131)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},8351:(t,e,n)=>{var r=n(2985),i=n(7643),o=n(2110),a=n(8693),s=n(2811);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=a.f,c=i(r),l={},h=0;c.length>h;)void 0!==(n=u(r,e=c[h++]))&&s(l,e,n);return l}})},6409:(t,e,n)=>{var r=n(2985),i=n(1131)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},9865:(t,e,n)=>{"use strict";var r=n(2985),i=n(5645),o=n(3816),a=n(8364),s=n(94);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}})},2770:(t,e,n)=>{"use strict";var r=n(2985),i=n(5442),o=n(575),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},1784:(t,e,n)=>{"use strict";var r=n(2985),i=n(5442),o=n(575),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},5869:(t,e,n)=>{"use strict";n(9599)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},4325:(t,e,n)=>{"use strict";n(9599)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},9665:(t,e,n)=>{n(6074)("asyncIterator")},1181:(t,e,n)=>{for(var r=n(6997),i=n(7184),o=n(7234),a=n(3816),s=n(7728),u=n(2803),c=n(6314),l=c("iterator"),h=c("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var y,g=d[v],m=p[g],_=a[g],b=_&&_.prototype;if(b&&(b[l]||s(b,l,f),b[h]||s(b,h,g),u[g]=f,m))for(y in r)b[y]||o(b,y,r[y],!0)}},4633:(t,e,n)=>{var r=n(2985),i=n(4193);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},2564:(t,e,n)=>{var r=n(3816),i=n(2985),o=n(575),a=[].slice,s=/MSIE .\./.test(o),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},6337:(t,e,n)=>{n(2564),n(4633),n(1181),t.exports=n(5645)},3671:t=>{t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=32)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(6),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(5);o.inherits=n(2);var a=n(23),s=n(14);o.inherits(h,a);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=s.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";(function(t){var r=n(38),i=n(39),o=n(40);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return B(V(e,t.length-n),t,n,r)}function b(t,e,n,r){return B(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return b(t,e,n,r)}function E(t,e,n,r){return B(q(e),t,n,r)}function T(t,e,n,r){return B(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=I)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=I));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function k(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function N(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function O(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:V(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(0))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(3).Buffer)},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(4))},function(t,e,n){var r=n(3),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){var r=n(17)(Object,"create");t.exports=r},function(t,e,n){var r=n(31);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(96);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(35),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var a;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(e=t.exports=n(23)).Stream=e,e.Readable=e,e.Writable=n(14),e.Duplex=n(1),e.Transform=n(27),e.PassThrough=n(45)},function(t,e,n){"use strict";(function(e,r,i){var o=n(6);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;m.WritableState=g;var c=n(5);c.inherits=n(2);var l,h={deprecate:n(44)},f=n(24),p=n(7).Buffer,d=i.Uint8Array||function(){},v=n(25);function y(){}function g(t,e){s=s||n(1),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),S(t,e))}(t,n,r,e,i);else{var a=E(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(b,t,n,a,i):b(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function m(t){if(s=s||n(1),!(l.call(m,this)||this instanceof s))return new m(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function _(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),S(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,_(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(_(t,e,!1,e.objectMode?1:c.length,c,l,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),S(t,e)}))}function S(t,e){var n=E(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(T,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(m,f),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===m&&t&&t._writableState instanceof g}})):l=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,n){var r=this._writableState,i=!1,a=!r.objectMode&&function(t){return p.isBuffer(t)||t instanceof d}(t);return a&&!p.isBuffer(t)&&(t=function(t){return p.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=y),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(r,a),i=!1),i}(this,r,t,n))&&(r.pendingcb++,i=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=p.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,r,i,o);return u}(this,r,a,t,e,n)),i},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,S(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=v.destroy,m.prototype._undestroy=v.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(4),n(11).setImmediate,n(0))},function(t,e,n){(function(e,n,r){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return i(e[a][1][t]||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,r){"use strict";var i;try{throw new Error}catch(t){i=t}var o=t("./schedule"),a=t("./queue"),s=t("./util");function u(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function c(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function l(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function h(t){this._normalQueue._pushOne(t),this._queueTick()}u.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},u.prototype.hasCustomScheduler=function(){return this._customScheduler},u.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},u.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},u.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},u.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.hasDevTools?(u.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?c.call(this,t,e,n):this._schedule((function(){setTimeout((function(){t.call(e,n)}),100)}))},u.prototype.invoke=function(t,e,n){this._trampolineEnabled?l.call(this,t,e,n):this._schedule((function(){t.call(e,n)}))},u.prototype.settlePromises=function(t){this._trampolineEnabled?h.call(this,t):this._schedule((function(){t._settlePromises()}))}):(u.prototype.invokeLater=c,u.prototype.invoke=l,u.prototype.settlePromises=h),u.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},u.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},u.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},u.prototype._reset=function(){this._isTickUsed=!1},n.exports=u,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var h=this._target();if(l._setBoundTo(c),c instanceof t){var f={promiseRejectionQueued:!1,promise:l,target:h,bindingPromise:c};h._then(e,a,void 0,l,f),c._then(s,u,void 0,l,f),l._setOnCancel(c)}else l._resolveCallback(h);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(t){}return i},e.exports=i},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){var n=t("./util"),r=n.canEvaluate;function i(t){return function(t,r){var i;if(null!=t&&(i=t[r]),"function"!=typeof i){var o="Object "+n.classString(t)+" has no method '"+n.toString(r)+"'";throw new e.TypeError(o)}return i}(t,this.pop()).apply(t,this)}function o(t){return t[this]}function a(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(i,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=a;else if(r){var n=(void 0)(t);e=null!==n?n:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,u=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(t,a,s){return function(u){var c=s._boundValue();t:for(var l=0;l<t.length;++l){var h=t[l];if(h===Error||null!=h&&h.prototype instanceof Error){if(u instanceof h)return i(a).call(c,u)}else if("function"==typeof h){var f=i(h).call(c,u);if(f===o)return f;if(f)return i(a).call(c,u)}else if(n.isObject(u)){for(var p=r(h),d=0;d<p.length;++d){var v=p[d];if(h[v]!=u[v])continue t}return i(a).call(c,u)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,u=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=u,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){var i,o,a,s=n._getDomain,u=n._async,c=t("./errors").Warning,l=t("./util"),h=l.canAttachTrace,f=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,p=/\((?:timers\.js):\d+:\d+\)/,d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,y=null,g=!1,m=!(0==l.env("BLUEBIRD_DEBUG")),_=!(0==l.env("BLUEBIRD_WARNINGS")||!m&&!l.env("BLUEBIRD_WARNINGS")),b=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!m&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),w=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(_||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout((function(){t._notifyUnhandledRejection()}),1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return U(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=s();o="function"==typeof t?null===e?t:l.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=s();i="function"==typeof t?null===e?t:l.domainBind(e,t):void 0};var E=function(){};n.longStackTraces=function(){if(u.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!X.longStackTraces&&z()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;X.longStackTraces=!0,E=function(){if(u.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),u.enableTrampoline(),X.longStackTraces=!1},n.prototype._captureStackTrace=F,n.prototype._attachExtraTrace=j,r.activateLongStackTraces(),u.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return X.longStackTraces&&z()};var T=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!l.global.dispatchEvent(n)}}return"function"==typeof Event?(t=new Event("CustomEvent"),l.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!l.global.dispatchEvent(n)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!l.global.dispatchEvent(n)})}catch(t){}return function(){return!1}}(),S=l.isNode?function(){return e.emit.apply(e,arguments)}:l.global?function(t){var e="on"+t.toLowerCase(),n=l.global[e];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function x(t,e){return{promise:e}}var I={promiseCreated:x,promiseFulfilled:x,promiseRejected:x,promiseResolved:x,promiseCancelled:x,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:x},C=function(t){var e=!1;try{e=S.apply(null,arguments)}catch(t){u.throwLater(t),e=!0}var n=!1;try{n=T(t,I[t].apply(null,arguments))}catch(t){u.throwLater(t),n=!0}return n||e};function A(){return!1}function k(t,e,n){var r=this;try{t(e,n,(function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+l.toString(t));r._attachCancellationCallback(t)}))}catch(t){return t}}function N(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?l.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function P(){return this._onCancelField}function R(t){this._onCancelField=t}function O(){this._cancellationParent=void 0,this._onCancelField=void 0}function M(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&E()),"warnings"in t){var e=t.warnings;X.warnings=!!e,w=X.warnings,l.isObject(e)&&"wForgottenReturn"in e&&(w=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!X.cancellation){if(u.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=O,n.prototype._propagateFrom=M,n.prototype._onCancel=P,n.prototype._setOnCancel=R,n.prototype._attachCancellationCallback=N,n.prototype._execute=k,D=M,X.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!X.monitoring?(X.monitoring=!0,n.prototype._fireEvent=C):!t.monitoring&&X.monitoring&&(X.monitoring=!1,n.prototype._fireEvent=A)),n},n.prototype._fireEvent=A,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var D=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function L(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function F(){this._trace=new Y(this._peekContext())}function j(t,e){if(h(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=q(t);l.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(t,"__stackCleaned__",!0)}}}function U(t,e,r){if(X.warnings){var i,o=new c(t);if(e)r._attachExtraTrace(o);else if(X.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=q(o);o.stack=a.message+"\n"+a.stack.join("\n")}C("warning",o)||B(o,"",!0)}}function V(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||v.test(r),o=i&&W(r);i&&!o&&(g&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function q(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||v.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:V(e)}}function B(t,e,n){if("undefined"!=typeof console){var r;if(l.isObject(t)){var i=t.stack;r=e+y(i,t)}else r=e+String(t);"function"==typeof a?a(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function H(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){u.throwLater(t)}"unhandledRejection"===t?C(t,n,r)||i||B(n,"Unhandled rejection "):C(t,r)}function G(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():l.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function z(){return"function"==typeof Q}var W=function(){return!1},K=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function J(t){var e=t.match(K);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function Y(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Q(this,Y),e>32&&this.uncycle()}l.inherits(Y,Error),r.CapturedTrace=Y,Y.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<t;++r){var a=n[e[r].stack];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var s=r>0?e[r-1]:this;a<t-1?(s._parent=e[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var u=s._length+1,c=r-2;c>=0;--c)e[c]._length=u,u++;return}}}},Y.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=q(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(V(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(s=a;s>=0;--s){var u=r[s];if(e[i]!==u)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),l.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),l.notEnumerableProp(t,"__stackCleaned__",!0)}};var Q=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():G(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=t,y=e;var n=Error.captureStackTrace;return W=function(t){return f.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,y=e,g=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(y=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?G(e):e.toString()},null):(v=t,y=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(a=function(t){console.warn(t)},l.isNode&&e.stderr.isTTY?a=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(a=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var X={warnings:_,longStackTraces:!1,cancellation:!1,monitoring:!1};return b&&n.longStackTraces(),{longStackTraces:function(){return X.longStackTraces},warnings:function(){return X.warnings},cancellation:function(){return X.cancellation},monitoring:function(){return X.monitoring},propagateFromFunction:function(){return D},boundValueFunction:function(){return L},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&w){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),u=V(s),c=u.length-1;c>=0;--c){var l=u[c];if(!p.test(l)){var h=l.match(d);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(u.length>0){var f=u[0];for(c=0;c<s.length;++c)if(s[c]===f){c>0&&(a="\n"+s[c-1]);break}}}var v="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(v,!0,e)}},setBounds:function(t,e){if(z()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,u=0;u<i.length;++u)if(c=J(i[u])){n=c.fileName,a=c.line;break}for(u=0;u<o.length;++u){var c;if(c=J(o[u])){r=c.fileName,s=c.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(W=function(t){if(f.test(t))return!0;var e=J(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}},warn:U,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),U(n)},CapturedTrace:Y,fireDomEvent:T,fireGlobalEvent:S}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,(function(){throw e}))},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];return r instanceof t&&r.suppressUnhandledRejections(),this.caught(n,(function(){return r}))}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,i,o=t("./es5"),a=o.freeze,s=t("./util"),u=s.inherits,c=s.notEnumerableProp;function l(t,e){function n(r){if(!(this instanceof n))return new n(r);c(this,"message","string"==typeof r?r:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(n,Error),n}var h=l("Warning","warning"),f=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),d=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(t){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(d.prototype[v[y]]=Array.prototype[v[y]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var g=0;function m(t){if(!(this instanceof m))return new m(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(r=i.join("\n"))+"\n"}return g--,e},u(m,Error);var _=Error.__BluebirdErrorTypes__;_||(_=a({CancellationError:f,TimeoutError:p,OperationalError:m,RejectionError:m,AggregateError:d}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error,TypeError:r,RangeError:i,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.CancellationError,a=i.errorObj,s=t("./catch_filter")(r);function u(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function c(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function h(){return p.call(this,this.promise._target()._settledValue())}function f(t){if(!l(this,t))return a.e=t,a}function p(t){var i=this.promise,s=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),t);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var p=n(u,i);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new o("late cancellation observer");return i._attachExtraTrace(d),a.e=d,a}p.isPending()&&p._attachCancellationCallback(new c(this))}return p._then(h,f,void 0,this,void 0)}}}return i.isRejected()?(l(this),a.e=t,a):(l(this),t)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new u(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,p);var r,o=new Array(n-1),a=0;for(r=0;r<n-1;++r){var u=arguments[r];if(!i.isObject(u))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));o[a++]=u}o.length=a;var c=arguments[r];return this._passThrough(s(o,c,this),1,void 0,p)},u}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./errors").TypeError,u=t("./util"),c=u.errorObj,l=u.tryCatch,h=[];function f(t,n,i,o){if(a.cancellation()){var s=new e(r),u=this._finallyPromise=new e(r);this._promise=s.lastly((function(){return u})),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new e(r))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(f,o),f.prototype._isResolved=function(){return null===this._promise},f.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=l(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},f.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=l(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},f.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=l(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},f.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},f.prototype._continue=function(t){var n=this._promise;if(t===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof e||null!==(o=function(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=l(n[o])(t);if(r._popContext(),a===c){r._pushContext();var s=e.reject(c.e);return r._popContext(),s}var u=i(a,r);if(u instanceof e)return u}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=f,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("expecting a function but got "+u.classString(t));h.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new f(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=e._getDomain,u=t("./util"),c=u.tryCatch,l=u.errorObj,h=e._async;function f(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=s();this._callback=null===i?e:u.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function p(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+u.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));a=i.concurrency}return new f(t,n,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,o).promise()}u.inherits(f,n),f.prototype._asyncInit=function(){this._init$(void 0,-2)},f.prototype._init=function(){},f.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,u=this._limit;if(n<0){if(r[n=-1*n-1]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var h=this._promise,f=this._callback,p=h._boundValue();h._pushContext();var d=c(f).call(p,t,n,o),v=h._popContext();if(a.checkForgottenReturns(d,v,null!==s?"Promise.filter":"Promise.map",h),d===l)return this._reject(d.e),!0;var y=i(d,this._promise);if(y instanceof e){var g=(y=y._target())._bitField;if(0==(50397184&g))return u>=1&&this._inFlight++,r[n]=y,y._proxy(this,-1*(n+1)),!1;if(0==(33554432&g))return 0!=(16777216&g)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}r[n]=d}return++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},f.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},f.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},f.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return p(this,t,e,null)},e.map=function(t,e,n,r){return p(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r,u=new e(n);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];r=a.isArray(c)?s(t).apply(l,c):s(t).call(l,c)}else r=s(t)();var h=u._popContext();return o.checkForgottenReturns(r,h,"Promise.try",u),u._resolveFromSyncValue(r),u},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),i=r.maybeWrapAsError,o=t("./errors").OperationalError,a=t("./es5"),s=/^(?:name|message|stack|cause)$/;function u(t){var e;if(function(t){return t instanceof Error&&a.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=a.keys(t),i=0;i<n.length;++i){var u=n[i];s.test(u)||(e[u]=t[u])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=u(i(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,i=n.tryCatch,o=n.errorObj;function a(t,e){if(!n.isArray(t))return s.call(this,t,e);var a=i(e).apply(this._boundValue(),[null].concat(t));a===o&&r.throwLater(a.e)}function s(t,e){var n=this._boundValue(),a=void 0===t?i(e).call(n,null):i(e).call(n,null,t);a===o&&r.throwLater(a.e)}function u(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var a=i(e).call(this._boundValue(),t);a===o&&r.throwLater(a.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=s;void 0!==e&&Object(e).spread&&(n=a),this._then(n,u,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){var r=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new k.PromiseInspection(this._target())},o=function(t){return k.reject(new d(t))};function a(){}var s,u={},c=t("./util");s=c.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},c.notEnumerableProp(k,"_getDomain",s);var l=t("./es5"),h=t("./async"),f=new h;l.defineProperty(k,"_async",{value:f});var p=t("./errors"),d=k.TypeError=p.TypeError;k.RangeError=p.RangeError;var v=k.CancellationError=p.CancellationError;k.TimeoutError=p.TimeoutError,k.OperationalError=p.OperationalError,k.RejectionError=p.OperationalError,k.AggregateError=p.AggregateError;var y=function(){},g={},m={},_=t("./thenables")(k,y),b=t("./promise_array")(k,y,_,o,a),w=t("./context")(k),E=w.create,T=t("./debuggability")(k,w),S=(T.CapturedTrace,t("./finally")(k,_,m)),x=t("./catch_filter")(m),I=t("./nodeback"),C=c.errorObj,A=c.tryCatch;function k(t){t!==y&&function(t,e){if(null==t||t.constructor!==k)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new d("expecting a function but got "+c.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function N(t){this.promise._resolveCallback(t)}function P(t){this.promise._rejectCallback(t,!1)}function R(t){var e=new k(y);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return k.prototype.toString=function(){return"[object Promise]"},k.prototype.caught=k.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!c.isObject(a))return o("Catch statement predicate: expecting an object but got "+c.classString(a));r[i++]=a}return r.length=i,t=arguments[n],this.then(void 0,x(r,t,this))}return this.then(void 0,t)},k.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},k.prototype.then=function(t,e){if(T.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+c.classString(t);arguments.length>1&&(n+=", "+c.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},k.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},k.prototype.spread=function(t){return"function"!=typeof t?o("expecting a function but got "+c.classString(t)):this.all()._then(t,void 0,void 0,g,void 0)},k.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},k.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},k.prototype.error=function(t){return this.caught(c.originatesFromRejection,t)},k.getNewLibraryCopy=n.exports,k.is=function(t){return t instanceof k},k.fromNode=k.fromCallback=function(t){var e=new k(y);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=A(t)(I(e,n));return r===C&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},k.all=function(t){return new b(t).promise()},k.cast=function(t){var e=_(t);return e instanceof k||((e=new k(y))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},k.resolve=k.fulfilled=k.cast,k.reject=k.rejected=function(t){var e=new k(y);return e._captureStackTrace(),e._rejectCallback(t,!0),e},k.setScheduler=function(t){if("function"!=typeof t)throw new d("expecting a function but got "+c.classString(t));return f.setScheduler(t)},k.prototype._then=function(t,e,n,r,i){var o=void 0!==i,a=o?i:new k(y),u=this._target(),l=u._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var h=s();if(0!=(50397184&l)){var p,d,g=u._settlePromiseCtx;0!=(33554432&l)?(d=u._rejectionHandler0,p=t):0!=(16777216&l)?(d=u._fulfillmentHandler0,p=e,u._unsetRejectionIsUnhandled()):(g=u._settlePromiseLateCancellationObserver,d=new v("late cancellation observer"),u._attachExtraTrace(d),p=e),f.invoke(g,u,{handler:null===h?p:"function"==typeof p&&c.domainBind(h,p),promise:a,receiver:r,value:d})}else u._addCallbacks(t,e,a,r,h);return a},k.prototype._length=function(){return 65535&this._bitField},k.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},k.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},k.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},k.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},k.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},k.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},k.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},k.prototype._isFinal=function(){return(4194304&this._bitField)>0},k.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},k.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},k.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},k.prototype._setAsyncGuaranteed=function(){f.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},k.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==u)return void 0===e&&this._isBound()?this._boundValue():e},k.prototype._promiseAt=function(t){return this[4*t-4+2]},k.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},k.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},k.prototype._boundValue=function(){},k.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=u),this._addCallbacks(e,n,r,i,null)},k.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=u),this._addCallbacks(n,r,i,o,null)},k.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:c.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:c.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:c.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:c.domainBind(i,e))}return this._setLength(o+1),o},k.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},k.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(r(),!1);var n=_(t,this);if(!(n instanceof k))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;s<a;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var u=new v("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(r())}},k.prototype._rejectCallback=function(t,e,n){var r=c.ensureErrorObject(t),i=r===t;if(!i&&!n&&T.warnings()){var o="a promise was rejected with a non-error: "+c.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},k.prototype._resolveFromExecutor=function(t){if(t!==y){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,(function(t){e._resolveCallback(t)}),(function(t){e._rejectCallback(t,n)}));n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},k.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),e===g?n&&"number"==typeof n.length?o=A(t).apply(this._boundValue(),n):(o=C).e=new d("cannot .spread() a non-array: "+c.classString(n)):o=A(t).call(e,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===m?r._reject(n):o===C?r._rejectCallback(o.e,!1):(T.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},k.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},k.prototype._followee=function(){return this._rejectionHandler0},k.prototype._setFollowee=function(t){this._rejectionHandler0=t},k.prototype._settlePromise=function(t,e,n,r){var o=t instanceof k,s=this._bitField,u=0!=(134217728&s);0!=(65536&s)?(o&&t._invokeInternalOnCancel(),n instanceof S&&n.isFinallyHandler()?(n.cancelPromise=t,A(e).call(n,r)===C&&t._reject(C.e)):e===i?t._fulfill(i.call(n)):n instanceof a?n._promiseCancelled(t):o||t instanceof b?t._cancel():n.cancel()):"function"==typeof e?o?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof a?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):o&&(u&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(r):t._reject(r))},k.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof k?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof k&&n._reject(i)},k.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},k.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},k.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},k.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():f.settlePromises(this))}},k.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return f.fatalError(t,c.isNode);(65535&e)>0?f.settlePromises(this):this._ensurePossibleRejectionHandled()}},k.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},k.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},k.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},k.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},k.defer=k.pending=function(){return T.deprecated("Promise.defer","new Promise"),{promise:new k(y),resolve:N,reject:P}},c.notEnumerableProp(k,"_makeSelfResolutionError",r),t("./method")(k,y,_,o,T),t("./bind")(k,y,_,T),t("./cancel")(k,b,o,T),t("./direct_resolve")(k),t("./synchronous_inspection")(k),t("./join")(k,b,_,y,f,s),k.Promise=k,k.version="3.5.1",t("./map.js")(k,b,o,_,y,T),t("./call_get.js")(k),t("./using.js")(k,o,_,E,y,T),t("./timers.js")(k,y,T),t("./generators.js")(k,o,y,_,a,T),t("./nodeify.js")(k),t("./promisify.js")(k,y),t("./props.js")(k,b,_,o),t("./race.js")(k,y,_,o),t("./reduce.js")(k,b,o,_,y,T),t("./settle.js")(k,b,T),t("./some.js")(k,b,o),t("./filter.js")(k,y),t("./each.js")(k,y),t("./any.js")(k),c.toFastProperties(k),c.toFastProperties(k.prototype),R({a:1}),R({b:2}),R({c:3}),R(1),R((function(){})),R(void 0),R(!1),R(new k(y)),T.setBounds(h.firstLineError,c.lastLineError),k}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util");function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=r(this._values,this._promise);if(s instanceof e){var u=(s=s._target())._bitField;if(this._values=s,0==(50397184&u))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(o){case-2:return[];case-3:return{};case-6:return new Map}}());else{var c=i("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(c,!1)}},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var u=r(t[s],i);a=u instanceof e?(u=u._target())._bitField:null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0==(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!=(33554432&a)?this._promiseFulfilled(u._value(),s):0!=(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},i=t("./util"),o=t("./nodeback"),a=i.withAppended,s=i.maybeWrapAsError,u=i.canEvaluate,c=t("./errors").TypeError,l={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),f=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!h.test(t)}function d(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function v(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,l);return!!r&&d(r)}function y(t,e,n,r){for(var o=i.inheritedDataKeys(t),a=[],s=0;s<o.length;++s){var u=o[s],l=t[u],h=r===f||f(u);"function"!=typeof l||d(l)||v(t,u,e)||!r(u,l,t,h)||a.push(u,l)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(a,e,n),a}var g=u?void 0:function(t,u,c,l,h,f){var p=function(){return this}(),d=t;function v(){var i=u;u===r&&(i=this);var c=new e(n);c._captureStackTrace();var l="string"==typeof d&&this!==p?this[d]:t,h=o(c,f);try{l.apply(i,a(arguments,h))}catch(t){c._rejectCallback(s(t),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof d&&(t=l),i.notEnumerableProp(v,"__isPromisified__",!0),v};function m(t,e,n,o,a){for(var s=new RegExp(function(t){return t.replace(/([$])/,"\\$")}(e)+"$"),u=y(t,e,s,n),c=0,l=u.length;c<l;c+=2){var h=u[c],f=u[c+1],p=h+e;if(o===g)t[p]=g(h,r,h,f,e,a);else{var d=o(f,(function(){return g(h,r,h,f,e,a)}));i.notEnumerableProp(d,"__isPromisified__",!0),t[p]=d}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new c("expecting a function but got "+i.classString(t));if(d(t))return t;var n=void 0===(e=Object(e)).context?r:e.context,o=!!e.multiArgs,a=function(t,e,n){return g(t,e,void 0,t,null,o)}(t,n);return i.copyDescriptors(t,a,p),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=f);var a=e.promisifier;if("function"!=typeof a&&(a=g),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=i.inheritedDataKeys(t),u=0;u<s.length;++u){var l=t[s[u]];"constructor"!==s[u]&&i.isClass(l)&&(m(l.prototype,r,o,a,n),m(l,r,o,a,n))}return m(t,r,o,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o,a=t("./util"),s=a.isObject,u=t("./es5");"function"==typeof Map&&(o=Map);var c=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=c(t),n=!0;else{var r=u.keys(t),i=r.length;e=new Array(2*i);for(var a=0;a<i;++a){var s=r[a];e[a]=t[s],e[a+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function h(t){var n,o=r(t);return s(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],a=t[r];e.set(i,a)}return e}(this._values);else{n={};for(var r=this.length(),i=0,a=this.length();i<a;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return h(this)},e.props=function(t){return h(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+0],t[o+0]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=function(t){return t.then((function(e){return s(e,t)}))};function s(t,s){var u=r(t);if(u instanceof e)return a(u);if(null===(t=o.asArray(t)))return i("expecting an array or an iterable object but got "+o.classString(t));var c=new e(n);void 0!==s&&c._propagateFrom(s,3);for(var l=c._fulfill,h=c._reject,f=0,p=t.length;f<p;++f){var d=t[f];(void 0!==d||f in t)&&e.cast(d)._then(l,h,void 0,c,null)}return c}e.race=function(t){return s(t,void 0)},e.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=e._getDomain,u=t("./util"),c=u.tryCatch;function l(t,n,r,i){this.constructor$(t);var a=s();this._fn=null===a?n:u.domainBind(a,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function f(t,e,n,i){return"function"!=typeof e?r("expecting a function but got "+u.classString(e)):new l(t,e,n,i).promise()}function p(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(t){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var s=i._popContext();return a.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}u.inherits(l,n),l.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},l.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},l.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},l.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(p,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(h,h,void 0,n,this)},e.prototype.reduce=function(t,e){return f(this,t,e,null)},e.reduce=function(t,e,n,r){return f(t,e,n,r)}}},{"./util":36}],29:[function(t,i,o){"use strict";var a,s=t("./util"),u=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,l=e.nextTick;a=s.isRecentNode?function(t){c.call(n,t)}:function(t){l.call(e,t)}}else if("function"==typeof u&&"function"==typeof u.resolve){var h=u.resolve();a=function(t){h.then(t)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");return new MutationObserver((function(){t.classList.toggle("foo"),n=!1})).observe(r,e),function(i){var o=new MutationObserver((function(){o.disconnect(),i()}));o.observe(t,e),n||(n=!0,r.classList.toggle("foo"))}}();i.exports=a},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,n),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=t("./errors").RangeError,a=t("./errors").AggregateError,s=i.isArray,u={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return l(t,e)},e.prototype.some=function(t){return l(this,t)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),i=r.errorObj,o=r.isObject,a={}.hasOwnProperty;return function(t,s){if(o(t)){if(t instanceof e)return t;var u=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(t);if(u===i){s&&s._pushContext();var c=e.reject(u.e);return s&&s._popContext(),c}if("function"==typeof u)return function(t){try{return a.call(t,"_promise0")}catch(t){return!1}}(t)?(c=new e(n),t._then(c._fulfill,c._reject,void 0,c,null),c):function(t,o,a){var s=new e(n),u=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var c=!0,l=r.tryCatch(o).call(t,(function(t){s&&(s._resolveCallback(t),s=null)}),(function(t){s&&(s._rejectCallback(t,c,!0),s=null)}));return c=!1,s&&l===i&&(s._rejectCallback(l.e,!0,!0),s=null),u}(t,u,s)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.TimeoutError;function a(t){this.handle=t}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,i){var o,u;return void 0!==i?(o=e.resolve(i)._then(s,null,null,t,void 0),r.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(n),u=setTimeout((function(){o._fulfill()}),+t),r.cancellation()&&o._setOnCancel(new a(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(t){return clearTimeout(this.handle),t}function l(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return u(t,this)},e.prototype.timeout=function(t,e){var n,s;t=+t;var u=new a(setTimeout((function(){n.isPending()&&function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,s)}),t));return r.cancellation()?(s=this.then(),(n=s._then(c,l,void 0,u,void 0))._setOnCancel(u)):n=this._then(c,l,void 0,u,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util"),u=t("./errors").TypeError,c=t("./util").inherits,l=s.errorObj,h=s.tryCatch,f={};function p(t){setTimeout((function(){throw t}),0)}function d(t,n){var i=0,a=t.length,s=new e(o);return function o(){if(i>=a)return s._fulfill();var u=function(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(u instanceof e&&u._isDisposable()){try{u=r(u._getDisposer().tryDispose(n),t.promise)}catch(t){return p(t)}if(u instanceof e)return u._then(o,p,null,null,null)}o()}(),s}function v(t,e,n){this._data=t,this._promise=e,this._context=n}function y(t,e,n){this.constructor$(t,e,n)}function g(t){return v.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function m(t){this.length=t,this.promise=null,this[t-1]=null}v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():f},v.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==f?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},v.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(y,v),y.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},m.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+s.classString(o));var u=!0;2===t&&Array.isArray(arguments[0])?(t=(i=arguments[0]).length,u=!1):(i=arguments,t--);for(var c=new m(t),f=0;f<t;++f){var p=i[f];if(v.isDisposer(p)){var y=p;(p=p.promise())._setDisposable(y)}else{var _=r(p);_ instanceof e&&(p=_._then(g,null,null,{resources:c,index:f},void 0))}c[f]=p}var b=new Array(c.length);for(f=0;f<b.length;++f)b[f]=e.resolve(c[f]).reflect();var w=e.all(b).then((function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}E._pushContext(),o=h(o);var r=u?o.apply(void 0,t):o(t),i=E._popContext();return a.checkForgottenReturns(r,i,"Promise.using",E),r})),E=w.lastly((function(){var t=new e.PromiseInspection(w);return d(c,t)}));return c.promise=E,E._setOnCancel(c),E},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new y(t,this,i());throw new u}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";var o,a=t("./es5"),s="undefined"==typeof navigator,u={e:{}},c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function l(){try{var t=o;return o=null,t.apply(this,arguments)}catch(t){return u.e=t,u}}function h(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function f(t,e,n){if(h(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return a.defineProperty(t,e,r),t}var p=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(a.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var s=0;s<o.length;++s){var u=o[s];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(t,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}t=a.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),d=/this\s*\.\s*\S+\s*=/,v=/^[a-z$_][a-z$_0-9]*$/i;function y(t){try{return t+""}catch(t){return"[no string representation]"}}function g(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function m(t){return g(t)&&a.propertyIsWritable(t,"stack")}var _="stack"in new Error?function(t){return m(t)?t:new Error(y(t))}:function(t){if(m(t))return t;try{throw new Error(y(t))}catch(t){return t}};function b(t){return{}.toString.call(t)}var w=function(t){return a.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var E="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};w=function(t){return a.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?E(t):null}}var T=void 0!==e&&"[object process]"===b(e).toLowerCase(),S=void 0!==e&&void 0!==e.env,x={isClass:function(t){try{if("function"==typeof t){var e=a.names(t.prototype),n=a.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=d.test(t+"")&&a.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}},isIdentifier:function(t){return v.test(t)},inheritedDataKeys:p,getDataPropertyOrDefault:function(t,e,n){if(!a.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(t){throw t},isArray:a.isArray,asArray:w,notEnumerableProp:f,isPrimitive:h,isObject:function(t){return"function"==typeof t||"object"==typeof t&&null!==t},isError:g,canEvaluate:s,errorObj:u,tryCatch:function(t){return o=t,l},inherits:function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype},withAppended:function(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i},maybeWrapAsError:function(t){return h(t)?new Error(y(t)):t},toFastProperties:function(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t},filledRange:function(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r},toString:y,canAttachTrace:m,ensureErrorObject:_,originatesFromRejection:function(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)},markAsOriginatingFromRejection:function(t){try{f(t,"isOperational",!0)}catch(t){}},classString:b,copyDescriptors:function(t,e,n){for(var r=a.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{a.defineProperty(e,o,a.getDescriptor(t,o))}catch(t){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:T,hasEnvVariables:S,env:function(t){return S?e.env[t]:void 0},global:c,getNativePromise:function(){if("function"==typeof Promise)try{var t=new Promise((function(){}));if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}},domainBind:function(t,e){return t.bind(e)}};x.isRecentNode=x.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),x.isNode&&x.toFastProperties(e);try{throw new Error}catch(t){x.lastLineError=t}r.exports=x},{"./es5":13}]},{},[4])(4),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(4),n(0),n(11).setImmediate)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!e.eol&&t)for(var n=0,r=t.length;n<r;n++)if("\r"===t[n]){if("\n"===t[n+1]){e.eol="\r\n";break}if(t[n+1]){e.eol="\r";break}}else if("\n"===t[n]){e.eol="\n";break}return e.eol||"\n"}},function(t,e,n){var r=n(65),i=n(73);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(19).Symbol;t.exports=r},function(t,e,n){var r=n(67),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(30),i=n(76);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){"use strict";(function(e,r){var i=n(6);t.exports=_;var o,a=n(37);_.ReadableState=m,n(12).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(24),c=n(7).Buffer,l=e.Uint8Array||function(){},h=n(5);h.inherits=n(2);var f=n(41),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,v=n(42),y=n(25);h.inherits(_,u);var g=["error","close","destroy","pause","resume"];function m(t,e){t=t||{};var r=e instanceof(o=o||n(1));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(26).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||n(1),!(this instanceof _))return new _(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,n,r,i){var o,a=t._readableState;return null===e?(a.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}}(t,a)):(i||(o=function(t,e){var n;return function(t){return c.isBuffer(t)||t instanceof l}(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):I(t,a)):w(t,a,e,!1))):r||(a.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),I(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return d||(d=n(26).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var E=8388608;function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=E?t=E:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(x,t):x(t))}function x(t){p("emit readable"),t.emit("readable"),N(t)}function I(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(C,t,e))}function C(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function A(t){p("readable nexttick read 0"),t.read(0)}function k(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0==(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0==(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(O,e,t))}function O(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function M(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}_.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):S(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&R(this),null;var r,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(n,e))),null===(r=t>0?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=e&&!1===e.end||t===r.stdout||t===r.stderr?m:c;function c(){p("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",(function e(r,i){p("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,p("cleanup"),t.removeListener("close",y),t.removeListener("finish",g),t.removeListener("drain",l),t.removeListener("error",v),t.removeListener("unpipe",e),n.removeListener("end",c),n.removeListener("end",m),n.removeListener("data",d),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}));var l=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",l);var h=!1,f=!1;function d(e){p("ondata"),f=!1,!1!==t.write(e)||f||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==M(o.pipes,t))&&!h&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function v(e){p("onerror",e),m(),t.removeListener("error",v),0===s(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",g),m()}function g(){p("onfinish"),t.removeListener("close",y),m()}function m(){p("unpipe"),n.unpipe(t)}return n.on("data",d),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",v),t.once("close",y),t.once("finish",g),t.emit("pipe",n),o.flowing||(p("pipe resume"),n.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=M(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},_.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):i.nextTick(A,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(k,t,e))}(this,t)),this},_.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!=i)&&(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=P}).call(this,n(0),n(4))},function(t,e,n){t.exports=n(12).EventEmitter},function(t,e,n){"use strict";var r=n(6);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(7).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var r=n(1),i=n(5);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){s(t,e,n)})):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(2),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.bufFromString=function(e){var n=t.byteLength(e),r=t.allocUnsafe?t.allocUnsafe(n):new t(n);return r.write(e),r},e.emptyBuffer=function(){return t.allocUnsafe?t.allocUnsafe(0):new t(0)},e.filterArray=function(t,e){for(var n=[],r=0;r<t.length;r++)e.indexOf(r)>-1&&n.push(t[r]);return n},e.trimLeft=String.prototype.trimLeft?function(t){return t.trimLeft()}:function(t){return t.replace(/^\s+/,"")},e.trimRight=String.prototype.trimRight?function(t){return t.trimRight()}:function(t){return t.replace(/\s+$/,"")}}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,r){var i=t.call(this,"Error: "+e+". JSON Line number: "+n+(r?" near: "+r:""))||this;return i.err=e,i.line=n,i.extra=r,i.name="CSV Parse Error",i}return r(e,t),e.column_mismatched=function(t,n){return new e("column_mismatched",t,n)},e.unclosed_quote=function(t,n){return new e("unclosed_quote",t,n)},e.fromJSON=function(t){return new e(t.err,t.line,t.extra)},e.prototype.toJSON=function(){return{err:this.err,line:this.line,extra:this.extra}},e}(Error);e.default=i},function(t,e,n){var r=n(18),i=n(68),o=n(69),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){t.exports=n(33)},function(t,e,n){"use strict";var r=n(34),i=function(t,e){return new r.Converter(t,e)};i.csv=i,i.Converter=r.Converter,t.exports=i},function(t,e,n){"use strict";(function(t){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(36),a=n(50),s=n(51),u=i(n(15)),c=n(52),l=n(105),h=function(e){function i(n,r){void 0===r&&(r={});var i=e.call(this,r)||this;return i.options=r,i.params=a.mergeParams(n),i.runtime=s.initParseRuntime(i),i.result=new l.Result(i),i.processor=new c.ProcessorLocal(i),i.once("error",(function(e){t((function(){i.result.processError(e),i.emit("done",e)}))})),i.once("done",(function(){i.processor.destroy()})),i}return r(i,e),i.prototype.preRawData=function(t){return this.runtime.preRawDataHook=t,this},i.prototype.preFileLine=function(t){return this.runtime.preFileLineHook=t,this},i.prototype.subscribe=function(t,e,n){return this.parseRuntime.subscribe={onNext:t,onError:e,onCompleted:n},this},i.prototype.fromFile=function(t,e){var r=this,i=n(!function(){var t=new Error("Cannot find module 'fs'");throw t.code="MODULE_NOT_FOUND",t}());return i.exists(t,(function(n){n?i.createReadStream(t,e).pipe(r):r.emit("error",new Error("File does not exist. Check to make sure the file path to your csv is correct."))})),this},i.prototype.fromStream=function(t){return t.pipe(this),this},i.prototype.fromString=function(t){t.toString();var e=new o.Readable,n=0;return e._read=function(e){if(n>=t.length)this.push(null);else{var r=t.substr(n,e);this.push(r),n+=e}},this.fromStream(e)},i.prototype.then=function(t,e){var n=this;return new u.default((function(r,i){n.parseRuntime.then={onfulfilled:function(e){r(t?t(e):e)},onrejected:function(t){e?r(e(t)):i(t)}}}))},Object.defineProperty(i.prototype,"parseParam",{get:function(){return this.params},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parseRuntime",{get:function(){return this.runtime},enumerable:!0,configurable:!0}),i.prototype._transform=function(t,e,n){var r=this;this.processor.process(t).then((function(t){if(t.length>0)return r.runtime.started=!0,r.result.processResult(t)})).then((function(){r.emit("drained"),n()}),(function(t){r.runtime.hasError=!0,r.runtime.error=t,r.emit("error",t),n()}))},i.prototype._flush=function(t){var e=this;this.processor.flush().then((function(t){if(t.length>0)return e.result.processResult(t)})).then((function(){e.processEnd(t)}),(function(n){e.emit("error",n),t()}))},i.prototype.processEnd=function(t){this.result.endProcess(),this.emit("done"),t()},Object.defineProperty(i.prototype,"parsedLineNumber",{get:function(){return this.runtime.parsedLineNumber},enumerable:!0,configurable:!0}),i}(o.Transform);e.Converter=h}).call(this,n(11).setImmediate)},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},a=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){l(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&l(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){l(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){l(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(l,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(t){delete o[t]}function l(t){if(a)setTimeout(l,0,t);else{var e=o[t];if(e){a=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{c(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(0),n(4))},function(t,e,n){t.exports=i;var r=n(12).EventEmitter;function i(){r.call(this)}n(2)(i,r),i.Readable=n(13),i.Writable=n(46),i.Duplex=n(47),i.Transform=n(48),i.PassThrough=n(49),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",c),t.on("error",c),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],a=n[1],s=new o(3*(r+a)/4-a),u=0,l=a>0?r-4:r,h=0;h<l;h+=4)e=i[t.charCodeAt(h)]<<18|i[t.charCodeAt(h+1)]<<12|i[t.charCodeAt(h+2)]<<6|i[t.charCodeAt(h+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;return 2===a&&(e=i[t.charCodeAt(h)]<<2|i[t.charCodeAt(h+1)]>>4,s[u++]=255&e),1===a&&(e=i[t.charCodeAt(h)]<<10|i[t.charCodeAt(h+1)]<<4|i[t.charCodeAt(h+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e),s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(h(t,a,a+16383>s?s:a+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function h(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(l(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){},function(t,e,n){"use strict";var r=n(7).Buffer,i=n(43);function o(t,e,n){t.copy(e,n)}t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e=r.allocUnsafe(t>>>0),n=this.head,i=0;n;)o(n.data,e,i),i+=n.data.length,n=n.next;return e},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(0))},function(t,e,n){"use strict";t.exports=o;var r=n(27),i=n(5);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(2),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(14)},function(t,e,n){t.exports=n(1)},function(t,e,n){t.exports=n(13).Transform},function(t,e,n){t.exports=n(13).PassThrough},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeParams=function(t){var e={delimiter:",",ignoreColumns:void 0,includeColumns:void 0,quote:'"',trim:!0,checkType:!1,ignoreEmpty:!1,noheader:!1,headers:void 0,flatKeys:!1,maxRowLength:0,checkColumn:!1,escape:'"',colParser:{},eol:void 0,alwaysSplitAtEOL:!1,output:"json",nullObject:!1,downstreamFormat:"line",needEmitAll:!0};for(var n in t||(t={}),t)t.hasOwnProperty(n)&&(Array.isArray(t[n])?e[n]=[].concat(t[n]):e[n]=t[n]);return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initParseRuntime=function(t){var e=t.parseParam,n={needProcessIgnoreColumn:!1,needProcessIncludeColumn:!1,selectedColumns:void 0,ended:!1,hasError:!1,error:void 0,delimiter:t.parseParam.delimiter,eol:t.parseParam.eol,columnConv:[],headerType:[],headerTitle:[],headerFlag:[],headers:void 0,started:!1,parsedLineNumber:0,columnValueSetter:[]};return e.ignoreColumns&&(n.needProcessIgnoreColumn=!0),e.includeColumns&&(n.needProcessIncludeColumn=!0),n}},function(t,e,n){"use strict";(function(t){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(53),a=i(n(15)),s=n(54),u=i(n(16)),c=n(57),l=n(28),h=n(58),f=i(n(59)),p=i(n(29)),d=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowSplit=new h.RowSplit(t.converter),t.eolEmitted=!1,t._needEmitEol=void 0,t.headEmitted=!1,t._needEmitHead=void 0,t}return r(n,e),n.prototype.flush=function(){var t=this;if(this.runtime.csvLineBuffer&&this.runtime.csvLineBuffer.length>0){var e=this.runtime.csvLineBuffer;return this.runtime.csvLineBuffer=void 0,this.process(e,!0).then((function(e){return t.runtime.csvLineBuffer&&t.runtime.csvLineBuffer.length>0?a.default.reject(p.default.unclosed_quote(t.runtime.parsedLineNumber,t.runtime.csvLineBuffer.toString())):a.default.resolve(e)}))}return a.default.resolve([])},n.prototype.destroy=function(){return a.default.resolve()},Object.defineProperty(n.prototype,"needEmitEol",{get:function(){return void 0===this._needEmitEol&&(this._needEmitEol=this.converter.listeners("eol").length>0),this._needEmitEol},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"needEmitHead",{get:function(){return void 0===this._needEmitHead&&(this._needEmitHead=this.converter.listeners("header").length>0),this._needEmitHead},enumerable:!0,configurable:!0}),n.prototype.process=function(t,e){var n,r=this;return void 0===e&&(e=!1),n=e?t.toString():s.prepareData(t,this.converter.parseRuntime),a.default.resolve().then((function(){return r.runtime.preRawDataHook?r.runtime.preRawDataHook(n):n})).then((function(t){return t&&t.length>0?r.processCSV(t,e):a.default.resolve([])}))},n.prototype.processCSV=function(t,e){var n=this,r=this.params,i=this.runtime;i.eol||u.default(t,i),this.needEmitEol&&!this.eolEmitted&&i.eol&&(this.converter.emit("eol",i.eol),this.eolEmitted=!0),r.ignoreEmpty&&!i.started&&(t=l.trimLeft(t));var o=c.stringToLines(t,i);return e?(o.lines.push(o.partial),o.partial=""):this.prependLeftBuf(l.bufFromString(o.partial)),o.lines.length>0?(i.preFileLineHook?this.runPreLineHook(o.lines):a.default.resolve(o.lines)).then((function(t){return i.started||n.runtime.headers?n.processCSVBody(t):n.processDataWithHead(t)})):a.default.resolve([])},n.prototype.processDataWithHead=function(t){if(this.params.noheader)this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=[];else{for(var e="",n=[];t.length;){var r=e+t.shift(),i=this.rowSplit.parse(r);if(i.closed){n=i.cells,e="";break}e=r+u.default(r,this.runtime)}if(this.prependLeftBuf(l.bufFromString(e)),0===n.length)return[];this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=n}return(this.runtime.needProcessIgnoreColumn||this.runtime.needProcessIncludeColumn)&&this.filterHeader(),this.needEmitHead&&!this.headEmitted&&(this.converter.emit("header",this.runtime.headers),this.headEmitted=!0),this.processCSVBody(t)},n.prototype.filterHeader=function(){if(this.runtime.selectedColumns=[],this.runtime.headers){for(var t=this.runtime.headers,e=0;e<t.length;e++)if(this.params.ignoreColumns)if(this.params.ignoreColumns.test(t[e])){if(!this.params.includeColumns||!this.params.includeColumns.test(t[e]))continue;this.runtime.selectedColumns.push(e)}else this.runtime.selectedColumns.push(e);else this.params.includeColumns?this.params.includeColumns.test(t[e])&&this.runtime.selectedColumns.push(e):this.runtime.selectedColumns.push(e);this.runtime.headers=l.filterArray(this.runtime.headers,this.runtime.selectedColumns)}},n.prototype.processCSVBody=function(t){if("line"===this.params.output)return t;var e=this.rowSplit.parseMultiLines(t);return this.prependLeftBuf(l.bufFromString(e.partial)),"csv"===this.params.output?e.rowsCells:f.default(e.rowsCells,this.converter)},n.prototype.prependLeftBuf=function(e){e&&(this.runtime.csvLineBuffer?this.runtime.csvLineBuffer=t.concat([e,this.runtime.csvLineBuffer]):this.runtime.csvLineBuffer=e)},n.prototype.runPreLineHook=function(t){var e=this;return new a.default((function(n,r){!function t(e,n,r,i){if(r>=e.length)i();else if(n.preFileLineHook){var o=e[r],a=n.preFileLineHook(o,n.parsedLineNumber+r);if(r++,a&&a.then)a.then((function(o){e[r-1]=o,t(e,n,r,i)}));else{for(e[r-1]=a;r<e.length;)e[r]=n.preFileLineHook(e[r],n.parsedLineNumber+r),r++;i()}}else i()}(t,e.runtime,0,(function(e){e?r(e):n(t)}))}))},n}(o.Processor);e.ProcessorLocal=d}).call(this,n(3).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Processor=function(t){this.converter=t,this.params=t.parseParam,this.runtime=t.parseRuntime}},function(t,e,n){"use strict";(function(t){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(55));e.prepareData=function(e,n){var r=function(e,n){return n.csvLineBuffer&&n.csvLineBuffer.length>0?t.concat([n.csvLineBuffer,e]):e}(e,n);n.csvLineBuffer=void 0;var o=function(t,e){var n=t.length-1;if(0!=(128&t[n])){for(;128==(192&t[n]);)n--;n--}return n!=t.length-1?(e.csvLineBuffer=t.slice(n+1),t.slice(0,n+1)):t}(r,n).toString("utf8");return!1===n.started?i.default(o):o}}).call(this,n(3).Buffer)},function(t,e,n){"use strict";(function(e){var r=n(56);t.exports=function(t){return"string"==typeof t&&65279===t.charCodeAt(0)?t.slice(1):e.isBuffer(t)&&r(t)&&239===t[0]&&187===t[1]&&191===t[2]?t.slice(3):t}}).call(this,n(3).Buffer)},function(t,e){t.exports=function(t){for(var e=0;e<t.length;)if(9==t[e]||10==t[e]||13==t[e]||32<=t[e]&&t[e]<=126)e+=1;else if(194<=t[e]&&t[e]<=223&&128<=t[e+1]&&t[e+1]<=191)e+=2;else if(224==t[e]&&160<=t[e+1]&&t[e+1]<=191&&128<=t[e+2]&&t[e+2]<=191||(225<=t[e]&&t[e]<=236||238==t[e]||239==t[e])&&128<=t[e+1]&&t[e+1]<=191&&128<=t[e+2]&&t[e+2]<=191||237==t[e]&&128<=t[e+1]&&t[e+1]<=159&&128<=t[e+2]&&t[e+2]<=191)e+=3;else{if(!(240==t[e]&&144<=t[e+1]&&t[e+1]<=191&&128<=t[e+2]&&t[e+2]<=191&&128<=t[e+3]&&t[e+3]<=191||241<=t[e]&&t[e]<=243&&128<=t[e+1]&&t[e+1]<=191&&128<=t[e+2]&&t[e+2]<=191&&128<=t[e+3]&&t[e+3]<=191||244==t[e]&&128<=t[e+1]&&t[e+1]<=143&&128<=t[e+2]&&t[e+2]<=191&&128<=t[e+3]&&t[e+3]<=191))return!1;e+=4}return!0}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(16));e.stringToLines=function(t,e){var n=i.default(t,e),r=t.split(n);return{lines:r,partial:r.pop()||""}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(16)),o=n(28),a=[",","|","\t",";",":"],s=function(){function t(t){this.conv=t,this.cachedRegExp={},this.delimiterEmitted=!1,this._needEmitDelimiter=void 0,this.quote=t.parseParam.quote,this.trim=t.parseParam.trim,this.escape=t.parseParam.escape}return Object.defineProperty(t.prototype,"needEmitDelimiter",{get:function(){return void 0===this._needEmitDelimiter&&(this._needEmitDelimiter=this.conv.listeners("delimiter").length>0),this._needEmitDelimiter},enumerable:!0,configurable:!0}),t.prototype.parse=function(t){if(0===t.length||this.conv.parseParam.ignoreEmpty&&0===t.trim().length)return{cells:[],closed:!0};var e=this.quote,n=this.trim;this.escape,(this.conv.parseRuntime.delimiter instanceof Array||"auto"===this.conv.parseRuntime.delimiter.toLowerCase())&&(this.conv.parseRuntime.delimiter=this.getDelimiter(t)),this.needEmitDelimiter&&!this.delimiterEmitted&&(this.conv.emit("delimiter",this.conv.parseRuntime.delimiter),this.delimiterEmitted=!0);var r=this.conv.parseRuntime.delimiter,i=t.split(r);if("off"===e){if(n)for(var o=0;o<i.length;o++)i[o]=i[o].trim();return{cells:i,closed:!0}}return this.toCSVRow(i,n,e,r)},t.prototype.toCSVRow=function(t,e,n,r){for(var i=[],a=!1,s="",u=0,c=t.length;u<c;u++){var l=t[u];!a&&e&&(l=o.trimLeft(l));var h=l.length;if(a)this.isQuoteClose(l)?(a=!1,s+=r+(l=l.substr(0,h-1)),s=this.escapeQuote(s),e&&(s=o.trimRight(s)),i.push(s),s=""):s+=r+l;else{if(2===h&&l===this.quote+this.quote){i.push("");continue}if(this.isQuoteOpen(l)){if(l=l.substr(1),this.isQuoteClose(l)){l=l.substring(0,l.lastIndexOf(n)),l=this.escapeQuote(l),i.push(l);continue}if(-1!==l.indexOf(n)){for(var f=0,p="",d=0,v=l;d<v.length;d++){var y=v[d];y===n&&p!==this.escape?(f++,p=""):p=y}if(f%2==1){e&&(l=o.trimRight(l)),i.push(n+l);continue}a=!0,s+=l;continue}a=!0,s+=l;continue}e&&(l=o.trimRight(l)),i.push(l)}}return{cells:i,closed:!a}},t.prototype.getDelimiter=function(t){var e;if("auto"===this.conv.parseParam.delimiter)e=a;else{if(!(this.conv.parseParam.delimiter instanceof Array))return this.conv.parseParam.delimiter;e=this.conv.parseParam.delimiter}var n=0,r=",";return e.forEach((function(e){var i=t.split(e).length;i>n&&(r=e,n=i)})),r},t.prototype.isQuoteOpen=function(t){var e=this.quote,n=this.escape;return t[0]===e&&(t[1]!==e||t[1]===n&&(t[2]===e||2===t.length))},t.prototype.isQuoteClose=function(t){var e=this.quote,n=this.escape;this.conv.parseParam.trim&&(t=o.trimRight(t));for(var r=0,i=t.length-1;t[i]===e||t[i]===n;)i--,r++;return r%2!=0},t.prototype.escapeQuote=function(t){var e="es|"+this.quote+"|"+this.escape;void 0===this.cachedRegExp[e]&&(this.cachedRegExp[e]=new RegExp("\\"+this.escape+"\\"+this.quote,"g"));var n=this.cachedRegExp[e];return t.replace(n,this.quote)},t.prototype.parseMultiLines=function(t){for(var e=[],n="";t.length;){var r=n+t.shift(),a=this.parse(r);0===a.cells.length&&this.conv.parseParam.ignoreEmpty||(a.closed||this.conv.parseParam.alwaysSplitAtEOL?(this.conv.parseRuntime.selectedColumns?e.push(o.filterArray(a.cells,this.conv.parseRuntime.selectedColumns)):e.push(a.cells),n=""):n=r+(i.default(r,this.conv.parseRuntime)||"\n"))}return{rowsCells:e,partial:n}},t}();e.RowSplit=s},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(29)),o=r(n(60)),a=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/;function s(t,e,n){if(e.parseParam.checkColumn&&e.parseRuntime.headers&&t.length!==e.parseRuntime.headers.length)throw i.default.column_mismatched(e.parseRuntime.parsedLineNumber+n);return function(t,e,n){for(var r=!1,i={},o=0,a=t.length;o<a;o++){var s=t[o];if(!n.parseParam.ignoreEmpty||""!==s){r=!0;var u=e[o];u&&""!==u||(u=e[o]="field"+(o+1));var h=c(u,o,n);if(h){var f=h(s,u,i,t,o);void 0!==f&&l(i,u,f,n,o)}else n.parseParam.checkType&&(s=p(0,u,o,n)(s)),void 0!==s&&l(i,u,s,n,o)}}return r?i:null}(t,e.parseRuntime.headers||[],e)||null}e.default=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=s(t[r],e,r);o&&n.push(o)}return n};var u={string:v,number:d,omit:function(){}};function c(t,e,n){if(void 0!==n.parseRuntime.columnConv[e])return n.parseRuntime.columnConv[e];var r=n.parseParam.colParser[t];if(void 0===r)return n.parseRuntime.columnConv[e]=null;if("object"==typeof r&&(r=r.cellParser||"string"),"string"==typeof r){r=r.trim().toLowerCase();var i=u[r];return n.parseRuntime.columnConv[e]=i||null}return n.parseRuntime.columnConv[e]="function"==typeof r?r:null}function l(t,e,n,r,i){if(!r.parseRuntime.columnValueSetter[i])if(r.parseParam.flatKeys)r.parseRuntime.columnValueSetter[i]=h;else if(e.indexOf(".")>-1){for(var o=e.split("."),a=!0;o.length>0;)if(0===o.shift().length){a=!1;break}!a||r.parseParam.colParser[e]&&r.parseParam.colParser[e].flat?r.parseRuntime.columnValueSetter[i]=h:r.parseRuntime.columnValueSetter[i]=f}else r.parseRuntime.columnValueSetter[i]=h;!0===r.parseParam.nullObject&&"null"===n&&(n=null),r.parseRuntime.columnValueSetter[i](t,e,n)}function h(t,e,n){t[e]=n}function f(t,e,n){o.default(t,e,n)}function p(t,e,n,r){return r.parseRuntime.headerType[n]?r.parseRuntime.headerType[n]:e.indexOf("number#!")>-1?r.parseRuntime.headerType[n]=d:e.indexOf("string#!")>-1?r.parseRuntime.headerType[n]=v:r.parseParam.checkType?r.parseRuntime.headerType[n]=y:r.parseRuntime.headerType[n]=v}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function v(t){return t.toString()}function y(t){var e=t.trim();return""===e?v(t):a.test(e)?d(t):5===e.length&&"false"===e.toLowerCase()||4===e.length&&"true"===e.toLowerCase()?function(t){var e=t.trim();return 5!==e.length||"false"!==e.toLowerCase()}(t):"{"===e[0]&&"}"===e[e.length-1]||"["===e[0]&&"]"===e[e.length-1]?function(t){try{return JSON.parse(t)}catch(e){return t}}(t):v(t)}},function(t,e,n){var r=n(61);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){var r=n(62),i=n(74),o=n(103),a=n(20),s=n(104);t.exports=function(t,e,n,u){if(!a(t))return t;for(var c=-1,l=(e=i(e,t)).length,h=l-1,f=t;null!=f&&++c<l;){var p=s(e[c]),d=n;if(c!=h){var v=f[p];void 0===(d=u?u(v,p,f):void 0)&&(d=a(v)?v:o(e[c+1])?[]:{})}r(f,p,d),f=f[p]}return t}},function(t,e,n){var r=n(63),i=n(31),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(64);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(17),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){var r=n(66),i=n(70),o=n(20),a=n(72),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},function(t,e,n){var r=n(30),i=n(20);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(0))},function(t,e,n){var r=n(18),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(71),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(19)["__core-js_shared__"];t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(21),i=n(75),o=n(77),a=n(100);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(21),i=n(22),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n(78)((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)})),e}));t.exports=o},function(t,e,n){var r=n(79);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(80);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(81),i=n(95),o=n(97),a=n(98),s=n(99);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(82),i=n(88),o=n(94);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(83),i=n(84),o=n(85),a=n(86),s=n(87);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(8);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(8),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(8),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(8);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(89),i=n(90),o=n(91),a=n(92),s=n(93);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(9),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(9);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(9);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(9);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(17)(n(19),"Map");t.exports=r},function(t,e,n){var r=n(10);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(10);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(10);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(10);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(101);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(18),i=n(102),o=n(21),a=n(22),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(22);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(15)),o=n(106),a=function(){function t(t){this.converter=t,this.finalResult=[]}return Object.defineProperty(t.prototype,"needEmitLine",{get:function(){return!!this.converter.parseRuntime.subscribe&&!!this.converter.parseRuntime.subscribe.onNext||this.needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"needPushDownstream",{get:function(){return void 0===this._needPushDownstream&&(this._needPushDownstream=this.converter.listeners("data").length>0||this.converter.listeners("readable").length>0),this._needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"needEmitAll",{get:function(){return!!this.converter.parseRuntime.then&&this.converter.parseParam.needEmitAll},enumerable:!0,configurable:!0}),t.prototype.processResult=function(t){var e=this,n=this.converter.parseRuntime.parsedLineNumber;return this.needPushDownstream&&"array"===this.converter.parseParam.downstreamFormat&&0===n&&s(this.converter,"["+o.EOL),new i.default((function(n,r){e.needEmitLine?function t(e,n,r,i,o){if(r>=e.length)o();else if(n.parseRuntime.subscribe&&n.parseRuntime.subscribe.onNext){var a=n.parseRuntime.subscribe.onNext,u=e[r],c=a(u,n.parseRuntime.parsedLineNumber+r);if(r++,c&&c.then)c.then((function(){!function(e,n,r,i,o,a,u){o&&s(r,u),t(e,r,i,o,a)}(e,0,n,r,i,o,u)}),o);else{for(i&&s(n,u);r<e.length;){var l=e[r];a(l,n.parseRuntime.parsedLineNumber+r),r++,i&&s(n,l)}o()}}else{if(i)for(;r<e.length;)l=e[r++],s(n,l);o()}}(t,e.converter,0,e.needPushDownstream,(function(i){i?r(i):(e.appendFinalResult(t),n())})):(e.appendFinalResult(t),n())}))},t.prototype.appendFinalResult=function(t){this.needEmitAll&&(this.finalResult=this.finalResult.concat(t)),this.converter.parseRuntime.parsedLineNumber+=t.length},t.prototype.processError=function(t){this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onError&&this.converter.parseRuntime.subscribe.onError(t),this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onrejected&&this.converter.parseRuntime.then.onrejected(t)},t.prototype.endProcess=function(){this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onfulfilled&&(this.needEmitAll?this.converter.parseRuntime.then.onfulfilled(this.finalResult):this.converter.parseRuntime.then.onfulfilled([])),this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onCompleted&&this.converter.parseRuntime.subscribe.onCompleted(),this.needPushDownstream&&"array"===this.converter.parseParam.downstreamFormat&&s(this.converter,"]"+o.EOL)},t}();function s(t,e){if("object"!=typeof e||t.options.objectMode)t.push(e);else{var n=JSON.stringify(e);t.push(n+("array"===t.parseParam.downstreamFormat?","+o.EOL:o.EOL),"utf8")}}e.Result=a},function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!=typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}}])},1332:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Adder:()=>E,Delaunay:()=>cs,FormatSpecifier:()=>fc,Voronoi:()=>rs,active:()=>Fi,arc:()=>_E,area:()=>CE,areaRadial:()=>LE,ascending:()=>i,autoType:()=>Us,axisBottom:()=>Gt,axisLeft:()=>zt,axisRight:()=>Ht,axisTop:()=>Bt,bin:()=>G,bisect:()=>h,bisectCenter:()=>l,bisectLeft:()=>c,bisectRight:()=>u,bisector:()=>o,blob:()=>_u,brush:()=>vo,brushSelection:()=>ho,brushX:()=>fo,brushY:()=>po,buffer:()=>wu,chord:()=>Co,chordDirected:()=>ko,chordTranspose:()=>Ao,cluster:()=>Sd,color:()=>Fn,contourDensity:()=>qa,contours:()=>Da,count:()=>f,create:()=>Ww,creator:()=>$e,cross:()=>y,csv:()=>Iu,csvFormat:()=>Is,csvFormatBody:()=>Cs,csvFormatRow:()=>ks,csvFormatRows:()=>As,csvFormatValue:()=>Ns,csvParse:()=>Ss,csvParseRows:()=>xs,cubehelix:()=>xa,cumsum:()=>g,curveBasis:()=>vT,curveBasisClosed:()=>gT,curveBasisOpen:()=>_T,curveBundle:()=>wT,curveCardinal:()=>ST,curveCardinalClosed:()=>IT,curveCardinalOpen:()=>AT,curveCatmullRom:()=>PT,curveCatmullRomClosed:()=>OT,curveCatmullRomOpen:()=>DT,curveLinear:()=>TE,curveLinearClosed:()=>FT,curveMonotoneX:()=>zT,curveMonotoneY:()=>WT,curveNatural:()=>YT,curveStep:()=>XT,curveStepAfter:()=>ZT,curveStepBefore:()=>$T,descending:()=>m,deviation:()=>b,difference:()=>It,disjoint:()=>Ct,dispatch:()=>$t,drag:()=>ys,dragDisable:()=>gn,dragEnable:()=>mn,dsv:()=>xu,dsvFormat:()=>Es,easeBack:()=>pu,easeBackIn:()=>hu,easeBackInOut:()=>pu,easeBackOut:()=>fu,easeBounce:()=>uu,easeBounceIn:()=>su,easeBounceInOut:()=>cu,easeBounceOut:()=>uu,easeCircle:()=>ou,easeCircleIn:()=>ru,easeCircleInOut:()=>ou,easeCircleOut:()=>iu,easeCubic:()=>Oi,easeCubicIn:()=>Pi,easeCubicInOut:()=>Oi,easeCubicOut:()=>Ri,easeElastic:()=>yu,easeElasticIn:()=>vu,easeElasticInOut:()=>gu,easeElasticOut:()=>yu,easeExp:()=>nu,easeExpIn:()=>tu,easeExpInOut:()=>nu,easeExpOut:()=>eu,easeLinear:()=>qs,easePoly:()=>Ks,easePolyIn:()=>zs,easePolyInOut:()=>Ks,easePolyOut:()=>Ws,easeQuad:()=>Gs,easeQuadIn:()=>Bs,easeQuadInOut:()=>Gs,easeQuadOut:()=>Hs,easeSin:()=>$s,easeSinIn:()=>Qs,easeSinInOut:()=>$s,easeSinOut:()=>Xs,every:()=>_t,extent:()=>w,filter:()=>wt,forceCenter:()=>Du,forceCollide:()=>Ju,forceLink:()=>Xu,forceManyBody:()=>rc,forceRadial:()=>ic,forceSimulation:()=>nc,forceX:()=>oc,forceY:()=>ac,format:()=>gc,formatDefaultLocale:()=>Ec,formatLocale:()=>wc,formatPrefix:()=>mc,formatSpecifier:()=>hc,fsum:()=>T,geoAlbers:()=>Up,geoAlbersUsa:()=>Vp,geoArea:()=>Il,geoAzimuthalEqualArea:()=>Gp,geoAzimuthalEqualAreaRaw:()=>Hp,geoAzimuthalEquidistant:()=>Wp,geoAzimuthalEquidistantRaw:()=>zp,geoBounds:()=>sh,geoCentroid:()=>_h,geoCircle:()=>Nh,geoClipAntimeridian:()=>qh,geoClipCircle:()=>Bh,geoClipExtent:()=>Qh,geoClipRectangle:()=>Yh,geoConicConformal:()=>$p,geoConicConformalRaw:()=>Xp,geoConicEqualArea:()=>jp,geoConicEqualAreaRaw:()=>Fp,geoConicEquidistant:()=>nd,geoConicEquidistantRaw:()=>ed,geoContains:()=>df,geoDistance:()=>of,geoEqualEarth:()=>cd,geoEqualEarthRaw:()=>ud,geoEquirectangular:()=>td,geoEquirectangularRaw:()=>Zp,geoGnomonic:()=>hd,geoGnomonicRaw:()=>ld,geoGraticule:()=>gf,geoGraticule10:()=>mf,geoIdentity:()=>fd,geoInterpolate:()=>_f,geoLength:()=>ef,geoMercator:()=>Jp,geoMercatorRaw:()=>Kp,geoNaturalEarth1:()=>dd,geoNaturalEarth1Raw:()=>pd,geoOrthographic:()=>yd,geoOrthographicRaw:()=>vd,geoPath:()=>wp,geoProjection:()=>Mp,geoProjectionMutator:()=>Dp,geoRotation:()=>Ch,geoStereographic:()=>md,geoStereographicRaw:()=>gd,geoStream:()=>nl,geoTransform:()=>Ep,geoTransverseMercator:()=>bd,geoTransverseMercatorRaw:()=>_d,gray:()=>ia,greatest:()=>lt,greatestIndex:()=>ht,group:()=>x,groups:()=>I,hcl:()=>pa,hierarchy:()=>Id,histogram:()=>G,hsl:()=>Jn,html:()=>Ou,image:()=>Au,index:()=>k,indexes:()=>N,interpolate:()=>mr,interpolateArray:()=>lr,interpolateBasis:()=>$n,interpolateBasisClosed:()=>Zn,interpolateBlues:()=>_w,interpolateBrBG:()=>Pb,interpolateBuGn:()=>Yb,interpolateBuPu:()=>Xb,interpolateCividis:()=>Nw,interpolateCool:()=>Ow,interpolateCubehelix:()=>Fv,interpolateCubehelixDefault:()=>Pw,interpolateCubehelixLong:()=>jv,interpolateDate:()=>fr,interpolateDiscrete:()=>Sv,interpolateGnBu:()=>Zb,interpolateGreens:()=>ww,interpolateGreys:()=>Tw,interpolateHcl:()=>Mv,interpolateHclLong:()=>Dv,interpolateHsl:()=>Nv,interpolateHslLong:()=>Pv,interpolateHue:()=>xv,interpolateInferno:()=>Gw,interpolateLab:()=>Rv,interpolateMagma:()=>Hw,interpolateNumber:()=>pr,interpolateNumberArray:()=>ur,interpolateObject:()=>dr,interpolateOrRd:()=>ew,interpolateOranges:()=>kw,interpolatePRGn:()=>Ob,interpolatePiYG:()=>Db,interpolatePlasma:()=>zw,interpolatePuBu:()=>ow,interpolatePuBuGn:()=>rw,interpolatePuOr:()=>Fb,interpolatePuRd:()=>sw,interpolatePurples:()=>xw,interpolateRainbow:()=>Dw,interpolateRdBu:()=>Ub,interpolateRdGy:()=>qb,interpolateRdPu:()=>cw,interpolateRdYlBu:()=>Hb,interpolateRdYlGn:()=>zb,interpolateReds:()=>Cw,interpolateRgb:()=>ir,interpolateRgbBasis:()=>ar,interpolateRgbBasisClosed:()=>sr,interpolateRound:()=>Iv,interpolateSinebow:()=>Uw,interpolateSpectral:()=>Kb,interpolateString:()=>gr,interpolateTransformCss:()=>$r,interpolateTransformSvg:()=>Zr,interpolateTurbo:()=>Vw,interpolateViridis:()=>Bw,interpolateWarm:()=>Rw,interpolateYlGn:()=>pw,interpolateYlGnBu:()=>hw,interpolateYlOrBr:()=>vw,interpolateYlOrRd:()=>gw,interpolateZoom:()=>Av,interrupt:()=>Wr,intersection:()=>kt,interval:()=>_S,isoFormat:()=>gS,isoParse:()=>mS,json:()=>Nu,lab:()=>oa,lch:()=>fa,least:()=>ut,leastIndex:()=>ct,line:()=>IE,lineRadial:()=>DE,linkHorizontal:()=>GE,linkRadial:()=>WE,linkVertical:()=>zE,local:()=>Jw,map:()=>Et,matcher:()=>ie,max:()=>z,maxIndex:()=>Z,mean:()=>tt,median:()=>et,merge:()=>nt,min:()=>W,minIndex:()=>rt,namespace:()=>_e,namespaces:()=>me,nice:()=>B,now:()=>Pr,pack:()=>Xd,packEnclose:()=>Rd,packSiblings:()=>zd,pairs:()=>it,partition:()=>rv,path:()=>Fo,permute:()=>at,pie:()=>NE,piecewise:()=>Uv,pointRadial:()=>FE,pointer:()=>br,pointers:()=>Qw,polygonArea:()=>qv,polygonCentroid:()=>Bv,polygonContains:()=>Wv,polygonHull:()=>zv,polygonLength:()=>Kv,precisionFixed:()=>Tc,precisionPrefix:()=>Sc,precisionRound:()=>xc,quadtree:()=>Vu,quantile:()=>Y,quantileSorted:()=>Q,quantize:()=>Vv,quickselect:()=>K,radialArea:()=>LE,radialLine:()=>DE,randomBates:()=>ty,randomBernoulli:()=>ry,randomBeta:()=>ay,randomBinomial:()=>sy,randomCauchy:()=>cy,randomExponential:()=>ey,randomGamma:()=>oy,randomGeometric:()=>iy,randomInt:()=>Qv,randomIrwinHall:()=>Zv,randomLcg:()=>py,randomLogNormal:()=>$v,randomLogistic:()=>ly,randomNormal:()=>Xv,randomPareto:()=>ny,randomPoisson:()=>hy,randomUniform:()=>Yv,randomWeibull:()=>uy,range:()=>st,reduce:()=>Tt,reverse:()=>St,rgb:()=>qn,ribbon:()=>Jo,ribbonArrow:()=>Yo,rollup:()=>C,rollups:()=>A,scaleBand:()=>my,scaleDiverging:()=>pb,scaleDivergingLog:()=>db,scaleDivergingPow:()=>yb,scaleDivergingSqrt:()=>gb,scaleDivergingSymlog:()=>vb,scaleIdentity:()=>Oy,scaleImplicit:()=>yy,scaleLinear:()=>Ry,scaleLog:()=>By,scaleOrdinal:()=>gy,scalePoint:()=>by,scalePow:()=>Xy,scaleQuantile:()=>ng,scaleQuantize:()=>rg,scaleRadial:()=>eg,scaleSequential:()=>ab,scaleSequentialLog:()=>sb,scaleSequentialPow:()=>cb,scaleSequentialQuantile:()=>hb,scaleSequentialSqrt:()=>lb,scaleSequentialSymlog:()=>ub,scaleSqrt:()=>$y,scaleSymlog:()=>Wy,scaleThreshold:()=>ig,scaleTime:()=>K_,scaleUtc:()=>rb,scan:()=>ft,schemeAccent:()=>bb,schemeBlues:()=>mw,schemeBrBG:()=>Nb,schemeBuGn:()=>Jb,schemeBuPu:()=>Qb,schemeCategory10:()=>_b,schemeDark2:()=>wb,schemeGnBu:()=>$b,schemeGreens:()=>bw,schemeGreys:()=>Ew,schemeOrRd:()=>tw,schemeOranges:()=>Aw,schemePRGn:()=>Rb,schemePaired:()=>Eb,schemePastel1:()=>Tb,schemePastel2:()=>Sb,schemePiYG:()=>Mb,schemePuBu:()=>iw,schemePuBuGn:()=>nw,schemePuOr:()=>Lb,schemePuRd:()=>aw,schemePurples:()=>Sw,schemeRdBu:()=>jb,schemeRdGy:()=>Vb,schemeRdPu:()=>uw,schemeRdYlBu:()=>Bb,schemeRdYlGn:()=>Gb,schemeReds:()=>Iw,schemeSet1:()=>xb,schemeSet2:()=>Ib,schemeSet3:()=>Cb,schemeSpectral:()=>Wb,schemeTableau10:()=>Ab,schemeYlGn:()=>fw,schemeYlGnBu:()=>lw,schemeYlOrBr:()=>dw,schemeYlOrRd:()=>yw,select:()=>dn,selectAll:()=>Xw,selection:()=>pn,selector:()=>te,selectorAll:()=>re,shuffle:()=>pt,shuffler:()=>dt,some:()=>bt,sort:()=>xt,stack:()=>iS,stackOffsetDiverging:()=>aS,stackOffsetExpand:()=>oS,stackOffsetNone:()=>tS,stackOffsetSilhouette:()=>sS,stackOffsetWiggle:()=>uS,stackOrderAppearance:()=>cS,stackOrderAscending:()=>hS,stackOrderDescending:()=>pS,stackOrderInsideOut:()=>dS,stackOrderNone:()=>eS,stackOrderReverse:()=>vS,stratify:()=>uv,style:()=>Ne,subset:()=>Pt,sum:()=>vt,superset:()=>Nt,svg:()=>Mu,symbol:()=>hT,symbolCircle:()=>KE,symbolCross:()=>JE,symbolDiamond:()=>XE,symbolSquare:()=>nT,symbolStar:()=>eT,symbolTriangle:()=>iT,symbolWye:()=>cT,symbols:()=>lT,text:()=>Tu,thresholdFreedmanDiaconis:()=>X,thresholdScott:()=>$,thresholdSturges:()=>H,tickFormat:()=>Ny,tickIncrement:()=>V,tickStep:()=>q,ticks:()=>U,timeDay:()=>Dg,timeDays:()=>Lg,timeFormat:()=>wm,timeFormatDefaultLocale:()=>B_,timeFormatLocale:()=>_m,timeFriday:()=>xg,timeFridays:()=>Rg,timeHour:()=>jg,timeHours:()=>Ug,timeInterval:()=>sg,timeMillisecond:()=>Kg,timeMilliseconds:()=>Jg,timeMinute:()=>qg,timeMinutes:()=>Bg,timeMonday:()=>wg,timeMondays:()=>Ag,timeMonth:()=>fg,timeMonths:()=>pg,timeParse:()=>Em,timeSaturday:()=>Ig,timeSaturdays:()=>Og,timeSecond:()=>Gg,timeSeconds:()=>zg,timeSunday:()=>bg,timeSundays:()=>Cg,timeThursday:()=>Sg,timeThursdays:()=>Pg,timeTuesday:()=>Eg,timeTuesdays:()=>kg,timeWednesday:()=>Tg,timeWednesdays:()=>Ng,timeWeek:()=>bg,timeWeeks:()=>Cg,timeYear:()=>cg,timeYears:()=>lg,timeout:()=>Ur,timer:()=>Mr,timerFlush:()=>Dr,transition:()=>Ai,transpose:()=>yt,tree:()=>vv,treemap:()=>bv,treemapBinary:()=>wv,treemapDice:()=>nv,treemapResquarify:()=>Tv,treemapSlice:()=>yv,treemapSliceDice:()=>Ev,treemapSquarify:()=>_v,tsv:()=>Cu,tsvFormat:()=>Ms,tsvFormatBody:()=>Ds,tsvFormatRow:()=>Fs,tsvFormatRows:()=>Ls,tsvFormatValue:()=>js,tsvParse:()=>Rs,tsvParseRows:()=>Os,union:()=>Rt,utcDay:()=>hm,utcDays:()=>fm,utcFormat:()=>Tm,utcFriday:()=>em,utcFridays:()=>um,utcHour:()=>$_,utcHours:()=>Z_,utcMillisecond:()=>Kg,utcMilliseconds:()=>Jg,utcMinute:()=>eb,utcMinutes:()=>nb,utcMonday:()=>Xg,utcMondays:()=>im,utcMonth:()=>Y_,utcMonths:()=>Q_,utcParse:()=>Sm,utcSaturday:()=>nm,utcSaturdays:()=>cm,utcSecond:()=>Gg,utcSeconds:()=>zg,utcSunday:()=>Qg,utcSundays:()=>rm,utcThursday:()=>tm,utcThursdays:()=>sm,utcTuesday:()=>$g,utcTuesdays:()=>om,utcWednesday:()=>Zg,utcWednesdays:()=>am,utcWeek:()=>Qg,utcWeeks:()=>rm,utcYear:()=>dm,utcYears:()=>vm,variance:()=>_,version:()=>r,window:()=>Ie,xml:()=>Ru,zip:()=>mt,zoom:()=>OS,zoomIdentity:()=>TS,zoomTransform:()=>SS});var r="6.3.1";function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function o(t){let e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>i(t(e),n)}(t)),{left:r,center:function(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);const a=r(t,n,i,o-1);return a>i&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}}}function a(t){return null===t?NaN:+t}const s=o(i),u=s.right,c=s.left,l=o(a).center,h=u;function f(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function p(t){return 0|t.length}function d(t){return!(t>0)}function v(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function y(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(v)).map(p),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(d))return o;for(;;){o.push(i.map(((e,n)=>t[n][e])));let a=r;for(;++i[a]===n[a];){if(0===a)return e?o.map(e):o;i[a--]=0}}}function g(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)}function m(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function _(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function b(t,e){const n=_(t,e);return n?Math.sqrt(n):n}function w(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class E{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}function T(t,e){const n=new E;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function S(t){return t}function x(t,...e){return R(t,S,S,e)}function I(t,...e){return R(t,Array.from,S,e)}function C(t,e,...n){return R(t,S,e,n)}function A(t,e,...n){return R(t,Array.from,e,n)}function k(t,...e){return R(t,S,P,e)}function N(t,...e){return R(t,Array.from,P,e)}function P(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function R(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new Map,s=r[o++];let u=-1;for(const t of i){const e=s(t,++u,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}var O=Array.prototype,M=O.slice;function D(t){return function(){return t}}O.map;var L=Math.sqrt(50),F=Math.sqrt(10),j=Math.sqrt(2);function U(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=V(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(a=-a,t=Math.ceil(t*a),e=Math.floor(e*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)/a;return r&&o.reverse(),o}function V(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=L?10:o>=F?5:o>=j?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=L?10:o>=F?5:o>=j?2:1)}function q(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=L?i*=10:o>=F?i*=5:o>=j&&(i*=2),e<t?-i:i}function B(t,e,n){let r;for(;;){const i=V(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function H(t){return Math.ceil(Math.log(f(t))/Math.LN2)+1}function G(){var t=S,e=w,n=H;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=t(r[i],i,r);var u=e(s),c=u[0],l=u[1],f=n(s,c,l);if(!Array.isArray(f)){const t=l,n=+f;if(e===w&&([c,l]=B(c,l,n)),(f=U(c,l,n))[f.length-1]>=l)if(t>=l&&e===w){const t=V(c,l,n);isFinite(t)&&(t>0?l=(Math.floor(l/t)+1)*t:t<0&&(l=(Math.ceil(l*-t)+1)/-t))}else f.pop()}for(var p=f.length;f[0]<=c;)f.shift(),--p;for(;f[p-1]>l;)f.pop(),--p;var d,v=new Array(p+1);for(i=0;i<=p;++i)(d=v[i]=[]).x0=i>0?f[i-1]:c,d.x1=i<p?f[i]:l;for(i=0;i<a;++i)c<=(o=s[i])&&o<=l&&v[h(f,o,0,p)].push(r[i]);return v}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:D(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:D([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?D(M.call(t)):D(t),r):n},r}function z(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function W(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function K(t,e,n=0,r=t.length-1,o=i){for(;r>n;){if(r-n>600){const i=r-n+1,a=e-n+1,s=Math.log(i),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(i-u)/i)*(a-i/2<0?-1:1);K(t,e,Math.max(n,Math.floor(e-a*u/i+c)),Math.min(r,Math.floor(e+(i-a)*u/i+c)),o)}const i=t[e];let a=n,s=r;for(J(t,n,e),o(t[r],i)>0&&J(t,n,r);a<s;){for(J(t,a,s),++a,--s;o(t[a],i)<0;)++a;for(;o(t[s],i)>0;)--s}0===o(t[n],i)?J(t,n,s):(++s,J(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function J(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Y(t,e,n){if(r=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n))).length){if((e=+e)<=0||r<2)return W(t);if(e>=1)return z(t);var r,i=(r-1)*e,o=Math.floor(i),a=z(K(t,o).subarray(0,o+1));return a+(W(t.subarray(o+1))-a)*(i-o)}}function Q(t,e,n=a){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(i-o)}}function X(t,e,n){return Math.ceil((n-e)/(2*(Y(t,.75)-Y(t,.25))*Math.pow(f(t),-1/3)))}function $(t,e,n){return Math.ceil((n-e)/(3.5*b(t)*Math.pow(f(t),-1/3)))}function Z(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function tt(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function et(t,e){return Y(t,.5,e)}function nt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function rt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function it(t,e=ot){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function ot(t,e){return[t,e]}function at(t,e){return Array.from(e,(e=>t[e]))}function st(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function ut(t,e=i){let n,r=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(r?i(t,o)<0:0===i(t,t))&&(n=a,o=t,r=!0)}}else for(const i of t)(r?e(i,n)<0:0===e(i,i))&&(n=i,r=!0);return n}function ct(t,e=i){if(1===e.length)return rt(t,e);let n,r=-1,o=-1;for(const i of t)++o,(r<0?0===e(i,i):e(i,n)<0)&&(n=i,r=o);return r}function lt(t,e=i){let n,r=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(r?i(t,o)>0:0===i(t,t))&&(n=a,o=t,r=!0)}}else for(const i of t)(r?e(i,n)>0:0===e(i,i))&&(n=i,r=!0);return n}function ht(t,e=i){if(1===e.length)return Z(t,e);let n,r=-1,o=-1;for(const i of t)++o,(r<0?0===e(i,i):e(i,n)>0)&&(n=i,r=o);return r}function ft(t,e){const n=ct(t,e);return n<0?void 0:n}const pt=dt(Math.random);function dt(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}function vt(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function yt(t){if(!(i=t.length))return[];for(var e=-1,n=W(t,gt),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function gt(t){return t.length}function mt(){return yt(arguments)}function _t(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function bt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function wt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function Et(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))}function Tt(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)n=e(n,o,++a,t);return n}function St(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function xt(t,e=i){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return t=Array.from(t),1===e.length?(e=t.map(e),at(t,t.map(((t,e)=>e)).sort(((t,n)=>i(e[t],e[n]))))):t.sort(e)}function It(t,...e){t=new Set(t);for(const n of e)for(const e of n)t.delete(e);return t}function Ct(t,e){const n=e[Symbol.iterator](),r=new Set;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0}function At(t){return t instanceof Set?t:new Set(t)}function kt(t,...e){t=new Set(t),e=e.map(At);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function Nt(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){if(r.has(t))continue;let e,i;for(;({value:e,done:i}=n.next());){if(i)return!1;if(r.add(e),Object.is(t,e))break}}return!0}function Pt(t,e){return Nt(e,t)}function Rt(...t){const e=new Set;for(const n of t)for(const t of n)e.add(t);return e}var Ot=Array.prototype.slice;function Mt(t){return t}var Dt=1e-6;function Lt(t){return"translate("+(t+.5)+",0)"}function Ft(t){return"translate(0,"+(t+.5)+")"}function jt(t){return e=>+t(e)}function Ut(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Vt(){return!this.__axis}function qt(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",l=1===t||3===t?Lt:Ft;function h(h){var f=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):Mt:i,d=Math.max(o,0)+s,v=e.range(),y=+v[0]+.5,g=+v[v.length-1]+.5,m=(e.bandwidth?Ut:jt)(e.copy()),_=h.selection?h.selection():h,b=_.selectAll(".domain").data([null]),w=_.selectAll(".tick").data(f,e).order(),E=w.exit(),T=w.enter().append("g").attr("class","tick"),S=w.select("line"),x=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(T),S=S.merge(T.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),x=x.merge(T.append("text").attr("fill","currentColor").attr(c,u*d).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==_&&(b=b.transition(h),w=w.transition(h),S=S.transition(h),x=x.transition(h),E=E.transition(h).attr("opacity",Dt).attr("transform",(function(t){return isFinite(t=m(t))?l(t):this.getAttribute("transform")})),T.attr("opacity",Dt).attr("transform",(function(t){var e=this.parentNode.__axis;return l(e&&isFinite(e=e(t))?e:m(t))}))),E.remove(),b.attr("d",4===t||2==t?a?"M"+u*a+","+y+"H0.5V"+g+"H"+u*a:"M0.5,"+y+"V"+g:a?"M"+y+","+u*a+"V0.5H"+g+"V"+u*a:"M"+y+",0.5H"+g),w.attr("opacity",1).attr("transform",(function(t){return l(m(t))})),S.attr(c+"2",u*o),x.attr(c,u*d).text(p),_.filter(Vt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each((function(){this.__axis=m}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Ot.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Ot.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Ot.call(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}function Bt(t){return qt(1,t)}function Ht(t){return qt(2,t)}function Gt(t){return qt(3,t)}function zt(t){return qt(4,t)}var Wt={value:()=>{}};function Kt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Jt(r)}function Jt(t){this._=t}function Yt(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Qt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Xt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Wt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Jt.prototype=Kt.prototype={constructor:Jt,on:function(t,e){var n,r=this._,i=Yt(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=Xt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Xt(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Qt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Jt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const $t=Kt;function Zt(){}function te(t){return null==t?Zt:function(){return this.querySelector(t)}}function ee(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ne(){return[]}function re(t){return null==t?ne:function(){return this.querySelectorAll(t)}}function ie(t){return function(){return this.matches(t)}}function oe(t){return function(e){return e.matches(t)}}var ae=Array.prototype.find;function se(){return this.firstElementChild}var ue=Array.prototype.filter;function ce(){return this.children}function le(t){return new Array(t.length)}function he(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function fe(t){return function(){return t}}function pe(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new he(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function de(t,e,n,r,i,o,a){var s,u,c,l=new Map,h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(p[s]=c=a.call(u,u.__data__,s,e)+"",l.has(c)?i[s]=u:l.set(c,u));for(s=0;s<f;++s)c=a.call(t,o[s],s,o)+"",(u=l.get(c))?(r[s]=u,u.__data__=o[s],l.delete(c)):n[s]=new he(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l.get(p[s])===u&&(i[s]=u)}function ve(t){return t.__data__}function ye(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}he.prototype={constructor:he,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ge="http://www.w3.org/1999/xhtml";const me={svg:"http://www.w3.org/2000/svg",xhtml:ge,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _e(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),me.hasOwnProperty(e)?{space:me[e],local:t}:t}function be(t){return function(){this.removeAttribute(t)}}function we(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ee(t,e){return function(){this.setAttribute(t,e)}}function Te(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Se(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function xe(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ie(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ce(t){return function(){this.style.removeProperty(t)}}function Ae(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ke(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ne(t,e){return t.style.getPropertyValue(e)||Ie(t).getComputedStyle(t,null).getPropertyValue(e)}function Pe(t){return function(){delete this[t]}}function Re(t,e){return function(){this[t]=e}}function Oe(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Me(t){return t.trim().split(/^|\s+/)}function De(t){return t.classList||new Le(t)}function Le(t){this._node=t,this._names=Me(t.getAttribute("class")||"")}function Fe(t,e){for(var n=De(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function je(t,e){for(var n=De(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ue(t){return function(){Fe(this,t)}}function Ve(t){return function(){je(this,t)}}function qe(t,e){return function(){(e.apply(this,arguments)?Fe:je)(this,t)}}function Be(){this.textContent=""}function He(t){return function(){this.textContent=t}}function Ge(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ze(){this.innerHTML=""}function We(t){return function(){this.innerHTML=t}}function Ke(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Je(){this.nextSibling&&this.parentNode.appendChild(this)}function Ye(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ge&&e.documentElement.namespaceURI===ge?e.createElement(t):e.createElementNS(n,t)}}function Xe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $e(t){var e=_e(t);return(e.local?Xe:Qe)(e)}function Ze(){return null}function tn(){var t=this.parentNode;t&&t.removeChild(this)}function en(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rn(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function on(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function an(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function sn(t,e,n){var r=Ie(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function un(t,e){return function(){return sn(this,t,e)}}function cn(t,e){return function(){return sn(this,t,e.apply(this,arguments))}}Le.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ln=[null];function hn(t,e){this._groups=t,this._parents=e}function fn(){return new hn([[document.documentElement]],ln)}hn.prototype=fn.prototype={constructor:hn,select:function(t){"function"!=typeof t&&(t=te(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new hn(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:ee(e)}}(t):re(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new hn(r,i)},selectChild:function(t){return this.select(null==t?se:function(t){return function(){return ae.call(this.children,t)}}("function"==typeof t?t:oe(t)))},selectChildren:function(t){return this.selectAll(null==t?ce:function(t){return function(){return ue.call(this.children,t)}}("function"==typeof t?t:oe(t)))},filter:function(t){"function"!=typeof t&&(t=ie(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new hn(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ve);var n=e?de:pe,r=this._parents,i=this._groups;"function"!=typeof t&&(t=fe(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,p=ee(t.call(l,l&&l.__data__,c,r)),d=p.length,v=s[c]=new Array(d),y=a[c]=new Array(d),g=u[c]=new Array(f);n(l,h,v,y,g,p,e);for(var m,_,b=0,w=0;b<d;++b)if(m=v[b]){for(b>=w&&(w=b+1);!(_=y[w])&&++w<d;);m._next=_||null}}return(a=new hn(a,r))._enter=s,a._exit=u,a},enter:function(){return new hn(this._enter||this._groups.map(le),this._parents)},exit:function(){return new hn(this._exit||this._groups.map(le),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof hn))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;s<r;++s)a[s]=e[s];return new hn(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ye);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new hn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=_e(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?we:be:"function"==typeof e?n.local?xe:Se:n.local?Te:Ee)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Ce:"function"==typeof e?ke:Ae)(t,e,null==n?"":n)):Ne(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Pe:"function"==typeof e?Oe:Re)(t,e)):this.node()[t]},classed:function(t,e){var n=Me(t+"");if(arguments.length<2){for(var r=De(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?qe:e?Ue:Ve)(n,e))},text:function(t){return arguments.length?this.each(null==t?Be:("function"==typeof t?Ge:He)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ze:("function"==typeof t?Ke:We)(t)):this.node().innerHTML},raise:function(){return this.each(Je)},lower:function(){return this.each(Ye)},append:function(t){var e="function"==typeof t?t:$e(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:$e(t),r=null==e?Ze:"function"==typeof e?e:te(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(tn)},clone:function(t){return this.select(t?nn:en)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=rn(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?an:on,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?cn:un)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const pn=fn;function dn(t){return"string"==typeof t?new hn([[document.querySelector(t)]],[document.documentElement]):new hn([[t]],ln)}function vn(t){t.stopImmediatePropagation()}function yn(t){t.preventDefault(),t.stopImmediatePropagation()}function gn(t){var e=t.document.documentElement,n=dn(t).on("dragstart.drag",yn,!0);"onselectstart"in e?n.on("selectstart.drag",yn,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function mn(t,e){var n=t.document.documentElement,r=dn(t).on("dragstart.drag",null);e&&(r.on("click.drag",yn,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function _n(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function bn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function wn(){}var En=.7,Tn=1/En,Sn="\\s*([+-]?\\d+)\\s*",xn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",In="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cn=/^#([0-9a-f]{3,8})$/,An=new RegExp("^rgb\\("+[Sn,Sn,Sn]+"\\)$"),kn=new RegExp("^rgb\\("+[In,In,In]+"\\)$"),Nn=new RegExp("^rgba\\("+[Sn,Sn,Sn,xn]+"\\)$"),Pn=new RegExp("^rgba\\("+[In,In,In,xn]+"\\)$"),Rn=new RegExp("^hsl\\("+[xn,In,In]+"\\)$"),On=new RegExp("^hsla\\("+[xn,In,In,xn]+"\\)$"),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Dn(){return this.rgb().formatHex()}function Ln(){return this.rgb().formatRgb()}function Fn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Cn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?jn(e):3===n?new Bn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Un(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Un(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=An.exec(t))?new Bn(e[1],e[2],e[3],1):(e=kn.exec(t))?new Bn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Nn.exec(t))?Un(e[1],e[2],e[3],e[4]):(e=Pn.exec(t))?Un(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Rn.exec(t))?Wn(e[1],e[2]/100,e[3]/100,1):(e=On.exec(t))?Wn(e[1],e[2]/100,e[3]/100,e[4]):Mn.hasOwnProperty(t)?jn(Mn[t]):"transparent"===t?new Bn(NaN,NaN,NaN,0):null}function jn(t){return new Bn(t>>16&255,t>>8&255,255&t,1)}function Un(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bn(t,e,n,r)}function Vn(t){return t instanceof wn||(t=Fn(t)),t?new Bn((t=t.rgb()).r,t.g,t.b,t.opacity):new Bn}function qn(t,e,n,r){return 1===arguments.length?Vn(t):new Bn(t,e,n,null==r?1:r)}function Bn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Hn(){return"#"+zn(this.r)+zn(this.g)+zn(this.b)}function Gn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function zn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Wn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Yn(t,e,n,r)}function Kn(t){if(t instanceof Yn)return new Yn(t.h,t.s,t.l,t.opacity);if(t instanceof wn||(t=Fn(t)),!t)return new Yn;if(t instanceof Yn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Yn(a,s,u,t.opacity)}function Jn(t,e,n,r){return 1===arguments.length?Kn(t):new Yn(t,e,n,null==r?1:r)}function Yn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Qn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Xn(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function $n(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Xn((n-r/e)*e,a,i,o,s)}}function Zn(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Xn((n-r/e)*e,i,o,a,s)}}_n(wn,Fn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Dn,formatHex:Dn,formatHsl:function(){return Kn(this).formatHsl()},formatRgb:Ln,toString:Ln}),_n(Bn,qn,bn(wn,{brighter:function(t){return t=null==t?Tn:Math.pow(Tn,t),new Bn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?En:Math.pow(En,t),new Bn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hn,formatHex:Hn,formatRgb:Gn,toString:Gn})),_n(Yn,Jn,bn(wn,{brighter:function(t){return t=null==t?Tn:Math.pow(Tn,t),new Yn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?En:Math.pow(En,t),new Yn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bn(Qn(t>=240?t-240:t+120,i,r),Qn(t,i,r),Qn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const tr=t=>()=>t;function er(t,e){return function(n){return t+n*e}}function nr(t,e){var n=e-t;return n?er(t,n>180||n<-180?n-360*Math.round(n/360):n):tr(isNaN(t)?e:t)}function rr(t,e){var n=e-t;return n?er(t,n):tr(isNaN(t)?e:t)}const ir=function t(e){var n=function(t){return 1==(t=+t)?rr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):tr(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=qn(t)).r,(e=qn(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=rr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function or(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=qn(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var ar=or($n),sr=or(Zn);function ur(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function cr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function lr(t,e){return(cr(e)?ur:hr)(t,e)}function hr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=mr(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function fr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function pr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dr(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=mr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var vr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yr=new RegExp(vr.source,"g");function gr(t,e){var n,r,i,o=vr.lastIndex=yr.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=vr.exec(t))&&(r=yr.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:pr(n,r)})),o=yr.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function mr(t,e){var n,r=typeof e;return null==e||"boolean"===r?tr(e):("number"===r?pr:"string"===r?(n=Fn(e))?(e=n,ir):gr:e instanceof Fn?ir:e instanceof Date?fr:cr(e)?ur:Array.isArray(e)?hr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?dr:pr)(t,e)}function _r(t){let e;for(;e=t.sourceEvent;)t=e;return t}function br(t,e){if(t=_r(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var wr,Er,Tr=0,Sr=0,xr=0,Ir=0,Cr=0,Ar=0,kr="object"==typeof performance&&performance.now?performance:Date,Nr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pr(){return Cr||(Nr(Rr),Cr=kr.now()+Ar)}function Rr(){Cr=0}function Or(){this._call=this._time=this._next=null}function Mr(t,e,n){var r=new Or;return r.restart(t,e,n),r}function Dr(){Pr(),++Tr;for(var t,e=wr;e;)(t=Cr-e._time)>=0&&e._call.call(null,t),e=e._next;--Tr}function Lr(){Cr=(Ir=kr.now())+Ar,Tr=Sr=0;try{Dr()}finally{Tr=0,function(){for(var t,e,n=wr,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:wr=e);Er=t,jr(r)}(),Cr=0}}function Fr(){var t=kr.now(),e=t-Ir;e>1e3&&(Ar-=e,Ir=t)}function jr(t){Tr||(Sr&&(Sr=clearTimeout(Sr)),t-Cr>24?(t<1/0&&(Sr=setTimeout(Lr,t-kr.now()-Ar)),xr&&(xr=clearInterval(xr))):(xr||(Ir=kr.now(),xr=setInterval(Fr,1e3)),Tr=1,Nr(Lr)))}function Ur(t,e,n){var r=new Or;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Or.prototype=Mr.prototype={constructor:Or,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Pr():+n)+(null==e?0:+e),this._next||Er===this||(Er?Er._next=this:wr=this,Er=this),this._call=t,this._time=n,jr()},stop:function(){this._call&&(this._call=null,this._time=1/0,jr())}};var Vr=$t("start","end","cancel","interrupt"),qr=[];function Br(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,l,h,f;if(1!==n.state)return s();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return Ur(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Ur((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Mr((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Vr,tween:qr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Hr(t,e){var n=zr(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Gr(t,e){var n=zr(t,e);if(n.state>3)throw new Error("too late; already running");return n}function zr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Wr(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}var Kr,Jr=180/Math.PI,Yr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qr(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Jr,skewX:Math.atan(u)*Jr,scaleX:a,scaleY:s}}function Xr(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:pr(t,i)},{i:u-2,x:pr(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:pr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:pr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:pr(t,n)},{i:s-2,x:pr(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var $r=Xr((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yr:Qr(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Zr=Xr((function(t){return null==t?Yr:(Kr||(Kr=document.createElementNS("http://www.w3.org/2000/svg","g")),Kr.setAttribute("transform",t),(t=Kr.transform.baseVal.consolidate())?Qr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Yr)}),", ",")",")");function ti(t,e){var n,r;return function(){var i=Gr(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function ei(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Gr(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function ni(t,e,n){var r=t._id;return t.each((function(){var t=Gr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return zr(t,r).value[e]}}function ri(t,e){var n;return("number"==typeof e?pr:e instanceof Fn?ir:(n=Fn(e))?(e=n,ir):gr)(t,e)}function ii(t){return function(){this.removeAttribute(t)}}function oi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ai(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function si(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function ui(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function ci(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function li(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function hi(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function fi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&hi(t,i)),n}return i._value=e,i}function pi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&li(t,i)),n}return i._value=e,i}function di(t,e){return function(){Hr(this,t).delay=+e.apply(this,arguments)}}function vi(t,e){return e=+e,function(){Hr(this,t).delay=e}}function yi(t,e){return function(){Gr(this,t).duration=+e.apply(this,arguments)}}function gi(t,e){return e=+e,function(){Gr(this,t).duration=e}}function mi(t,e){if("function"!=typeof e)throw new Error;return function(){Gr(this,t).ease=e}}function _i(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Hr:Gr;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var bi=pn.prototype.constructor;function wi(t){return function(){this.style.removeProperty(t)}}function Ei(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ti(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Ei(t,o,n)),r}return o._value=e,o}function Si(t){return function(e){this.textContent=t.call(this,e)}}function xi(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Si(r)),e}return r._value=t,r}var Ii=0;function Ci(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ai(t){return pn().transition(t)}function ki(){return++Ii}var Ni=pn.prototype;function Pi(t){return t*t*t}function Ri(t){return--t*t*t+1}function Oi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Ci.prototype=Ai.prototype={constructor:Ci,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=te(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],l=c.length,h=o[a]=new Array(l),f=0;f<l;++f)(s=c[f])&&(u=t.call(s,s.__data__,f,c))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,Br(h[f],e,n,f,h,zr(s,n)));return new Ci(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=re(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,p=t.call(u,u.__data__,h,c),d=zr(u,n),v=0,y=p.length;v<y;++v)(f=p[v])&&Br(f,e,n,v,p,d);o.push(p),a.push(u)}return new Ci(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=ie(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Ci(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;s<r;++s)a[s]=e[s];return new Ci(a,this._parents,this._name,this._id)},selection:function(){return new bi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ki(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=zr(a,e);Br(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ci(r,this._parents,t,n)},call:Ni.call,nodes:Ni.nodes,node:Ni.node,size:Ni.size,empty:Ni.empty,each:Ni.each,on:function(t,e){var n=this._id;return arguments.length<2?zr(this.node(),n).on.on(t):this.each(_i(n,t,e))},attr:function(t,e){var n=_e(t),r="transform"===n?Zr:ri;return this.attrTween(t,"function"==typeof e?(n.local?ci:ui)(n,r,ni(this,"attr."+t,e)):null==e?(n.local?oi:ii)(n):(n.local?si:ai)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=_e(t);return this.tween(n,(r.local?fi:pi)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?$r:ri;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Ne(this,t),a=(this.style.removeProperty(t),Ne(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,wi(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Ne(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Ne(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,ni(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=Gr(this,t),c=u.on,l=null==u.value[a]?o||(o=wi(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(s,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Ne(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Ti(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ni(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,xi(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=zr(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?ti:ei)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?di:vi)(e,t)):zr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?yi:gi)(e,t)):zr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(mi(e,t)):zr(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Gr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=Gr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:Ni[Symbol.iterator]};var Mi={time:null,delay:0,duration:250,ease:Oi};function Di(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}pn.prototype.interrupt=function(t){return this.each((function(){Wr(this,t)}))},pn.prototype.transition=function(t){var e,n;t instanceof Ci?(e=t._id,t=t._name):(e=ki(),(n=Mi).time=Pr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&Br(a,t,e,c,s,n||Di(a,e));return new Ci(r,this._parents,t,e)};var Li=[null];function Fi(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>1&&n.name===e)return new Ci([[t]],Li,e,+r);return null}const ji=t=>()=>t;function Ui(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Vi(t){t.stopImmediatePropagation()}function qi(t){t.preventDefault(),t.stopImmediatePropagation()}var Bi={name:"drag"},Hi={name:"space"},Gi={name:"handle"},zi={name:"center"};const{abs:Wi,max:Ki,min:Ji}=Math;function Yi(t){return[+t[0],+t[1]]}function Qi(t){return[Yi(t[0]),Yi(t[1])]}var Xi={name:"x",handles:["w","e"].map(oo),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},$i={name:"y",handles:["n","s"].map(oo),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Zi={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(oo),input:function(t){return null==t?null:Qi(t)},output:function(t){return t}},to={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},eo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},no={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ro={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},io={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function oo(t){return{type:t}}function ao(t){return!t.ctrlKey&&!t.button}function so(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function uo(){return navigator.maxTouchPoints||"ontouchstart"in this}function co(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function lo(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function ho(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function fo(){return yo(Xi)}function po(){return yo($i)}function vo(){return yo(Zi)}function yo(t){var e,n=so,r=ao,i=uo,o=!0,a=$t("start","brush","end"),s=6;function u(e){var n=e.property("__brush",v).selectAll(".overlay").data([oo("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",to.overlay).merge(n).each((function(){var t=co(this).extent;dn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([oo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",to.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return to[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=dn(this),e=co(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new h(t,e,n):r}function h(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function f(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,a,s,u,h,f,p,d,v,y,g,m=this,_=n.target.__data__.type,b="selection"===(o&&n.metaKey?_="overlay":_)?Bi:o&&n.altKey?zi:Gi,w=t===$i?null:ro[_],E=t===Xi?null:io[_],T=co(m),S=T.extent,x=T.selection,I=S[0][0],C=S[0][1],A=S[1][0],k=S[1][1],N=0,P=0,R=w&&E&&o&&n.shiftKey,O=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=br(t,m)).point0=t.slice(),t.identifier=e,t}));if("overlay"===_){x&&(v=!0);const e=[O[0],O[1]||O[0]];T.selection=x=[[i=t===$i?I:Ji(e[0][0],e[1][0]),s=t===Xi?C:Ji(e[0][1],e[1][1])],[h=t===$i?A:Ki(e[0][0],e[1][0]),p=t===Xi?k:Ki(e[0][1],e[1][1])]],O.length>1&&U()}else i=x[0][0],s=x[0][1],h=x[1][0],p=x[1][1];a=i,u=s,f=h,d=p;var M=dn(m).attr("pointer-events","none"),D=M.selectAll(".overlay").attr("cursor",to[_]);Wr(m);var L=l(m,arguments,!0).beforestart();if(n.touches)L.moved=j,L.ended=V;else{var F=dn(n.view).on("mousemove.brush",j,!0).on("mouseup.brush",V,!0);o&&F.on("keydown.brush",q,!0).on("keyup.brush",B,!0),gn(n.view)}c.call(m),L.start(n,b.name)}function j(t){for(const e of t.changedTouches||[t])for(const t of O)t.identifier===e.identifier&&(t.cur=br(e,m));if(R&&!y&&!g&&1===O.length){const t=O[0];Wi(t.cur[0]-t[0])>Wi(t.cur[1]-t[1])?g=!0:y=!0}for(const t of O)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);v=!0,qi(t),U(t)}function U(t){const e=O[0],n=e.point0;var r;switch(N=e[0]-n[0],P=e[1]-n[1],b){case Hi:case Bi:w&&(N=Ki(I-i,Ji(A-h,N)),a=i+N,f=h+N),E&&(P=Ki(C-s,Ji(k-p,P)),u=s+P,d=p+P);break;case Gi:O[1]?(w&&(a=Ki(I,Ji(A,O[0][0])),f=Ki(I,Ji(A,O[1][0])),w=1),E&&(u=Ki(C,Ji(k,O[0][1])),d=Ki(C,Ji(k,O[1][1])),E=1)):(w<0?(N=Ki(I-i,Ji(A-i,N)),a=i+N,f=h):w>0&&(N=Ki(I-h,Ji(A-h,N)),a=i,f=h+N),E<0?(P=Ki(C-s,Ji(k-s,P)),u=s+P,d=p):E>0&&(P=Ki(C-p,Ji(k-p,P)),u=s,d=p+P));break;case zi:w&&(a=Ki(I,Ji(A,i-N*w)),f=Ki(I,Ji(A,h+N*w))),E&&(u=Ki(C,Ji(k,s-P*E)),d=Ki(C,Ji(k,p+P*E)))}f<a&&(w*=-1,r=i,i=h,h=r,r=a,a=f,f=r,_ in eo&&D.attr("cursor",to[_=eo[_]])),d<u&&(E*=-1,r=s,s=p,p=r,r=u,u=d,d=r,_ in no&&D.attr("cursor",to[_=no[_]])),T.selection&&(x=T.selection),y&&(a=x[0][0],f=x[1][0]),g&&(u=x[0][1],d=x[1][1]),x[0][0]===a&&x[0][1]===u&&x[1][0]===f&&x[1][1]===d||(T.selection=[[a,u],[f,d]],c.call(m),L.brush(t,b.name))}function V(t){if(Vi(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else mn(t.view,v),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);M.attr("pointer-events","all"),D.attr("cursor",to.overlay),T.selection&&(x=T.selection),lo(x)&&(T.selection=null,c.call(m)),L.end(t,b.name)}function q(t){switch(t.keyCode){case 16:R=w&&E;break;case 18:b===Gi&&(w&&(h=f-N*w,i=a+N*w),E&&(p=d-P*E,s=u+P*E),b=zi,U());break;case 32:b!==Gi&&b!==zi||(w<0?h=f-N:w>0&&(i=a-N),E<0?p=d-P:E>0&&(s=u-P),b=Hi,D.attr("cursor",to.selection),U());break;default:return}qi(t)}function B(t){switch(t.keyCode){case 16:R&&(y=g=R=!1,U());break;case 18:b===zi&&(w<0?h=f:w>0&&(i=a),E<0?p=d:E>0&&(s=u),b=Gi,U());break;case 32:b===Hi&&(t.altKey?(w&&(h=f-N*w,i=a+N*w),E&&(p=d-P*E,s=u+P*E),b=zi):(w<0?h=f:w>0&&(i=a),E<0?p=d:E>0&&(s=u),b=Gi),D.attr("cursor",to[_]),U());break;default:return}qi(t)}}function p(t){l(this,arguments).moved(t)}function d(t){l(this,arguments).ended(t)}function v(){var e=this.__brush||{selection:null};return e.extent=Qi(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n){e.tween?e.on("start.brush",(function(t){l(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){l(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=l(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=mr(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),c.call(e),i.brush()}return null!==o&&null!==a?u:u(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,o=t.input("function"==typeof n?n.apply(e,r):n,i.extent),a=l(e,r).beforestart();Wr(e),i.selection=null===o?null:o,c.call(e),a.start().brush().end()}))},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=dn(this.that).datum();a.call(e,this.that,new Ui(e,{sourceEvent:n,target:u,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:ji(Qi(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:ji(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:ji(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}var go=Math.abs,mo=Math.cos,_o=Math.sin,bo=Math.PI,wo=bo/2,Eo=2*bo,To=Math.max,So=1e-12;function xo(t,e){return Array.from({length:e-t},((e,n)=>t+n))}function Io(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function Co(){return No(!1,!1)}function Ao(){return No(!1,!0)}function ko(){return No(!0,!1)}function No(t,e){var n=0,r=null,i=null,o=null;function a(a){var s,u=a.length,c=new Array(u),l=xo(0,u),h=new Array(u*u),f=new Array(u),p=0;a=Float64Array.from({length:u*u},e?(t,e)=>a[e%u][e/u|0]:(t,e)=>a[e/u|0][e%u]);for(let e=0;e<u;++e){let n=0;for(let r=0;r<u;++r)n+=a[e*u+r]+t*a[r*u+e];p+=c[e]=n}s=(p=To(0,Eo-n*u)/p)?n:Eo/u;{let e=0;r&&l.sort(((t,e)=>r(c[t],c[e])));for(const n of l){const r=e;if(t){const t=xo(1+~u,u).filter((t=>t<0?a[~t*u+n]:a[n*u+t]));i&&t.sort(((t,e)=>i(t<0?-a[~t*u+n]:a[n*u+t],e<0?-a[~e*u+n]:a[n*u+e])));for(const r of t)r<0?(h[~r*u+n]||(h[~r*u+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=a[~r*u+n]*p,value:a[~r*u+n]}:(h[n*u+r]||(h[n*u+r]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=a[n*u+r]*p,value:a[n*u+r]};f[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}else{const t=xo(0,u).filter((t=>a[n*u+t]||a[t*u+n]));i&&t.sort(((t,e)=>i(a[n*u+t],a[n*u+e])));for(const r of t){let t;if(n<r?(t=h[n*u+r]||(h[n*u+r]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=a[n*u+r]*p,value:a[n*u+r]}):(t=h[r*u+n]||(h[r*u+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=a[n*u+r]*p,value:a[n*u+r]},n===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}f[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}e+=s}}return(h=Object.values(h)).groups=f,o?h.sort(o):h}return a.padAngle=function(t){return arguments.length?(n=To(0,t),a):n},a.sortGroups=function(t){return arguments.length?(r=t,a):r},a.sortSubgroups=function(t){return arguments.length?(i=t,a):i},a.sortChords=function(t){return arguments.length?(null==t?o=null:(o=Io(t))._=t,a):o&&o._},a}const Po=Math.PI,Ro=2*Po,Oo=1e-6,Mo=Ro-Oo;function Do(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Lo(){return new Do}Do.prototype=Lo.prototype={constructor:Do,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Oo)if(Math.abs(l*s-u*c)>Oo&&i){var f=n-o,p=r-a,d=s*s+u*u,v=f*f+p*p,y=Math.sqrt(d),g=Math.sqrt(h),m=i*Math.tan((Po-Math.acos((d+h-v)/(2*y*g)))/2),_=m/g,b=m/y;Math.abs(_-1)>Oo&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*p)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Oo||Math.abs(this._y1-c)>Oo)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Ro+Ro),h>Mo?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>Oo&&(this._+="A"+n+","+n+",0,"+ +(h>=Po)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Fo=Lo;var jo=Array.prototype.slice;function Uo(t){return function(){return t}}function Vo(t){return t.source}function qo(t){return t.target}function Bo(t){return t.radius}function Ho(t){return t.startAngle}function Go(t){return t.endAngle}function zo(){return 0}function Wo(){return 10}function Ko(t){var e=Vo,n=qo,r=Bo,i=Bo,o=Ho,a=Go,s=zo,u=null;function c(){var c,l=e.apply(this,arguments),h=n.apply(this,arguments),f=s.apply(this,arguments)/2,p=jo.call(arguments),d=+r.apply(this,(p[0]=l,p)),v=o.apply(this,p)-wo,y=a.apply(this,p)-wo,g=+i.apply(this,(p[0]=h,p)),m=o.apply(this,p)-wo,_=a.apply(this,p)-wo;if(u||(u=c=Fo()),f>So&&(go(y-v)>2*f+So?y>v?(v+=f,y-=f):(v-=f,y+=f):v=y=(v+y)/2,go(_-m)>2*f+So?_>m?(m+=f,_-=f):(m-=f,_+=f):m=_=(m+_)/2),u.moveTo(d*mo(v),d*_o(v)),u.arc(0,0,d,v,y),v!==m||y!==_)if(t){var b=+t.apply(this,arguments),w=g-b,E=(m+_)/2;u.quadraticCurveTo(0,0,w*mo(m),w*_o(m)),u.lineTo(g*mo(E),g*_o(E)),u.lineTo(w*mo(_),w*_o(_))}else u.quadraticCurveTo(0,0,g*mo(m),g*_o(m)),u.arc(0,0,g,m,_);if(u.quadraticCurveTo(0,0,d*mo(v),d*_o(v)),u.closePath(),c)return u=null,c+""||null}return t&&(c.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:Uo(+e),c):t}),c.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:Uo(+t),c):r},c.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:Uo(+t),c):r},c.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:Uo(+t),c):i},c.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Uo(+t),c):o},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Uo(+t),c):a},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Uo(+t),c):s},c.source=function(t){return arguments.length?(e=t,c):e},c.target=function(t){return arguments.length?(n=t,c):n},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c}function Jo(){return Ko()}function Yo(){return Ko(Wo)}const Qo=Math.PI/180,Xo=180/Math.PI,$o=.96422,Zo=.82521,ta=4/29,ea=6/29,na=3*ea*ea;function ra(t){if(t instanceof aa)return new aa(t.l,t.a,t.b,t.opacity);if(t instanceof da)return va(t);t instanceof Bn||(t=Vn(t));var e,n,r=la(t.r),i=la(t.g),o=la(t.b),a=sa((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=a:(e=sa((.4360747*r+.3850649*i+.1430804*o)/$o),n=sa((.0139322*r+.0971045*i+.7141733*o)/Zo)),new aa(116*a-16,500*(e-a),200*(a-n),t.opacity)}function ia(t,e){return new aa(t,0,0,null==e?1:e)}function oa(t,e,n,r){return 1===arguments.length?ra(t):new aa(t,e,n,null==r?1:r)}function aa(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function sa(t){return t>.008856451679035631?Math.pow(t,1/3):t/na+ta}function ua(t){return t>ea?t*t*t:na*(t-ta)}function ca(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function la(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ha(t){if(t instanceof da)return new da(t.h,t.c,t.l,t.opacity);if(t instanceof aa||(t=ra(t)),0===t.a&&0===t.b)return new da(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Xo;return new da(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function fa(t,e,n,r){return 1===arguments.length?ha(t):new da(n,e,t,null==r?1:r)}function pa(t,e,n,r){return 1===arguments.length?ha(t):new da(t,e,n,null==r?1:r)}function da(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function va(t){if(isNaN(t.h))return new aa(t.l,0,0,t.opacity);var e=t.h*Qo;return new aa(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}_n(aa,oa,bn(wn,{brighter:function(t){return new aa(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new aa(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Bn(ca(3.1338561*(e=$o*ua(e))-1.6168667*(t=1*ua(t))-.4906146*(n=Zo*ua(n))),ca(-.9787684*e+1.9161415*t+.033454*n),ca(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),_n(da,pa,bn(wn,{brighter:function(t){return new da(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new da(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return va(this).rgb()}}));var ya=-.14861,ga=1.78277,ma=-.29227,_a=-.90649,ba=1.97294,wa=ba*_a,Ea=ba*ga,Ta=ga*ma-_a*ya;function Sa(t){if(t instanceof Ia)return new Ia(t.h,t.s,t.l,t.opacity);t instanceof Bn||(t=Vn(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ta*r+wa*e-Ea*n)/(Ta+wa-Ea),o=r-i,a=(ba*(n-i)-ma*o)/_a,s=Math.sqrt(a*a+o*o)/(ba*i*(1-i)),u=s?Math.atan2(a,o)*Xo-120:NaN;return new Ia(u<0?u+360:u,s,i,t.opacity)}function xa(t,e,n,r){return 1===arguments.length?Sa(t):new Ia(t,e,n,null==r?1:r)}function Ia(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}_n(Ia,xa,bn(wn,{brighter:function(t){return t=null==t?Tn:Math.pow(Tn,t),new Ia(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?En:Math.pow(En,t),new Ia(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Qo,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Bn(255*(e+n*(ya*r+ga*i)),255*(e+n*(ma*r+_a*i)),255*(e+n*(ba*r)),this.opacity)}}));var Ca=Array.prototype.slice;function Aa(t,e){return t-e}const ka=t=>()=>t;function Na(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=Pa(t,e[r]))return n;return 0}function Pa(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],l=u[1],h=t[s],f=h[0],p=h[1];if(Ra(u,h,e))return 0;l>r!=p>r&&n<(f-c)*(r-l)/(p-l)+c&&(i=-i)}return i}function Ra(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}function Oa(){}var Ma=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Da(){var t=1,e=1,n=H,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Aa);else{var r=w(t),i=r[0],a=r[1];e=q(i,a,e),e=st(Math.floor(i/e)*e,Math.floor(a/e)*e,e)}return e.map((function(e){return o(t,e)}))}function o(n,i){var o=[],s=[];return function(n,r,i){var o,s,u,c,l,h,f=new Array,p=new Array;for(o=s=-1,c=n[0]>=r,Ma[c<<1].forEach(d);++o<t-1;)u=c,c=n[o+1]>=r,Ma[u|c<<1].forEach(d);for(Ma[c<<0].forEach(d);++s<e-1;){for(o=-1,c=n[s*t+t]>=r,l=n[s*t]>=r,Ma[c<<1|l<<2].forEach(d);++o<t-1;)u=c,c=n[s*t+t+o+1]>=r,h=l,l=n[s*t+o+1]>=r,Ma[u|c<<1|l<<2|h<<3].forEach(d);Ma[c|l<<3].forEach(d)}for(o=-1,l=n[s*t]>=r,Ma[l<<2].forEach(d);++o<t-1;)h=l,l=n[s*t+o+1]>=r,Ma[l<<2|h<<3].forEach(d);function d(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],c=a(r),l=a(u);(e=p[c])?(n=f[l])?(delete p[e.end],delete f[n.start],e===n?(e.ring.push(u),i(e.ring)):f[e.start]=p[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete p[e.end],e.ring.push(u),p[e.end=l]=e):(e=f[l])?(n=p[c])?(delete f[e.start],delete p[n.end],e===n?(e.ring.push(u),i(e.ring)):f[n.start]=p[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(r),f[e.start=c]=e):f[c]=p[l]={start:c,end:l,ring:[r,u]}}Ma[l<<3].forEach(d)}(n,i,(function(t){r(t,n,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?o.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,r=o.length;n<r;++n)if(-1!==Na((e=o[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var o,a=n[0],s=n[1],u=0|a,c=0|s,l=r[c*t+u];a>0&&a<t&&u===a&&(o=r[c*t+u-1],n[0]=a+(i-o)/(l-o)-.5),s>0&&s<e&&c===s&&(o=r[(c-1)*t+u],n[1]=s+(i-o)/(l-o)-.5)}))}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),o=Math.floor(n[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?ka(Ca.call(t)):ka(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:Oa,i):r===s},i}function La(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+a*r]),s>=n&&(s>=o&&(u-=t.data[s-o+a*r]),e.data[s-n+a*r]=u/Math.min(s+1,r-1+o-s,o))}function Fa(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[a+s*r]),s>=n&&(s>=o&&(u-=t.data[a+(s-o)*r]),e.data[a+(s-n)*r]=u/Math.min(s+1,i-1+o-s,o))}function ja(t){return t[0]}function Ua(t){return t[1]}function Va(){return 1}function qa(){var t=ja,e=Ua,n=Va,r=960,i=500,o=20,a=2,s=3*o,u=r+2*s>>a,c=i+2*s>>a,l=ka(20);function h(r){var i=new Float32Array(u*c),h=new Float32Array(u*c);r.forEach((function(r,o,l){var h=+t(r,o,l)+s>>a,f=+e(r,o,l)+s>>a,p=+n(r,o,l);h>=0&&h<u&&f>=0&&f<c&&(i[h+f*u]+=p)})),La({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),Fa({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a),La({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),Fa({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a),La({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),Fa({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a);var p=l(i);if(!Array.isArray(p)){var d=z(i);p=q(0,d,p),(p=st(0,Math.floor(d/p)*p,p)).shift()}return Da().thresholds(p).size([u,c])(i).map(f)}function f(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(p),t}function p(t){t.forEach(d)}function d(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function y(){return u=r+2*(s=3*o)>>a,c=i+2*s>>a,h}return h.x=function(e){return arguments.length?(t="function"==typeof e?e:ka(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:ka(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:ka(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,i=n,y()},h.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),y()},h.thresholds=function(t){return arguments.length?(l="function"==typeof t?t:Array.isArray(t)?ka(Ca.call(t)):ka(t),h):l},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),y()},h}const Ba=Math.pow(2,-52),Ha=new Uint32Array(512);class Ga{static from(t,e=$a,n=Za){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new Ga(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,u=-1/0,c=-1/0;for(let e=0;e<o;e++){const n=t[2*e],r=t[2*e+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>c&&(c=r),this._ids[e]=e}const l=(a+u)/2,h=(s+c)/2;let f,p,d,v=1/0;for(let e=0;e<o;e++){const n=za(l,h,t[2*e],t[2*e+1]);n<v&&(f=e,v=n)}const y=t[2*f],g=t[2*f+1];v=1/0;for(let e=0;e<o;e++){if(e===f)continue;const n=za(y,g,t[2*e],t[2*e+1]);n<v&&n>0&&(p=e,v=n)}let m=t[2*p],_=t[2*p+1],b=1/0;for(let e=0;e<o;e++){if(e===f||e===p)continue;const n=Ya(y,g,m,_,t[2*e],t[2*e+1]);n<b&&(d=e,b=n)}let w=t[2*d],E=t[2*d+1];if(b===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];Qa(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Ka(y,g,m,_,w,E)){const t=p,e=m,n=_;p=d,m=w,_=E,d=t,w=e,E=n}const T=function(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,h=u*u+c*c,f=.5/(a*c-s*u);return{x:t+(c*l-s*h)*f,y:e+(a*h-u*l)*f}}(y,g,m,_,w,E);this._cx=T.x,this._cy=T.y;for(let e=0;e<o;e++)this._dists[e]=za(t[2*e],t[2*e+1],T.x,T.y);Qa(this._ids,this._dists,0,o-1),this._hullStart=f;let S=3;n[f]=e[d]=p,n[p]=e[f]=d,n[d]=e[p]=f,r[f]=0,r[p]=1,r[d]=2,i.fill(-1),i[this._hashKey(y,g)]=f,i[this._hashKey(m,_)]=p,i[this._hashKey(w,E)]=d,this.trianglesLen=0,this._addTriangle(f,p,d,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],c=t[2*u],l=t[2*u+1];if(s>0&&Math.abs(c-o)<=Ba&&Math.abs(l-a)<=Ba)continue;if(o=c,a=l,u===f||u===p||u===d)continue;let h=0;for(let t=0,e=this._hashKey(c,l);t<this._hashSize&&(h=i[(e+t)%this._hashSize],-1===h||h===n[h]);t++);h=e[h];let v,y=h;for(;v=n[y],!Ka(c,l,t[2*y],t[2*y+1],t[2*v],t[2*v+1]);)if(y=v,y===h){y=-1;break}if(-1===y)continue;let g=this._addTriangle(y,u,n[y],-1,-1,r[y]);r[u]=this._legalize(g+2),r[y]=g,S++;let m=n[y];for(;v=n[m],Ka(c,l,t[2*m],t[2*m+1],t[2*v],t[2*v+1]);)g=this._addTriangle(m,u,v,r[u],-1,r[m]),r[u]=this._legalize(g+2),n[m]=m,S--,m=v;if(y===h)for(;v=e[y],Ka(c,l,t[2*v],t[2*v+1],t[2*y],t[2*y+1]);)g=this._addTriangle(v,u,y,-1,r[y],r[v]),this._legalize(g+2),r[v]=g,n[y]=y,S--,y=v;this._hullStart=e[u]=y,n[y]=e[m]=u,n[u]=m,i[this._hashKey(c,l)]=u,i[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(S);for(let t=0,e=this._hullStart;t<S;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=Ha[--i];continue}const u=a-a%3,c=s+(t+1)%3,l=u+(a+2)%3,h=e[o],f=e[t],p=e[c],d=e[l];if(Ja(r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1],r[2*d],r[2*d+1])){e[t]=d,e[a]=h;const r=n[l];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===l){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(a,n[o]),this._link(o,l);const s=u+(a+1)%3;i<Ha.length&&(Ha[i++]=s)}else{if(0===i)break;t=Ha[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function za(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function Wa(t,e,n,r,i,o){const a=(r-e)*(i-t),s=(n-t)*(o-e);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function Ka(t,e,n,r,i,o){return(Wa(i,o,t,e,n,r)||Wa(t,e,n,r,i,o)||Wa(n,r,i,o,t,e))<0}function Ja(t,e,n,r,i,o,a,s){const u=t-a,c=e-s,l=n-a,h=r-s,f=i-a,p=o-s,d=l*l+h*h,v=f*f+p*p;return u*(h*v-d*p)-c*(l*v-d*f)+(u*u+c*c)*(l*p-h*f)<0}function Ya(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,h=u*u+c*c,f=.5/(a*c-s*u),p=(c*l-s*h)*f,d=(a*h-u*l)*f;return p*p+d*d}function Qa(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let a=i-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=n+1,o=r;Xa(t,n+r>>1,i),e[t[n]]>e[t[r]]&&Xa(t,n,r),e[t[i]]>e[t[r]]&&Xa(t,i,r),e[t[n]]>e[t[i]]&&Xa(t,n,i);const a=t[i],s=e[a];for(;;){do{i++}while(e[t[i]]<s);do{o--}while(e[t[o]]>s);if(o<i)break;Xa(t,i,o)}t[n+1]=t[o],t[o]=a,r-i+1>=o-n?(Qa(t,e,i,r),Qa(t,e,n,o-1)):(Qa(t,e,n,o-1),Qa(t,e,i,r))}}function Xa(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $a(t){return t[0]}function Za(t){return t[1]}const ts=1e-6;class es{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>ts||Math.abs(this._y1-i)>ts)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class ns{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class rs{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let e,r,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],u=2*n[o+1],c=2*n[o+2],l=t[s],h=t[s+1],f=t[u],p=t[u+1],d=t[c],v=t[c+1],y=f-l,g=p-h,m=d-l,_=v-h,b=y*y+g*g,w=m*m+_*_,E=2*(y*_-g*m);if(E)if(Math.abs(E)<1e-8)e=(l+d)/2,r=(h+v)/2;else{const t=1/E;e=l+(_*b-g*w)*t,r=h+(y*w-m*b)*t}else e=(l+d)/2-1e8*_,r=(h+v)/2+1e8*m;i[a]=e,i[a+1]=r}let o,a,s,u=e[e.length-1],c=4*u,l=t[2*u],h=t[2*u+1];r.fill(0);for(let n=0;n<e.length;++n)u=e[n],o=c,a=l,s=h,c=4*u,l=t[2*u],h=t[2*u+1],r[o+2]=r[c]=s-h,r[o+3]=r[c+1]=l-a}render(t){const e=null==t?t=new es:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],c=o[a],l=o[a+1];this._renderSegment(s,u,c,l,t)}let s,u=i[i.length-1];for(let e=0;e<i.length;++e){s=u,u=i[e];const n=2*Math.floor(r[u]/3),c=o[n],l=o[n+1],h=4*s,f=this._project(c,l,a[h+2],a[h+3]);f&&this._renderSegment(c,l,f[0],f[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new es:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new es:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new ns;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[r]==t[o]&&e[r+1]==t[o+1]&&e[(r+2)%i]==t[(o+a-2)%a]&&e[(r+3)%i]==t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let r,i,o,a,s,u=null,c=e[n-2],l=e[n-1],h=this._regioncode(c,l);for(let f=0;f<n;f+=2)if(r=c,i=l,c=e[f],l=e[f+1],o=h,h=this._regioncode(c,l),0===o&&0===h)a=s,s=0,u?u.push(c,l):u=[c,l];else{let e,n,f,p,d;if(0===o){if(null===(e=this._clipSegment(r,i,c,l,o,h)))continue;[n,f,p,d]=e}else{if(null===(e=this._clipSegment(c,l,r,i,h,o)))continue;[p,d,n,f]=e,a=s,s=this._edgecode(n,f),a&&s&&this._edge(t,a,s,u,u.length),u?u.push(n,f):u=[n,f]}a=s,s=this._edgecode(p,d),a&&s&&this._edge(t,a,s,u,u.length),u?u.push(p,d):u=[p,d]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(t,a,s,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,e,n,r,i,o){for(;;){if(0===i&&0===o)return[t,e,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=t+(n-t)*(this.ymax-e)/(r-e),s=this.ymax):4&u?(a=t+(n-t)*(this.ymin-e)/(r-e),s=this.ymin):2&u?(s=e+(r-e)*(this.xmax-t)/(n-t),a=this.xmax):(s=e+(r-e)*(this.xmin-t)/(n-t),a=this.xmin),i?(t=a,e=s,i=this._regioncode(t,e)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let e,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)e=i,i=this._edgecode(s[n],s[n+1]),e&&i&&(n=this._edge(t,e,i,s,n),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const e=(t+2)%r.length,n=(t+4)%r.length;(r[t]===r[e]&&r[e]===r[n]||r[t+1]===r[e+1]&&r[e+1]===r[n+1])&&(r.splice(e,2),t-=2)}return i}_project(t,e,n,r){let i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const is=2*Math.PI,os=Math.pow;function as(t){return t[0]}function ss(t){return t[1]}function us(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class cs{static from(t,e=as,n=ss,r){return new cs("length"in t?function(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=e.call(r,i,a,t),o[2*a+1]=n.call(r,i,a,t)}return o}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new Ga(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],o=2*e[t+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=us(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new Ga(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=r.length;t<e;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(t){return new rs(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let u=s,c=-1;do{if(yield c=o[u],u=u%3==2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==c&&(yield e))}}while(u!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let c=t,l=os(e-u[2*t],2)+os(n-u[2*t+1],2);const h=r[t];let f=h;do{let r=s[f];const h=os(e-u[2*r],2)+os(n-u[2*r+1],2);if(h<l&&(l=h,c=r),f=f%3==2?f-2:f+1,s[f]!==t)break;if(f=a[f],-1===f){if(f=i[(o[t]+1)%i.length],f!==r&&os(e-u[2*f],2)+os(n-u[2*f+1],2)<l)return f;break}}while(f!==h);return c}render(t){const e=null==t?t=new es:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,o=r.length;e<o;++e){const o=r[e];if(o<e)continue;const a=2*i[e],s=2*i[o];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=null==t?t=new es:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];t.moveTo(i+e,o),t.arc(i,o,e,0,is)}return n&&n.value()}renderHull(t){const e=null==t?t=new es:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<o;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new ns;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new es:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new ns;return this.renderTriangle(t,e),e.value()}}const ls=t=>()=>t;function hs(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}function fs(t){return!t.ctrlKey&&!t.button}function ps(){return this.parentNode}function ds(t,e){return null==e?{x:t.x,y:t.y}:e}function vs(){return navigator.maxTouchPoints||"ontouchstart"in this}function ys(){var t,e,n,r,i=fs,o=ps,a=ds,s=vs,u={},c=$t("start","drag","end"),l=0,h=0;function f(t){t.on("mousedown.drag",p).filter(s).on("touchstart.drag",y).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,s){if(!r&&i.call(this,a,s)){var u=_(this,o.call(this,a,s),a,s,"mouse");u&&(dn(a.view).on("mousemove.drag",d,!0).on("mouseup.drag",v,!0),gn(a.view),vn(a),n=!1,t=a.clientX,e=a.clientY,u("start",a))}}function d(r){if(yn(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>h}u.mouse("drag",r)}function v(t){dn(t.view).on("mousemove.drag mouseup.drag",null),mn(t.view,n),yn(t),u.mouse("end",t)}function y(t,e){if(i.call(this,t,e)){var n,r,a=t.changedTouches,s=o.call(this,t,e),u=a.length;for(n=0;n<u;++n)(r=_(this,s,t,e,a[n].identifier,a[n]))&&(vn(t),r("start",t,a[n]))}}function g(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=u[r[e].identifier])&&(yn(t),n("drag",t,r[e]))}function m(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<o;++e)(n=u[i[e].identifier])&&(vn(t),n("end",t,i[e]))}function _(t,e,n,r,i,o){var s,h,p,d=c.copy(),v=br(o||n,e);if(null!=(p=a.call(t,new hs("beforestart",{sourceEvent:n,target:f,identifier:i,active:l,x:v[0],y:v[1],dx:0,dy:0,dispatch:d}),r)))return s=p.x-v[0]||0,h=p.y-v[1]||0,function n(o,a,c){var y,g=v;switch(o){case"start":u[i]=n,y=l++;break;case"end":delete u[i],--l;case"drag":v=br(c||a,e),y=l}d.call(o,t,new hs(o,{sourceEvent:a,subject:p,target:f,identifier:i,active:y,x:v[0]+s,y:v[1]+h,dx:v[0]-g[0],dy:v[1]-g[1],dispatch:d}),r)}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:ls(!!t),f):i},f.container=function(t){return arguments.length?(o="function"==typeof t?t:ls(t),f):o},f.subject=function(t){return arguments.length?(a="function"==typeof t?t:ls(t),f):a},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:ls(!!t),f):s},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f}hs.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var gs={},ms={};function _s(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function bs(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function ws(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Es(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return ms;if(c)return c=!1,gs;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?u=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=l())!==ms;){for(var h=[];r!==gs&&r!==ms;)h.push(r),r=l();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?function(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+ws(-t,6):t>9999?"+"+ws(t,6):ws(t,4)}(t.getUTCFullYear())+"-"+ws(t.getUTCMonth()+1,2)+"-"+ws(t.getUTCDate(),2)+(i?"T"+ws(e,2)+":"+ws(n,2)+":"+ws(r,2)+"."+ws(i,3)+"Z":r?"T"+ws(e,2)+":"+ws(n,2)+":"+ws(r,2)+"Z":n||e?"T"+ws(e,2)+":"+ws(n,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=_s(t);return function(r,i){return e(n(r),i,t)}}(t,e):_s(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=bs(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=bs(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var Ts=Es(","),Ss=Ts.parse,xs=Ts.parseRows,Is=Ts.format,Cs=Ts.formatBody,As=Ts.formatRows,ks=Ts.formatRow,Ns=Ts.formatValue,Ps=Es("\t"),Rs=Ps.parse,Os=Ps.parseRows,Ms=Ps.format,Ds=Ps.formatBody,Ls=Ps.formatRows,Fs=Ps.formatRow,js=Ps.formatValue;function Us(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Vs&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const Vs=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),qs=t=>+t;function Bs(t){return t*t}function Hs(t){return t*(2-t)}function Gs(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var zs=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Ws=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Ks=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Js=Math.PI,Ys=Js/2;function Qs(t){return 1==+t?1:1-Math.cos(t*Ys)}function Xs(t){return Math.sin(t*Ys)}function $s(t){return(1-Math.cos(Js*t))/2}function Zs(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function tu(t){return Zs(1-+t)}function eu(t){return 1-Zs(t)}function nu(t){return((t*=2)<=1?Zs(1-t):2-Zs(t-1))/2}function ru(t){return 1-Math.sqrt(1-t*t)}function iu(t){return Math.sqrt(1- --t*t)}function ou(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var au=7.5625;function su(t){return 1-uu(1-t)}function uu(t){return(t=+t)<.36363636363636365?au*t*t:t<.7272727272727273?au*(t-=.5454545454545454)*t+.75:t<.9090909090909091?au*(t-=.8181818181818182)*t+.9375:au*(t-=.9545454545454546)*t+.984375}function cu(t){return((t*=2)<=1?1-uu(1-t):uu(t-1)+1)/2}var lu=1.70158,hu=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(lu),fu=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(lu),pu=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(lu),du=2*Math.PI,vu=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=du);function i(t){return e*Zs(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*du)},i.period=function(n){return t(e,n)},i}(1,.3),yu=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=du);function i(t){return 1-e*Zs(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*du)},i.period=function(n){return t(e,n)},i}(1,.3),gu=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=du);function i(t){return((t=2*t-1)<0?e*Zs(-t)*Math.sin((r-t)/n):2-e*Zs(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*du)},i.period=function(n){return t(e,n)},i}(1,.3);function mu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function _u(t,e){return fetch(t,e).then(mu)}function bu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function wu(t,e){return fetch(t,e).then(bu)}function Eu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Tu(t,e){return fetch(t,e).then(Eu)}function Su(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Tu(e,n).then((function(e){return t(e,r)}))}}function xu(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=Es(t);return Tu(e,n).then((function(t){return i.parse(t,r)}))}var Iu=Su(Ss),Cu=Su(Rs);function Au(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))}function ku(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Nu(t,e){return fetch(t,e).then(ku)}function Pu(t){return(e,n)=>Tu(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}const Ru=Pu("application/xml");var Ou=Pu("text/html"),Mu=Pu("image/svg+xml");function Du(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function Lu(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,h,f,p=t._root,d={data:r},v=t._x0,y=t._y0,g=t._x1,m=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(o=(v+g)/2))?v=o:g=o,(l=n>=(a=(y+m)/2))?y=a:m=a,i=p,!(p=p[h=l<<1|c]))return i[h]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&n===u)return d.next=p,i?i[h]=d:t._root=d,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(v+g)/2))?v=o:g=o,(l=n>=(a=(y+m)/2))?y=a:m=a}while((h=l<<1|c)==(f=(u>=a)<<1|s>=o));return i[f]=p,i[h]=d,t}function Fu(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function ju(t){return t[0]}function Uu(t){return t[1]}function Vu(t,e,n){var r=new qu(null==e?ju:e,null==n?Uu:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function qu(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Bu(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Hu=Vu.prototype=qu.prototype;function Gu(t){return function(){return t}}function zu(t){return 1e-6*(t()-.5)}function Wu(t){return t.x+t.vx}function Ku(t){return t.y+t.vy}function Ju(t){var e,n,r,i=1,o=1;function a(){for(var t,a,u,c,l,h,f,p=e.length,d=0;d<o;++d)for(a=Vu(e,Wu,Ku).visitAfter(s),t=0;t<p;++t)u=e[t],h=n[u.index],f=h*h,c=u.x+u.vx,l=u.y+u.vy,a.visit(v);function v(t,e,n,o,a){var s=t.data,p=t.r,d=h+p;if(!s)return e>c+d||o<c-d||n>l+d||a<l-d;if(s.index>u.index){var v=c-s.x-s.vx,y=l-s.y-s.vy,g=v*v+y*y;g<d*d&&(0===v&&(g+=(v=zu(r))*v),0===y&&(g+=(y=zu(r))*y),g=(d-(g=Math.sqrt(g)))/g*i,u.vx+=(v*=g)*(d=(p*=p)/(f+p)),u.vy+=(y*=g)*d,s.vx-=v*(d=1-d),s.vy-=y*d)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Gu(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Gu(+e),u(),a):t},a}function Yu(t){return t.index}function Qu(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Xu(t){var e,n,r,i,o,a,s=Yu,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=Gu(30),l=1;function h(r){for(var i=0,s=t.length;i<l;++i)for(var u,c,h,f,p,d,v,y=0;y<s;++y)c=(u=t[y]).source,f=(h=u.target).x+h.vx-c.x-c.vx||zu(a),p=h.y+h.vy-c.y-c.vy||zu(a),f*=d=((d=Math.sqrt(f*f+p*p))-n[y])/d*r*e[y],p*=d,h.vx-=f*(v=o[y]),h.vy-=p*v,c.vx+=f*(v=1-v),c.vy+=p*v}function f(){if(r){var a,u,c=r.length,l=t.length,h=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(a=0,i=new Array(c);a<l;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=Qu(h,u.source)),"object"!=typeof u.target&&(u.target=Qu(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(l);a<l;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),p(),n=new Array(l),d()}}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){r=t,a=e,f()},h.links=function(e){return arguments.length?(t=e,f(),h):t},h.id=function(t){return arguments.length?(s=t,h):s},h.iterations=function(t){return arguments.length?(l=+t,h):l},h.strength=function(t){return arguments.length?(u="function"==typeof t?t:Gu(+t),p(),h):u},h.distance=function(t){return arguments.length?(c="function"==typeof t?t:Gu(+t),d(),h):c},h}Hu.copy=function(){var t,e,n=new qu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Bu(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Bu(e));return n},Hu.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Lu(this.cover(e,n),e,n,t)},Hu.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>h&&(h=i));if(u>l||c>h)return this;for(this.cover(u,c).cover(l,h),n=0;n<o;++n)Lu(this,a[n],s[n],t[n]);return this},Hu.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Hu.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Hu.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Hu.find=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,h=this._y0,f=this._x1,p=this._y1,d=[],v=this._root;for(v&&d.push(new Fu(v,l,h,f,p)),null==n?n=1/0:(l=t-n,h=e-n,f=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(v=u.node)||(i=u.x0)>f||(o=u.y0)>p||(a=u.x1)<l||(s=u.y1)<h))if(v.length){var y=(i+a)/2,g=(o+s)/2;d.push(new Fu(v[3],y,g,a,s),new Fu(v[2],i,g,y,s),new Fu(v[1],y,o,a,g),new Fu(v[0],i,o,y,g)),(c=(e>=g)<<1|t>=y)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=u)}else{var m=t-+this._x.call(null,v.data),_=e-+this._y.call(null,v.data),b=m*m+_*_;if(b<n){var w=Math.sqrt(n=b);l=t-w,h=e-w,f=t+w,p=e+w,r=v.data}}return r},Hu.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,h,f,p=this._root,d=this._x0,v=this._y0,y=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(s=(d+y)/2))?d=s:y=s,(l=a>=(u=(v+g)/2))?v=u:g=u,e=p,!(p=p[h=l<<1|c]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=i,this)},Hu.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Hu.root=function(){return this._root},Hu.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Hu.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Fu(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new Fu(n,c,l,o,a)),(n=u[2])&&s.push(new Fu(n,r,l,c,a)),(n=u[1])&&s.push(new Fu(n,c,i,o,l)),(n=u[0])&&s.push(new Fu(n,r,i,c,l))}return this},Hu.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Fu(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,h=(s+c)/2;(o=i[0])&&n.push(new Fu(o,a,s,l,h)),(o=i[1])&&n.push(new Fu(o,l,s,u,h)),(o=i[2])&&n.push(new Fu(o,a,h,l,c)),(o=i[3])&&n.push(new Fu(o,l,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Hu.x=function(t){return arguments.length?(this._x=t,this):this._x},Hu.y=function(t){return arguments.length?(this._y=t,this):this._y};const $u=4294967296;function Zu(t){return t.x}function tc(t){return t.y}var ec=Math.PI*(3-Math.sqrt(5));function nc(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=Mr(h),c=$t("tick","end"),l=function(){let t=1;return()=>(t=(1664525*t+1013904223)%$u)/$u}();function h(){f(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function f(r){var u,c,l=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*ec;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),p(),e={tick:f,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(l=t,s.forEach(d),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function rc(){var t,e,n,r,i,o=Gu(-30),a=1,s=1/0,u=.81;function c(n){var i,o=t.length,a=Vu(t,Zu,tc).visitAfter(h);for(r=n,i=0;i<o;++i)e=t[i],a.visit(f)}function l(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function h(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function f(t,o,c,l){if(!t.value)return!0;var h=t.x-e.x,f=t.y-e.y,p=l-o,d=h*h+f*f;if(p*p/u<d)return d<s&&(0===h&&(d+=(h=zu(n))*h),0===f&&(d+=(f=zu(n))*f),d<a&&(d=Math.sqrt(a*d)),e.vx+=h*t.value*r/d,e.vy+=f*t.value*r/d),!0;if(!(t.length||d>=s)){(t.data!==e||t.next)&&(0===h&&(d+=(h=zu(n))*h),0===f&&(d+=(f=zu(n))*f),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(p=i[t.data.index]*r/d,e.vx+=h*p,e.vy+=f*p)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,l()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:Gu(+t),l(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c}function ic(t,e,n){var r,i,o,a=Gu(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],c=u.x-e||1e-6,l=u.y-n||1e-6,h=Math.sqrt(c*c+l*l),f=(o[a]-h)*i[a]*t/h;u.vx+=c*f,u.vy+=l*f}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=Gu(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:Gu(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Gu(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function oc(t){var e,n,r,i=Gu(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Gu(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Gu(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Gu(+e),a(),o):t},o}function ac(t){var e,n,r,i=Gu(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Gu(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Gu(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Gu(+e),a(),o):t},o}function sc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function uc(t){return(t=sc(Math.abs(t)))?t[1]:NaN}var cc,lc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hc(t){if(!(e=lc.exec(t)))throw new Error("invalid format: "+t);var e;return new fc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function fc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function pc(t,e){var n=sc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}hc.prototype=fc.prototype,fc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const dc={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pc(100*t,e),r:pc,s:function(t,e){var n=sc(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(cc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+sc(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vc(t){return t}var yc,gc,mc,_c=Array.prototype.map,bc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wc(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?vc:(e=_c.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?vc:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(_c.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=hc(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,v=t.comma,y=t.precision,g=t.trim,m=t.type;"n"===m?(v=!0,m="g"):dc[m]||(void 0===y&&(y=12),g=!0,m="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?o:/[%p]/.test(m)?u:"",w=dc[m],E=/[defgprs%]/.test(m);function T(t){var i,o,u,f=_,T=b;if("c"===m)T=w(t)+T,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),y),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),S&&0==+t&&"+"!==h&&(S=!1),f=(S?"("===h?h:c:"-"===h||"("===h?"":h)+f,T=("s"===m?bc[8+cc/3]:"")+T+(S&&"("===h?")":""),E)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){T=(46===u?a+t.slice(i+1):t.slice(i))+T,t=t.slice(0,i);break}}v&&!p&&(t=r(t,1/0));var x=f.length+t.length+T.length,I=x<d?new Array(d-x+1).join(e):"";switch(v&&p&&(t=r(I+t,I.length?d-T.length:1/0),I=""),n){case"<":t=f+t+T+I;break;case"=":t=f+I+t+T;break;case"^":t=I.slice(0,x=I.length>>1)+f+t+T+I.slice(x);break;default:t=I+f+t+T}return s(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),T.toString=function(){return t+""},T}return{format:h,formatPrefix:function(t,e){var n=h(((t=hc(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(uc(e)/3))),i=Math.pow(10,-r),o=bc[8+r/3];return function(t){return n(i*t)+o}}}}function Ec(t){return yc=wc(t),gc=yc.format,mc=yc.formatPrefix,yc}function Tc(t){return Math.max(0,-uc(Math.abs(t)))}function Sc(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uc(e)/3)))-uc(Math.abs(t)))}function xc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,uc(e)-uc(t))+1}Ec({thousands:",",grouping:[3],currency:["$",""]});var Ic=1e-6,Cc=1e-12,Ac=Math.PI,kc=Ac/2,Nc=Ac/4,Pc=2*Ac,Rc=180/Ac,Oc=Ac/180,Mc=Math.abs,Dc=Math.atan,Lc=Math.atan2,Fc=Math.cos,jc=Math.ceil,Uc=Math.exp,Vc=(Math.floor,Math.hypot),qc=Math.log,Bc=Math.pow,Hc=Math.sin,Gc=Math.sign||function(t){return t>0?1:t<0?-1:0},zc=Math.sqrt,Wc=Math.tan;function Kc(t){return t>1?0:t<-1?Ac:Math.acos(t)}function Jc(t){return t>1?kc:t<-1?-kc:Math.asin(t)}function Yc(t){return(t=Hc(t/2))*t}function Qc(){}function Xc(t,e){t&&Zc.hasOwnProperty(t.type)&&Zc[t.type](t,e)}var $c={Feature:function(t,e){Xc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Xc(n[r].geometry,e)}},Zc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){tl(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)tl(n[r],e,0)},Polygon:function(t,e){el(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)el(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Xc(n[r],e)}};function tl(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function el(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)tl(t[n],e,1);e.polygonEnd()}function nl(t,e){t&&$c.hasOwnProperty(t.type)?$c[t.type](t,e):Xc(t,e)}var rl,il,ol,al,sl,ul,cl,ll,hl,fl,pl,dl,vl,yl,gl,ml,_l=new E,bl=new E,wl={point:Qc,lineStart:Qc,lineEnd:Qc,polygonStart:function(){_l=new E,wl.lineStart=El,wl.lineEnd=Tl},polygonEnd:function(){var t=+_l;bl.add(t<0?Pc+t:t),this.lineStart=this.lineEnd=this.point=Qc},sphere:function(){bl.add(Pc)}};function El(){wl.point=Sl}function Tl(){xl(rl,il)}function Sl(t,e){wl.point=xl,rl=t,il=e,ol=t*=Oc,al=Fc(e=(e*=Oc)/2+Nc),sl=Hc(e)}function xl(t,e){var n=(t*=Oc)-ol,r=n>=0?1:-1,i=r*n,o=Fc(e=(e*=Oc)/2+Nc),a=Hc(e),s=sl*a,u=al*o+s*Fc(i),c=s*r*Hc(i);_l.add(Lc(c,u)),ol=t,al=o,sl=a}function Il(t){return bl=new E,nl(t,wl),2*bl}function Cl(t){return[Lc(t[1],t[0]),Jc(t[2])]}function Al(t){var e=t[0],n=t[1],r=Fc(n);return[r*Fc(e),r*Hc(e),Hc(n)]}function kl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Nl(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pl(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Rl(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ol(t){var e=zc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Ml,Dl,Ll,Fl,jl,Ul,Vl,ql,Bl,Hl,Gl,zl,Wl,Kl,Jl,Yl,Ql={point:Xl,lineStart:Zl,lineEnd:th,polygonStart:function(){Ql.point=eh,Ql.lineStart=nh,Ql.lineEnd=rh,yl=new E,wl.polygonStart()},polygonEnd:function(){wl.polygonEnd(),Ql.point=Xl,Ql.lineStart=Zl,Ql.lineEnd=th,_l<0?(ul=-(ll=180),cl=-(hl=90)):yl>Ic?hl=90:yl<-1e-6&&(cl=-90),ml[0]=ul,ml[1]=ll},sphere:function(){ul=-(ll=180),cl=-(hl=90)}};function Xl(t,e){gl.push(ml=[ul=t,ll=t]),e<cl&&(cl=e),e>hl&&(hl=e)}function $l(t,e){var n=Al([t*Oc,e*Oc]);if(vl){var r=Nl(vl,n),i=Nl([r[1],-r[0],0],r);Ol(i),i=Cl(i);var o,a=t-fl,s=a>0?1:-1,u=i[0]*Rc*s,c=Mc(a)>180;c^(s*fl<u&&u<s*t)?(o=i[1]*Rc)>hl&&(hl=o):c^(s*fl<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*Rc)<cl&&(cl=o):(e<cl&&(cl=e),e>hl&&(hl=e)),c?t<fl?ih(ul,t)>ih(ul,ll)&&(ll=t):ih(t,ll)>ih(ul,ll)&&(ul=t):ll>=ul?(t<ul&&(ul=t),t>ll&&(ll=t)):t>fl?ih(ul,t)>ih(ul,ll)&&(ll=t):ih(t,ll)>ih(ul,ll)&&(ul=t)}else gl.push(ml=[ul=t,ll=t]);e<cl&&(cl=e),e>hl&&(hl=e),vl=n,fl=t}function Zl(){Ql.point=$l}function th(){ml[0]=ul,ml[1]=ll,Ql.point=Xl,vl=null}function eh(t,e){if(vl){var n=t-fl;yl.add(Mc(n)>180?n+(n>0?360:-360):n)}else pl=t,dl=e;wl.point(t,e),$l(t,e)}function nh(){wl.lineStart()}function rh(){eh(pl,dl),wl.lineEnd(),Mc(yl)>Ic&&(ul=-(ll=180)),ml[0]=ul,ml[1]=ll,vl=null}function ih(t,e){return(e-=t)<0?e+360:e}function oh(t,e){return t[0]-e[0]}function ah(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function sh(t){var e,n,r,i,o,a,s;if(hl=ll=-(ul=cl=1/0),gl=[],nl(t,Ql),n=gl.length){for(gl.sort(oh),e=1,o=[r=gl[0]];e<n;++e)ah(r,(i=gl[e])[0])||ah(r,i[1])?(ih(r[0],i[1])>ih(r[0],r[1])&&(r[1]=i[1]),ih(i[0],r[1])>ih(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=ih(r[1],i[0]))>a&&(a=s,ul=i[0],ll=r[1])}return gl=ml=null,ul===1/0||cl===1/0?[[NaN,NaN],[NaN,NaN]]:[[ul,cl],[ll,hl]]}var uh={sphere:Qc,point:ch,lineStart:hh,lineEnd:dh,polygonStart:function(){uh.lineStart=vh,uh.lineEnd=yh},polygonEnd:function(){uh.lineStart=hh,uh.lineEnd=dh}};function ch(t,e){t*=Oc;var n=Fc(e*=Oc);lh(n*Fc(t),n*Hc(t),Hc(e))}function lh(t,e,n){++Ml,Ll+=(t-Ll)/Ml,Fl+=(e-Fl)/Ml,jl+=(n-jl)/Ml}function hh(){uh.point=fh}function fh(t,e){t*=Oc;var n=Fc(e*=Oc);Kl=n*Fc(t),Jl=n*Hc(t),Yl=Hc(e),uh.point=ph,lh(Kl,Jl,Yl)}function ph(t,e){t*=Oc;var n=Fc(e*=Oc),r=n*Fc(t),i=n*Hc(t),o=Hc(e),a=Lc(zc((a=Jl*o-Yl*i)*a+(a=Yl*r-Kl*o)*a+(a=Kl*i-Jl*r)*a),Kl*r+Jl*i+Yl*o);Dl+=a,Ul+=a*(Kl+(Kl=r)),Vl+=a*(Jl+(Jl=i)),ql+=a*(Yl+(Yl=o)),lh(Kl,Jl,Yl)}function dh(){uh.point=ch}function vh(){uh.point=gh}function yh(){mh(zl,Wl),uh.point=ch}function gh(t,e){zl=t,Wl=e,t*=Oc,e*=Oc,uh.point=mh;var n=Fc(e);Kl=n*Fc(t),Jl=n*Hc(t),Yl=Hc(e),lh(Kl,Jl,Yl)}function mh(t,e){t*=Oc;var n=Fc(e*=Oc),r=n*Fc(t),i=n*Hc(t),o=Hc(e),a=Jl*o-Yl*i,s=Yl*r-Kl*o,u=Kl*i-Jl*r,c=Vc(a,s,u),l=Jc(c),h=c&&-l/c;Bl.add(h*a),Hl.add(h*s),Gl.add(h*u),Dl+=l,Ul+=l*(Kl+(Kl=r)),Vl+=l*(Jl+(Jl=i)),ql+=l*(Yl+(Yl=o)),lh(Kl,Jl,Yl)}function _h(t){Ml=Dl=Ll=Fl=jl=Ul=Vl=ql=0,Bl=new E,Hl=new E,Gl=new E,nl(t,uh);var e=+Bl,n=+Hl,r=+Gl,i=Vc(e,n,r);return i<Cc&&(e=Ul,n=Vl,r=ql,Dl<Ic&&(e=Ll,n=Fl,r=jl),(i=Vc(e,n,r))<Cc)?[NaN,NaN]:[Lc(n,e)*Rc,Jc(r/i)*Rc]}function bh(t){return function(){return t}}function wh(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Eh(t,e){return[Mc(t)>Ac?t+Math.round(-t/Pc)*Pc:t,e]}function Th(t,e,n){return(t%=Pc)?e||n?wh(xh(t),Ih(e,n)):xh(t):e||n?Ih(e,n):Eh}function Sh(t){return function(e,n){return[(e+=t)>Ac?e-Pc:e<-Ac?e+Pc:e,n]}}function xh(t){var e=Sh(t);return e.invert=Sh(-t),e}function Ih(t,e){var n=Fc(t),r=Hc(t),i=Fc(e),o=Hc(e);function a(t,e){var a=Fc(e),s=Fc(t)*a,u=Hc(t)*a,c=Hc(e),l=c*n+s*r;return[Lc(u*i-l*o,s*n-c*r),Jc(l*i+u*o)]}return a.invert=function(t,e){var a=Fc(e),s=Fc(t)*a,u=Hc(t)*a,c=Hc(e),l=c*i-u*o;return[Lc(u*i+c*o,s*n+l*r),Jc(l*n-s*r)]},a}function Ch(t){function e(e){return(e=t(e[0]*Oc,e[1]*Oc))[0]*=Rc,e[1]*=Rc,e}return t=Th(t[0]*Oc,t[1]*Oc,t.length>2?t[2]*Oc:0),e.invert=function(e){return(e=t.invert(e[0]*Oc,e[1]*Oc))[0]*=Rc,e[1]*=Rc,e},e}function Ah(t,e,n,r,i,o){if(n){var a=Fc(e),s=Hc(e),u=r*n;null==i?(i=e+r*Pc,o=e-u/2):(i=kh(a,i),o=kh(a,o),(r>0?i<o:i>o)&&(i+=r*Pc));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Cl([a,-s*Fc(l),-s*Hc(l)]),t.point(c[0],c[1])}}function kh(t,e){(e=Al(e))[0]-=t,Ol(e);var n=Kc(-e[1]);return((-e[2]<0?-n:n)+Pc-Ic)%Pc}function Nh(){var t,e,n=bh([0,0]),r=bh(90),i=bh(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=Rc,n[1]*=Rc}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*Oc,u=i.apply(this,arguments)*Oc;return t=[],e=Th(-a[0]*Oc,-a[1]*Oc,0).invert,Ah(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:bh([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:bh(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:bh(+t),a):i},a}function Ph(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Qc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Rh(t,e){return Mc(t[0]-e[0])<Ic&&Mc(t[1]-e[1])<Ic}function Oh(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Mh(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Rh(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new Oh(r,t,null,!0)),u.push(n.o=new Oh(r,null,n,!1)),s.push(n=new Oh(a,t,null,!1)),u.push(n.o=new Oh(a,null,n,!0))}})),s.length){for(u.sort(e),Dh(s),Dh(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Dh(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Lh(t){return Mc(t[0])<=Ac?t[0]:Gc(t[0])*((Mc(t[0])+Ac)%Pc-Ac)}function Fh(t,e){var n=Lh(e),r=e[1],i=Hc(r),o=[Hc(n),-Fc(n),0],a=0,s=0,u=new E;1===i?r=kc+Ic:-1===i&&(r=-kc-Ic);for(var c=0,l=t.length;c<l;++c)if(f=(h=t[c]).length)for(var h,f,p=h[f-1],d=Lh(p),v=p[1]/2+Nc,y=Hc(v),g=Fc(v),m=0;m<f;++m,d=b,y=T,g=S,p=_){var _=h[m],b=Lh(_),w=_[1]/2+Nc,T=Hc(w),S=Fc(w),x=b-d,I=x>=0?1:-1,C=I*x,A=C>Ac,k=y*T;if(u.add(Lc(k*I*Hc(C),g*S+k*Fc(C))),a+=A?x+I*Pc:x,A^d>=n^b>=n){var N=Nl(Al(p),Al(_));Ol(N);var P=Nl(o,N);Ol(P);var R=(A^x>=0?-1:1)*Jc(P[2]);(r>R||r===R&&(N[0]||N[1]))&&(s+=A^x>=0?1:-1)}}return(a<-1e-6||a<Ic&&u<-1e-12)^1&s}function jh(t,e,n,r){return function(i){var o,a,s,u=e(i),c=Ph(),l=e(c),h=!1,f={point:p,lineStart:v,lineEnd:y,polygonStart:function(){f.point=g,f.lineStart=m,f.lineEnd=_,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=v,f.lineEnd=y,a=nt(a);var t=Fh(o,r);a.length?(h||(i.polygonStart(),h=!0),Mh(a,Vh,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function d(t,e){u.point(t,e)}function v(){f.point=d,u.lineStart()}function y(){f.point=p,u.lineEnd()}function g(t,e){s.push([t,e]),l.point(t,e)}function m(){l.lineStart(),s=[]}function _(){g(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),f=c.result(),p=f.length;if(s.pop(),o.push(s),s=null,p)if(1&u){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(Uh))}return f}}function Uh(t){return t.length>1}function Vh(t,e){return((t=t.x)[0]<0?t[1]-kc-Ic:kc-t[1])-((e=e.x)[0]<0?e[1]-kc-Ic:kc-e[1])}Eh.invert=Eh;const qh=jh((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ac:-Ac,u=Mc(o-n);Mc(u-Ac)<Ic?(t.point(n,r=(r+a)/2>0?kc:-kc),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Ac&&(Mc(n-i)<Ic&&(n-=i*Ic),Mc(o-s)<Ic&&(o-=s*Ic),r=function(t,e,n,r){var i,o,a=Hc(t-n);return Mc(a)>Ic?Dc((Hc(e)*(o=Fc(r))*Hc(n)-Hc(r)*(i=Fc(e))*Hc(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*kc,r.point(-Ac,i),r.point(0,i),r.point(Ac,i),r.point(Ac,0),r.point(Ac,-i),r.point(0,-i),r.point(-Ac,-i),r.point(-Ac,0),r.point(-Ac,i);else if(Mc(t[0]-e[0])>Ic){var o=t[0]<e[0]?Ac:-Ac;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Ac,-kc]);function Bh(t){var e=Fc(t),n=6*Oc,r=e>0,i=Mc(e)>Ic;function o(t,n){return Fc(t)*Fc(n)>e}function a(t,n,r){var i=[1,0,0],o=Nl(Al(t),Al(n)),a=kl(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,l=-e*s/u,h=Nl(i,o),f=Rl(i,c);Pl(f,Rl(o,l));var p=h,d=kl(f,p),v=kl(p,p),y=d*d-v*(kl(f,f)-1);if(!(y<0)){var g=zc(y),m=Rl(p,(-d-g)/v);if(Pl(m,f),m=Cl(m),!r)return m;var _,b=t[0],w=n[0],E=t[1],T=n[1];w<b&&(_=b,b=w,w=_);var S=w-b,x=Mc(S-Ac)<Ic;if(!x&&T<E&&(_=E,E=T,T=_),x||S<Ic?x?E+T>0^m[1]<(Mc(m[0]-b)<Ic?E:T):E<=m[1]&&m[1]<=T:S>Ac^(b<=m[0]&&m[0]<=w)){var I=Rl(p,(-d+g)/v);return Pl(I,f),[m,Cl(I)]}}}function s(e,n){var i=r?t:Ac-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return jh(o,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var p,d=[h,f],v=o(h,f),y=r?v?0:s(h,f):v?s(h+(h<0?Ac:-Ac),f):0;if(!e&&(c=u=v)&&t.lineStart(),v!==u&&(!(p=a(e,d))||Rh(e,p)||Rh(d,p))&&(d[2]=1),v!==u)l=0,v?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^v){var g;y&n||!(g=a(d,e,!0))||(l=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!v||e&&Rh(e,d)||t.point(d[0],d[1]),e=d,u=v,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(e,r,i,o){Ah(o,t,n,i,e,r)}),r?[0,-t]:[-Ac,t-Ac])}var Hh,Gh,zh,Wh,Kh=1e9,Jh=-Kh;function Yh(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return Mc(r[0]-t)<Ic?i>0?0:3:Mc(r[0]-n)<Ic?i>0?2:1:Mc(r[1]-e)<Ic?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,h,f,p,d,v,y,g,m,_=a,b=Ph(),w={point:E,lineStart:function(){w.point=T,c&&c.push(l=[]),g=!0,y=!1,d=v=NaN},lineEnd:function(){u&&(T(h,f),p&&y&&b.rejoin(),u.push(b.result())),w.point=E,y&&_.lineEnd()},polygonStart:function(){_=b,u=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,h=s[0],f=h[0],p=h[1];u<l;++u)o=f,a=p,f=(h=s[u])[0],p=h[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=m&&e,i=(u=nt(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Mh(u,s,e,o,a),a.polygonEnd()),_=a,u=c=l=null}};function E(t,e){i(t,e)&&_.point(t,e)}function T(o,a){var s=i(o,a);if(c&&l.push([o,a]),g)h=o,f=a,p=s,g=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&y)_.point(o,a);else{var u=[d=Math.max(Jh,Math.min(Kh,d)),v=Math.max(Jh,Math.min(Kh,v))],b=[o=Math.max(Jh,Math.min(Kh,o)),a=Math.max(Jh,Math.min(Kh,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*h,t[1]=u+c*f),l<1&&(e[0]=s+l*h,e[1]=u+l*f),!0}}}}}(u,b,t,e,n,r)?s&&(_.lineStart(),_.point(o,a),m=!1):(y||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),m=!1)}d=o,v=a,y=s}return w}}function Qh(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Yh(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}var Xh={sphere:Qc,point:Qc,lineStart:function(){Xh.point=Zh,Xh.lineEnd=$h},lineEnd:Qc,polygonStart:Qc,polygonEnd:Qc};function $h(){Xh.point=Xh.lineEnd=Qc}function Zh(t,e){Gh=t*=Oc,zh=Hc(e*=Oc),Wh=Fc(e),Xh.point=tf}function tf(t,e){t*=Oc;var n=Hc(e*=Oc),r=Fc(e),i=Mc(t-Gh),o=Fc(i),a=r*Hc(i),s=Wh*n-zh*r*o,u=zh*n+Wh*r*o;Hh.add(Lc(zc(a*a+s*s),u)),Gh=t,zh=n,Wh=r}function ef(t){return Hh=new E,nl(t,Xh),+Hh}var nf=[null,null],rf={type:"LineString",coordinates:nf};function of(t,e){return nf[0]=t,nf[1]=e,ef(rf)}var af={Feature:function(t,e){return uf(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(uf(n[r].geometry,e))return!0;return!1}},sf={Sphere:function(){return!0},Point:function(t,e){return cf(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(cf(n[r],e))return!0;return!1},LineString:function(t,e){return lf(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(lf(n[r],e))return!0;return!1},Polygon:function(t,e){return hf(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(hf(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(uf(n[r],e))return!0;return!1}};function uf(t,e){return!(!t||!sf.hasOwnProperty(t.type))&&sf[t.type](t,e)}function cf(t,e){return 0===of(t,e)}function lf(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=of(t[o],e)))return!0;if(o>0&&(i=of(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Cc*i)return!0;n=r}return!1}function hf(t,e){return!!Fh(t.map(ff),pf(e))}function ff(t){return(t=t.map(pf)).pop(),t}function pf(t){return[t[0]*Oc,t[1]*Oc]}function df(t,e){return(t&&af.hasOwnProperty(t.type)?af[t.type]:uf)(t,e)}function vf(t,e,n){var r=st(t,e-Ic,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function yf(t,e,n){var r=st(t,e-Ic,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function gf(){var t,e,n,r,i,o,a,s,u,c,l,h,f=10,p=f,d=90,v=360,y=2.5;function g(){return{type:"MultiLineString",coordinates:m()}}function m(){return st(jc(r/d)*d,n,d).map(l).concat(st(jc(s/v)*v,a,v).map(h)).concat(st(jc(e/f)*f,t,f).filter((function(t){return Mc(t%d)>Ic})).map(u)).concat(st(jc(o/p)*p,i,p).filter((function(t){return Mc(t%v)>Ic})).map(c))}return g.lines=function(){return m().map((function(t){return{type:"LineString",coordinates:t}}))},g.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(h(a).slice(1),l(n).reverse().slice(1),h(s).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),g.precision(y)):[[r,s],[n,a]]},g.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),g.precision(y)):[[e,o],[t,i]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(d=+t[0],v=+t[1],g):[d,v]},g.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],g):[f,p]},g.precision=function(f){return arguments.length?(y=+f,u=vf(o,i,90),c=yf(e,t,y),l=vf(s,a,90),h=yf(r,n,y),g):y},g.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function mf(){return gf()()}function _f(t,e){var n=t[0]*Oc,r=t[1]*Oc,i=e[0]*Oc,o=e[1]*Oc,a=Fc(r),s=Hc(r),u=Fc(o),c=Hc(o),l=a*Fc(n),h=a*Hc(n),f=u*Fc(i),p=u*Hc(i),d=2*Jc(zc(Yc(o-r)+a*u*Yc(i-n))),v=Hc(d),y=d?function(t){var e=Hc(t*=d)/v,n=Hc(d-t)/v,r=n*l+e*f,i=n*h+e*p,o=n*s+e*c;return[Lc(i,r)*Rc,Lc(o,zc(r*r+i*i))*Rc]}:function(){return[n*Rc,r*Rc]};return y.distance=d,y}const bf=t=>t;var wf,Ef,Tf,Sf,xf=new E,If=new E,Cf={point:Qc,lineStart:Qc,lineEnd:Qc,polygonStart:function(){Cf.lineStart=Af,Cf.lineEnd=Pf},polygonEnd:function(){Cf.lineStart=Cf.lineEnd=Cf.point=Qc,xf.add(Mc(If)),If=new E},result:function(){var t=xf/2;return xf=new E,t}};function Af(){Cf.point=kf}function kf(t,e){Cf.point=Nf,wf=Tf=t,Ef=Sf=e}function Nf(t,e){If.add(Sf*t-Tf*e),Tf=t,Sf=e}function Pf(){Nf(wf,Ef)}const Rf=Cf;var Of=1/0,Mf=Of,Df=-Of,Lf=Df;const Ff={point:function(t,e){t<Of&&(Of=t),t>Df&&(Df=t),e<Mf&&(Mf=e),e>Lf&&(Lf=e)},lineStart:Qc,lineEnd:Qc,polygonStart:Qc,polygonEnd:Qc,result:function(){var t=[[Of,Mf],[Df,Lf]];return Df=Lf=-(Mf=Of=1/0),t}};var jf,Uf,Vf,qf,Bf=0,Hf=0,Gf=0,zf=0,Wf=0,Kf=0,Jf=0,Yf=0,Qf=0,Xf={point:$f,lineStart:Zf,lineEnd:np,polygonStart:function(){Xf.lineStart=rp,Xf.lineEnd=ip},polygonEnd:function(){Xf.point=$f,Xf.lineStart=Zf,Xf.lineEnd=np},result:function(){var t=Qf?[Jf/Qf,Yf/Qf]:Kf?[zf/Kf,Wf/Kf]:Gf?[Bf/Gf,Hf/Gf]:[NaN,NaN];return Bf=Hf=Gf=zf=Wf=Kf=Jf=Yf=Qf=0,t}};function $f(t,e){Bf+=t,Hf+=e,++Gf}function Zf(){Xf.point=tp}function tp(t,e){Xf.point=ep,$f(Vf=t,qf=e)}function ep(t,e){var n=t-Vf,r=e-qf,i=zc(n*n+r*r);zf+=i*(Vf+t)/2,Wf+=i*(qf+e)/2,Kf+=i,$f(Vf=t,qf=e)}function np(){Xf.point=$f}function rp(){Xf.point=op}function ip(){ap(jf,Uf)}function op(t,e){Xf.point=ap,$f(jf=Vf=t,Uf=qf=e)}function ap(t,e){var n=t-Vf,r=e-qf,i=zc(n*n+r*r);zf+=i*(Vf+t)/2,Wf+=i*(qf+e)/2,Kf+=i,Jf+=(i=qf*t-Vf*e)*(Vf+t),Yf+=i*(qf+e),Qf+=3*i,$f(Vf=t,qf=e)}const sp=Xf;function up(t){this._context=t}up.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Pc)}},result:Qc};var cp,lp,hp,fp,pp,dp=new E,vp={point:Qc,lineStart:function(){vp.point=yp},lineEnd:function(){cp&&gp(lp,hp),vp.point=Qc},polygonStart:function(){cp=!0},polygonEnd:function(){cp=null},result:function(){var t=+dp;return dp=new E,t}};function yp(t,e){vp.point=gp,lp=fp=t,hp=pp=e}function gp(t,e){fp-=t,pp-=e,dp.add(zc(fp*fp+pp*pp)),fp=t,pp=e}const mp=vp;function _p(){this._string=[]}function bp(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function wp(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),nl(t,n(r))),r.result()}return o.area=function(t){return nl(t,n(Rf)),Rf.result()},o.measure=function(t){return nl(t,n(mp)),mp.result()},o.bounds=function(t){return nl(t,n(Ff)),Ff.result()},o.centroid=function(t){return nl(t,n(sp)),sp.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,bf):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new _p):new up(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)}function Ep(t){return{stream:Tp(t)}}function Tp(t){return function(e){var n=new Sp;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Sp(){}function xp(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),nl(n,t.stream(Ff)),e(Ff.result()),null!=r&&t.clipExtent(r),t}function Ip(t,e,n){return xp(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function Cp(t,e,n){return Ip(t,[[0,0],e],n)}function Ap(t,e,n){return xp(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function kp(t,e,n){return xp(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}_p.prototype={_radius:4.5,_circle:bp(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=bp(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Sp.prototype={constructor:Sp,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Np=Fc(30*Oc);function Pp(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,h,f,p,d,v,y){var g=c-r,m=l-i,_=g*g+m*m;if(_>4*e&&v--){var b=a+f,w=s+p,E=u+d,T=zc(b*b+w*w+E*E),S=Jc(E/=T),x=Mc(Mc(E)-1)<Ic||Mc(o-h)<Ic?(o+h)/2:Lc(w,b),I=t(x,S),C=I[0],A=I[1],k=C-r,N=A-i,P=m*k-g*N;(P*P/_>e||Mc((g*k+m*N)/_-.5)>.3||a*f+s*p+u*d<Np)&&(n(r,i,o,a,s,u,C,A,x,b/=T,w/=T,E,v,y),y.point(C,A),n(C,A,x,b,w,E,c,l,h,f,p,d,v,y))}}return function(e){var r,i,o,a,s,u,c,l,h,f,p,d,v={point:y,lineStart:g,lineEnd:_,polygonStart:function(){e.polygonStart(),v.lineStart=b},polygonEnd:function(){e.polygonEnd(),v.lineStart=g}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function g(){l=NaN,v.point=m,e.lineStart()}function m(r,i){var o=Al([r,i]),a=t(r,i);n(l,h,c,f,p,d,l=a[0],h=a[1],c=r,f=o[0],p=o[1],d=o[2],16,e),e.point(l,h)}function _(){v.point=y,e.lineEnd()}function b(){g(),v.point=w,v.lineEnd=E}function w(t,e){m(r=t,e),i=l,o=h,a=f,s=p,u=d,v.point=m}function E(){n(l,h,c,f,p,d,i,o,r,a,s,u,16,e),v.lineEnd=_,_()}return v}}(t,e):function(t){return Tp({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Rp=Tp({point:function(t,e){this.stream.point(t*Oc,e*Oc)}});function Op(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=Fc(o),s=Hc(o),u=a*t,c=s*t,l=a/t,h=s/t,f=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,o){return[u*(t*=r)-c*(o*=i)+e,n-c*t-u*o]}return d.invert=function(t,e){return[r*(l*t-h*e+f),i*(p-h*t-l*e)]},d}function Mp(t){return Dp((function(){return t}))()}function Dp(t){var e,n,r,i,o,a,s,u,c,l,h=150,f=480,p=250,d=0,v=0,y=0,g=0,m=0,_=0,b=1,w=1,E=null,T=qh,S=null,x=bf,I=.5;function C(t){return u(t[0]*Oc,t[1]*Oc)}function A(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Rc,t[1]*Rc]}function k(){var t=Op(h,0,0,b,w,_).apply(null,e(d,v)),r=Op(h,f-t[0],p-t[1],b,w,_);return n=Th(y,g,m),s=wh(e,r),u=wh(n,s),a=Pp(s,I),N()}function N(){return c=l=null,C}return C.stream=function(t){return c&&l===t?c:c=Rp(function(t){return Tp({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(T(a(x(l=t)))))},C.preclip=function(t){return arguments.length?(T=t,E=void 0,N()):T},C.postclip=function(t){return arguments.length?(x=t,S=r=i=o=null,N()):x},C.clipAngle=function(t){return arguments.length?(T=+t?Bh(E=t*Oc):(E=null,qh),N()):E*Rc},C.clipExtent=function(t){return arguments.length?(x=null==t?(S=r=i=o=null,bf):Yh(S=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),N()):null==S?null:[[S,r],[i,o]]},C.scale=function(t){return arguments.length?(h=+t,k()):h},C.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],k()):[f,p]},C.center=function(t){return arguments.length?(d=t[0]%360*Oc,v=t[1]%360*Oc,k()):[d*Rc,v*Rc]},C.rotate=function(t){return arguments.length?(y=t[0]%360*Oc,g=t[1]%360*Oc,m=t.length>2?t[2]%360*Oc:0,k()):[y*Rc,g*Rc,m*Rc]},C.angle=function(t){return arguments.length?(_=t%360*Oc,k()):_*Rc},C.reflectX=function(t){return arguments.length?(b=t?-1:1,k()):b<0},C.reflectY=function(t){return arguments.length?(w=t?-1:1,k()):w<0},C.precision=function(t){return arguments.length?(a=Pp(s,I=t*t),N()):zc(I)},C.fitExtent=function(t,e){return Ip(C,t,e)},C.fitSize=function(t,e){return Cp(C,t,e)},C.fitWidth=function(t,e){return Ap(C,t,e)},C.fitHeight=function(t,e){return kp(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&A,k()}}function Lp(t){var e=0,n=Ac/3,r=Dp(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Oc,n=t[1]*Oc):[e*Rc,n*Rc]},i}function Fp(t,e){var n=Hc(t),r=(n+Hc(e))/2;if(Mc(r)<Ic)return function(t){var e=Fc(t);function n(t,n){return[t*e,Hc(n)/e]}return n.invert=function(t,n){return[t/e,Jc(n*e)]},n}(t);var i=1+n*(2*r-n),o=zc(i)/r;function a(t,e){var n=zc(i-2*r*Hc(e))/r;return[n*Hc(t*=r),o-n*Fc(t)]}return a.invert=function(t,e){var n=o-e,a=Lc(t,Mc(n))*Gc(n);return n*r<0&&(a-=Ac*Gc(t)*Gc(n)),[a/r,Jc((i-(t*t+n*n)*r*r)/(2*r))]},a}function jp(){return Lp(Fp).scale(155.424).center([0,33.6442])}function Up(){return jp().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Vp(){var t,e,n,r,i,o,a=Up(),s=jp().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=jp().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+Ic,l+.12*e+Ic],[o-.214*e-Ic,l+.234*e-Ic]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+Ic,l+.166*e+Ic],[o-.115*e-Ic,l+.234*e-Ic]]).stream(c),h()},l.fitExtent=function(t,e){return Ip(l,t,e)},l.fitSize=function(t,e){return Cp(l,t,e)},l.fitWidth=function(t,e){return Ap(l,t,e)},l.fitHeight=function(t,e){return kp(l,t,e)},l.scale(1070)}function qp(t){return function(e,n){var r=Fc(e),i=Fc(n),o=t(r*i);return o===1/0?[2,0]:[o*i*Hc(e),o*Hc(n)]}}function Bp(t){return function(e,n){var r=zc(e*e+n*n),i=t(r),o=Hc(i),a=Fc(i);return[Lc(e*o,r*a),Jc(r&&n*o/r)]}}var Hp=qp((function(t){return zc(2/(1+t))}));function Gp(){return Mp(Hp).scale(124.75).clipAngle(179.999)}Hp.invert=Bp((function(t){return 2*Jc(t/2)}));var zp=qp((function(t){return(t=Kc(t))&&t/Hc(t)}));function Wp(){return Mp(zp).scale(79.4188).clipAngle(179.999)}function Kp(t,e){return[t,qc(Wc((kc+e)/2))]}function Jp(){return Yp(Kp).scale(961/Pc)}function Yp(t){var e,n,r,i=Mp(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=Ac*a(),s=i(Ch(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Kp?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function Qp(t){return Wc((kc+t)/2)}function Xp(t,e){var n=Fc(t),r=t===e?Hc(t):qc(n/Fc(e))/qc(Qp(e)/Qp(t)),i=n*Bc(Qp(t),r)/r;if(!r)return Kp;function o(t,e){i>0?e<-kc+Ic&&(e=-kc+Ic):e>kc-Ic&&(e=kc-Ic);var n=i/Bc(Qp(e),r);return[n*Hc(r*t),i-n*Fc(r*t)]}return o.invert=function(t,e){var n=i-e,o=Gc(r)*zc(t*t+n*n),a=Lc(t,Mc(n))*Gc(n);return n*r<0&&(a-=Ac*Gc(t)*Gc(n)),[a/r,2*Dc(Bc(i/o,1/r))-kc]},o}function $p(){return Lp(Xp).scale(109.5).parallels([30,30])}function Zp(t,e){return[t,e]}function td(){return Mp(Zp).scale(152.63)}function ed(t,e){var n=Fc(t),r=t===e?Hc(t):(n-Fc(e))/(e-t),i=n/r+t;if(Mc(r)<Ic)return Zp;function o(t,e){var n=i-e,o=r*t;return[n*Hc(o),i-n*Fc(o)]}return o.invert=function(t,e){var n=i-e,o=Lc(t,Mc(n))*Gc(n);return n*r<0&&(o-=Ac*Gc(t)*Gc(n)),[o/r,i-Gc(r)*zc(t*t+n*n)]},o}function nd(){return Lp(ed).scale(131.154).center([0,13.9389])}zp.invert=Bp((function(t){return t})),Kp.invert=function(t,e){return[t,2*Dc(Uc(e))-kc]},Zp.invert=Zp;var rd=1.340264,id=-.081106,od=893e-6,ad=.003796,sd=zc(3)/2;function ud(t,e){var n=Jc(sd*Hc(e)),r=n*n,i=r*r*r;return[t*Fc(n)/(sd*(rd+3*id*r+i*(7*od+9*ad*r))),n*(rd+id*r+i*(od+ad*r))]}function cd(){return Mp(ud).scale(177.158)}function ld(t,e){var n=Fc(e),r=Fc(t)*n;return[n*Hc(t)/r,Hc(e)/r]}function hd(){return Mp(ld).scale(144.049).clipAngle(60)}function fd(){var t,e,n,r,i,o,a,s=1,u=0,c=0,l=1,h=1,f=0,p=null,d=1,v=1,y=Tp({point:function(t,e){var n=_([t,e]);this.stream.point(n[0],n[1])}}),g=bf;function m(){return d=s*l,v=s*h,o=a=null,_}function _(n){var r=n[0]*d,i=n[1]*v;if(f){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return _.invert=function(n){var r=n[0]-u,i=n[1]-c;if(f){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/d,i/v]},_.stream=function(t){return o&&a===t?o:o=y(g(a=t))},_.postclip=function(t){return arguments.length?(g=t,p=n=r=i=null,m()):g},_.clipExtent=function(t){return arguments.length?(g=null==t?(p=n=r=i=null,bf):Yh(p=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),m()):null==p?null:[[p,n],[r,i]]},_.scale=function(t){return arguments.length?(s=+t,m()):s},_.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],m()):[u,c]},_.angle=function(n){return arguments.length?(e=Hc(f=n%360*Oc),t=Fc(f),m()):f*Rc},_.reflectX=function(t){return arguments.length?(l=t?-1:1,m()):l<0},_.reflectY=function(t){return arguments.length?(h=t?-1:1,m()):h<0},_.fitExtent=function(t,e){return Ip(_,t,e)},_.fitSize=function(t,e){return Cp(_,t,e)},_.fitWidth=function(t,e){return Ap(_,t,e)},_.fitHeight=function(t,e){return kp(_,t,e)},_}function pd(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function dd(){return Mp(pd).scale(175.295)}function vd(t,e){return[Fc(e)*Hc(t),Hc(e)]}function yd(){return Mp(vd).scale(249.5).clipAngle(90.000001)}function gd(t,e){var n=Fc(e),r=1+Fc(t)*n;return[n*Hc(t)/r,Hc(e)/r]}function md(){return Mp(gd).scale(250).clipAngle(142)}function _d(t,e){return[qc(Wc((kc+e)/2)),-t]}function bd(){var t=Yp(_d),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function wd(t,e){return t.parent===e.parent?1:2}function Ed(t,e){return t+e.x}function Td(t,e){return Math.max(t,e.y)}function Sd(){var t=wd,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Ed,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Td,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function xd(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Id(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Ad)):void 0===e&&(e=Cd);for(var n,r,i,o,a,s=new Pd(t),u=[s];n=u.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new Pd(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Nd)}function Cd(t){return t.children}function Ad(t){return Array.isArray(t)?t[1]:null}function kd(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Nd(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Pd(t){this.data=t,this.depth=this.height=0,this.parent=null}function Rd(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,o=[];r<i;)e=t[r],n&&Dd(n,e)?++r:(n=Fd(o=Od(o,e)),r=0);return n}function Od(t,e){var n,r;if(Ld(e,t))return[e];for(n=0;n<t.length;++n)if(Md(e,t[n])&&Ld(jd(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Md(jd(t[n],t[r]),e)&&Md(jd(t[n],e),t[r])&&Md(jd(t[r],e),t[n])&&Ld(Ud(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Md(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Dd(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Ld(t,e){for(var n=0;n<e.length;++n)if(!Dd(t,e[n]))return!1;return!0}function Fd(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return jd(t[0],t[1]);case 3:return Ud(t[0],t[1],t[2])}var e}function jd(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*l)/2,y:(r+a+c/h*l)/2,r:(h+i+s)/2}}function Ud(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,h=n.r,f=r-a,p=r-c,d=i-s,v=i-l,y=u-o,g=h-o,m=r*r+i*i-o*o,_=m-a*a-s*s+u*u,b=m-c*c-l*l+h*h,w=p*d-f*v,E=(d*b-v*_)/(2*w)-r,T=(v*y-d*g)/w,S=(p*_-f*b)/(2*w)-i,x=(f*g-p*y)/w,I=T*T+x*x-1,C=2*(o+E*T+S*x),A=E*E+S*S-o*o,k=-(I?(C+Math.sqrt(C*C-4*I*A))/(2*I):A/C);return{x:r+E+T*k,y:i+S+x*k,r:k}}function Vd(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function qd(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Bd(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function Hd(t){this._=t,this.next=null,this.previous=null}function Gd(t){if(!(o=(e=t,t="object"==typeof e&&"length"in e?e:Array.from(e)).length))return 0;var e,n,r,i,o,a,s,u,c,l,h,f;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Vd(r,n,i=t[2]),n=new Hd(n),r=new Hd(r),i=new Hd(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(u=3;u<o;++u){Vd(n._,r._,i=t[u]),i=new Hd(i),c=r.next,l=n.previous,h=r._.r,f=n._.r;do{if(h<=f){if(qd(c._,i._)){r=c,n.next=r,r.previous=n,--u;continue t}h+=c._.r,c=c.next}else{if(qd(l._,i._)){(n=l).next=r,r.previous=n,--u;continue t}f+=l._.r,l=l.previous}}while(c!==l.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=Bd(n);(i=i.next)!==r;)(s=Bd(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Rd(n),u=0;u<o;++u)(n=t[u]).x-=i.x,n.y-=i.y;return i.r}function zd(t){return Gd(t),t}function Wd(t){return null==t?null:Kd(t)}function Kd(t){if("function"!=typeof t)throw new Error;return t}function Jd(){return 0}function Yd(t){return function(){return t}}function Qd(t){return Math.sqrt(t.value)}function Xd(){var t=null,e=1,n=1,r=Jd;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore($d(t)).eachAfter(Zd(r,.5)).eachBefore(tv(1)):i.eachBefore($d(Qd)).eachAfter(Zd(Jd,1)).eachAfter(Zd(r,i.r/Math.min(e,n))).eachBefore(tv(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Wd(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Yd(+t),i):r},i}function $d(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Zd(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=Gd(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function tv(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function ev(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function nv(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function rv(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&nv(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(ev),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}ud.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(rd+id*i+o*(od+ad*i))-e)/(rd+3*id*i+o*(7*od+9*ad*i)))*r)*i*i,!(Mc(n)<Cc));++a);return[sd*t*(rd+3*id*i+o*(7*od+9*ad*i))/Fc(r),Jc(Hc(r)/sd)]},ld.invert=Bp(Dc),pd.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Mc(n)>Ic&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},vd.invert=Bp(Jc),gd.invert=Bp((function(t){return 2*Dc(t)})),_d.invert=function(t,e){return[-e,2*Dc(Uc(t))-kc]},Pd.prototype=Id.prototype={constructor:Pd,count:function(){return this.eachAfter(xd)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++u,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Id(this).eachBefore(kd)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};var iv={depth:-1},ov={};function av(t){return t.id}function sv(t){return t.parentId}function uv(){var t=av,e=sv;function n(n){var r,i,o,a,s,u,c,l=Array.from(n),h=l.length,f=new Map;for(i=0;i<h;++i)r=l[i],s=l[i]=new Pd(r),null!=(u=t(r,i,n))&&(u+="")&&(c=s.id=u,f.set(c,f.has(c)?ov:s)),null!=(u=e(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<h;++i)if(u=(s=l[i]).parent){if(!(a=f.get(u)))throw new Error("missing: "+u);if(a===ov)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=iv,o.eachBefore((function(t){t.depth=t.parent.depth+1,--h})).eachBefore(Nd),o.parent=null,h>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=Kd(e),n):t},n.parentId=function(t){return arguments.length?(e=Kd(t),n):e},n}function cv(t,e){return t.parent===e.parent?1:2}function lv(t){var e=t.children;return e?e[0]:t.t}function hv(t){var e=t.children;return e?e[e.length-1]:t.t}function fv(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function pv(t,e,n){return t.a.parent===e.parent?t.a:n}function dv(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function vv(){var t=cv,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new dv(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new dv(r[i],i)),n.parent=e;return(a.parent=new dv(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,l=i,h=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>h.depth&&(h=t)}));var f=c===l?1:t(c,l)/2,p=f-c.x,d=e/(l.x+f+p),v=n/(h.depth||1);i.eachBefore((function(t){t.x=(t.x+p)*d,t.y=t.depth*v}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,h=s.m,f=u.m;s=hv(s),o=lv(o),s&&o;)u=lv(u),(a=hv(a)).a=e,(i=s.z+h-o.z-c+t(s._,o._))>0&&(fv(pv(s,e,r),e,i),c+=i,l+=i),h+=s.m,c+=o.m,f+=u.m,l+=a.m;s&&!hv(a)&&(a.t=s,a.m+=h-l),o&&!lv(u)&&(u.t=o,u.m+=c-f,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function yv(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}dv.prototype=Object.create(Pd.prototype);var gv=(1+Math.sqrt(5))/2;function mv(t,e,n,r,i,o){for(var a,s,u,c,l,h,f,p,d,v,y,g=[],m=e.children,_=0,b=0,w=m.length,E=e.value;_<w;){u=i-n,c=o-r;do{l=m[b++].value}while(!l&&b<w);for(h=f=l,y=l*l*(v=Math.max(c/u,u/c)/(E*t)),d=Math.max(f/y,y/h);b<w;++b){if(l+=s=m[b].value,s<h&&(h=s),s>f&&(f=s),y=l*l*v,(p=Math.max(f/y,y/h))>d){l-=s;break}d=p}g.push(a={value:l,dice:u<c,children:m.slice(_,b)}),a.dice?nv(a,n,r,i,E?r+=c*l/E:o):yv(a,n,r,E?n+=u*l/E:i,o),E-=l,_=b}return g}const _v=function t(e){function n(t,n,r,i,o){mv(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(gv);function bv(){var t=_v,e=!1,n=1,r=1,i=[0],o=Jd,a=Jd,s=Jd,u=Jd,c=Jd;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(ev),t}function h(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,h=e.x1-n,f=e.y1-n;h<r&&(r=h=(r+h)/2),f<l&&(l=f=(l+f)/2),e.x0=r,e.y0=l,e.x1=h,e.y1=f,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,(h-=s(e)-n)<r&&(r=h=(r+h)/2),(f-=u(e)-n)<l&&(l=f=(l+f)/2),t(e,r,l,h,f))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=Kd(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Yd(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Yd(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Yd(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Yd(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Yd(+t),l):c},l}function wv(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var l=s[e];return l.x0=i,l.y0=o,l.x1=a,void(l.y1=u)}for(var h=c[e],f=r/2+h,p=e+1,d=n-1;p<d;){var v=p+d>>>1;c[v]<f?p=v+1:d=v}f-c[p-1]<c[p]-f&&e+1<p&&--p;var y=c[p]-h,g=r-y;if(a-i>u-o){var m=r?(i*g+a*y)/r:a;t(e,p,y,i,o,m,u),t(p,n,g,m,o,a,u)}else{var _=r?(o*g+u*y)/r:u;t(e,p,y,i,o,a,_),t(p,n,g,i,_,a,u)}}(0,u,t.value,e,n,r,i)}function Ev(t,e,n,r,i){(1&t.depth?yv:nv)(t,e,n,r,i)}const Tv=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,h=-1,f=a.length,p=t.value;++h<f;){for(u=(s=a[h]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?nv(s,n,r,i,p?r+=(o-r)*s.value/p:o):yv(s,n,r,p?n+=(i-n)*s.value/p:i,o),p-=s.value}else t._squarify=a=mv(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(gv);function Sv(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function xv(t,e){var n=nr(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function Iv(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Cv(t){return((t=Math.exp(t))+1/t)/2}const Av=function t(e,n,r){function i(t,i){var o,a,s=t[0],u=t[1],c=t[2],l=i[0],h=i[1],f=i[2],p=l-s,d=h-u,v=p*p+d*d;if(v<1e-12)a=Math.log(f/c)/e,o=function(t){return[s+t*p,u+t*d,c*Math.exp(e*t*a)]};else{var y=Math.sqrt(v),g=(f*f-c*c+r*v)/(2*c*n*y),m=(f*f-c*c-r*v)/(2*f*n*y),_=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(m*m+1)-m);a=(b-_)/e,o=function(t){var r,i=t*a,o=Cv(_),l=c/(n*y)*(o*(r=e*i+_,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(_));return[s+l*p,u+l*d,c*o/Cv(e*i+_)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function kv(t){return function(e,n){var r=t((e=Jn(e)).h,(n=Jn(n)).h),i=rr(e.s,n.s),o=rr(e.l,n.l),a=rr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}const Nv=kv(nr);var Pv=kv(rr);function Rv(t,e){var n=rr((t=oa(t)).l,(e=oa(e)).l),r=rr(t.a,e.a),i=rr(t.b,e.b),o=rr(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function Ov(t){return function(e,n){var r=t((e=pa(e)).h,(n=pa(n)).h),i=rr(e.c,n.c),o=rr(e.l,n.l),a=rr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}const Mv=Ov(nr);var Dv=Ov(rr);function Lv(t){return function e(n){function r(e,r){var i=t((e=xa(e)).h,(r=xa(r)).h),o=rr(e.s,r.s),a=rr(e.l,r.l),s=rr(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}const Fv=Lv(nr);var jv=Lv(rr);function Uv(t,e){void 0===e&&(e=t,t=mr);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function Vv(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function qv(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2}function Bv(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]}function Hv(t,e){return t[0]-e[0]||t[1]-e[1]}function Gv(t){const e=t.length,n=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&(o=t[n[i-2]],a=t[n[i-1]],s=t[r],(a[0]-o[0])*(s[1]-o[1])-(a[1]-o[1])*(s[0]-o[0])<=0);)--i;n[i++]=r}var o,a,s;return n.slice(0,i)}function zv(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Hv),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=Gv(r),a=Gv(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)c.push(t[r[a[e]][2]]);return c}function Wv(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],l=!1,h=0;h<i;++h)n=(o=t[h])[0],(r=o[1])>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(l=!l),u=n,c=r;return l}function Kv(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,e-=a=(o=t[r])[0],n-=s=o[1],u+=Math.hypot(e,n);return u}const Jv=Math.random,Yv=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Jv),Qv=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(Jv),Xv=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Jv),$v=function t(e){var n=Xv.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(Jv),Zv=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,r=t;r>1;--r)n+=e();return n+r*e()}}return n.source=t,n}(Jv),ty=function t(e){var n=Zv.source(e);function r(t){if(0==(t=+t))return e;var r=n(t);return function(){return r()/t}}return r.source=t,r}(Jv),ey=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(Jv),ny=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(Jv),ry=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(Jv),iy=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(Jv),oy=function t(e){var n=Xv.source(e)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-e())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),a=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),s=1+o*t}while(s<=0);s*=s*s;var u=1-e()}while(u>=1-.0331*t*t*t*t&&Math.log(u)>=.5*t*t+i*(1-s+Math.log(s)));return i*s*a()*r}}return r.source=t,r}(Jv),ay=function t(e){var n=oy.source(e);function r(t,e){var r=n(t),i=n(e);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(Jv),sy=function t(e){var n=iy.source(e),r=ay.source(e);function i(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var i=0,o=t,a=e;o*a>16&&o*(1-a)>16;){var s=Math.floor((o+1)*a),u=r(s,o-s+1)();u<=a?(i+=s,o-=s,a=(a-u)/(1-u)):(o=s-1,a/=u)}for(var c=a<.5,l=n(c?a:1-a),h=l(),f=0;h<=o;++f)h+=l();return i+(c?f:o-f)}}return i.source=t,i}(Jv),uy=function t(e){function n(t,n,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=e=>Math.pow(e,t)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-e()))}}return n.source=t,n}(Jv),cy=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(Jv),ly=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var r=e();return t+n*Math.log(r/(1-r))}}return n.source=t,n}(Jv),hy=function t(e){var n=oy.source(e),r=sy.source(e);function i(t){return function(){for(var i=0,o=t;o>16;){var a=Math.floor(.875*o),s=n(a)();if(s>o)return i+r(a-1,o/s)();i+=a,o-=s}for(var u=-Math.log1p(-e()),c=0;u<=o;++c)u-=Math.log1p(-e());return i+c}}return i.source=t,i}(Jv),fy=1/4294967296;function py(t=Math.random()){let e=0|(0<=t&&t<1?t/fy:Math.abs(t));return()=>(e=1664525*e+1013904223|0,fy*(e>>>0))}function dy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function vy(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const yy=Symbol("implicit");function gy(){var t=new Map,e=[],n=[],r=yy;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==yy)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return gy(e,n).unknown(r)},dy.apply(i,arguments),i}function my(){var t,e,n=gy().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,u=0,c=0,l=.5;function h(){var n=r().length,h=a<o,f=h?a:o,p=h?o:a;t=(p-f)/Math.max(1,n-u+2*c),s&&(t=Math.floor(t)),f+=(p-f-t*(n-u))*l,e=t*(1-u),s&&(f=Math.round(f),e=Math.round(e));var d=st(n).map((function(e){return f+t*e}));return i(h?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),h()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),h()):l},n.copy=function(){return my(r(),[o,a]).round(s).paddingInner(u).paddingOuter(c).align(l)},dy.apply(h(),arguments)}function _y(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _y(e())},t}function by(){return _y(my.apply(null,arguments).paddingInner(1))}function wy(t){return+t}var Ey=[0,1];function Ty(t){return t}function Sy(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function xy(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Sy(i,r),o=n(a,o)):(r=Sy(r,i),o=n(o,a)),function(t){return o(r(t))}}function Iy(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Sy(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=h(t,e,1,r)-1;return o[n](i[n](e))}}function Cy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ay(){var t,e,n,r,i,o,a=Ey,s=Ey,u=mr,c=Ty;function l(){var t,e,n,u=Math.min(a.length,s.length);return c!==Ty&&(t=a[0],e=a[u-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=u>2?Iy:xy,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(s,a.map(t),pr)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,wy),l()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=Iv,l()},h.clamp=function(t){return arguments.length?(c=!!t||Ty,l()):c!==Ty},h.interpolate=function(t){return arguments.length?(u=t,l()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}function ky(){return Ay()(Ty,Ty)}function Ny(t,e,n,r){var i,o=q(t,e,n);switch((r=hc(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Sc(o,a))||(r.precision=i),mc(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=xc(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Tc(o))||(r.precision=i-2*("%"===r.type))}return gc(r)}function Py(t){var e=t.domain;return t.ticks=function(t){var n=e();return U(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Ny(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],c=o[s],l=10;for(c<u&&(i=u,u=c,c=i,i=a,a=s,s=i);l-- >0;){if((i=V(u,c,n))===r)return o[a]=u,o[s]=c,e(o);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Ry(){var t=ky();return t.copy=function(){return Cy(t,Ry())},dy.apply(t,arguments),Py(t)}function Oy(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,wy),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Oy(t).unknown(e)},t=arguments.length?Array.from(t,wy):[0,1],Py(n)}function My(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Dy(t){return Math.log(t)}function Ly(t){return Math.exp(t)}function Fy(t){return-Math.log(-t)}function jy(t){return-Math.exp(-t)}function Uy(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Vy(t){return function(e){return-t(-e)}}function qy(t){var e,n,r=t(Dy,Ly),i=r.domain,o=10;function a(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?Uy:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=Vy(e),n=Vy(n),t(Fy,jy)):t(Dy,Ly),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(f=s,s=u,u=f);var c,l,h,f=e(s),p=e(u),d=null==t?10:+t,v=[];if(!(o%1)&&p-f<d){if(f=Math.floor(f),p=Math.ceil(p),s>0){for(;f<=p;++f)for(l=1,c=n(f);l<o;++l)if(!((h=c*l)<s)){if(h>u)break;v.push(h)}}else for(;f<=p;++f)for(l=o-1,c=n(f);l>=1;--l)if(!((h=c*l)<s)){if(h>u)break;v.push(h)}2*v.length<d&&(v=U(s,u,d))}else v=U(f,p,Math.min(p-f,d)).map(n);return r?v.reverse():v},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=gc(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(My(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function By(){var t=qy(Ay()).domain([1,10]);return t.copy=function(){return Cy(t,By()).base(t.base())},dy.apply(t,arguments),t}function Hy(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Gy(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function zy(t){var e=1,n=t(Hy(e),Gy(e));return n.constant=function(n){return arguments.length?t(Hy(e=+n),Gy(e)):e},Py(n)}function Wy(){var t=zy(Ay());return t.copy=function(){return Cy(t,Wy()).constant(t.constant())},dy.apply(t,arguments)}function Ky(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Jy(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Yy(t){return t<0?-t*t:t*t}function Qy(t){var e=t(Ty,Ty),n=1;function r(){return 1===n?t(Ty,Ty):.5===n?t(Jy,Yy):t(Ky(n),Ky(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Py(e)}function Xy(){var t=Qy(Ay());return t.copy=function(){return Cy(t,Xy()).exponent(t.exponent())},dy.apply(t,arguments),t}function $y(){return Xy.apply(null,arguments).exponent(.5)}function Zy(t){return Math.sign(t)*t*t}function tg(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function eg(){var t,e=ky(),n=[0,1],r=!1;function i(n){var i=tg(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(Zy(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,wy)).map(Zy)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return eg(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},dy.apply(i,arguments),Py(i)}function ng(){var t,e=[],n=[],r=[];function o(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=Q(e,t/i);return a}function a(e){return isNaN(e=+e)?t:n[h(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(i),o()},a.range=function(t){return arguments.length?(n=Array.from(t),o()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return ng().domain(e).range(n).unknown(t)},dy.apply(a,arguments)}function rg(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return e<=e?o[h(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return rg().domain([e,n]).range(o).unknown(t)},dy.apply(Py(a),arguments)}function ig(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[h(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ig().domain(e).range(n).unknown(t)},dy.apply(i,arguments)}var og=new Date,ag=new Date;function sg(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return sg((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return og.setTime(+e),ag.setTime(+r),t(og),t(ag),Math.floor(n(og,ag))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ug=sg((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));ug.every=function(t){return isFinite(t=Math.floor(t))&&t>0?sg((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const cg=ug;var lg=ug.range,hg=sg((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));const fg=hg;var pg=hg.range,dg=1e3,vg=6e4,yg=36e5,gg=864e5,mg=6048e5;function _g(t){return sg((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vg)/mg}))}var bg=_g(0),wg=_g(1),Eg=_g(2),Tg=_g(3),Sg=_g(4),xg=_g(5),Ig=_g(6),Cg=bg.range,Ag=wg.range,kg=Eg.range,Ng=Tg.range,Pg=Sg.range,Rg=xg.range,Og=Ig.range,Mg=sg((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vg)/gg),(t=>t.getDate()-1));const Dg=Mg;var Lg=Mg.range,Fg=sg((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*dg-t.getMinutes()*vg)}),(function(t,e){t.setTime(+t+e*yg)}),(function(t,e){return(e-t)/yg}),(function(t){return t.getHours()}));const jg=Fg;var Ug=Fg.range,Vg=sg((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*dg)}),(function(t,e){t.setTime(+t+e*vg)}),(function(t,e){return(e-t)/vg}),(function(t){return t.getMinutes()}));const qg=Vg;var Bg=Vg.range,Hg=sg((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*dg)}),(function(t,e){return(e-t)/dg}),(function(t){return t.getUTCSeconds()}));const Gg=Hg;var zg=Hg.range,Wg=sg((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Wg.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?sg((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Wg:null};const Kg=Wg;var Jg=Wg.range;function Yg(t){return sg((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/mg}))}var Qg=Yg(0),Xg=Yg(1),$g=Yg(2),Zg=Yg(3),tm=Yg(4),em=Yg(5),nm=Yg(6),rm=Qg.range,im=Xg.range,om=$g.range,am=Zg.range,sm=tm.range,um=em.range,cm=nm.range,lm=sg((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/gg}),(function(t){return t.getUTCDate()-1}));const hm=lm;var fm=lm.range,pm=sg((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));pm.every=function(t){return isFinite(t=Math.floor(t))&&t>0?sg((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const dm=pm;var vm=pm.range;function ym(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function gm(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function mm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _m(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=Pm(i),l=Rm(i),h=Pm(o),f=Rm(o),p=Pm(a),d=Rm(a),v=Pm(s),y=Rm(s),g=Pm(u),m=Rm(u),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Zm,e:Zm,f:i_,g:v_,G:g_,H:t_,I:e_,j:n_,L:r_,m:o_,M:a_,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:V_,s:q_,S:s_,u:u_,U:c_,V:h_,w:f_,W:p_,x:null,X:null,y:d_,Y:y_,Z:m_,"%":U_},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:__,e:__,f:S_,g:D_,G:F_,H:b_,I:w_,j:E_,L:T_,m:x_,M:I_,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:V_,s:q_,S:C_,u:A_,U:k_,V:P_,w:R_,W:O_,x:null,X:null,y:M_,Y:L_,Z:j_,"%":U_},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return S(t,e,n,r)},d:Hm,e:Hm,f:Ym,g:Um,G:jm,H:zm,I:zm,j:Gm,L:Jm,m:Bm,M:Wm,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:qm,Q:Xm,s:$m,S:Km,u:Mm,U:Dm,V:Lm,w:Om,W:Fm,x:function(t,e,r){return S(t,n,e,r)},X:function(t,e,n){return S(t,r,e,n)},y:Um,Y:jm,Z:Vm,"%":Qm};function E(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=xm[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function T(t,e){return function(n){var r,i,o=mm(1900,void 0,1);if(S(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=gm(mm(o.y,0,1))).getUTCDay(),r=i>4||0===i?Xg.ceil(r):Xg(r),r=hm.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=ym(mm(o.y,0,1))).getDay(),r=i>4||0===i?wg.ceil(r):wg(r),r=Dg.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?gm(mm(o.y,0,1)).getUTCDay():ym(mm(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,gm(o)):ym(o)}}function S(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in xm?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=E(n,_),_.X=E(r,_),_.c=E(e,_),b.x=E(n,b),b.X=E(r,b),b.c=E(e,b),{format:function(t){var e=E(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=E(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}var bm,wm,Em,Tm,Sm,xm={"-":"",_:" ",0:"0"},Im=/^\s*\d+/,Cm=/^%/,Am=/[\\^$*+?|[\]().{}]/g;function km(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Nm(t){return t.replace(Am,"\\$&")}function Pm(t){return new RegExp("^(?:"+t.map(Nm).join("|")+")","i")}function Rm(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Om(t,e,n){var r=Im.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Mm(t,e,n){var r=Im.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Dm(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Lm(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Fm(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function jm(t,e,n){var r=Im.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Um(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Vm(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function qm(t,e,n){var r=Im.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Bm(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Hm(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Gm(t,e,n){var r=Im.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function zm(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Wm(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Km(t,e,n){var r=Im.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Jm(t,e,n){var r=Im.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ym(t,e,n){var r=Im.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Qm(t,e,n){var r=Cm.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Xm(t,e,n){var r=Im.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $m(t,e,n){var r=Im.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Zm(t,e){return km(t.getDate(),e,2)}function t_(t,e){return km(t.getHours(),e,2)}function e_(t,e){return km(t.getHours()%12||12,e,2)}function n_(t,e){return km(1+Dg.count(cg(t),t),e,3)}function r_(t,e){return km(t.getMilliseconds(),e,3)}function i_(t,e){return r_(t,e)+"000"}function o_(t,e){return km(t.getMonth()+1,e,2)}function a_(t,e){return km(t.getMinutes(),e,2)}function s_(t,e){return km(t.getSeconds(),e,2)}function u_(t){var e=t.getDay();return 0===e?7:e}function c_(t,e){return km(bg.count(cg(t)-1,t),e,2)}function l_(t){var e=t.getDay();return e>=4||0===e?Sg(t):Sg.ceil(t)}function h_(t,e){return t=l_(t),km(Sg.count(cg(t),t)+(4===cg(t).getDay()),e,2)}function f_(t){return t.getDay()}function p_(t,e){return km(wg.count(cg(t)-1,t),e,2)}function d_(t,e){return km(t.getFullYear()%100,e,2)}function v_(t,e){return km((t=l_(t)).getFullYear()%100,e,2)}function y_(t,e){return km(t.getFullYear()%1e4,e,4)}function g_(t,e){var n=t.getDay();return km((t=n>=4||0===n?Sg(t):Sg.ceil(t)).getFullYear()%1e4,e,4)}function m_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+km(e/60|0,"0",2)+km(e%60,"0",2)}function __(t,e){return km(t.getUTCDate(),e,2)}function b_(t,e){return km(t.getUTCHours(),e,2)}function w_(t,e){return km(t.getUTCHours()%12||12,e,2)}function E_(t,e){return km(1+hm.count(dm(t),t),e,3)}function T_(t,e){return km(t.getUTCMilliseconds(),e,3)}function S_(t,e){return T_(t,e)+"000"}function x_(t,e){return km(t.getUTCMonth()+1,e,2)}function I_(t,e){return km(t.getUTCMinutes(),e,2)}function C_(t,e){return km(t.getUTCSeconds(),e,2)}function A_(t){var e=t.getUTCDay();return 0===e?7:e}function k_(t,e){return km(Qg.count(dm(t)-1,t),e,2)}function N_(t){var e=t.getUTCDay();return e>=4||0===e?tm(t):tm.ceil(t)}function P_(t,e){return t=N_(t),km(tm.count(dm(t),t)+(4===dm(t).getUTCDay()),e,2)}function R_(t){return t.getUTCDay()}function O_(t,e){return km(Xg.count(dm(t)-1,t),e,2)}function M_(t,e){return km(t.getUTCFullYear()%100,e,2)}function D_(t,e){return km((t=N_(t)).getUTCFullYear()%100,e,2)}function L_(t,e){return km(t.getUTCFullYear()%1e4,e,4)}function F_(t,e){var n=t.getUTCDay();return km((t=n>=4||0===n?tm(t):tm.ceil(t)).getUTCFullYear()%1e4,e,4)}function j_(){return"+0000"}function U_(){return"%"}function V_(t){return+t}function q_(t){return Math.floor(+t/1e3)}function B_(t){return bm=_m(t),wm=bm.format,Em=bm.parse,Tm=bm.utcFormat,Sm=bm.utcParse,bm}B_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var H_=31536e6;function G_(t){return new Date(t)}function z_(t){return t instanceof Date?+t:+new Date(+t)}function W_(t,e,n,r,i,a,s,u,c){var l=ky(),h=l.invert,f=l.domain,p=c(".%L"),d=c(":%S"),v=c("%I:%M"),y=c("%I %p"),g=c("%a %d"),m=c("%b %d"),_=c("%B"),b=c("%Y"),w=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,H_]];function E(o){return(s(o)<o?p:a(o)<o?d:i(o)<o?v:r(o)<o?y:e(o)<o?n(o)<o?g:m:t(o)<o?_:b)(o)}function T(e,n,r){if(null==e&&(e=10),"number"==typeof e){var i,a=Math.abs(r-n)/e,s=o((function(t){return t[2]})).right(w,a);return s===w.length?(i=q(n/H_,r/H_,e),e=t):s?(i=(s=w[a/w[s-1][2]<w[s][2]/a?s-1:s])[1],e=s[0]):(i=Math.max(q(n,r,e),1),e=u),e.every(i)}return e}return l.invert=function(t){return new Date(h(t))},l.domain=function(t){return arguments.length?f(Array.from(t,z_)):f().map(G_)},l.ticks=function(t){var e,n=f(),r=n[0],i=n[n.length-1],o=i<r;return o&&(e=r,r=i,i=e),e=(e=T(t,r,i))?e.range(r,i+1):[],o?e.reverse():e},l.tickFormat=function(t,e){return null==e?E:c(e)},l.nice=function(t){var e=f();return(t=T(t,e[0],e[e.length-1]))?f(My(e,t)):l},l.copy=function(){return Cy(l,W_(t,e,n,r,i,a,s,u,c))},l}function K_(){return dy.apply(W_(cg,fg,bg,Dg,jg,qg,Gg,Kg,wm).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var J_=sg((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const Y_=J_;var Q_=J_.range,X_=sg((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*yg)}),(function(t,e){return(e-t)/yg}),(function(t){return t.getUTCHours()}));const $_=X_;var Z_=X_.range,tb=sg((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*vg)}),(function(t,e){return(e-t)/vg}),(function(t){return t.getUTCMinutes()}));const eb=tb;var nb=tb.range;function rb(){return dy.apply(W_(dm,Y_,Qg,hm,$_,eb,Gg,Kg,Tm).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ib(){var t,e,n,r,i,o=0,a=1,s=Ty,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function l(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=l(mr),c.rangeRound=l(Iv),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function ob(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ab(){var t=Py(ib()(Ty));return t.copy=function(){return ob(t,ab())},vy.apply(t,arguments)}function sb(){var t=qy(ib()).domain([1,10]);return t.copy=function(){return ob(t,sb()).base(t.base())},vy.apply(t,arguments)}function ub(){var t=zy(ib());return t.copy=function(){return ob(t,ub()).constant(t.constant())},vy.apply(t,arguments)}function cb(){var t=Qy(ib());return t.copy=function(){return ob(t,cb()).exponent(t.exponent())},vy.apply(t,arguments)}function lb(){return cb.apply(null,arguments).exponent(.5)}function hb(){var t=[],e=Ty;function n(n){if(!isNaN(n=+n))return e((h(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>Y(t,r/e)))},n.copy=function(){return hb(e).domain(t)},vy.apply(n,arguments)}function fb(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,l=1,h=Ty,f=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(l*t<l*e?r:i),h(f?Math.max(0,Math.min(1,t)):t))}function d(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=Uv(t,[n,r,i]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,u,c]=a,t=o(s=+s),e=o(u=+u),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,p):[s,u,c]},p.clamp=function(t){return arguments.length?(f=!!t,p):f},p.interpolator=function(t){return arguments.length?(h=t,p):h},p.range=d(mr),p.rangeRound=d(Iv),p.unknown=function(t){return arguments.length?(a=t,p):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,p}}function pb(){var t=Py(fb()(Ty));return t.copy=function(){return ob(t,pb())},vy.apply(t,arguments)}function db(){var t=qy(fb()).domain([.1,1,10]);return t.copy=function(){return ob(t,db()).base(t.base())},vy.apply(t,arguments)}function vb(){var t=zy(fb());return t.copy=function(){return ob(t,vb()).constant(t.constant())},vy.apply(t,arguments)}function yb(){var t=Qy(fb());return t.copy=function(){return ob(t,yb()).exponent(t.exponent())},vy.apply(t,arguments)}function gb(){return yb.apply(null,arguments).exponent(.5)}function mb(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}const _b=mb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),bb=mb("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),wb=mb("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Eb=mb("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Tb=mb("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Sb=mb("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),xb=mb("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ib=mb("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Cb=mb("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ab=mb("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),kb=t=>ar(t[t.length-1]);var Nb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(mb);const Pb=kb(Nb);var Rb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(mb);const Ob=kb(Rb);var Mb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(mb);const Db=kb(Mb);var Lb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(mb);const Fb=kb(Lb);var jb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(mb);const Ub=kb(jb);var Vb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(mb);const qb=kb(Vb);var Bb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(mb);const Hb=kb(Bb);var Gb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(mb);const zb=kb(Gb);var Wb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(mb);const Kb=kb(Wb);var Jb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(mb);const Yb=kb(Jb);var Qb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(mb);const Xb=kb(Qb);var $b=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(mb);const Zb=kb($b);var tw=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(mb);const ew=kb(tw);var nw=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(mb);const rw=kb(nw);var iw=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(mb);const ow=kb(iw);var aw=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(mb);const sw=kb(aw);var uw=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(mb);const cw=kb(uw);var lw=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(mb);const hw=kb(lw);var fw=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(mb);const pw=kb(fw);var dw=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(mb);const vw=kb(dw);var yw=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(mb);const gw=kb(yw);var mw=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(mb);const _w=kb(mw);var bw=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(mb);const ww=kb(bw);var Ew=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(mb);const Tw=kb(Ew);var Sw=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(mb);const xw=kb(Sw);var Iw=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(mb);const Cw=kb(Iw);var Aw=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(mb);const kw=kb(Aw);function Nw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}const Pw=jv(xa(300,.5,0),xa(-240,.5,1));var Rw=jv(xa(-100,.75,.35),xa(80,1.5,.8)),Ow=jv(xa(260,.75,.35),xa(80,1.5,.8)),Mw=xa();function Dw(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Mw.h=360*t-100,Mw.s=1.5-1.5*e,Mw.l=.8-.9*e,Mw+""}var Lw=qn(),Fw=Math.PI/3,jw=2*Math.PI/3;function Uw(t){var e;return t=(.5-t)*Math.PI,Lw.r=255*(e=Math.sin(t))*e,Lw.g=255*(e=Math.sin(t+Fw))*e,Lw.b=255*(e=Math.sin(t+jw))*e,Lw+""}function Vw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function qw(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Bw=qw(mb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Hw=qw(mb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Gw=qw(mb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),zw=qw(mb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ww(t){return dn($e(t).call(document.documentElement))}var Kw=0;function Jw(){return new Yw}function Yw(){this._="@"+(++Kw).toString(36)}function Qw(t,e){return t.target&&(t=_r(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>br(t,e)))}function Xw(t){return"string"==typeof t?new hn([document.querySelectorAll(t)],[document.documentElement]):new hn([null==t?[]:ee(t)],ln)}function $w(t){return function(){return t}}Yw.prototype=Jw.prototype={constructor:Yw,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Zw=Math.abs,tE=Math.atan2,eE=Math.cos,nE=Math.max,rE=Math.min,iE=Math.sin,oE=Math.sqrt,aE=1e-12,sE=Math.PI,uE=sE/2,cE=2*sE;function lE(t){return t>1?0:t<-1?sE:Math.acos(t)}function hE(t){return t>=1?uE:t<=-1?-uE:Math.asin(t)}function fE(t){return t.innerRadius}function pE(t){return t.outerRadius}function dE(t){return t.startAngle}function vE(t){return t.endAngle}function yE(t){return t&&t.padAngle}function gE(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,h=s-o,f=h*u-l*c;if(!(f*f<aE))return[t+(f=(l*(e-o)-h*(t-i))/f)*u,e+f*c]}function mE(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/oE(s*s+u*u),l=c*u,h=-c*s,f=t+l,p=e+h,d=n+l,v=r+h,y=(f+d)/2,g=(p+v)/2,m=d-f,_=v-p,b=m*m+_*_,w=i-o,E=f*v-d*p,T=(_<0?-1:1)*oE(nE(0,w*w*b-E*E)),S=(E*_-m*T)/b,x=(-E*m-_*T)/b,I=(E*_+m*T)/b,C=(-E*m+_*T)/b,A=S-y,k=x-g,N=I-y,P=C-g;return A*A+k*k>N*N+P*P&&(S=I,x=C),{cx:S,cy:x,x01:-l,y01:-h,x11:S*(i/w-1),y11:x*(i/w-1)}}function _E(){var t=fE,e=pE,n=$w(0),r=null,i=dE,o=vE,a=yE,s=null;function u(){var u,c,l=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-uE,p=o.apply(this,arguments)-uE,d=Zw(p-f),v=p>f;if(s||(s=u=Fo()),h<l&&(c=h,h=l,l=c),h>aE)if(d>cE-aE)s.moveTo(h*eE(f),h*iE(f)),s.arc(0,0,h,f,p,!v),l>aE&&(s.moveTo(l*eE(p),l*iE(p)),s.arc(0,0,l,p,f,v));else{var y,g,m=f,_=p,b=f,w=p,E=d,T=d,S=a.apply(this,arguments)/2,x=S>aE&&(r?+r.apply(this,arguments):oE(l*l+h*h)),I=rE(Zw(h-l)/2,+n.apply(this,arguments)),C=I,A=I;if(x>aE){var k=hE(x/l*iE(S)),N=hE(x/h*iE(S));(E-=2*k)>aE?(b+=k*=v?1:-1,w-=k):(E=0,b=w=(f+p)/2),(T-=2*N)>aE?(m+=N*=v?1:-1,_-=N):(T=0,m=_=(f+p)/2)}var P=h*eE(m),R=h*iE(m),O=l*eE(w),M=l*iE(w);if(I>aE){var D,L=h*eE(_),F=h*iE(_),j=l*eE(b),U=l*iE(b);if(d<sE&&(D=gE(P,R,j,U,L,F,O,M))){var V=P-D[0],q=R-D[1],B=L-D[0],H=F-D[1],G=1/iE(lE((V*B+q*H)/(oE(V*V+q*q)*oE(B*B+H*H)))/2),z=oE(D[0]*D[0]+D[1]*D[1]);C=rE(I,(l-z)/(G-1)),A=rE(I,(h-z)/(G+1))}}T>aE?A>aE?(y=mE(j,U,P,R,h,A,v),g=mE(L,F,O,M,h,A,v),s.moveTo(y.cx+y.x01,y.cy+y.y01),A<I?s.arc(y.cx,y.cy,A,tE(y.y01,y.x01),tE(g.y01,g.x01),!v):(s.arc(y.cx,y.cy,A,tE(y.y01,y.x01),tE(y.y11,y.x11),!v),s.arc(0,0,h,tE(y.cy+y.y11,y.cx+y.x11),tE(g.cy+g.y11,g.cx+g.x11),!v),s.arc(g.cx,g.cy,A,tE(g.y11,g.x11),tE(g.y01,g.x01),!v))):(s.moveTo(P,R),s.arc(0,0,h,m,_,!v)):s.moveTo(P,R),l>aE&&E>aE?C>aE?(y=mE(O,M,L,F,l,-C,v),g=mE(P,R,j,U,l,-C,v),s.lineTo(y.cx+y.x01,y.cy+y.y01),C<I?s.arc(y.cx,y.cy,C,tE(y.y01,y.x01),tE(g.y01,g.x01),!v):(s.arc(y.cx,y.cy,C,tE(y.y01,y.x01),tE(y.y11,y.x11),!v),s.arc(0,0,l,tE(y.cy+y.y11,y.cx+y.x11),tE(g.cy+g.y11,g.cx+g.x11),v),s.arc(g.cx,g.cy,C,tE(g.y11,g.x11),tE(g.y01,g.x01),!v))):s.arc(0,0,l,w,b,v):s.lineTo(O,M)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-sE/2;return[eE(r)*n,iE(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:$w(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:$w(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:$w(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:$w(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:$w(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:$w(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:$w(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}var bE=Array.prototype.slice;function wE(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function EE(t){this._context=t}function TE(t){return new EE(t)}function SE(t){return t[0]}function xE(t){return t[1]}function IE(t,e){var n=$w(!0),r=null,i=TE,o=null;function a(a){var s,u,c,l=(a=wE(a)).length,h=!1;for(null==r&&(o=i(c=Fo())),s=0;s<=l;++s)!(s<l&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?SE:$w(t),e="function"==typeof e?e:void 0===e?xE:$w(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:$w(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:$w(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:$w(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function CE(t,e,n){var r=null,i=$w(!0),o=null,a=TE,s=null;function u(u){var c,l,h,f,p,d=(u=wE(u)).length,v=!1,y=new Array(d),g=new Array(d);for(null==o&&(s=a(p=Fo())),c=0;c<=d;++c){if(!(c<d&&i(f=u[c],c,u))===v)if(v=!v)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=l;--h)s.point(y[h],g[h]);s.lineEnd(),s.areaEnd()}v&&(y[c]=+t(f,c,u),g[c]=+e(f,c,u),s.point(r?+r(f,c,u):y[c],n?+n(f,c,u):g[c]))}if(p)return s=null,p+""||null}function c(){return IE().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?SE:$w(+t),e="function"==typeof e?e:$w(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?xE:$w(+n),u.x=function(e){return arguments.length?(t="function"==typeof e?e:$w(+e),r=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:$w(+e),u):t},u.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:$w(+t),u):r},u.y=function(t){return arguments.length?(e="function"==typeof t?t:$w(+t),n=null,u):e},u.y0=function(t){return arguments.length?(e="function"==typeof t?t:$w(+t),u):e},u.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:$w(+t),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:$w(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u}function AE(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function kE(t){return t}function NE(){var t=kE,e=AE,n=null,r=$w(0),i=$w(cE),o=$w(0);function a(a){var s,u,c,l,h,f=(a=wE(a)).length,p=0,d=new Array(f),v=new Array(f),y=+r.apply(this,arguments),g=Math.min(cE,Math.max(-cE,i.apply(this,arguments)-y)),m=Math.min(Math.abs(g)/f,o.apply(this,arguments)),_=m*(g<0?-1:1);for(s=0;s<f;++s)(h=v[d[s]=s]=+t(a[s],s,a))>0&&(p+=h);for(null!=e?d.sort((function(t,n){return e(v[t],v[n])})):null!=n&&d.sort((function(t,e){return n(a[t],a[e])})),s=0,c=p?(g-f*_)/p:0;s<f;++s,y=l)u=d[s],l=y+((h=v[u])>0?h*c:0)+_,v[u]={data:a[u],index:s,value:h,startAngle:y,endAngle:l,padAngle:m};return v}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:$w(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:$w(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:$w(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:$w(+t),a):o},a}EE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var PE=OE(TE);function RE(t){this._curve=t}function OE(t){function e(e){return new RE(t(e))}return e._curve=t,e}function ME(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(OE(t)):e()._curve},t}function DE(){return ME(IE().curve(PE))}function LE(){var t=CE().curve(PE),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return ME(n())},delete t.lineX0,t.lineEndAngle=function(){return ME(r())},delete t.lineX1,t.lineInnerRadius=function(){return ME(i())},delete t.lineY0,t.lineOuterRadius=function(){return ME(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(OE(t)):e()._curve},t}function FE(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function jE(t){return t.source}function UE(t){return t.target}function VE(t){var e=jE,n=UE,r=SE,i=xE,o=null;function a(){var a,s=bE.call(arguments),u=e.apply(this,s),c=n.apply(this,s);if(o||(o=a=Fo()),t(o,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=c,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:$w(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:$w(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function qE(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function BE(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function HE(t,e,n,r,i){var o=FE(e,n),a=FE(e,n=(n+i)/2),s=FE(r,n),u=FE(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function GE(){return VE(qE)}function zE(){return VE(BE)}function WE(){var t=VE(HE);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}RE.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};const KE={draw:function(t,e){var n=Math.sqrt(e/sE);t.moveTo(n,0),t.arc(0,0,n,0,cE)}},JE={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var YE=Math.sqrt(1/3),QE=2*YE;const XE={draw:function(t,e){var n=Math.sqrt(e/QE),r=n*YE;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}};var $E=Math.sin(sE/10)/Math.sin(7*sE/10),ZE=Math.sin(cE/10)*$E,tT=-Math.cos(cE/10)*$E;const eT={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=ZE*n,i=tT*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=cE*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},nT={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}};var rT=Math.sqrt(3);const iT={draw:function(t,e){var n=-Math.sqrt(e/(3*rT));t.moveTo(0,2*n),t.lineTo(-rT*n,-n),t.lineTo(rT*n,-n),t.closePath()}};var oT=-.5,aT=Math.sqrt(3)/2,sT=1/Math.sqrt(12),uT=3*(sT/2+1);const cT={draw:function(t,e){var n=Math.sqrt(e/uT),r=n/2,i=n*sT,o=r,a=n*sT+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(oT*r-aT*i,aT*r+oT*i),t.lineTo(oT*o-aT*a,aT*o+oT*a),t.lineTo(oT*s-aT*u,aT*s+oT*u),t.lineTo(oT*r+aT*i,oT*i-aT*r),t.lineTo(oT*o+aT*a,oT*a-aT*o),t.lineTo(oT*s+aT*u,oT*u-aT*s),t.closePath()}};var lT=[KE,JE,XE,nT,eT,iT,cT];function hT(t,e){var n=null;function r(){var r;if(n||(n=r=Fo()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"==typeof t?t:$w(t||KE),e="function"==typeof e?e:$w(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"==typeof e?e:$w(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:$w(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}function fT(){}function pT(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function dT(t){this._context=t}function vT(t){return new dT(t)}function yT(t){this._context=t}function gT(t){return new yT(t)}function mT(t){this._context=t}function _T(t){return new mT(t)}function bT(t,e){this._basis=new dT(t),this._beta=e}dT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pT(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},yT.prototype={areaStart:fT,areaEnd:fT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:pT(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},mT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:pT(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bT.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const wT=function t(e){function n(t){return 1===e?new dT(t):new bT(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function ET(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function TT(t,e){this._context=t,this._k=(1-e)/6}TT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ET(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ET(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ST=function t(e){function n(t){return new TT(t,e)}return n.tension=function(e){return t(+e)},n}(0);function xT(t,e){this._context=t,this._k=(1-e)/6}xT.prototype={areaStart:fT,areaEnd:fT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ET(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const IT=function t(e){function n(t){return new xT(t,e)}return n.tension=function(e){return t(+e)},n}(0);function CT(t,e){this._context=t,this._k=(1-e)/6}CT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ET(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const AT=function t(e){function n(t){return new CT(t,e)}return n.tension=function(e){return t(+e)},n}(0);function kT(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>aE){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>aE){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function NT(t,e){this._context=t,this._alpha=e}NT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:kT(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const PT=function t(e){function n(t){return e?new NT(t,e):new TT(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function RT(t,e){this._context=t,this._alpha=e}RT.prototype={areaStart:fT,areaEnd:fT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:kT(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const OT=function t(e){function n(t){return e?new RT(t,e):new xT(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function MT(t,e){this._context=t,this._alpha=e}MT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kT(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const DT=function t(e){function n(t){return e?new MT(t,e):new CT(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function LT(t){this._context=t}function FT(t){return new LT(t)}function jT(t){return t<0?-1:1}function UT(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(jT(o)+jT(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function VT(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qT(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function BT(t){this._context=t}function HT(t){this._context=new GT(t)}function GT(t){this._context=t}function zT(t){return new BT(t)}function WT(t){return new HT(t)}function KT(t){this._context=t}function JT(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function YT(t){return new KT(t)}function QT(t,e){this._context=t,this._t=e}function XT(t){return new QT(t,.5)}function $T(t){return new QT(t,0)}function ZT(t){return new QT(t,1)}function tS(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function eS(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function nS(t,e){return t[e]}function rS(t){const e=[];return e.key=t,e}function iS(){var t=$w([]),e=eS,n=tS,r=nS;function i(i){var o,a,s=Array.from(t.apply(this,arguments),rS),u=s.length,c=-1;for(const t of i)for(o=0,++c;o<u;++o)(s[o][c]=[0,+r(t,s[o].key,c,i)]).data=t;for(o=0,a=wE(e(s));o<u;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:$w(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:$w(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?eS:"function"==typeof t?t:$w(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?tS:t,i):n},i}function oS(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}tS(t,e)}}function aS(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,c=t[e[0]].length;u<c;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)}function sS(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}tS(t,e)}}function uS(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var l=t[e[s]],h=l[a][1]||0,f=(h-(l[a-1][1]||0))/2,p=0;p<s;++p){var d=t[e[p]];f+=(d[a][1]||0)-(d[a-1][1]||0)}u+=h,c+=f*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,tS(t,e)}}function cS(t){var e=t.map(lS);return eS(t).sort((function(t,n){return e[t]-e[n]}))}function lS(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function hS(t){var e=t.map(fS);return eS(t).sort((function(t,n){return e[t]-e[n]}))}function fS(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function pS(t){return hS(t).reverse()}function dS(t){var e,n,r=t.length,i=t.map(fS),o=cS(t),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)}function vS(t){return eS(t).reverse()}LT.prototype={areaStart:fT,areaEnd:fT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},BT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qT(this,this._t0,VT(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qT(this,VT(this,n=UT(this,t,e)),n);break;default:qT(this,this._t0,n=UT(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(HT.prototype=Object.create(BT.prototype)).point=function(t,e){BT.prototype.point.call(this,e,t)},GT.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},KT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=JT(t),i=JT(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},QT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var yS="%Y-%m-%dT%H:%M:%S.%LZ";const gS=Date.prototype.toISOString?function(t){return t.toISOString()}:Tm(yS),mS=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Sm(yS);function _S(t,e,n){var r=new Or,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?Pr():+n,r._restart((function o(a){a+=i,r._restart(o,i+=e,n),t(a)}),e,n)},r.restart(t,e,n),r)}const bS=t=>()=>t;function wS(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ES(t,e,n){this.k=t,this.x=e,this.y=n}ES.prototype={constructor:ES,scale:function(t){return 1===t?this:new ES(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ES(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var TS=new ES(1,0,0);function SS(t){for(;!t.__zoom;)if(!(t=t.parentNode))return TS;return t.__zoom}function xS(t){t.stopImmediatePropagation()}function IS(t){t.preventDefault(),t.stopImmediatePropagation()}function CS(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function AS(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function kS(){return this.__zoom||TS}function NS(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function PS(){return navigator.maxTouchPoints||"ontouchstart"in this}function RS(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function OS(){var t,e,n,r=CS,i=AS,o=RS,a=NS,s=PS,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],l=250,h=Av,f=$t("start","zoom","end"),p=500,d=0,v=10;function y(t){t.property("__zoom",kS).on("wheel.zoom",T).on("mousedown.zoom",S).on("dblclick.zoom",x).filter(s).on("touchstart.zoom",I).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(u[0],Math.min(u[1],e)))===t.k?t:new ES(e,t.x,t.y)}function m(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new ES(t.k,r,i)}function _(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n,r){t.on("start.zoom",(function(){w(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=w(t,o).event(r),s=i.apply(t,o),u=null==n?_(s):"function"==typeof n?n.apply(t,o):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),l=t.__zoom,f="function"==typeof e?e.apply(t,o):e,p=h(l.invert(u).concat(c/l.k),f.invert(u).concat(c/f.k));return function(t){if(1===t)t=f;else{var e=p(t),n=c/e[2];t=new ES(n,u[0]-e[0]*n,u[1]-e[1]*n)}a.zoom(null,t)}}))}function w(t,e,n){return!n&&t.__zooming||new E(t,e)}function E(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function T(t,...e){if(r.apply(this,arguments)){var n=w(this,e).event(t),i=this.__zoom,s=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),l=br(t);if(n.wheel)n.mouse[0][0]===l[0]&&n.mouse[0][1]===l[1]||(n.mouse[1]=i.invert(n.mouse[0]=l)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[l,i.invert(l)],Wr(this),n.start()}IS(t),n.wheel=setTimeout(h,150),n.zoom("mouse",o(m(g(i,s),n.mouse[0],n.mouse[1]),n.extent,c))}function h(){n.wheel=null,n.end()}}function S(t,...e){if(!n&&r.apply(this,arguments)){var i=w(this,e,!0).event(t),a=dn(t.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",p,!0),s=br(t,u),u=t.currentTarget,l=t.clientX,h=t.clientY;gn(t.view),xS(t),i.mouse=[s,this.__zoom.invert(s)],Wr(this),i.start()}function f(t){if(IS(t),!i.moved){var e=t.clientX-l,n=t.clientY-h;i.moved=e*e+n*n>d}i.event(t).zoom("mouse",o(m(i.that.__zoom,i.mouse[0]=br(t,u),i.mouse[1]),i.extent,c))}function p(t){a.on("mousemove.zoom mouseup.zoom",null),mn(t.view,i.moved),IS(t),i.event(t).end()}}function x(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,a=br(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(a),u=n.k*(t.shiftKey?.5:2),h=o(m(g(n,u),a,s),i.apply(this,e),c);IS(t),l>0?dn(this).transition().duration(l).call(b,h,a,t):dn(this).call(y.transform,h,a,t)}}function I(n,...i){if(r.apply(this,arguments)){var o,a,s,u,c=n.touches,l=c.length,h=w(this,i,n.changedTouches.length===l).event(n);for(xS(n),a=0;a<l;++a)u=[u=br(s=c[a],this),this.__zoom.invert(u),s.identifier],h.touch0?h.touch1||h.touch0[2]===u[2]||(h.touch1=u,h.taps=0):(h.touch0=u,o=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(h.taps<2&&(e=u[0],t=setTimeout((function(){t=null}),p)),Wr(this),h.start())}}function C(t,...e){if(this.__zooming){var n,r,i,a,s=w(this,e).event(t),u=t.changedTouches,l=u.length;for(IS(t),n=0;n<l;++n)i=br(r=u[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var h=s.touch0[0],f=s.touch0[1],p=s.touch1[0],d=s.touch1[1],v=(v=p[0]-h[0])*v+(v=p[1]-h[1])*v,y=(y=d[0]-f[0])*y+(y=d[1]-f[1])*y;r=g(r,Math.sqrt(v/y)),i=[(h[0]+p[0])/2,(h[1]+p[1])/2],a=[(f[0]+d[0])/2,(f[1]+d[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(m(r,i,a),s.extent,c))}}function A(t,...r){if(this.__zooming){var i,o,a=w(this,r).event(t),s=t.changedTouches,u=s.length;for(xS(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),i=0;i<u;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=br(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<v)){var c=dn(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return y.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",kS),t!==i?b(t,e,n,r):i.interrupt().each((function(){w(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},y.scaleBy=function(t,e,n,r){y.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n,r)},y.scaleTo=function(t,e,n,r){y.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==n?_(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),u="function"==typeof e?e.apply(this,arguments):e;return o(m(g(r,u),a,s),t,c)}),n,r)},y.translateBy=function(t,e,n,r){y.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},y.translateTo=function(t,e,n,r,a){y.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,s=null==r?_(t):"function"==typeof r?r.apply(this,arguments):r;return o(TS.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),r,a)},E.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=dn(this.that).datum();f.call(t,this.that,new wS(t,{sourceEvent:this.sourceEvent,target:y,type:t,transform:this.that.__zoom,dispatch:f}),e)}},y.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:bS(+t),y):a},y.filter=function(t){return arguments.length?(r="function"==typeof t?t:bS(!!t),y):r},y.touchable=function(t){return arguments.length?(s="function"==typeof t?t:bS(!!t),y):s},y.extent=function(t){return arguments.length?(i="function"==typeof t?t:bS([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],y):[u[0],u[1]]},y.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],y):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},y.constrain=function(t){return arguments.length?(o=t,y):o},y.duration=function(t){return arguments.length?(l=+t,y):l},y.interpolate=function(t){return arguments.length?(h=t,y):h},y.on=function(){var t=f.on.apply(f,arguments);return t===f?y:t},y.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,y):Math.sqrt(d)},y.tapDistance=function(t){return arguments.length?(v=+t,y):v},y}SS.prototype=ES.prototype},5128:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.Z});var r=n(6099),i=(n(8481),n(9446),n(4594)),o=n(4589),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var u,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},l=l||{},h=c||self;function f(){}function p(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function w(){return Date.now()}function E(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}(this)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},x=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function C(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var k,N=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function P(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var O=h.navigator;if(O){var M=O.userAgent;if(M){k=M;break t}}k=""}function D(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=f;var V,q,B=P(k,"Opera"),H=P(k,"Trident")||P(k,"MSIE"),G=P(k,"Edge"),z=G||H,W=P(k,"Gecko")&&!(P(k.toLowerCase(),"webkit")&&!P(k,"Edge"))&&!(P(k,"Trident")||P(k,"MSIE"))&&!P(k,"Edge"),K=P(k.toLowerCase(),"webkit")&&!P(k,"Edge");function J(){var t=h.document;return t?t.documentMode:void 0}t:{var Y="",Q=(q=k,W?/rv:([^\);]+)(\)|;)/.exec(q):G?/Edge\/([\d\.]+)/.exec(q):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):K?/WebKit\/(\S+)/.exec(q):B?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Q&&(Y=Q?Q[1]:""),H){var X=J();if(null!=X&&X>parseFloat(Y)){V=String(X);break t}}V=Y}var $,Z={};function tt(t){return function(t,e){var n=Z;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=N(String(V)).split("."),r=N(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=R(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==a[2].length,0==s[2].length)||R(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}h.document&&H?$=J()||parseInt(V,10)||void 0:$=void 0;var et=$,nt=!H||9<=Number(et),rt=H&&!tt("9"),it=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",f,e),h.removeEventListener("test",f,e)}catch(t){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{U(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.defaultPrevented=!0},E(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ct,this.Y=this.Z=!1}function ht(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ft(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=S(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=dt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),yt={};function gt(t,e,n,r,i){if(r&&r.once)return _t(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.va(e,n,d(r)?!!r.capture:!!r,i):mt(t,e,n,!1,r,i)}function mt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=xt(t);if(s||(t[vt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=St,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Et(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _t(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)_t(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.wa(e,n,d(r)?!!r.capture:!!r,i):mt(t,e,n,!0,r,i)}function bt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=Ct(n),t&&t[ut]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=dt(o=t.a[e],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=xt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ut])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Et(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=xt(e))?(pt(n,t),0==n.b&&(n.src=null,e[vt]=null)):ht(t)}}}function Et(t){return t in yt?yt[t]:yt[t]="on"+t}function Tt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&wt(t),n.call(r,e)}function St(t,e){if(t.Y)return!0;if(!nt){if(!e)t:{e=["window","event"];for(var n=h,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Tt(t,e=new at(e,this))}return Tt(t,new at(e,this))}function xt(t){return(t=t[vt])instanceof ft?t:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(t){return"function"==typeof t?t:(t[It]||(t[It]=function(e){return t.handleEvent(e)}),t[It])}function At(){T.call(this),this.c=new ft(this),this.J=this,this.C=null}function kt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;j(e=new ot(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Nt(a,r,!0,e)&&i}if(i=Nt(a=e.a=t,r,!0,e)&&i,i=Nt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Nt(a=e.a=n[o],r,!1,e)&&i}function Nt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&pt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}E(At,T),At.prototype[ut]=!0,(u=At.prototype).addEventListener=function(t,e,n,r){gt(this,t,e,n,r)},u.removeEventListener=function(t,e,n,r){bt(this,t,e,n,r)},u.G=function(){if(At.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.C=null},u.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},u.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Pt=h.JSON.stringify;function Rt(){this.b=this.a=null}var Ot,Mt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Lt}),(function(t){t.reset()}));function Dt(){var t=Vt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lt(){this.next=this.b=this.a=null}function Ft(t){h.setTimeout((function(){throw t}),0)}function jt(t,e){Ot||function(){var t=h.Promise.resolve(void 0);Ot=function(){t.then(qt)}}(),Ut||(Ot(),Ut=!0),Vt.add(t,e)}Rt.prototype.add=function(t,e){var n=Mt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lt.prototype.reset=function(){this.next=this.b=this.a=null};var Ut=!1,Vt=new Rt;function qt(){for(var t;t=Dt();){try{t.a.call(t.b)}catch(t){Ft(t)}var e=Mt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ut=!1}function Bt(t,e){At.call(this),this.b=t||1,this.a=e||h,this.f=_(this.Za,this),this.g=w()}function Ht(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gt(t,e,n){if("function"==typeof t)n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function zt(t){t.a=Gt((function(){t.a=null,t.c&&(t.c=!1,zt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}E(Bt,At),(u=Bt.prototype).aa=!1,u.M=null,u.Za=function(){if(this.aa){var t=w()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),kt(this,"tick"),this.aa&&(Ht(this),this.start()))}},u.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=w())},u.G=function(){Bt.X.G.call(this),Ht(this),delete this.a};var Wt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:zt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(h.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(T);function Kt(t){T.call(this),this.b=t,this.a={}}E(Kt,T);var Jt=[];function Yt(t,e,n,r){Array.isArray(n)||(n&&(Jt[0]=n.toString()),n=Jt);for(var i=0;i<n.length;i++){var o=gt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Qt(t){D(t.a,(function(t,e){this.a.hasOwnProperty(e)&&wt(t)}),t),t.a={}}function Xt(){this.a=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Pt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Kt.prototype.G=function(){Kt.X.G.call(this),Qt(this)},Kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xt.prototype.info=function(){};var Zt={},te=null;function ee(){return te=te||new At}function ne(t){ot.call(this,Zt.Fa,t)}function re(t){var e=ee();kt(e,new ne(e,t))}function ie(t,e){ot.call(this,Zt.STAT_EVENT,t),this.stat=e}function oe(t){var e=ee();kt(e,new ie(e,t))}function ae(t){ot.call(this,Zt.Ga,t)}function se(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){t()}),e)}Zt.Fa="serverreachability",E(ne,ot),Zt.STAT_EVENT="statevent",E(ie,ot),Zt.Ga="timingevent",E(ae,ot);var ue={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ce={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function le(){}function he(t){var e;return(e=t.a)||(e=t.a={}),e}function fe(){}le.prototype.a=null;var pe,de={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ve(){ot.call(this,"d")}function ye(){ot.call(this,"c")}function ge(){}function me(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Kt(this),this.P=_e,t=z?125:void 0,this.R=new Bt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}E(ve,ot),E(ye,ot),E(ge,le),pe=new ge;var _e=45e3,be={},we={};function Ee(t,e,n){t.H=1,t.i=Ge(je(e)),t.j=n,t.I=!0,Te(t,null)}function Te(t,e){t.u=w(),Ie(t),t.l=je(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),rn(n.b,"t",r),t.D=0,t.a=$n(t.g,t.g.C?e:null),0<t.O&&(t.F=new Wt(_(t.Ca,t,t.a),t.O)),Yt(t.J,t.a,"readystatechange",t.Xa),e=t.B?L(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Se(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=xe(t,n);if(i==we){4==e&&(t.h=4,oe(14),r=!1),$t(t.c,t.f,null,"[Incomplete Response]");break}if(i==be){t.h=4,oe(15),$t(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}$t(t.c,t.f,i,null),Pe(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gn(e),e.F=!0,oe(11))):($t(t.c,t.f,n,"[Invalid Chunked Response]"),Ne(t),ke(t))}function xe(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?we:(n=Number(e.substring(n,r)),isNaN(n)?be:(r+=1)+n>e.length?we:(e=e.substr(r,n),t.D=r+n,e))}function Ie(t){t.T=w()+t.P,Ce(t,t.P)}function Ce(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=se(_(t.Va,t),e)}function Ae(t){t.o&&(h.clearTimeout(t.o),t.o=null)}function ke(t){0==t.g.v||t.A||Kn(t.g,t)}function Ne(t){Ae(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ht(t.R),Qt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Pe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||hn(n.b,t)))if(n.I=t.N,!t.C&&hn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Wn(n),Dn(n)}Hn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=se(_(n.Sa,n),6e3));if(1>=ln(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Yn(n,11)}else if((t.C||n.a==t)&&Wn(n),!A(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(P(l,"spdy")||P(l,"quic")||P(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,He(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=w()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Xn(u,u.C?u.ga:null,u.fa),p.C){pn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ae(d),Ie(d)),u.a=p}else Bn(u);0<n.g.length&&jn(n)}else"stop"!=i[0]&&"close"!=i[0]||Yn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Yn(n,7):Mn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(t){}}function Re(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)x(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(p(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Me(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];De(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)De(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function De(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(u=me.prototype).setTimeout=function(t){this.P=t},u.Xa=function(t){t=t.target;var e=this.F;e&&3==Nn(t)?e.f():this.Ca(t)},u.Ca=function(t){try{if(t==this.a)t:{var e=Nn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!z&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),Ae(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,oe(12),Ne(this),ke(this);break t}$t(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Pe(this,u)}this.I?(Se(this,e,o),z&&this.b&&3==e&&(Yt(this.J,this.R,"tick",this.Wa),this.R.start())):($t(this.c,this.f,o,null),Pe(this,o)),4==e&&Ne(this),this.b&&!this.A&&(4==e?Kn(this.g,this):(this.b=!1,Ie(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),Ne(this),ke(this)}}}catch(t){}},u.Wa=function(){if(this.a){var t=Nn(this.a),e=this.a.$();this.D<e.length&&(Ae(this),Se(this,t,e),this.b&&4!=t&&Ie(this))}},u.cancel=function(){this.A=!0,Ne(this)},u.Va=function(){this.o=null;var t=w();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),Ne(this),this.h=2,ke(this)):Ce(this,this.T-t)},(u=Oe.prototype).K=function(){Me(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},u.L=function(){return Me(this),this.a.concat()},u.get=function(t,e){return De(this.b,t)?this.b[t]:e},u.set=function(t,e){De(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},u.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Le=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fe){this.a=void 0!==e?e:t.a,Ue(this,t.f),this.j=t.j,Ve(this,t.c),qe(this,t.h),this.g=t.g,e=t.b;var n=new Ze;n.c=e.c,e.a&&(n.a=new Oe(e.a),n.b=e.b),Be(this,n),this.i=t.i}else t&&(n=String(t).match(Le))?(this.a=!!e,Ue(this,n[1]||"",!0),this.j=ze(n[2]||""),Ve(this,n[3]||"",!0),qe(this,n[4]),this.g=ze(n[5]||"",!0),Be(this,n[6]||"",!0),this.i=ze(n[7]||"")):(this.a=!!e,this.b=new Ze(null,this.a))}function je(t){return new Fe(t)}function Ue(t,e,n){t.f=n?ze(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ve(t,e,n){t.c=n?ze(e,!0):e}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Be(t,e,n){e instanceof Ze?(t.b=e,function(t,e){e&&!t.f&&(tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=We(e,Xe)),t.b=new Ze(e,t.a))}function He(t,e,n){t.b.set(e,n)}function Ge(t){return He(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),t}function ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(We(e,Je,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(We(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?Qe:Ye,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",We(n,$e)),t.join("")};var Je=/[#\/\?@]/g,Ye=/[#\?:]/g,Qe=/[#\?]/g,Xe=/[#\?@]/g,$e=/#/g;function Ze(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tn(t){t.a||(t.a=new Oe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),De(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,De((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Me(t)))}function nn(t,e){return tn(t),e=on(t,e),De(t.a.b,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.c=null,t.a.set(on(t,e),C(n)),t.b+=n.length)}function on(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(u=Ze.prototype).add=function(t,e){tn(this),this.c=null,t=on(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},u.forEach=function(t,e){tn(this),this.a.forEach((function(n,r){x(n,(function(n){t.call(e,n,r,this)}),this)}),this)},u.L=function(){tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},u.K=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=I(e,this.a.get(on(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},u.set=function(t,e){return tn(this),this.c=null,nn(this,t=on(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},u.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},u.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var an=function(t,e){this.b=t,this.a=e};function sn(t){this.g=t||un,t=h.PerformanceNavigationTiming?0<(t=h.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(h.ia&&h.ia.ya&&h.ia.ya()&&h.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var un=10;function cn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ln(t){return t.b?1:t.a?t.a.size:0}function hn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fn(t,e){t.a?t.a.add(e):t.b=e}function pn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function dn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=s(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return C(t.c)}function vn(){}function yn(){this.a=new vn}function gn(t,e,n){var r=n||"";try{Re(t,(function(t,n){var i=t;d(t)&&(i=Pt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function mn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}sn.prototype.cancel=function(){var t,e;if(this.c=dn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=s(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},vn.prototype.stringify=function(t){return h.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return h.JSON.parse(t,void 0)};var _n=h.JSON.parse;function bn(t){At.call(this),this.headers=new Oe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=wn,this.D=this.F=!1}E(bn,At);var wn="",En=/^https?$/i,Tn=["POST","PUT"];function Sn(t){return"content-type"==t.toLowerCase()}function xn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,In(t),An(t)}function In(t){t.u||(t.u=!0,kt(t,"complete"),kt(t,"error"))}function Cn(t){if(t.b&&void 0!==l&&(!t.s[1]||4!=Nn(t)||2!=t.W()))if(t.l&&4==Nn(t))Gt(t.za,0,t);else if(kt(t,"readystatechange"),4==Nn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Le)[1]||null;if(!o&&h.self&&h.self.location){var a=h.self.location.protocol;o=a.substr(0,a.length-1)}i=!En.test(o?o.toLowerCase():"")}e=i}if(e)kt(t,"complete"),kt(t,"success");else{t.h=6;try{var s=2<Nn(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",In(t)}}finally{An(t)}}}function An(t,e){if(t.a){kn(t);var n=t.a,r=t.s[0]?f:null;t.a=null,t.s=null,e||kt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function kn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(h.clearTimeout(t.m),t.m=null)}function Nn(t){return t.a?t.a.readyState:0}function Pn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return D(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):He(t,e,n))}function Rn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.pa=0,this.g=[],this.c=new Xt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Rn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Rn("baseRetryDelayMs",5e3,t),this.Ra=Rn("retryDelaySeedMs",1e4,t),this.Ma=Rn("forwardChannelMaxRetries",2,t),this.ma=Rn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new sn(t&&t.concurrentRequestLimit),this.ka=new yn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Mn(t){if(Ln(t),3==t.v){var e=t.R++,n=je(t.B);He(n,"SID",t.J),He(n,"RID",e),He(n,"TYPE","terminate"),Vn(t,n),(e=new me(t,t.c,e,void 0)).H=2,e.i=Ge(je(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(e.i.toString(),"")),!n&&h.Image&&((new Image).src=e.i,n=!0),n||(e.a=$n(e.g,null),e.a.ba(e.i)),e.u=w(),Ie(e)}Qn(t)}function Dn(t){t.a&&(Gn(t),t.a.cancel(),t.a=null)}function Ln(t){Dn(t),t.j&&(h.clearTimeout(t.j),t.j=null),Wn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&h.clearTimeout(t.h),t.h=null)}function Fn(t,e){t.g.push(new an(t.Oa++,e)),3==t.v&&jn(t)}function jn(t){cn(t.b)||t.h||(t.h=!0,jt(t.Ba,t),t.u=0)}function Un(t,e){var n;n=e?e.f:t.R++;var r=je(t.B);He(r,"SID",t.J),He(r,"RID",n),He(r,"AID",t.P),Vn(t,r),t.i&&t.l&&Pn(r,t.i,t.l),n=new me(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=qn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fn(t.b,n),Ee(n,r,e)}function Vn(t,e){t.f&&Re({},(function(t,n){He(e,n,t)}))}function qn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?_(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{gn(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Bn(t){t.a||t.j||(t.T=1,jt(t.Aa,t),t.o=0)}function Hn(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=se(_(t.Aa,t),Jn(t,t.o)),t.o++,0))}function Gn(t){null!=t.s&&(h.clearTimeout(t.s),t.s=null)}function zn(t){t.a=new me(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=je(t.la);He(e,"RID","rpc"),He(e,"SID",t.J),He(e,"CI",t.H?"0":"1"),He(e,"AID",t.P),Vn(t,e),He(e,"TYPE","xmlhttp"),t.i&&t.l&&Pn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ge(je(e)),n.j=null,n.I=!0,Te(n,t)}function Wn(t){null!=t.m&&(h.clearTimeout(t.m),t.m=null)}function Kn(t,e){var n=null;if(t.a==e){Wn(t),Gn(t),t.a=null;var r=2}else{if(!hn(t.b,e))return;n=e.s,pn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=w()-e.u;var i=t.u;kt(r=ee(),new ae(r,n,e,i)),jn(t)}else Bn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ln(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=se(_(t.Ba,t,e),Jn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Hn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Yn(t,5);break;case 4:Yn(t,10);break;case 3:Yn(t,6);break;default:Yn(t,2)}}function Jn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Yn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=_(t.Ya,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Ue(n,"https"),Ge(n)),function(t,e){var n=new Xt;if(h.Image){var r=new Image;r.onload=b(mn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=b(mn,n,r,"TestLoadImage: error",!1,e),r.onabort=b(mn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=b(mn,n,r,"TestLoadImage: timeout",!1,e),h.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),Qn(t),Ln(t)}function Qn(t){t.v=0,t.I=-1,t.f&&(0==dn(t.b).length&&0==t.g.length||(t.b.c.length=0,C(t.g),t.g.length=0),t.f.qa())}function Xn(t,e,n){var r=function(t){return t instanceof Fe?je(t):new Fe(t,void 0)}(n);if(""!=r.c)e&&Ve(r,e+"."+r.c),qe(r,r.h);else{var i=h.location;r=function(t,e,n,r){var i=new Fe(null,void 0);return t&&Ue(i,t),e&&Ve(i,e),n&&qe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&D(t.V,(function(t,e){He(r,e,t)})),e=t.A,n=t.na,e&&n&&He(r,e,n),He(r,"VER",t.ha),Vn(t,r),r}function $n(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new bn(t.Na)).F=t.C,e}function Zn(){}function tr(){if(H&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function er(t,e){At.call(this),this.a=new On(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ir(this)}function nr(t){ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rr(){ye.call(this),this.status=1}function ir(t){this.a=t}(u=bn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?he(this.H):he(pe),this.a.onreadystatechange=_(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void xn(this,t)}t=n||"";var i=new Oe(this.headers);r&&Re(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Sn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=h.FormData&&t instanceof h.FormData,!(0<=S(Tn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{kn(this),0<this.o&&((this.D=function(t){return H&&tt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_(this.xa,this)):this.m=Gt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){xn(this,t)}},u.xa=function(){void 0!==l&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,kt(this,"timeout"),this.abort(8))},u.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,kt(this,"complete"),kt(this,"abort"),An(this))},u.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),An(this,!0)),bn.X.G.call(this)},u.za=function(){this.j||(this.A||this.l||this.g?Cn(this):this.Ua())},u.Ua=function(){Cn(this)},u.W=function(){try{return 2<Nn(this)?this.a.status:-1}catch(t){return-1}},u.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},u.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),_n(e)}},u.ua=function(){return this.h},u.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(u=On.prototype).ha=8,u.v=1,u.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new me(this,this.c,t,void 0),r=this.l;if(this.O&&(r?j(r=L(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qn(this,n,e),He(i=je(this.B),"RID",t),He(i,"CVER",22),this.A&&He(i,"X-HTTP-Session-Id",this.A),Vn(this,i),this.i&&r&&Pn(i,this.i,r),fn(this.b,n),this.Ia&&He(i,"TYPE","init"),this.da?(He(i,"$req",e),He(i,"SID","null"),n.U=!0,Ee(n,i,null)):Ee(n,i,e),this.v=2}}else 3==this.v&&(t?Un(this,t):0==this.g.length||cn(this.b)||Un(this))},u.Aa=function(){if(this.j=null,zn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=se(_(this.Ta,this),t)}},u.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,oe(10),Dn(this),zn(this))},u.Sa=function(){null!=this.m&&(this.m=null,Dn(this),Hn(this),oe(19))},u.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(u=Zn.prototype).ta=function(){},u.sa=function(){},u.ra=function(){},u.qa=function(){},u.Ja=function(){},tr.prototype.a=function(t,e){return new er(t,e)},E(er,At),er.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;oe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Xn(t,null,t.fa),jn(t)},er.prototype.close=function(){Mn(this.a)},er.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Fn(this.a,e)}else this.l?((e={}).__data__=Pt(t),Fn(this.a,e)):Fn(this.a,t)},er.prototype.G=function(){this.a.f=null,delete this.f,Mn(this.a),delete this.a,er.X.G.call(this)},E(nr,ve),E(rr,ye),E(ir,Zn),ir.prototype.ta=function(){kt(this.a,"a")},ir.prototype.sa=function(t){kt(this.a,new nr(t))},ir.prototype.ra=function(t){kt(this.a,new rr(t))},ir.prototype.qa=function(){kt(this.a,"b")},tr.prototype.createWebChannel=tr.prototype.a,er.prototype.send=er.prototype.h,er.prototype.open=er.prototype.g,er.prototype.close=er.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",fe.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",At.prototype.listen=At.prototype.va,bn.prototype.listenOnce=bn.prototype.wa,bn.prototype.getLastError=bn.prototype.Qa,bn.prototype.getLastErrorCode=bn.prototype.ua,bn.prototype.getStatus=bn.prototype.W,bn.prototype.getResponseJson=bn.prototype.Pa,bn.prototype.getResponseText=bn.prototype.$,bn.prototype.send=bn.prototype.ba;var or=ue,ar=ce,sr=Zt,ur=10,cr=11,lr=fe,hr=bn,fr=n(655),pr=new i.Yd("@firebase/firestore");function dr(){return pr.logLevel}function vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pr.logLevel<=i.in.DEBUG){var r=e.map(mr);pr.debug.apply(pr,(0,fr.pr)(["Firestore (8.2.1): "+t],r))}}function yr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pr.logLevel<=i.in.ERROR){var r=e.map(mr);pr.error.apply(pr,(0,fr.pr)(["Firestore (8.2.1): "+t],r))}}function gr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pr.logLevel<=i.in.WARN){var r=e.map(mr);pr.warn.apply(pr,(0,fr.pr)(["Firestore (8.2.1): "+t],r))}}function mr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function _r(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.1) INTERNAL ASSERTION FAILED: "+t;throw yr(e),new Error(e)}function br(t,e){t||_r()}function wr(t,e){return t}function Er(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Tr=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Er(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Sr(t,e){return t<e?-1:t>e?1:0}function xr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ir(t){return t+"\0"}var Cr=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return Sr(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Cr.h=new Cr("");var Ar={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,fr.ZT)(e,t),e}(Error),Nr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Cr.fromBase64String(e))}catch(e){throw new kr(Ar.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Cr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),Pr=function(t){this._=t};function Rr(){if("undefined"==typeof Uint8Array)throw new kr(Ar.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Or(){if("undefined"==typeof atob)throw new kr(Ar.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.fromBase64String=function(t){return Or(),new e(Nr.fromBase64String(t))},e.fromUint8Array=function(t){return Rr(),new e(Nr.fromUint8Array(t))},e.prototype.toBase64=function(){return Or(),this._.toBase64()},e.prototype.toUint8Array=function(){return Rr(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Pr),Dr=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},Lr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Fr=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Fr.UNAUTHENTICATED=new Fr(null),Fr.P=new Fr("google-credentials-uid"),Fr.g=new Fr("first-party-uid");var jr=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},Ur=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(Fr.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),Vr=function(){function t(t){var e=this;this.C=null,this.currentUser=Fr.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(vr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(br("string"==typeof n.accessToken),new jr(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return br(null===t||"string"==typeof t),new Fr(t)},t}(),qr=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=Fr.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Br=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new qr(this.k,this.M))},t.prototype.S=function(t){t(Fr.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),Hr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();Hr.U=-1;var Gr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new kr(Ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new kr(Ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new kr(Ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kr(Ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?Sr(this.nanoseconds,t.nanoseconds):Sr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),zr=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new Gr(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),Wr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&_r(),void 0===n?n=t.length-e:n>t.length-e&&_r(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new kr(Ar.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(Wr),Jr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return Jr.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new kr(Ar.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new kr(Ar.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new kr(Ar.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new kr(Ar.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(Wr),Qr=function(){function t(t){this.path=t}return t.ft=function(e){return new t(Kr.ct(e))},t.dt=function(e){return new t(Kr.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Kr.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return Kr.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new Kr(e.slice()))},t}();function Xr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $r(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ti=function(){function t(t){this.fields=t,t.sort(Yr.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return xr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ei=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(t){if(br(!!t),"string"==typeof t){var e=0,n=ei.exec(t);if(br(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ri(t.seconds),nanos:ri(t.nanos)}}function ri(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ii(t){return"string"==typeof t?Cr.fromBase64String(t):Cr.fromUint8Array(t)}function oi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ai(t){var e=t.mapValue.fields.__previous_value__;return oi(e)?ai(e):e}function si(t){var e=ni(t.mapValue.fields.__local_write_time__.timestampValue);return new Gr(e.seconds,e.nanos)}function ui(t){return null==t}function ci(t){return 0===t&&1/t==-1/0}function li(t){return"number"==typeof t&&Number.isInteger(t)&&!ci(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oi(t)?4:10:_r()}function fi(t,e){var n=hi(t);if(n!==hi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return si(t).isEqual(si(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ni(t.timestampValue),r=ni(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ii(t.bytesValue).isEqual(ii(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ri(t.geoPointValue.latitude)===ri(e.geoPointValue.latitude)&&ri(t.geoPointValue.longitude)===ri(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ri(t.integerValue)===ri(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ri(t.doubleValue),r=ri(e.doubleValue);return n===r?ci(n)===ci(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return xr(t.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Xr(n)!==Xr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!fi(n[i],r[i])))return!1;return!0}(t,e);default:return _r()}}function pi(t,e){return void 0!==(t.values||[]).find((function(t){return fi(t,e)}))}function di(t,e){var n=hi(t),r=hi(e);if(n!==r)return Sr(n,r);switch(n){case 0:return 0;case 1:return Sr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ri(t.integerValue||t.doubleValue),r=ri(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return vi(t.timestampValue,e.timestampValue);case 4:return vi(si(t),si(e));case 5:return Sr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ii(t),r=ii(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Sr(n[i],r[i]);if(0!==o)return o}return Sr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Sr(ri(t.latitude),ri(e.latitude));return 0!==n?n:Sr(ri(t.longitude),ri(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=di(n[i],r[i]);if(o)return o}return Sr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Sr(r[a],o[a]);if(0!==s)return s;var u=di(n[r[a]],i[o[a]]);if(0!==u)return u}return Sr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw _r()}}function vi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Sr(t,e);var n=ni(t),r=ni(e),i=Sr(n.seconds,r.seconds);return 0!==i?i:Sr(n.nanos,r.nanos)}function yi(t){return gi(t)}function gi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ni(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ii(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Qr.dt(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=gi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+gi(t.fields[o])}return e+"}"}(t.mapValue):_r();var e,n}function mi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function _i(t){return!!t&&"integerValue"in t}function bi(t){return!!t&&"arrayValue"in t}function wi(t){return!!t&&"nullValue"in t}function Ei(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ti(t){return!!t&&"mapValue"in t}var Si=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ti(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return fi(this.proto,t.proto)},t}(),xi=function(){function t(t){void 0===t&&(t=Si.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===hi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(Yr.at(),this.Rt);return null!=t?new Si(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=Ti(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.gt(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Ii(t){var e=[];return $r(t.fields||{},(function(t,n){var r=new Yr([t]);if(Ti(n)){var i=Ii(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new ti(e)}var Ci=function(t,e){this.key=t,this.version=e},Ai=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return(0,fr.ZT)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Ci),ki=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return(0,fr.ZT)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ci),Ni=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ci),Pi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.St=null};function Ri(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Pi(t,e,n,r,i,o,a)}function Oi(t){var e=wr(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+yi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),ui(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Wi(e.startAt)),e.endAt&&(n+="|ub:",n+=Wi(e.endAt)),e.St=n}return e.St}function Mi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ji(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!fi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qi(t.startAt,e.startAt)&&Qi(t.endAt,e.endAt)}function Di(t){return Qr.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Li=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,fr.ZT)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new Fi(t,n,r):"array-contains"===n?new qi(t,r):"in"===n?new Bi(t,r):"not-in"===n?new Hi(t,r):"array-contains-any"===n?new Gi(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new ji(t,n):new Ui(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(di(e,this.value)):null!==e&&hi(this.value)===hi(e)&&this.Ct(di(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _r()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Fi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Qr.dt(r.referenceValue),i}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){var e=Qr.J(t.key,this.key);return this.Ct(e)},e}(Li),ji=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Vi(0,n),r}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Li),Ui=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Vi(0,n),r}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Li);function Vi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Qr.dt(t.referenceValue)}))}var qi=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return bi(e)&&pi(e.arrayValue,this.value)},e}(Li),Bi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&pi(this.value.arrayValue,e)},e}(Li),Hi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){if(pi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!pi(this.value.arrayValue,e)},e}(Li),Gi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!bi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return pi(e.value.arrayValue,t)}))},e}(Li),zi=function(t,e){this.position=t,this.before=e};function Wi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return yi(t)})).join(",")}var Ki=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ji(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Yi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.ht()?Qr.J(Qr.dt(a.referenceValue),n.key):di(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Qi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!fi(t.position[n],e.position[n]))return!1;return!0}var Xi=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.Ft=null,this.Ot=null,this.startAt,this.endAt};function $i(t,e,n,r,i,o,a,s){return new Xi(t,e,n,r,i,o,a,s)}function Zi(t){return new Xi(t)}function to(t){return!ui(t.limit)&&"F"===t.limitType}function eo(t){return!ui(t.limit)&&"L"===t.limitType}function no(t){return t.Nt.length>0?t.Nt[0].field:null}function ro(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function io(t){return null!==t.collectionGroup}function oo(t){var e=wr(t);if(null===e.Ft){e.Ft=[];var n=ro(e),r=no(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new Ki(n)),e.Ft.push(new Ki(Yr.lt(),"asc"));else{for(var i=!1,o=0,a=e.Nt;o<a.length;o++){var s=a[o];e.Ft.push(s),s.field.ht()&&(i=!0)}if(!i){var u=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new Ki(Yr.lt(),u))}}}return e.Ft}function ao(t){var e=wr(t);if(!e.Ot)if("F"===e.limitType)e.Ot=Ri(e.path,e.collectionGroup,oo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=oo(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Ki(o.field,a))}var s=e.endAt?new zi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new zi(e.startAt.position,!e.startAt.before):null;e.Ot=Ri(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.Ot}function so(t,e,n){return new Xi(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uo(t,e){return Mi(ao(t),ao(e))&&t.limitType===e.limitType}function co(t){return Oi(ao(t))+"|lt:"+t.limitType}function lo(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+yi(e.value);var e})).join(", ")+"]"),ui(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Wi(t.startAt)),t.endAt&&(e+=", endAt: "+Wi(t.endAt)),"Target("+e+")"}(ao(t))+"; limitType="+t.limitType+")"}function ho(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):Qr.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Yi(t.startAt,oo(t),e)||t.endAt&&Yi(t.endAt,oo(t),e))}(t,e)}function fo(t){return function(e,n){for(var r=!1,i=0,o=oo(t);i<o.length;i++){var a=o[i],s=po(a,e,n);if(0!==s)return s;r=r||a.field.ht()}return 0}}function po(t,e,n){var r=t.field.ht()?Qr.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?di(r,i):_r()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _r()}}var vo=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=zr.min()),void 0===o&&(o=zr.min()),void 0===a&&(a=Cr.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function yo(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ci(e)?"-0":e}}function go(t){return{integerValue:""+t}}function mo(t,e){return li(e)?go(e):yo(t,e)}var _o=function(){this.Ut=void 0};function bo(t,e,n){return t instanceof To?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof So?xo(t,e):t instanceof Io?Co(t,e):function(t,e){var n=Eo(t,e),r=ko(n)+ko(t.Qt);return _i(n)&&_i(t.Qt)?go(r):yo(t.Kt,r)}(t,e)}function wo(t,e,n){return t instanceof So?xo(t,e):t instanceof Io?Co(t,e):n}function Eo(t,e){return t instanceof Ao?_i(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var To=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e}(_o),So=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,fr.ZT)(e,t),e}(_o);function xo(t,e){for(var n=No(e),r=function(t){n.some((function(e){return fi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Io=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,fr.ZT)(e,t),e}(_o);function Co(t,e){for(var n=No(e),r=function(t){n=n.filter((function(e){return!fi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ao=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return(0,fr.ZT)(e,t),e}(_o);function ko(t){return ri(t.integerValue||t.doubleValue)}function No(t){return bi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Po=function(t,e){this.field=t,this.transform=e},Ro=function(t,e){this.version=t,this.transformResults=e},Oo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Mo(t,e){return void 0!==t.updateTime?e instanceof Ai&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Ai}var Do=function(){};function Lo(t,e,n){return t instanceof qo?function(t,e,n){var r=t.value;if(n.transformResults){var i=Go(t.fieldTransforms,e,n.transformResults);r=Wo(t.fieldTransforms,r,i)}return new Ai(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Bo?function(t,e,n){if(!Mo(t.Gt,e))return new Ni(t.key,n.version);var r=Ho(t,e,n.transformResults?Go(t.fieldTransforms,e,n.transformResults):[]);return new Ai(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new ki(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Fo(t,e,n,r){return t instanceof qo?function(t,e,n,r){if(!Mo(t.Gt,e))return e;var i=t.value;if(t.fieldTransforms){var o=zo(t.fieldTransforms,n,e,r);i=Wo(t.fieldTransforms,i,o)}var a=Vo(e);return new Ai(t.key,a,i,{bt:!0})}(t,e,r,n):t instanceof Bo?function(t,e,n,r){if(!Mo(t.Gt,e))return e;var i=Vo(e),o=Ho(t,e,zo(t.fieldTransforms,n,e,r));return new Ai(t.key,i,o,{bt:!0})}(t,e,r,n):function(t,e){return Mo(t.Gt,e)?new ki(t.key,zr.min()):e}(t,e)}function jo(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],a=e instanceof Ai?e.field(o.field):void 0,s=Eo(o.transform,a||null);null!=s&&(n=null==n?(new xi).set(o.field,s):n.set(o.field,s))}return n?n.yt():null}(t.fieldTransforms,e):null}function Uo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&xr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof So&&e instanceof So||t instanceof Io&&e instanceof Io?xr(t.elements,e.elements,fi):t instanceof Ao&&e instanceof Ao?fi(t.Qt,e.Qt):t instanceof To&&e instanceof To}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Vo(t){return t instanceof Ai?t.version:zr.min()}var qo=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return(0,fr.ZT)(e,t),e}(Do),Bo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.zt=r,a.Gt=i,a.fieldTransforms=o,a.type=1,a}return(0,fr.ZT)(e,t),e}(Do);function Ho(t,e,n){var r;return r=function(t,e){var n=new xi(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof Ai?e.data():Si.empty()),Wo(t.fieldTransforms,r,n)}function Go(t,e,n){var r=[];br(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof Ai&&(s=e.field(o.field)),r.push(wo(a,s,n[i]))}return r}function zo(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=null;n instanceof Ai&&(c=n.field(s.field)),null===c&&r instanceof Ai&&(c=r.field(s.field)),i.push(bo(u,c,e))}return i}function Wo(t,e,n){for(var r=new xi(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var Ko,Jo,Yo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return(0,fr.ZT)(e,t),e}(Do),Qo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return(0,fr.ZT)(e,t),e}(Do),Xo=function(t){this.count=t};function $o(t){switch(t){case Ar.OK:return _r();case Ar.CANCELLED:case Ar.UNKNOWN:case Ar.DEADLINE_EXCEEDED:case Ar.RESOURCE_EXHAUSTED:case Ar.INTERNAL:case Ar.UNAVAILABLE:case Ar.UNAUTHENTICATED:return!1;case Ar.INVALID_ARGUMENT:case Ar.NOT_FOUND:case Ar.ALREADY_EXISTS:case Ar.PERMISSION_DENIED:case Ar.FAILED_PRECONDITION:case Ar.ABORTED:case Ar.OUT_OF_RANGE:case Ar.UNIMPLEMENTED:case Ar.DATA_LOSS:return!0;default:return _r()}}function Zo(t){if(void 0===t)return yr("GRPC error has no .code"),Ar.UNKNOWN;switch(t){case Ko.OK:return Ar.OK;case Ko.CANCELLED:return Ar.CANCELLED;case Ko.UNKNOWN:return Ar.UNKNOWN;case Ko.DEADLINE_EXCEEDED:return Ar.DEADLINE_EXCEEDED;case Ko.RESOURCE_EXHAUSTED:return Ar.RESOURCE_EXHAUSTED;case Ko.INTERNAL:return Ar.INTERNAL;case Ko.UNAVAILABLE:return Ar.UNAVAILABLE;case Ko.UNAUTHENTICATED:return Ar.UNAUTHENTICATED;case Ko.INVALID_ARGUMENT:return Ar.INVALID_ARGUMENT;case Ko.NOT_FOUND:return Ar.NOT_FOUND;case Ko.ALREADY_EXISTS:return Ar.ALREADY_EXISTS;case Ko.PERMISSION_DENIED:return Ar.PERMISSION_DENIED;case Ko.FAILED_PRECONDITION:return Ar.FAILED_PRECONDITION;case Ko.ABORTED:return Ar.ABORTED;case Ko.OUT_OF_RANGE:return Ar.OUT_OF_RANGE;case Ko.UNIMPLEMENTED:return Ar.UNIMPLEMENTED;case Ko.DATA_LOSS:return Ar.DATA_LOSS;default:return _r()}}(Jo=Ko||(Ko={}))[Jo.OK=0]="OK",Jo[Jo.CANCELLED=1]="CANCELLED",Jo[Jo.UNKNOWN=2]="UNKNOWN",Jo[Jo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jo[Jo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jo[Jo.NOT_FOUND=5]="NOT_FOUND",Jo[Jo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jo[Jo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jo[Jo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jo[Jo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jo[Jo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jo[Jo.ABORTED=10]="ABORTED",Jo[Jo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jo[Jo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jo[Jo.INTERNAL=13]="INTERNAL",Jo[Jo.UNAVAILABLE=14]="UNAVAILABLE",Jo[Jo.DATA_LOSS=15]="DATA_LOSS";var ta=function(){function t(t,e){this.J=t,this.root=e||na.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,na.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,na.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new ea(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new ea(this.root,t,this.J,!1)},t.prototype.se=function(){return new ea(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new ea(this.root,t,this.J,!0)},t}(),ea=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),na=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw _r();if(this.right._e())throw _r();var t=this.left.me();if(t!==this.right.me())throw _r();return t+(this._e()?0:1)},t}();na.EMPTY=null,na.RED=!0,na.Jt=!1,na.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw _r()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw _r()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw _r()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw _r()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw _r()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new na(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var ra=function(){function t(t){this.J=t,this.data=new ta(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new ia(this.data.ee())},t.prototype.ne=function(t){return new ia(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),ia=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),oa=new ta(Qr.J);function aa(){return oa}function sa(){return aa()}var ua=new ta(Qr.J);function ca(){return ua}var la=new ta(Qr.J);function ha(){return la}var fa=new ra(Qr.J);function pa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=fa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var da=new ra(Sr);function va(){return da}var ya=function(){function t(t){this.J=t?function(e,n){return t(e,n)||Qr.J(e.key,n.key)}:function(t,e){return Qr.J(t.key,e.key)},this.Ve=ca(),this.pe=new ta(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),ga=function(){function t(){this.ve=new ta(Qr.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):_r():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),ma=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=a,this.Ne=s}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ya.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&uo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),_a=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,ba.Be(e,n)),new t(zr.min(),r,va(),aa(),pa())},t}(),ba=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(Cr.h,n,pa(),pa(),pa())},t}(),wa=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},Ea=function(t,e){this.targetId=t,this.Ge=e},Ta=function(t,e,n,r){void 0===n&&(n=Cr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Sa=function(){function t(){this.ze=0,this.He=Ca(),this.Je=Cr.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=pa(),e=pa(),n=pa();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:_r()}})),new ba(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=Ca()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),xa=function(){function t(t){this.hn=t,this.ln=new Map,this._n=aa(),this.fn=Ia(),this.dn=new ra(Sr)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof Ai?this.En(r,t.je):t.je instanceof ki&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:_r()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Di(i))if(0===n){var o=new Qr(i.path);this.Tn(e,o,new ki(o,zr.min()))}else br(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Di(o.target)){var a=new Qr(o.target.path);null!==e._n.get(a)||e.bn(i,a)||e.Tn(i,a,new ki(a,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=pa();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new _a(t,n,this.dn,this._n,r);return this._n=aa(),this.fn=Ia(),this.dn=new ra(Sr),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new Sa,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new ra(Sr),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||vr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new Sa),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function Ia(){return new ta(Qr.J)}function Ca(){return new ta(Qr.J)}var Aa={asc:"ASCENDING",desc:"DESCENDING"},ka={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Na=function(t,e){this.T=t,this.qt=e};function Pa(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ra(t,e){return t.qt?e.toBase64():e.toUint8Array()}function Oa(t,e){return Pa(t,e.G())}function Ma(t){return br(!!t),zr.W(function(t){var e=ni(t);return new Gr(e.seconds,e.nanos)}(t))}function Da(t,e){return function(t){return new Kr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function La(t){var e=Kr.ct(t);return br(as(e)),e}function Fa(t,e){return Da(t.T,e.path)}function ja(t,e){var n=La(e);if(n.get(1)!==t.T.projectId)throw new kr(Ar.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new kr(Ar.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new Qr(Ba(n))}function Ua(t,e){return Da(t.T,e)}function Va(t){var e=La(t);return 4===e.length?Kr.at():Ba(e)}function qa(t){return new Kr(["projects",t.T.projectId,"databases",t.T.database]).ot()}function Ba(t){return br(t.length>4&&"documents"===t.get(4)),t.X(5)}function Ha(t,e,n){return{name:Fa(t,e),fields:n.proto.mapValue.fields}}function Ga(t,e,n){var r=ja(t,e.name),i=Ma(e.updateTime),o=new Si({mapValue:{fields:e.fields}});return new Ai(r,i,o,{hasCommittedMutations:!!n})}function za(t,e){var n;if(e instanceof qo)n={update:Ha(t,e.key,e.value)};else if(e instanceof Yo)n={delete:Fa(t,e.key)};else if(e instanceof Bo)n={update:Ha(t,e.key,e.data),updateMask:os(e.zt)};else{if(!(e instanceof Qo))return _r();n={verify:Fa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof To)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof So)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof Io)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof Ao)return{fieldPath:e.field.ot(),increment:n.Qt};throw _r()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Oa(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:_r()}(t,e.Gt)),n}function Wa(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Oo.updateTime(Ma(t.updateTime)):void 0!==t.exists?Oo.exists(t.exists):Oo.Wt()}(e.currentDocument):Oo.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)br("REQUEST_TIME"===e.setToServerValue),n=new To;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new So(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Io(i)}else"increment"in e?n=new Ao(t,e.increment):_r();var o=Yr._t(e.fieldPath);return new Po(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ja(t,e.update.name),o=new Si({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new ti(e.map((function(t){return Yr._t(t)})))}(e.updateMask);return new Bo(i,o,a,n,r)}return new qo(i,o,n,r)}if(e.delete){var s=ja(t,e.delete);return new Yo(s,n)}if(e.verify){var u=ja(t,e.verify);return new Qo(u,n)}return _r()}function Ka(t,e){return{documents:[Ua(t,e.path)]}}function Ja(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ua(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ua(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ei(t.value))return{unaryFilter:{field:es(t.field),op:"IS_NAN"}};if(wi(t.value))return{unaryFilter:{field:es(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ei(t.value))return{unaryFilter:{field:es(t.field),op:"IS_NOT_NAN"}};if(wi(t.value))return{unaryFilter:{field:es(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:es(t.field),op:ts(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:es(t.field),direction:Za(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.qt||ui(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Xa(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Xa(e.endAt)),n}function Ya(t){var e=Va(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){br(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Qa(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Ki(ns(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ui(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=$a(n.startAt));var l=null;return n.endAt&&(l=$a(n.endAt)),$i(e,i,s,a,u,"F",c,l)}function Qa(t){return t?void 0!==t.unaryFilter?[is(t)]:void 0!==t.fieldFilter?[rs(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Qa(t)})).reduce((function(t,e){return t.concat(e)})):_r():[]}function Xa(t){return{before:t.before,values:t.position}}function $a(t){var e=!!t.before,n=t.values||[];return new zi(n,e)}function Za(t){return Aa[t]}function ts(t){return ka[t]}function es(t){return{fieldPath:t.ot()}}function ns(t){return Yr._t(t.fieldPath)}function rs(t){return Li.create(ns(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return _r()}}(t.fieldFilter.op),t.fieldFilter.value)}function is(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ns(t.unaryFilter.field);return Li.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ns(t.unaryFilter.field);return Li.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ns(t.unaryFilter.field);return Li.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ns(t.unaryFilter.field);return Li.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return _r()}}function os(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function as(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var ss=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},us=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&_r(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),cs=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new ss,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new fs(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=gs(e.target.error);n.qn.reject(new fs(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new fs(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(vr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ds(e)},t}(),ls=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn((0,o.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return vr("SimpleDb","Removing database:",t),vs(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=(0,o.z$)(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(vr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new fs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new kr(Ar.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new fs(t,n))},i.onupgradeneeded=function(t){vr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Qn.Yn(e,i.transaction,t.oldVersion,n.version).next((function(){vr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return(0,fr.Jh)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.Jn(t)];case 2:return s.db=h.sent(),e=cs.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),us.reject(t)})).Mn(),u={},a.catch((function(){})),[4,e.Un];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,vr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),hs=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return vs(this.ts.delete())},t}(),fs=function(t){function e(e,n){var r=this;return(r=t.call(this,Ar.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,fr.ZT)(e,t),e}(kr);function ps(t){return"IndexedDbTransactionError"===t.name}var ds=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(vr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(vr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),vs(n)},t.prototype.add=function(t){return vr("SimpleDb","ADD",this.store.name,t,t),vs(this.store.add(t))},t.prototype.get=function(t){var e=this;return vs(this.store.get(t)).next((function(n){return void 0===n&&(n=null),vr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return vr("SimpleDb","DELETE",this.store.name,t),vs(this.store.delete(t))},t.prototype.count=function(){return vr("SimpleDb","COUNT",this.store.name),vs(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){vr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new us((function(n,r){e.onerror=function(t){var e=gs(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new us((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new hs(i),a=e(i.primaryKey,i.value,o);if(a instanceof us){var s=a.catch((function(t){return o.done(),us.reject(t)}));n.push(s)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return us.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function vs(t){return new us((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=gs(t.target.error);n(e)}}))}var ys=!1;function gs(t){var e=ls.Kn((0,o.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new kr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ys||(ys=!0,setTimeout((function(){throw r}),0)),r}}return t}var ms=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new ss,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new kr(Ar.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function _s(t,e){if(yr("AsyncQueue",e+": "+t),ps(t))return new kr(Ar.UNAVAILABLE,e+": "+t);throw t}var bs=function(t,e){this.progress=t,this.gs=e},ws="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Es=function(){function t(){this.Vs=[]}return t.prototype.ps=function(t){this.Vs.push(t)},t.prototype.bs=function(){this.Vs.forEach((function(t){return t()}))},t}();function Ts(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=xs(e)),e=Ss(t.get(n),e);return xs(e)}function Ss(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function xs(t){return t+""}function Is(t){var e=t.length;if(br(e>=2),2===e)return br(""===t.charAt(0)&&""===t.charAt(1)),Kr.at();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&_r(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:_r()}o=a+2}return new Kr(r)}var Cs=function(t,e){this.seconds=t,this.nanoseconds=e},As=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};As.store="owner",As.key="owner";var ks=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ks.store="mutationQueues",ks.keyPath="userId";var Ns=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ns.store="mutations",Ns.keyPath="batchId",Ns.userMutationsIndex="userMutationsIndex",Ns.userMutationsKeyPath=["userId","batchId"];var Ps=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ts(e)]},t.key=function(t,e,n){return[t,Ts(e),n]},t}();Ps.store="documentMutations",Ps.PLACEHOLDER=new Ps;var Rs=function(t,e){this.path=t,this.readTime=e},Os=function(t,e){this.path=t,this.version=e},Ms=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ms.store="remoteDocuments",Ms.readTimeIndex="readTimeIndex",Ms.readTimeIndexPath="readTime",Ms.collectionReadTimeIndex="collectionReadTimeIndex",Ms.collectionReadTimeIndexPath=["parentPath","readTime"];var Ds=function(t){this.byteSize=t};Ds.store="remoteDocumentGlobal",Ds.key="remoteDocumentGlobalKey";var Ls=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Ls.store="targets",Ls.keyPath="targetId",Ls.queryTargetsIndexName="queryTargetsIndex",Ls.queryTargetsKeyPath=["canonicalId","targetId"];var Fs=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Fs.store="targetDocuments",Fs.keyPath=["targetId","path"],Fs.documentTargetsIndex="documentTargetsIndex",Fs.documentTargetsKeyPath=["path","targetId"];var js=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};js.key="targetGlobalKey",js.store="targetGlobal";var Us=function(t,e){this.collectionId=t,this.parent=e};Us.store="collectionParents",Us.keyPath=["collectionId","parent"];var Vs=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Vs.store="clientMetadata",Vs.keyPath="clientId";var qs=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};qs.store="bundles",qs.keyPath="bundleId";var Bs=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Bs.store="namedQueries",Bs.keyPath="name";var Hs=(0,fr.pr)((0,fr.pr)((0,fr.pr)((0,fr.pr)([ks.store,Ns.store,Ps.store,Ms.store,Ls.store,As.store,js.store,Fs.store],[Vs.store]),[Ds.store]),[Us.store]),[qs.store,Bs.store]),Gs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).vs=e,r.Ss=n,r}return(0,fr.ZT)(e,t),e}(Es);function zs(t,e){var n=wr(t);return ls.Hn(n.vs,e)}var Ws=function(){function t(t,e,n,r){this.batchId=t,this.Ds=e,this.baseMutations=n,this.mutations=r}return t.prototype.Cs=function(t,e,n){for(var r=n.xs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Lo(o,e,r[i]))}return e},t.prototype.Ns=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Fo(i,e,e,this.Ds))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=Fo(u,e,o,this.Ds))}return e},t.prototype.Fs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ns(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),pa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&xr(this.mutations,t.mutations,(function(t,e){return Uo(t,e)}))&&xr(this.baseMutations,t.baseMutations,(function(t,e){return Uo(t,e)}))},t}(),Ks=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.xs=n,this.ks=r}return t.from=function(e,n,r){br(e.mutations.length===r.length);for(var i=ha(),o=e.mutations,a=0;a<o.length;a++)i=i.Ht(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Js=function(t){this.Ms=t};function Ys(t,e){if(e.document)return Ga(t.Ms,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Qr.Tt(e.noDocument.path),r=tu(e.noDocument.readTime);return new ki(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Qr.Tt(e.unknownDocument.path);return r=tu(e.unknownDocument.version),new Ni(i,r)}return _r()}function Qs(t,e,n){var r=Xs(n),i=e.key.path.Z().rt();if(e instanceof Ai){var o=function(t,e){return{name:Fa(t,e.key),fields:e.vt().mapValue.fields,updateTime:Pa(t,e.version.G())}}(t.Ms,e),a=e.hasCommittedMutations;return new Ms(null,null,o,a,r,i)}if(e instanceof ki){var s=e.key.path.rt(),u=Zs(e.version);return a=e.hasCommittedMutations,new Ms(null,new Rs(s,u),null,a,r,i)}if(e instanceof Ni){var c=e.key.path.rt(),l=Zs(e.version);return new Ms(new Os(c,l),null,null,!0,r,i)}return _r()}function Xs(t){var e=t.G();return[e.seconds,e.nanoseconds]}function $s(t){var e=new Gr(t[0],t[1]);return zr.W(e)}function Zs(t){var e=t.G();return new Cs(e.seconds,e.nanoseconds)}function tu(t){var e=new Gr(t.seconds,t.nanoseconds);return zr.W(e)}function eu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Wa(t.Ms,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return Wa(t.Ms,e)})),a=Gr.fromMillis(e.localWriteTimeMs);return new Ws(e.batchId,a,n,o)}function nu(t){var e,n,r=tu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?tu(t.lastLimboFreeSnapshotVersion):zr.min();return void 0!==t.query.documents?(br(1===(n=t.query).documents.length),e=ao(Zi(Va(n.documents[0])))):e=function(t){return ao(Ya(t))}(t.query),new vo(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Cr.fromBase64String(t.resumeToken))}function ru(t,e){var n,r=Zs(e.Mt),i=Zs(e.lastLimboFreeSnapshotVersion);n=Di(e.target)?Ka(t.Ms,e.target):Ja(t.Ms,e.target);var o=e.resumeToken.toBase64();return new Ls(e.targetId,Oi(e.target),r,o,e.sequenceNumber,i,n)}function iu(t){var e=Ya({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?so(e,e.limit,"L"):e}var ou=function(){function t(){}return t.prototype.Ls=function(t,e){return au(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:tu(e.createTime),version:e.version};var e}))},t.prototype.$s=function(t,e){return au(t).put({bundleId:(n=e).id,createTime:Zs(Ma(n.createTime)),version:n.version});var n},t.prototype.Bs=function(t,e){return su(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:iu(e.bundledQuery),readTime:tu(e.readTime)};var e}))},t.prototype.qs=function(t,e){return su(t).put(function(t){return{name:t.name,readTime:Zs(Ma(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function au(t){return zs(t,qs.store)}function su(t){return zs(t,Bs.store)}var uu=function(){function t(){this.Us=new cu}return t.prototype.Qs=function(t,e){return this.Us.add(e),us.resolve()},t.prototype.Ks=function(t,e){return us.resolve(this.Us.getEntries(e))},t}(),cu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new ra(Kr.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ra(Kr.J)).rt()},t}(),lu=function(){function t(){this.Ws=new cu}return t.prototype.Qs=function(t,e){var n=this;if(!this.Ws.has(e)){var r=e.et(),i=e.Z();t.ps((function(){n.Ws.add(e)}));var o={collectionId:r,parent:Ts(i)};return hu(t).put(o)}return us.resolve()},t.prototype.Ks=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ir(e),""],!1,!0);return hu(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Is(o.parent))}return n}))},t}();function hu(t){return zs(t,Us.store)}var fu={js:!1,Gs:0,zs:0,Hs:0},pu=function(){function t(t,e,n){this.Js=t,this.Ys=e,this.Xs=n}return t.Zs=function(e){return new t(e,t.ti,t.ei)},t}();function du(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){if(t.code!==Ar.FAILED_PRECONDITION||t.message!==ws)throw t;return vr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}pu.ti=10,pu.ei=1e3,pu.ni=new pu(41943040,pu.ti,pu.ei),pu.si=new pu(-1,0,0);var vu=function(){function t(t,e){this.ii=t,this.ri=e,this.oi={}}return t.prototype.get=function(t){var e=this.ii(t),n=this.oi[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.ri(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ii(t),r=this.oi[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ri(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.oi[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ii(t),n=this.oi[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ri(n[r][0],t))return 1===n.length?delete this.oi[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){$r(this.oi,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.nt=function(){return Zr(this.oi)},t}(),yu=function(){function t(){this.ci=new vu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ai=!1}return t.prototype.ui=function(t){var e=this.ci.get(t);return e?e.readTime:zr.min()},t.prototype.hi=function(t,e){this.li(),this.ci.set(t.key,{_i:t,readTime:e})},t.prototype.fi=function(t,e){void 0===e&&(e=null),this.li(),this.ci.set(t,{_i:null,readTime:e})},t.prototype.di=function(t,e){this.li();var n=this.ci.get(e);return void 0!==n?us.resolve(n._i):this.wi(t,e)},t.prototype.getEntries=function(t,e){return this.Ei(t,e)},t.prototype.apply=function(t){return this.li(),this.ai=!0,this.Ti(t)},t.prototype.li=function(){},t}();function gu(t,e,n){var r=t.store(Ns.store),i=t.store(Ps.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.ls({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){br(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Ps.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return us.$n(o).next((function(){return c}))}function mu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _r();e=t.noDocument}return JSON.stringify(e).length}var _u=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ii=n,this.mi=r,this.Ai={}}return t.Ri=function(e,n,r,i){return br(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Pi=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wu(t).ls({index:Ns.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.yi=function(t,e,n,r){var i=this,o=Eu(t),a=wu(t);return a.add({}).next((function(s){br("number"==typeof s);for(var u=new Ws(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return za(t.Ms,e)})),i=n.mutations.map((function(e){return za(t.Ms,e)}));return new Ns(e,n.batchId,n.Ds.toMillis(),r,i)}(i.Kt,i.userId,u),l=[],h=new ra((function(t,e){return Sr(t.ot(),e.ot())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Ps.key(i.userId,d.key.path,s);h=h.add(d.key.path.Z()),l.push(a.put(c)),l.push(o.put(v,Ps.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ii.Qs(t,e))})),t.ps((function(){i.Ai[s]=u.keys()})),us.$n(l).next((function(){return u}))}))},t.prototype.gi=function(t,e){var n=this;return wu(t).get(e).next((function(t){return t?(br(t.userId===n.userId),eu(n.Kt,t)):null}))},t.prototype.Vi=function(t,e){var n=this;return this.Ai[e]?us.resolve(this.Ai[e]):this.gi(t,e).next((function(t){if(t){var r=t.keys();return n.Ai[e]=r,r}return null}))},t.prototype.pi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return wu(t).ls({index:Ns.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(br(e.batchId>=r),o=eu(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.bi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return wu(t).ls({index:Ns.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wu(t).os(Ns.userMutationsIndex,n).next((function(t){return t.map((function(t){return eu(e.Kt,t)}))}))},t.prototype.Si=function(t,e){var n=this,r=Ps.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Eu(t).ls({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Is(u);if(s===n.userId&&e.path.isEqual(l))return wu(t).get(c).next((function(t){if(!t)throw _r();br(t.userId===n.userId),o.push(eu(n.Kt,t))}));a.done()})).next((function(){return o}))},t.prototype.Di=function(t,e){var n=this,r=new ra(Sr),i=[];return e.forEach((function(e){var o=Ps.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Eu(t).ls({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Is(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),us.$n(i).next((function(){return n.Ci(t,r)}))},t.prototype.xi=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ps.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ra(Sr);return Eu(t).ls({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Is(u);a===n.userId&&r.st(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Ci(t,s)}))},t.prototype.Ci=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(wu(t).get(e).next((function(t){if(null===t)throw _r();br(t.userId===n.userId),r.push(eu(n.Kt,t))})))})),us.$n(i).next((function(){return r}))},t.prototype.Ni=function(t,e){var n=this;return gu(t.vs,this.userId,e).next((function(r){return t.ps((function(){n.Fi(e.batchId)})),us.forEach(r,(function(e){return n.mi.Oi(t,e)}))}))},t.prototype.Fi=function(t){delete this.Ai[t]},t.prototype.ki=function(t){var e=this;return this.Pi(t).next((function(n){if(!n)return us.resolve();var r=IDBKeyRange.lowerBound(Ps.prefixForUser(e.userId)),i=[];return Eu(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Is(t[1]);i.push(o)}else r.done()})).next((function(){br(0===i.length)}))}))},t.prototype.Mi=function(t,e){return bu(t,this.userId,e)},t.prototype.Li=function(t){var e=this;return Tu(t).get(this.userId).next((function(t){return t||new ks(e.userId,-1,"")}))},t}();function bu(t,e,n){var r=Ps.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Eu(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function wu(t){return zs(t,Ns.store)}function Eu(t){return zs(t,Ps.store)}function Tu(t){return zs(t,ks.store)}var Su=function(){function t(t){this.$i=t}return t.prototype.next=function(){return this.$i+=2,this.$i},t.Bi=function(){return new t(0)},t.qi=function(){return new t(-1)},t}(),xu=function(){function t(t,e){this.mi=t,this.Kt=e}return t.prototype.Ui=function(t){var e=this;return this.Qi(t).next((function(n){var r=new Su(n.highestTargetId);return n.highestTargetId=r.next(),e.Ki(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wi=function(t){return this.Qi(t).next((function(t){return zr.W(new Gr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Gi=function(t,e,n){var r=this;return this.Qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ki(t,i)}))},t.prototype.zi=function(t,e){var n=this;return this.Hi(t,e).next((function(){return n.Qi(t).next((function(r){return r.targetCount+=1,n.Ji(e,r),n.Ki(t,r)}))}))},t.prototype.Yi=function(t,e){return this.Hi(t,e)},t.prototype.Xi=function(t,e){var n=this;return this.Zi(t,e.targetId).next((function(){return Iu(t).delete(e.targetId)})).next((function(){return n.Qi(t)})).next((function(e){return br(e.targetCount>0),e.targetCount-=1,n.Ki(t,e)}))},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return Iu(t).ls((function(a,s){var u=nu(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Xi(t,u)))})).next((function(){return us.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return Iu(t).ls((function(t,n){var r=nu(n);e(r)}))},t.prototype.Qi=function(t){return Cu(t).get(js.key).next((function(t){return br(null!==t),t}))},t.prototype.Ki=function(t,e){return Cu(t).put(js.key,e)},t.prototype.Hi=function(t,e){return Iu(t).put(ru(this.Kt,e))},t.prototype.Ji=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.er=function(t){return this.Qi(t).next((function(t){return t.targetCount}))},t.prototype.nr=function(t,e){var n=Oi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Iu(t).ls({range:r,index:Ls.queryTargetsIndexName},(function(t,n,r){var o=nu(n);Mi(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.sr=function(t,e,n){var r=this,i=[],o=Au(t);return e.forEach((function(e){var a=Ts(e.path);i.push(o.put(new Fs(n,a))),i.push(r.mi.ir(t,n,e))})),us.$n(i)},t.prototype.rr=function(t,e,n){var r=this,i=Au(t);return us.forEach(e,(function(e){var o=Ts(e.path);return us.$n([i.delete([n,o]),r.mi.cr(t,n,e)])}))},t.prototype.Zi=function(t,e){var n=Au(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ar=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Au(t),i=pa();return r.ls({range:n,hs:!0},(function(t,e,n){var r=Is(t[1]),o=new Qr(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=Ts(e.path),r=IDBKeyRange.bound([n],[Ir(n)],!1,!0),i=0;return Au(t).ls({index:Fs.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return Iu(t).get(e).next((function(t){return t?nu(t):null}))},t}();function Iu(t){return zs(t,Ls.store)}function Cu(t){return zs(t,js.store)}function Au(t){return zs(t,Fs.store)}function ku(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Sr(n,i);return 0===a?Sr(r,o):a}var Nu=function(){function t(t){this.ur=t,this.buffer=new ra(ku),this.hr=0}return t.prototype.lr=function(){return++this.hr},t.prototype._r=function(t){var e=[t,this.lr()];if(this.buffer.size<this.ur)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ku(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Pu=function(){function t(t,e){this.dr=t,this.fs=e,this.wr=!1,this.Er=null}return t.prototype.start=function(t){-1!==this.dr.params.Js&&this.Tr(t)},t.prototype.stop=function(){this.Er&&(this.Er.cancel(),this.Er=null)},Object.defineProperty(t.prototype,"Ir",{get:function(){return null!==this.Er},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t){var e=this,n=this.wr?3e5:6e4;vr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Er=this.fs.mr("lru_garbage_collection",n,(function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:this.Er=null,this.wr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ar(this.dr)];case 2:return n.sent(),[3,7];case 3:return ps(e=n.sent())?(vr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,du(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Tr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ru=function(){function t(t,e){this.Rr=t,this.params=e}return t.prototype.Pr=function(t,e){return this.Rr.yr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.gr=function(t,e){var n=this;if(0===e)return us.resolve(Hr.U);var r=new Nu(e);return this.Rr.mn(t,(function(t){return r._r(t.sequenceNumber)})).next((function(){return n.Rr.Vr(t,(function(t){return r._r(t)}))})).next((function(){return r.maxValue}))},t.prototype.tr=function(t,e,n){return this.Rr.tr(t,e,n)},t.prototype.pr=function(t,e){return this.Rr.pr(t,e)},t.prototype.br=function(t,e){var n=this;return-1===this.params.Js?(vr("LruGarbageCollector","Garbage collection skipped; disabled"),us.resolve(fu)):this.vr(t).next((function(r){return r<n.params.Js?(vr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Js),fu):n.Sr(t,e)}))},t.prototype.vr=function(t){return this.Rr.vr(t)},t.prototype.Sr=function(t,e){var n,r,o,a,s,u,c,l=this,h=Date.now();return this.Pr(t,this.params.Ys).next((function(e){return e>l.params.Xs?(vr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.Xs+" from "+e),r=l.params.Xs):r=e,a=Date.now(),l.gr(t,r)})).next((function(r){return n=r,s=Date.now(),l.tr(t,n,e)})).next((function(e){return o=e,u=Date.now(),l.pr(t,n)})).next((function(t){return c=Date.now(),dr()<=i.in.DEBUG&&vr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),us.resolve({js:!0,Gs:r,zs:o,Hs:t})}))},t}(),Ou=function(){function t(t,e){this.db=t,this.dr=function(t,e){return new Ru(t,e)}(this,e)}return t.prototype.yr=function(t){var e=this.Dr(t);return this.db.Cr().er(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Dr=function(t){var e=0;return this.Vr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Cr().mn(t,e)},t.prototype.Vr=function(t,e){return this.Nr(t,(function(t,n){return e(n)}))},t.prototype.ir=function(t,e,n){return Mu(t,n)},t.prototype.cr=function(t,e,n){return Mu(t,n)},t.prototype.tr=function(t,e,n){return this.db.Cr().tr(t,e,n)},t.prototype.Oi=function(t,e){return Mu(t,e)},t.prototype.Fr=function(t,e){return function(t,e){var n=!1;return Tu(t)._s((function(r){return bu(t,r,e).next((function(t){return t&&(n=!0),us.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.pr=function(t,e){var n=this,r=this.db.kr().Or(),i=[],o=0;return this.Nr(t,(function(a,s){if(s<=e){var u=n.Fr(t,a).next((function(e){if(!e)return o++,r.di(t,a).next((function(){return r.fi(a),Au(t).delete([0,Ts(a.path)])}))}));i.push(u)}})).next((function(){return us.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.Ss);return this.db.Cr().Yi(t,n)},t.prototype.Mr=function(t,e){return Mu(t,e)},t.prototype.Nr=function(t,e){var n,r=Au(t),i=Hr.U;return r.ls({index:Fs.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Hr.U&&e(new Qr(Is(n)),i),i=s,n=a):i=Hr.U})).next((function(){i!==Hr.U&&e(new Qr(Is(n)),i)}))},t.prototype.vr=function(t){return this.db.kr().Lr(t)},t}();function Mu(t,e){return Au(t).put(function(t,e){return new Fs(0,Ts(t.path),e)}(e,t.Ss))}var Du=function(){function t(t,e){this.Kt=t,this.Ii=e}return t.prototype.hi=function(t,e,n){return ju(t).put(Uu(e),n)},t.prototype.fi=function(t,e){var n=ju(t),r=Uu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.$r(t,r)}))},t.prototype.di=function(t,e){var n=this;return ju(t).get(Uu(e)).next((function(t){return n.Br(t)}))},t.prototype.qr=function(t,e){var n=this;return ju(t).get(Uu(e)).next((function(t){var e=n.Br(t);return e?{_i:e,size:mu(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=sa();return this.Ur(t,e,(function(t,e){var i=n.Br(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Qr=function(t,e){var n=this,r=sa(),i=new ta(Qr.J);return this.Ur(t,e,(function(t,e){var o=n.Br(e);o?(r=r.Ht(t,o),i=i.Ht(t,mu(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Kr:r,Wr:i}}))},t.prototype.Ur=function(t,e,n){if(e.nt())return us.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return ju(t).ls({range:r},(function(t,e,r){for(var a=Qr.Tt(t);o&&Qr.J(o,a)<0;)n(o,null),o=i.ce();o&&o.isEqual(a)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=ca(),o=e.path.length+1,a={};if(n.isEqual(zr.min())){var s=e.path.rt();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.rt(),c=Xs(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Ms.collectionReadTimeIndex}return ju(t).ls(a,(function(t,n,a){if(t.length===o){var s=Ys(r.Kt,n);e.path.st(s.key.path)?s instanceof Ai&&ho(e,s)&&(i=i.Ht(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new Lu(this,!!t&&t.Gr)},t.prototype.Lr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Fu(t).get(Ds.key).next((function(t){return br(!!t),t}))},t.prototype.$r=function(t,e){return Fu(t).put(Ds.key,e)},t.prototype.Br=function(t){if(t){var e=Ys(this.Kt,t);return e instanceof ki&&e.version.isEqual(zr.min())?null:e}return null},t}(),Lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zr=e,r.Gr=n,r.Hr=new vu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,fr.ZT)(e,t),e.prototype.Ti=function(t){var e=this,n=[],r=0,i=new ra((function(t,e){return Sr(t.ot(),e.ot())}));return this.ci.forEach((function(o,a){var s=e.Hr.get(o);if(a._i){var u=Qs(e.zr.Kt,a._i,e.ui(o));i=i.add(o.path.Z());var c=mu(u);r+=c-s,n.push(e.zr.hi(t,o,u))}else if(r-=s,e.Gr){var l=Qs(e.zr.Kt,new ki(o,zr.min()),e.ui(o));n.push(e.zr.hi(t,o,l))}else n.push(e.zr.fi(t,o))})),i.forEach((function(r){n.push(e.zr.Ii.Qs(t,r))})),n.push(this.zr.updateMetadata(t,r)),us.$n(n)},e.prototype.wi=function(t,e){var n=this;return this.zr.qr(t,e).next((function(t){return null===t?(n.Hr.set(e,0),null):(n.Hr.set(e,t.size),t._i)}))},e.prototype.Ei=function(t,e){var n=this;return this.zr.Qr(t,e).next((function(t){var e=t.Kr;return t.Wr.forEach((function(t,e){n.Hr.set(t,e)})),e}))},e}(yu);function Fu(t){return zs(t,Ds.store)}function ju(t){return zs(t,Ms.store)}function Uu(t){return t.path.rt()}var Vu=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;br(n<r&&n>=0&&r<=11);var o=new cs("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(As.store)}(t),function(t){t.createObjectStore(ks.store,{keyPath:ks.keyPath}),t.createObjectStore(Ns.store,{keyPath:Ns.keyPath,autoIncrement:!0}).createIndex(Ns.userMutationsIndex,Ns.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ps.store)}(t),qu(t),function(t){t.createObjectStore(Ms.store)}(t));var a=us.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Fs.store),t.deleteObjectStore(Ls.store),t.deleteObjectStore(js.store)}(t),qu(t)),a=a.next((function(){return function(t){var e=t.store(js.store),n=new js(0,0,zr.min().G(),0);return e.put(js.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Ns.store).os().next((function(n){t.deleteObjectStore(Ns.store),t.createObjectStore(Ns.store,{keyPath:Ns.keyPath,autoIncrement:!0}).createIndex(Ns.userMutationsIndex,Ns.userMutationsKeyPath,{unique:!0});var r=e.store(Ns.store),i=n.map((function(t){return r.put(t)}));return us.$n(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Vs.store,{keyPath:Vs.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Jr(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Ds.store)}(t),i.Yr(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.Xr(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Zr(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ms.store);e.createIndex(Ms.readTimeIndex,Ms.readTimeIndexPath,{unique:!1}),e.createIndex(Ms.collectionReadTimeIndex,Ms.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.eo(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(qs.store,{keyPath:qs.keyPath})}(t),function(t){t.createObjectStore(Bs.store,{keyPath:Bs.keyPath})}(t)}))),a},t.prototype.Yr=function(t){var e=0;return t.store(Ms.store).ls((function(t,n){e+=mu(n)})).next((function(){var n=new Ds(e);return t.store(Ds.store).put(Ds.key,n)}))},t.prototype.Jr=function(t){var e=this,n=t.store(ks.store),r=t.store(Ns.store);return n.os().next((function(n){return us.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Ns.userMutationsIndex,i).next((function(r){return us.forEach(r,(function(r){br(r.userId===n.userId);var i=eu(e.Kt,r);return gu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Xr=function(t){var e=t.store(Fs.store),n=t.store(Ms.store);return t.store(js.store).get(js.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new Kr(n),a=function(t){return[0,Ts(t)]}(o);r.push(e.get(a).next((function(n){return n?us.resolve():function(n){return e.put(new Fs(0,Ts(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return us.$n(r)}))}))},t.prototype.Zr=function(t,e){t.createObjectStore(Us.store,{keyPath:Us.keyPath});var n=e.store(Us.store),r=new cu,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:Ts(i)})}};return e.store(Ms.store).ls({hs:!0},(function(t,e){var n=new Kr(t);return i(n.Z())})).next((function(){return e.store(Ps.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Is(n));return i(r.Z())}))}))},t.prototype.eo=function(t){var e=this,n=t.store(Ls.store);return n.ls((function(t,r){var i=nu(r),o=ru(e.Kt,i);return n.put(o)}))},t}();function qu(t){t.createObjectStore(Fs.store,{keyPath:Fs.keyPath}).createIndex(Fs.documentTargetsIndex,Fs.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ls.store,{keyPath:Ls.keyPath}).createIndex(Ls.queryTargetsIndexName,Ls.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(js.store)}var Bu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hu=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.no=o,this.window=a,this.document=s,this.so=c,this.io=l,this.ro=null,this.oo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.co=null,this.inForeground=!1,this.ao=null,this.uo=null,this.ho=Number.NEGATIVE_INFINITY,this.lo=function(t){return Promise.resolve()},!t.Wn())throw new kr(Ar.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.mi=new Ou(this,i),this._o=n+"main",this.Kt=new Js(u),this.fo=new ls(this._o,11,new Vu(this.Kt)),this.wo=new xu(this.mi,this.Kt),this.Ii=new lu,this.Eo=function(t,e){return new Du(t,e)}(this.Kt,this.Ii),this.To=new ou,this.window&&this.window.localStorage?this.Io=this.window.localStorage:(this.Io=null,!1===l&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.mo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new kr(Ar.FAILED_PRECONDITION,Bu);return t.Ao(),t.Ro(),t.Po(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.wo.ji(e)}))})).then((function(e){t.ro=new Hr(e,t.so)})).then((function(){t.oo=!0})).catch((function(e){return t.fo&&t.fo.close(),Promise.reject(e)}))},t.prototype.yo=function(t){var e=this;return this.lo=function(n){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return this.Ir?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Vo=function(t){var e=this;this.fo.Zn((function(n){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.po=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.no.ys((function(){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return this.Ir?[4,this.mo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.mo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return zu(e).put(new Vs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.bo(e).next((function(e){e||(t.isPrimary=!1,t.no.vo((function(){return t.lo(!1)})))}))})).next((function(){return t.So(e)})).next((function(n){return t.isPrimary&&!n?t.Do(e).next((function(){return!1})):!!n&&t.Co(e).next((function(){return!0}))}))})).catch((function(e){if(ps(e))return vr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return vr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.no.vo((function(){return t.lo(e)})),t.isPrimary=e}))},t.prototype.bo=function(t){var e=this;return Gu(t).get(As.key).next((function(t){return us.resolve(e.xo(t))}))},t.prototype.No=function(t){return zu(t).delete(this.clientId)},t.prototype.Fo=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Oo(this.ho,18e5)?[3,2]:(this.ho=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=zs(t,Vs.store);return e.os().next((function(t){var n=i.ko(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return us.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Io)for(e=0,n=t;e<n.length;e++)r=n[e],this.Io.removeItem(this.Mo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Po=function(){var t=this;this.uo=this.no.mr("client_metadata_refresh",4e3,(function(){return t.mo().then((function(){return t.Fo()})).then((function(){return t.Po()}))}))},t.prototype.xo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.So=function(t){var e=this;return this.io?us.resolve(!0):Gu(t).get(As.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Lo(n.ownerId)){if(e.xo(n)&&e.networkEnabled)return!0;if(!e.xo(n)){if(!n.allowTabSynchronization)throw new kr(Ar.FAILED_PRECONDITION,Bu);return!1}}return!(!e.networkEnabled||!e.inForeground)||zu(t).os().next((function(t){return void 0===e.ko(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&vr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$o=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t=this;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return this.oo=!1,this.Bo(),this.uo&&(this.uo.cancel(),this.uo=null),this.qo(),this.Uo(),[4,this.fo.runTransaction("shutdown","readwrite",[As.store,Vs.store],(function(e){var n=new Gs(e,Hr.U);return t.Do(n).next((function(){return t.No(n)}))}))];case 1:return e.sent(),this.fo.close(),this.Qo(),[2]}}))}))},t.prototype.ko=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Lo(t.clientId)}))},t.prototype.Ko=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return zu(e).os().next((function(e){return t.ko(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Wo=function(t){return _u.Ri(t,this.Kt,this.Ii,this.mi)},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.jo=function(){return this.Ii},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;vr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.fo.runTransaction(t,o,Hs,(function(o){return i=new Gs(o,r.ro?r.ro.next():Hr.U),"readwrite-primary"===e?r.bo(i).next((function(t){return!!t||r.So(i)})).next((function(e){if(!e)throw yr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.no.vo((function(){return r.lo(!1)})),new kr(Ar.FAILED_PRECONDITION,ws);return n(i)})).next((function(t){return r.Co(i).next((function(){return t}))})):r.zo(i).next((function(){return n(i)}))})).then((function(t){return i.bs(),t}))},t.prototype.zo=function(t){var e=this;return Gu(t).get(As.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Lo(t.ownerId)&&!e.xo(t)&&!(e.io||e.allowTabSynchronization&&t.allowTabSynchronization))throw new kr(Ar.FAILED_PRECONDITION,Bu)}))},t.prototype.Co=function(t){var e=new As(this.clientId,this.allowTabSynchronization,Date.now());return Gu(t).put(As.key,e)},t.Wn=function(){return ls.Wn()},t.prototype.Do=function(t){var e=this,n=Gu(t);return n.get(As.key).next((function(t){return e.xo(t)?(vr("IndexedDbPersistence","Releasing primary lease."),n.delete(As.key)):us.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(yr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ao=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ao=function(){t.no.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.mo()}))},this.document.addEventListener("visibilitychange",this.ao),this.inForeground="visible"===this.document.visibilityState)},t.prototype.qo=function(){this.ao&&(this.document.removeEventListener("visibilitychange",this.ao),this.ao=null)},t.prototype.Ro=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.co=function(){e.Bo(),e.no.ys((function(){return e.$o()}))},this.window.addEventListener("unload",this.co))},t.prototype.Uo=function(){this.co&&(this.window.removeEventListener("unload",this.co),this.co=null)},t.prototype.Lo=function(t){var e;try{var n=null!==(null===(e=this.Io)||void 0===e?void 0:e.getItem(this.Mo(t)));return vr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return yr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Bo=function(){if(this.Io)try{this.Io.setItem(this.Mo(this.clientId),String(Date.now()))}catch(t){yr("Failed to set zombie client id.",t)}},t.prototype.Qo=function(){if(this.Io)try{this.Io.removeItem(this.Mo(this.clientId))}catch(t){}},t.prototype.Mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Gu(t){return zs(t,As.store)}function zu(t){return zs(t,Vs.store)}function Wu(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ku=function(){function t(t,e,n){this.Eo=t,this.Ho=e,this.Ii=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.Eo.di(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ns(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=sa();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ns(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.Eo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Di(t,e).next((function(r){var i=n.Xo(t,e,r),o=aa();return i.forEach((function(t,e){e||(e=new ki(t,zr.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return Qr.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):io(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new Qr(e)).next((function(t){var e=ca();return t instanceof Ai&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=ca();return this.Ii.Ks(t,i).next((function(a){return us.forEach(a,(function(a){var s=function(t,e){return new Xi(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.sc(t,s,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.Eo.jr(t,e,n).next((function(n){return r=n,o.Ho.xi(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=Fo(u,l,l,o.Ds);r=h instanceof Ai?r.Ht(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){ho(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=pa(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Bo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Eo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ai&&(c=c.Ht(t,e))})),c}))},t}(),Ju=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=pa(),i=pa(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Yu=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(zr.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(a){var s=o.lc(e,a);return(to(e)||eo(e))&&o._c(e.limitType,s,r,n)?o.hc(t,e):(dr()<=i.in.DEBUG&&vr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),lo(e)),o.uc.jr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new ra(fo(t));return e.forEach((function(e,r){r instanceof Ai&&ho(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return dr()<=i.in.DEBUG&&vr("QueryEngine","Using full collection scan to execute query:",lo(e)),this.uc.jr(t,e,zr.min())},t}(),Qu=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new ta(Sr),this.wc=new vu((function(t){return Oi(t)}),Mi),this.Ec=zr.min(),this.Ho=t.Wo(n),this.Tc=t.kr(),this.wo=t.Cr(),this.Ic=new Ku(this.Tc,this.Ho,this.persistence.jo()),this.To=t.Go(),this.fc.ac(this.Ic)}return t.prototype.Ar=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.br(n,e.dc)}))},t}();function Xu(t,e,n,r){return new Qu(t,e,n,r)}function $u(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return n=wr(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.vi(t).next((function(a){return o=a,r=n.persistence.Wo(e),i=new Ku(n.Tc,r,n.persistence.jo()),r.vi(t)})).next((function(e){for(var n=[],r=[],a=pa(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];a=a.add(m.key)}}return i.Zo(t,a).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=a.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function Zu(t,e){var n=wr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Gr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=us.resolve();return o.forEach((function(t){a=a.next((function(){return r.di(e,t)})).next((function(e){var o=e,a=n.ks.get(t);br(null!==a),(!o||o.version.u(a)<0)&&(o=i.Cs(t,o,n))&&r.hi(o,n.Os)}))})),a.next((function(){return t.Ho.Ni(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function tc(t){var e=wr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.wo.Wi(t)}))}function ec(t,e){var n=wr(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Gr:!0});i=n.dc;var a=[];e.Oe.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.wo.rr(t,e.Ke,o).next((function(){return n.wo.sr(t,e.Ue,o)})));var u=e.resumeToken;if(u.o()>0){var c=s.$t(u,r).Lt(t.Ss);i=i.Ht(o,c),function(t,e,n){return br(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(s,c,e)&&a.push(n.wo.Yi(t,c))}}}));var s=aa();if(e.Me.forEach((function(r,i){e.Le.has(r)&&a.push(n.persistence.mi.Mr(t,r))})),a.push(nc(t,o,e.Me,r,void 0).next((function(t){s=t}))),!r.isEqual(zr.min())){var u=n.wo.Wi(t).next((function(e){return n.wo.Gi(t,t.Ss,r)}));a.push(u)}return us.$n(a).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,s)}))})).then((function(t){return n.dc=i,t}))}function nc(t,e,n,r,i){var o=pa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=aa();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a instanceof ki&&a.version.isEqual(zr.min())?(e.fi(n,u),o=o.Ht(n,a)):null==s||a.version.u(s.version)>0||0===a.version.u(s.version)&&s.hasPendingWrites?(e.hi(a,u),o=o.Ht(n,a)):vr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function rc(t,e){var n=wr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.pi(t,e)}))}function ic(t,e){var n=wr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.wo.nr(t,e).next((function(i){return i?(r=i,us.resolve(r)):n.wo.Ui(t).next((function(i){return r=new vo(e,i,0,t.Ss),n.wo.zi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function oc(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:r=wr(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.mi.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!ps(a=s.sent()))throw a;return vr("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function ac(t,e,n){var r=wr(t),i=zr.min(),o=pa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=wr(t),i=r.wc.get(n);return void 0!==i?us.resolve(r.dc.get(i)):r.wo.nr(e,n)}(r,t,ao(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.wo.ar(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:zr.min(),n?o:pa())})).next((function(t){return{documents:t,Pc:o}}))}))}function sc(t,e){var n=wr(t),r=wr(n.wo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function uc(t){var e=wr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=wr(t),i=aa(),o=Xs(n),a=ju(e),s=IDBKeyRange.lowerBound(o,!0);return a.ls({index:Ms.readTimeIndex,range:s},(function(t,e){var n=Ys(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{gs:i,readTime:$s(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.gs,r=t.readTime;return e.Ec=r,n}))}function cc(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){return[2,(e=wr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ju(t),n=zr.min();return e.ls({index:Ms.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=$s(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function lc(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,p;return(0,fr.Jh)(this,(function(d){switch(d.label){case 0:for(i=wr(t),o=pa(),a=aa(),s=ha(),u=0,c=n;u<c.length;u++)l=c[u],h=e.yc(l.metadata.name),l.document&&(o=o.add(h)),a=a.Ht(h,e.gc(l)),s=s.Ht(h,e.Vc(l.metadata.readTime));return f=i.Tc.Or({Gr:!0}),[4,ic(i,function(t){return ao(Zi(Kr.ct("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return nc(t,f,a,zr.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.wo.Zi(t,p.targetId).next((function(){return i.wo.sr(t,o,p.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function hc(t,e,n){return void 0===n&&(n=pa()),(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,ic(t,ao(iu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=wr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Ma(e.readTime);if(r.Mt.u(o)>=0)return i.To.qs(t,e);var a=r.$t(Cr.h,o);return i.dc=i.dc.Ht(a.targetId,a),i.wo.Yi(t,a).next((function(){return i.wo.Zi(t,r.targetId)})).next((function(){return i.wo.sr(t,n,r.targetId)})).next((function(){return i.To.qs(t,e)}))}))]}}))}))}var fc=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ls=function(t,e){return us.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Ma(n.createTime)}),us.resolve()},t.prototype.Bs=function(t,e){return us.resolve(this.vc.get(e))},t.prototype.qs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:iu(t.bundledQuery),readTime:Ma(t.readTime)}}(e)),us.resolve()},t}(),pc=function(){function t(){this.Sc=new ra(dc.Dc),this.Cc=new ra(dc.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.ir=function(t,e){var n=new dc(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.cr=function(t,e){this.Fc(new dc(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.cr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new Qr(new Kr([])),r=new dc(n,t),i=new dc(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new Qr(new Kr([])),n=new dc(e,t),r=new dc(e,t+1),i=pa();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new dc(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),dc=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return Qr.J(t.key,e.key)||Sr(t.$c,e.$c)},t.xc=function(t,e){return Sr(t.$c,e.$c)||Qr.J(t.key,e.key)},t}(),vc=function(){function t(t,e){this.Ii=t,this.mi=e,this.Ho=[],this.Bc=1,this.qc=new ra(dc.Dc)}return t.prototype.Pi=function(t){return us.resolve(0===this.Ho.length)},t.prototype.yi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new Ws(i,e,n,r);this.Ho.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.qc=this.qc.add(new dc(u.key,i)),this.Ii.Qs(t,u.key.path.Z())}return us.resolve(o)},t.prototype.gi=function(t,e){return us.resolve(this.Uc(e))},t.prototype.pi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return us.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.bi=function(){return us.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.vi=function(t){return us.resolve(this.Ho.slice())},t.prototype.Si=function(t,e){var n=this,r=new dc(e,0),i=new dc(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),us.resolve(o)},t.prototype.Di=function(t,e){var n=this,r=new ra(Sr);return e.forEach((function(t){var e=new dc(t,0),i=new dc(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),us.resolve(this.Kc(r))},t.prototype.xi=function(t,e){var n=e.path,r=n.length+1,i=n;Qr.Et(i)||(i=i.child(""));var o=new dc(new Qr(i),0),a=new ra(Sr);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(a=a.add(t.$c)),!0)}),o),us.resolve(this.Kc(a))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.Ni=function(t,e){var n=this;br(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return us.forEach(e.mutations,(function(i){var o=new dc(i.key,e.batchId);return r=r.delete(o),n.mi.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Fi=function(t){},t.prototype.Mi=function(t,e){var n=new dc(e,0),r=this.qc.Pe(n);return us.resolve(e.isEqual(r&&r.key))},t.prototype.ki=function(t){return this.Ho.length,us.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),yc=function(){function t(t,e){this.Ii=t,this.jc=e,this.docs=new ta(Qr.J),this.size=0}return t.prototype.hi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.jc(e);return this.docs=this.docs.Ht(r,{_i:e,size:a,readTime:n}),this.size+=a-o,this.Ii.Qs(t,r.path.Z())},t.prototype.fi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.di=function(t,e){var n=this.docs.get(e);return us.resolve(n?n._i:null)},t.prototype.getEntries=function(t,e){var n=this,r=sa();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e._i:null)})),us.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=ca(),i=new Qr(e.path.child("")),o=this.docs.ne(i);o.ae();){var a=o.ce(),s=a.key,u=a.value,c=u._i,l=u.readTime;if(!e.path.st(s.path))break;l.u(n)<=0||c instanceof Ai&&ho(e,c)&&(r=r.Ht(c.key,c))}return us.resolve(r)},t.prototype.Gc=function(t,e){return us.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new gc(this)},t.prototype.Lr=function(t){return us.resolve(this.size)},t}(),gc=function(t){function e(e){var n=this;return(n=t.call(this)||this).zr=e,n}return(0,fr.ZT)(e,t),e.prototype.Ti=function(t){var e=this,n=[];return this.ci.forEach((function(r,i){i&&i._i?n.push(e.zr.hi(t,i._i,e.ui(r))):e.zr.fi(r)})),us.$n(n)},e.prototype.wi=function(t,e){return this.zr.di(t,e)},e.prototype.Ei=function(t,e){return this.zr.getEntries(t,e)},e}(yu),mc=function(){function t(t){this.persistence=t,this.zc=new vu((function(t){return Oi(t)}),Mi),this.lastRemoteSnapshotVersion=zr.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new pc,this.targetCount=0,this.Yc=Su.Bi()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),us.resolve()},t.prototype.Wi=function(t){return us.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return us.resolve(this.Hc)},t.prototype.Ui=function(t){return this.highestTargetId=this.Yc.next(),us.resolve(this.highestTargetId)},t.prototype.Gi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),us.resolve()},t.prototype.Hi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new Su(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.zi=function(t,e){return this.Hi(e),this.targetCount+=1,us.resolve()},t.prototype.Yi=function(t,e){return this.Hi(e),us.resolve()},t.prototype.Xi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,us.resolve()},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.zc.delete(a),o.push(r.Zi(t,s.targetId)),i++)})),us.$n(o).next((function(){return i}))},t.prototype.er=function(t){return us.resolve(this.targetCount)},t.prototype.nr=function(t,e){var n=this.zc.get(e)||null;return us.resolve(n)},t.prototype.sr=function(t,e,n){return this.Jc.Nc(e,n),us.resolve()},t.prototype.rr=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.mi,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),us.$n(i)},t.prototype.Zi=function(t,e){return this.Jc.kc(e),us.resolve()},t.prototype.ar=function(t,e){var n=this.Jc.Lc(e);return us.resolve(n)},t.prototype.Mi=function(t,e){return us.resolve(this.Jc.Mi(e))},t}(),_c=function(){function t(t,e){var n=this;this.Xc={},this.ro=new Hr(0),this.oo=!1,this.oo=!0,this.mi=t(this),this.wo=new mc(this),this.Ii=new uu,this.Eo=function(t,e){return new yc(t,(function(t){return n.mi.Zc(t)}))}(this.Ii),this.Kt=new Js(e),this.To=new fc(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$o=function(){return this.oo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Vo=function(){},t.prototype.po=function(){},t.prototype.jo=function(){return this.Ii},t.prototype.Wo=function(t){var e=this.Xc[t.R()];return e||(e=new vc(this.Ii,this.mi),this.Xc[t.R()]=e),e},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;vr("MemoryPersistence","Starting transaction:",t);var i=new bc(this.ro.next());return this.mi.ta(),n(i).next((function(t){return r.mi.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.bs(),t}))},t.prototype.na=function(t,e){return us.Bn(Object.values(this.Xc).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),bc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ss=e,n}return(0,fr.ZT)(e,t),e}(Es),wc=function(){function t(t){this.persistence=t,this.sa=new pc,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw _r()},enumerable:!1,configurable:!0}),t.prototype.ir=function(t,e,n){return this.sa.ir(n,e),this.oa.delete(n.toString()),us.resolve()},t.prototype.cr=function(t,e,n){return this.sa.cr(n,e),this.oa.add(n.toString()),us.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),us.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Cr();return r.ar(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Xi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.kr().Or();return us.forEach(this.oa,(function(r){var i=Qr.ft(r);return e.ca(t,i).next((function(t){t||n.fi(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.Mr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return us.Bn([function(){return us.resolve(n.sa.Mi(e))},function(){return n.persistence.Cr().Mi(t,e)},function(){return n.persistence.na(t,e)}])},t}();function Ec(t,e){return"firestore_clients_"+t+"_"+e}function Tc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function Sc(t,e){return"firestore_targets_"+t+"_"+e}var xc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new kr(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(yr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ic=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new kr(r.error.code,r.error.message)),i?new t(e,r.state,o):(yr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Cc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=va(),a=0;i&&a<r.activeTargetIds.length;++a)i=li(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(yr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ac=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(yr("SharedClientState","Failed to parse online state: "+e),null)},t}(),kc=function(){function t(){this.activeTargetIds=va()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Nc=function(){function t(t,e,n,r,i){this.window=t,this.no=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new ta(Sr),this.Ir=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=Ec(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new kc),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return(0,fr.Jh)(this,(function(f){switch(f.label){case 0:return[4,this.fa.Ko()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(Ec(this.persistenceKey,r)))&&(o=Cc.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(a=this.storage.getItem(this.ga))&&(s=this.ba(a))&&this.va(s),u=0,c=this.Ia;u<c.length;u++)l=c[u],this.Ea(l);return this.Ia=[],this.window.addEventListener("unload",(function(){return h.$o()})),this.Ir=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(Sc(this.persistenceKey,t));if(n){var r=Ic.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(Sc(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.$o=function(){this.Ir&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Ir=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return vr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){vr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){vr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(vr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.no.vo((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var t,e,r,i,o,a;return(0,fr.Jh)(this,(function(s){if(this.Ir){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(a=function(t){var e=Hr.U;if(null!=t)try{var n=JSON.parse(t);br("number"==typeof n),e=n}catch(t){yr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Hr.U&&this.L(a);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new xc(this.currentUser,t,e,n),i=Tc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=Tc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=Sc(this.persistenceKey,t),i=new Ic(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return Cc.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return xc.aa(new Fr(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return Ic.aa(r,e)},t.prototype.ba=function(t){return Ac.aa(t)},t.prototype.Xa=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(vr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.fa.iu(a,s).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=va();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),Pc=function(){function t(){this.ru=new kc,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new kc,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.$o=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),Rc=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.$o=function(){},t}(),Oc=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.$o=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){vr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){vr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Mc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Dc=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Lc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return(0,fr.ZT)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var a=new hr;a.listenOnce(ar.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case or.NO_ERROR:var e=a.getResponseJson();vr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case or.TIMEOUT:vr("Connection",'RPC "'+t+'" timed out'),o(new kr(Ar.DEADLINE_EXCEEDED,"Request time out"));break;case or.HTTP_ERROR:var n=a.getStatus();if(vr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ar).indexOf(e)>=0?e:Ar.UNKNOWN}(r.status);o(new kr(s,r.message))}else o(new kr(Ar.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new kr(Ar.UNAVAILABLE,"Connection failed."));break;default:_r()}}finally{vr("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new tr,i=ee(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(a.initMessageHeaders,e),(0,o.uI)()||(0,o.b$)()||(0,o.d)()||(0,o.w1)()||(0,o.Mn)()||(0,o.ru)()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");vr("Connection","Creating WebChannel: "+s,a);var u=r.createWebChannel(s,a),c=!1,l=!1,h=new Dc({du:function(t){l?vr("Connection","Not sending because WebChannel is closed:",t):(c||(vr("Connection","Opening WebChannel transport."),u.open(),c=!0),vr("Connection","WebChannel sending:",t),u.send(t))},wu:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,lr.EventType.OPEN,(function(){l||vr("Connection","WebChannel transport opened.")})),f(u,lr.EventType.CLOSE,(function(){l||(l=!0,vr("Connection","WebChannel transport closed"),h.Pu())})),f(u,lr.EventType.ERROR,(function(t){l||(l=!0,gr("Connection","WebChannel transport errored:",t),h.Pu(new kr(Ar.UNAVAILABLE,"The operation could not be completed")))})),f(u,lr.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];br(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){vr("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Ko[t];if(void 0!==e)return Zo(e)}(o),s=i.message;void 0===a&&(a=Ar.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Pu(new kr(a,s)),u.close()}else vr("Connection","WebChannel received:",n),h.yu(n)}})),f(i,sr.STAT_EVENT,(function(t){t.stat===ur?vr("Connection","Detected buffering proxy"):t.stat===cr&&vr("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Ru()}),0),h},e}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);vr("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return vr("RestConnection","Received: ",t),t}),(function(e){throw gr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.1",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=Mc[t];return this.Vu+"/v1/"+e+":"+n},t}());function Fc(){return"undefined"!=typeof window?window:null}function jc(){return"undefined"!=typeof document?document:null}function Uc(t){return new Na(t,!0)}var Vc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.no=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&vr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.no.mr(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),qc=function(){function t(t,e,n,r,i,o){this.no=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new Vc(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.no.mr(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===Ar.RESOURCE_EXHAUSTED?(yr(e.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===Ar.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new kr(Ar.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return(0,fr.mG)(t,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return vr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.no.ys((function(){return e.ju===t?n():(vr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Bc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,a}return(0,fr.ZT)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:_r()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(br(void 0===e||"string"==typeof e),Cr.fromBase64String(e||"")):(br(void 0===e||e instanceof Uint8Array),Cr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ar.UNKNOWN:Zo(t.code);return new kr(e,t.message||"")}(s);n=new Ta(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ja(t,r.document.name),o=Ma(r.document.updateTime);var s=new Si({mapValue:{fields:r.document.fields}}),u=(a=new Ai(i,o,s,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new wa(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ja(t,r.document),o=r.readTime?Ma(r.readTime):zr.min(),s=new ki(i,o),a=r.removedTargetIds||[],n=new wa([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ja(t,r.document),o=r.removedTargetIds||[],n=new wa([],o,i,null);else{if(!("filter"in e))return _r();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new Xo(r),o=l.targetId,n=new Ea(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return zr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?zr.min():e.readTime?Ma(e.readTime):zr.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=qa(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Di(r)?{documents:Ka(t,r)}:{query:Ja(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Ra(t,e.resumeToken):e.Mt.u(zr.min())>0&&(n.readTime=Pa(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _r()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=qa(this.Kt),e.removeTarget=t,this.eh(e)},e}(qc),Hc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,a._h=!1,a}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(br(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(br(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Ma(t.updateTime):Ma(e);n.isEqual(zr.min())&&(n=Ma(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ro(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ma(t.commitTime);return this.listener.wh(n,e)}return br(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=qa(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return za(e.Kt,t)}))};this.eh(n)},e}(qc),Gc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return(0,fr.ZT)(e,t),e.prototype.mh=function(){if(this.Ih)throw new kr(Ar.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===Ar.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===Ar.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),zc=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.mr("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(yr(e),this.Ph=!1):vr("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),Wc=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return(0,fr.mG)(o,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return el(this)?(vr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return(e=wr(t)).Fh.add(4),[4,Jc(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,Kc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new zc(n,r)};function Kc(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:if(!el(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Jc(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Yc(t,e){var n=wr(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),tl(n)?Zc(n):yl(n).Ju()&&Xc(n,e))}function Qc(t,e){var n=wr(t),r=yl(n);n.Nh.delete(e),r.Ju()&&$c(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():el(n)&&n.Mh.set("Unknown"))}function Xc(t,e){t.Lh.cn(e.targetId),yl(t).hh(e)}function $c(t,e){t.Lh.cn(e),yl(t).lh(e)}function Zc(t){t.Lh=new xa({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),yl(t).start(),t.Mh.yh()}function tl(t){return el(t)&&!yl(t).Hu()&&t.Nh.size>0}function el(t){return 0===wr(t).Fh.size}function nl(t){t.Lh=void 0}function rl(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return t.Nh.forEach((function(e,n){Xc(t,e)})),[2]}))}))}function il(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){return nl(t),tl(t)?(t.Mh.ph(e),Zc(t)):t.Mh.set("Unknown"),[2]}))}))}function ol(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:if(t.Mh.set("Online"),!(e instanceof Ta&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Nh.has(o)?[4,t.Ch.$h(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),vr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,al(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof wa?t.Lh.wn(e):e instanceof Ea?t.Lh.yn(e):t.Lh.In(e),n.isEqual(zr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,tc(t.Sh)];case 8:return i=a.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(Cr.h,n.Mt)),$c(t,e);var r=new vo(n.target,e,1,n.sequenceNumber);Xc(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return vr("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,al(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function al(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r=this;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:if(!ps(e))throw e;return t.Fh.add(1),[4,Jc(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return tc(t.Sh)}),t.fs.vo((function(){return(0,fr.mG)(r,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return vr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,Kc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function sl(t,e){return e().catch((function(n){return al(t,n,e)}))}function ul(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:e=wr(t),n=gl(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return el(t)&&t.xh.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,rc(e.Sh,r)];case 3:return null===(i=a.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=gl(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,al(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return cl(e)&&ll(e),[2]}}))}))}function cl(t){return el(t)&&!gl(t).Hu()&&t.xh.length>0}function ll(t){gl(t).start()}function hl(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return gl(t).Th(),[2]}))}))}function fl(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,fr.Jh)(this,(function(o){for(e=gl(t),n=0,r=t.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]}))}))}function pl(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=Ks.from(r,e,n),[4,sl(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,ul(t)];case 2:return o.sent(),[2]}}))}))}function dl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e&&gl(t).fh?[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return $o(r=e.code)&&r!==Ar.ABORTED?(n=t.xh.shift(),gl(t).Xu(),[4,sl(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,ul(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return cl(t)&&ll(t),[2]}}))}))}function vl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),e?(n.Fh.delete(2),[4,Kc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,Jc(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function yl(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=wr(t);return r.mh(),new Bc(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:rl.bind(null,t),Iu:il.bind(null,t),uh:ol.bind(null,t)}),t.Oh.push((function(n){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),tl(t)?Zc(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),nl(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function gl(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=wr(t);return r.mh(),new Hc(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:hl.bind(null,t),Iu:dl.bind(null,t),Eh:fl.bind(null,t),wh:pl.bind(null,t)}),t.Oh.push((function(n){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,ul(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(vr("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var ml=function(){this.Wh=void 0,this.listeners=[]},_l=function(){this.queries=new vu((function(t){return co(t)}),uo),this.onlineState="Unknown",this.jh=new Set};function bl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:if(n=wr(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ml),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.Gh(r)];case 2:return a.Wh=c.sent(),[3,4];case 3:return s=c.sent(),u=_s(s,"Initialization of query '"+lo(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&Sl(n),[2]}}))}))}function wl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,fr.Jh)(this,(function(s){return n=wr(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function El(t,e){for(var n=wr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hh(a)&&(r=!0);u.Wh=a}}r&&Sl(n)}function Tl(t,e,n){var r=wr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Sl(t){t.jh.forEach((function(t){t.next()}))}var xl=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ma(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=ma.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),Il=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),Cl=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return ja(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?Ga(this.Kt,t.document,!1):new ki(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return Ma(t)},t}(),Al=function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=kl(t)}return t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new Cl(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.yc(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||pa()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,lc(this.Sh,new Cl(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,hc(this.Sh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new bs(Object.assign({},this.progress),t))]}}))}))},t}();function kl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Nl=function(t){this.key=t},Pl=function(t){this.key=t},Rl=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=pa(),this.Ce=pa(),this.ll=fo(t),this._l=new ya(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new ga,i=e?e._l:this._l,o=e?e.Ce:this.Ce,a=i,s=!1,u=to(this.query)&&i.size===this.query.limit?i.last():null,c=eo(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var l=i.get(t),h=e instanceof Ai?e:null;h&&(h=ho(n.query,h)?h:null);var f=!!l&&n.Ce.has(l.key),p=!!h&&(h.bt||n.Ce.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.El(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.ll(h,u)>0||c&&n.ll(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),to(this.query)||eo(this.query))for(;a.size>this.query.limit;){var l=to(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{_l:a,wl:r,_c:s,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ti=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _r()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var a=e?this.Il():[],s=0===this.hl.size&&this.qe?1:0,u=s!==this.ul;return this.ul=s,0!==o.length||u?{snapshot:new ma(this.query,t._l,i,o,t.Ce,0===s,u,!1),ml:a}:{ml:a}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ti({_l:this._l,wl:new ga,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=pa(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new Pl(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new Nl(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=pa();var e=this.dl(t.documents);return this.Ti(e,!0)},t.prototype.Pl=function(){return ma.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),Ol=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ml=function(t){this.key=t,this.yl=!1},Dl=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new vu((function(t){return co(t)}),uo),this.Dl=new Map,this.Cl=[],this.xl=new ta(Qr.J),this.Nl=new Map,this.Fl=new pc,this.Ol={},this.kl=new Map,this.Ml=Su.qi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function Ll(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return n=hh(t),(o=n.Sl.get(e))?(r=o.targetId,n.pl.ka(r),i=o.view.Pl(),[3,4]):[3,1];case 1:return[4,ic(n.Sh,ao(e))];case 2:return a=u.sent(),s=n.pl.ka(a.targetId),r=a.targetId,[4,Fl(n,e,r,"current"===s)];case 3:i=u.sent(),n.$l&&Yc(n.gl,a),u.label=4;case 4:return[2,i]}}))}))}function Fl(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return(0,fr.Jh)(this,(function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return(i=e.view.dl(n))._c?[4,ac(t.Sh,e.query,!1).then((function(t){var n=t.documents;return e.view.dl(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.Oe.get(e.targetId),a=e.view.Ti(i,t.$l,o),[2,(Ql(t,e.targetId,a.ml),a.snapshot)]}}))}))}(t,e,n,r)},[4,ac(t.Sh,e,!0)];case 1:return i=l.sent(),o=new Rl(e,i.Pc),a=o.dl(i.documents),s=ba.Be(n,r&&"Offline"!==t.onlineState),u=o.Ti(a,t.$l,s),Ql(t,n,u.ml),c=new Ol(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),u.snapshot)]}}))}))}function jl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return n=wr(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!uo(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,oc(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),Qc(n.gl,r.targetId),Jl(n,r.targetId)})).catch(du)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Jl(n,r.targetId),[4,oc(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ul(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:r=fh(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=wr(t),i=Gr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),pa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=jo(c,n.get(c.key));null!=l&&a.push(new Bo(c.key,l,Ii(l.proto.mapValue),Oo.exists(!0)))}return r.Ho.yi(t,i,a,e)}))})).then((function(t){var e=t.Fs(n);return{batchId:t.batchId,ci:e}}))}(r.Sh,e)];case 2:return i=s.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new ta(Sr)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,Zl(r,i.ci)];case 3:return s.sent(),[4,ul(r.gl)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=_s(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Vl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:n=wr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ec(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(br(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?br(r.yl):t.Ke.size>0&&(br(r.yl),r.yl=!1))})),[4,Zl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,du(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ql(t,e,n){var r=wr(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=wr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&Sl(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Bl(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:return(r=wr(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(a=(a=new ta(Qr.J)).Ht(o,new ki(o,zr.min())),s=pa().add(o),u=new _a(zr.min(),new Map,new ra(Sr),a,s),[4,Vl(r,u)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),$l(r),[3,4];case 2:return[4,oc(r.Sh,e,!1).then((function(){return Jl(r,e,n)})).catch(du)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Hl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:n=wr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Zu(n.Sh,e)];case 2:return i=o.sent(),Kl(n,r,null),Wl(n,r),n.pl.Fa(r,"acknowledged"),[4,Zl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,du(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Gl(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:r=wr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.gi(t,e).next((function(e){return br(null!==e),r=e.keys(),n.Ho.Ni(t,e)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),Kl(r,e,n),Wl(r,e),r.pl.Fa(e,"rejected",n),[4,Zl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,du(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function zl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:el((n=wr(t)).gl)||vr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=wr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.bi(t)}))}(n.Sh)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=s.sent(),a=_s(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Wl(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function Kl(t,e,n){var r=wr(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function Jl(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.Mi(e)||Yl(t,e)}))}function Yl(t,e){var n=t.xl.get(e);null!==n&&(Qc(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),$l(t))}function Ql(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Nl?(t.Fl.ir(o.key,e),Xl(t,o)):o instanceof Pl?(vr("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.cr(o.key,e),t.Fl.Mi(o.key)||Yl(t,o.key)):_r()}}function Xl(t,e){var n=e.key;t.xl.get(n)||(vr("SyncEngine","New document in limbo: "+n),t.Cl.push(n),$l(t))}function $l(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Ml(e)),t.xl=t.xl.Ht(e,n),Yc(t.gl,new vo(ao(Zi(e.path)),n,2,Hr.U))}}function Zl(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return r=wr(t),i=[],o=[],a=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,s){a.push(r.Bl(s,e,n).then((function(t){if(t){r.$l&&r.pl.qa(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ju.cc(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vl.uh(i),[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return(0,fr.Jh)(this,(function(h){switch(h.label){case 0:n=wr(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return us.forEach(e,(function(e){return us.forEach(e.rc,(function(r){return n.persistence.mi.ir(t,e.targetId,r)})).next((function(){return us.forEach(e.oc,(function(r){return n.persistence.mi.cr(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!ps(r=h.sent()))throw r;return vr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.dc.get(s),c=u.Mt,l=u.Bt(c),n.dc=n.dc.Ht(s,l));return[2]}}))}))}(r.Sh,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function th(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return(n=wr(t)).currentUser.isEqual(e)?[3,3]:(vr("SyncEngine","User change. New user:",e.R()),[4,$u(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new kr(Ar.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,Zl(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function eh(t,e){var n=wr(t),r=n.Nl.get(e);if(r&&r.yl)return pa().add(r.key);var i=pa(),o=n.Dl.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Sl.get(u);i=i.ye(c.view.fl)}return i}function nh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,ac((n=wr(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Ql(n,e.targetId,i.ml),i)]}}))}))}function rh(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){return[2,uc((e=wr(t)).Sh).then((function(t){return Zl(e,t)}))]}))}))}function ih(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=wr(t),r=wr(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vi(t,e).next((function(e){return e?n.Ic.Zo(t,e):us.resolve(null)}))}))}((i=wr(t)).Sh,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,ul(i.gl)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Kl(i,e,r||null),Wl(i,e),function(t,e){wr(wr(t).Ho).Fi(e)}(i.Sh,e)):_r(),a.label=4;case 4:return[4,Zl(i,o)];case 5:return a.sent(),[3,7];case 6:vr("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function oh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return(0,fr.Jh)(this,(function(l){switch(l.label){case 0:return hh(n=wr(t)),fh(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,ah(n,r.rt())]);case 1:return i=l.sent(),n.Ll=!0,[4,vl(n.gl,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],Yc(n.gl,s);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(u=[],c=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?u.push(e):c=c.then((function(){return Jl(n,e),oc(n.Sh,e,!0)})),Qc(n.gl,e)})),[4,c]);case 4:return l.sent(),[4,ah(n,u)];case 5:return l.sent(),function(t){var e=wr(t);e.Nl.forEach((function(t,n){Qc(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new ta(Qr.J)}(n),n.Ll=!1,[4,vl(n.gl,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function ah(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,p,d,v;return(0,fr.Jh)(this,(function(y){switch(y.label){case 0:n=wr(t),r=[],i=[],o=0,a=e,y.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Dl.get(s))&&0!==c.length?[4,ic(n.Sh,ao(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=h[l],p=n.Sl.get(f),[4,nh(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,sc(n.Sh,s)];case 8:return v=y.sent(),[4,ic(n.Sh,v)];case 9:return u=y.sent(),[4,Fl(n,sh(v),s,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function sh(t){return $i(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function uh(t){var e=wr(t);return wr(wr(e.Sh).persistence).Ko()}function ch(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return(i=wr(t)).Ll?(vr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,uc(i.Sh)];case 3:return o=s.sent(),a=_a.$e(e,"current"===n),[4,Zl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,oc(i.Sh,e,!0)];case 6:return s.sent(),Jl(i,e,r),[3,8];case 7:_r(),s.label=8;case 8:return[2]}}))}))}function lh(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return(0,fr.Jh)(this,(function(p){switch(p.label){case 0:if(!(r=hh(t)).Ll)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Dl.has(a)?(vr("SyncEngine","Adding an already active target "+a),[3,5]):[4,sc(r.Sh,a)]):[3,6];case 2:return s=p.sent(),[4,ic(r.Sh,s)];case 3:return u=p.sent(),[4,Fl(r,sh(s),u.targetId,!1)];case 4:p.sent(),Yc(r.gl,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,oc(r.Sh,t,!1).then((function(){Qc(r.gl,t),Jl(r,t)})).catch(du)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function hh(t){var e=wr(t);return e.gl.Ch.Bh=Vl.bind(null,e),e.gl.Ch.Sn=eh.bind(null,e),e.gl.Ch.$h=Bl.bind(null,e),e.vl.uh=El.bind(null,e.Vl),e.vl.ql=Tl.bind(null,e.Vl),e}function fh(t){var e=wr(t);return e.gl.Ch.qh=Hl.bind(null,e),e.gl.Ch.Uh=Gl.bind(null,e),e}function ph(t,e,n){var r=wr(t);(function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=wr(t),r=Ma(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.To.Ls(t,e.id)})).then((function(t){return!!t&&t.createTime.u(r)>=0}))}(t.Sh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.Ul(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ql(kl(r)),i=new Al(r,t.Sh,e.Kt),[4,e.Kl()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.ol(o)]:[3,10];case 7:return(a=c.sent())&&n.Ql(a),[4,e.Kl()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,Zl(t,s.gs,void 0)];case 12:return c.sent(),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.To.$s(t,e)}))}(t.Sh,r)];case 13:return c.sent(),n.Ul(s.progress),[3,15];case 14:return gr("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.Wl(u),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.pl.ja()}))}var dh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return this.Kt=Uc(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Xu(this.persistence,new Yu,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new _c(wc.ra,this.Kt)},t.prototype.jl=function(t){return new Pc},t.prototype.terminate=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.$o()];case 1:return t.sent(),[4,this.persistence.$o()];case 2:return t.sent(),[2]}}))}))},t}(),vh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,fr.ZT)(e,t),e.prototype.initialize=function(e){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,cc(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,fh(this.Xl.fa)];case 4:return n.sent(),[4,ul(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Xu(this.persistence,new Yu,t.Yl,this.Kt)},e.prototype.Hl=function(t){var e=this.persistence.mi.dr;return new Pu(e,t.fs)},e.prototype.Gl=function(t){var e=Wu(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?pu.Zs(this.cacheSizeBytes):pu.ni;return new Hu(this.synchronizeTabs,e,t.clientId,n,t.fs,Fc(),jc(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new Pc},e}(dh),yh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,fr.ZT)(e,t),e.prototype.initialize=function(e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof Nc?(this.pl.fa={nu:ih.bind(null,n),su:ch.bind(null,n),iu:lh.bind(null,n),Ko:uh.bind(null,n),eu:rh.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.yo((function(t){return(0,fr.mG)(r,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return[4,oh(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Ir?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=Fc();if(!Nc.Wn(e))throw new kr(Ar.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Wu(t.gu.T,t.gu.persistenceKey);return new Nc(e,t.fs,n,t.clientId,t.Yl)},e}(vh),gh=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return ql(n.fa,t,1)},this.gl.Ch.s_=th.bind(null,this.fa),[4,vl(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new _l},t.prototype.Zl=function(t){var e,n=Uc(t.gu.T),r=(e=t.gu,new Lc(e));return function(t,e,n){return new Gc(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,a=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return ql(a.fa,t,0)},o=Oc.Wn()?new Oc:new Rc,new Wc(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,a){var s=new Dl(t,e,n,r,i,o);return a&&(s.Ll=!0),s}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=wr(t),vr("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,Jc(e)];case 1:return n.sent(),e.kh.$o(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}();function mh(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return(0,fr.mG)(this,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return[2]}))}))},releaseLock:function(){}}}var _h=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),bh=function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new ss,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new Il(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),wh=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new kr(Ar.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new Yr(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}(),Eh=function(t){this._methodName=t};function Th(t,e,n){if(!n)throw new kr(Ar.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Sh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new kr(Ar.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function xh(t,e,n,r){if(!0===e&&!0===r)throw new kr(Ar.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ih(t){if(!Qr.Et(t))throw new kr(Ar.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ch(t){if(Qr.Et(t))throw new kr(Ar.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ah(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":_r()}function kh(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new kr(Ar.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ah(t);throw new kr(Ar.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Nh(t,e){if(e<=0)throw new kr(Ar.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Ph=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new kr(Ar.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kr(Ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,xh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Rh=new Map,Oh=function(){function t(t,e){this.w_="(lite)",this.E_=new Ph({}),this.T_=!1,t instanceof Lr?(this.I_=t,this.m_=new Ur):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new kr(Ar.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lr(t.options.projectId)}(t),this.m_=new Vr(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new kr(Ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new kr(Ar.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Ph(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Ur;switch(t.type){case"gapi":var e=t.client;return br(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Br(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new kr(Ar.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=Rh.get(this))&&(vr("ComponentProvider","Removing Datastore"),Rh.delete(this),t.terminate()),Promise.resolve();var t},t}(),Mh=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Lh(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Dh=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Lh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Zi(r))||this).firestore=e,i.D_=r,i.type="collection",i}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Mh(this.firestore,null,new Qr(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Dh);function Fh(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Pr&&(t=t._),Th("collection","path",e),t instanceof Oh)return Ch(n=Kr.ct.apply(Kr,(0,fr.pr)([e],r))),new Lh(t,null,n);if(!(t instanceof Mh||t instanceof Lh))throw new kr(Ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ch(n=Kr.ct.apply(Kr,(0,fr.pr)([t.path],r)).child(Kr.ct(e))),new Lh(t.firestore,null,n)}function jh(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Pr&&(t=t._),1===arguments.length&&(e=Tr.t()),Th("doc","path",e),t instanceof Oh)return Ih(n=Kr.ct.apply(Kr,(0,fr.pr)([e],r))),new Mh(t,null,new Qr(n));if(!(t instanceof Mh||t instanceof Lh))throw new kr(Ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ih(n=t.D_.child(Kr.ct.apply(Kr,(0,fr.pr)([e],r)))),new Mh(t.firestore,t instanceof Lh?t.v_:null,new Qr(n))}function Uh(t,e){return t instanceof Pr&&(t=t._),e instanceof Pr&&(e=e._),(t instanceof Mh||t instanceof Lh)&&(e instanceof Mh||e instanceof Lh)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Vh(t,e){return t instanceof Pr&&(t=t._),e instanceof Pr&&(e=e._),t instanceof Dh&&e instanceof Dh&&t.firestore===e.firestore&&uo(t.C_,e.C_)&&t.v_===e.v_}var qh=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new kr(Ar.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new kr(Ar.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return Sr(this.x_,t.x_)||Sr(this.N_,t.N_)},t}(),Bh=/^__.*__$/,Hh=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new Bo(t,this.data,this.zt,e,this.fieldTransforms):new qo(t,this.data,e,this.fieldTransforms)},t}(),Gh=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Bo(t,this.data,this.zt,e,this.fieldTransforms)},t}();function zh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _r()}}var Wh=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return pf(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(zh(this.k_)&&Bh.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Kh=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Uc(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Wh({k_:t,methodName:e,j_:n,path:Yr.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Jh(t){var e=t.p_(),n=Uc(t.I_);return new Kh(t.I_,!!e.ignoreUndefinedProperties,n)}function Yh(t,e,n,r,i,o){void 0===o&&(o={});var a=t.G_(o.merge||o.mergeFields?2:0,e,n,i);cf("Data must be an object, but it was:",a,r);var s,u,c=sf(r,a);if(o.merge)s=new ti(a.zt),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=lf(e,f[h],n);if(!a.contains(p))throw new kr(Ar.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");df(l,p)||l.push(p)}s=new ti(l),u=a.fieldTransforms.filter((function(t){return s.It(t.field)}))}else s=null,u=a.fieldTransforms;return new Hh(new Si(c),s,u)}var Qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Eh);function Xh(t,e,n){return new Wh({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var $h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){return new Po(t.path,new To)},e.prototype.isEqual=function(t){return t instanceof e},e}(Eh),Zh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){var e=Xh(this,t,!0),n=this.H_.map((function(t){return af(t,e)})),r=new So(n);return new Po(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Eh),tf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){var e=Xh(this,t,!0),n=this.H_.map((function(t){return af(t,e)})),r=new Io(n);return new Po(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Eh),ef=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){var e=new Ao(t.Kt,mo(t.Kt,this.J_));return new Po(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Eh);function nf(t,e,n,r){var i=t.G_(1,e,n);cf("Data must be an object, but it was:",i,r);var o=[],a=new xi;$r(r,(function(t,r){var s=ff(e,t,n);r instanceof Pr&&(r=r._);var u=i.U_(s);if(r instanceof Qh)o.push(s);else{var c=af(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new ti(o);return new Gh(a.yt(),s,i.fieldTransforms)}function rf(t,e,n,r,i,o){var a=t.G_(1,e,n),s=[lf(e,r,n)],u=[i];if(o.length%2!=0)throw new kr(Ar.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(lf(e,o[c])),u.push(o[c+1]);for(var l=[],h=new xi,f=s.length-1;f>=0;--f)if(!df(l,s[f])){var p=s[f],d=u[f];d instanceof Pr&&(d=d._);var v=a.U_(p);if(d instanceof Qh)l.push(p);else{var y=af(d,v);null!=y&&(l.push(p),h.set(p,y))}}var g=new ti(l);return new Gh(h.yt(),g,a.fieldTransforms)}function of(t,e,n,r){return void 0===r&&(r=!1),af(n,t.G_(r?4:3,e))}function af(t,e){if(t instanceof Pr&&(t=t._),uf(t))return cf("Unsupported field value:",e,t),sf(t,e);if(t instanceof Eh)return function(t,e){if(!zh(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=af(o[i],e.Q_(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Pr&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mo(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Gr.fromDate(t);return{timestampValue:Pa(e.Kt,n)}}if(t instanceof Gr)return n=new Gr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Pa(e.Kt,n)};if(t instanceof qh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nr)return{bytesValue:Ra(e.Kt,t.l)};if(t instanceof Mh){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Da(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Ah(t))}(t,e)}function sf(t,e){var n={};return Zr(t)?e.path&&e.path.length>0&&e.zt.push(e.path):$r(t,(function(t,r){var i=af(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function uf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gr||t instanceof qh||t instanceof Nr||t instanceof Mh||t instanceof Eh)}function cf(t,e,n){if(!uf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ah(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function lf(t,e,n){if(e instanceof Pr&&(e=e._),e instanceof wh)return e.d_;if("string"==typeof e)return ff(t,e);throw pf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var hf=new RegExp("[~\\*/\\[\\]]");function ff(t,e,n){if(e.search(hf)>=0)throw pf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(wh.bind.apply(wh,(0,fr.pr)([void 0],e.split("."))))).d_}catch(r){throw pf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function pf(t,e,n,r,i){var o=r&&!r.nt(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new kr(Ar.INVALID_ARGUMENT,(s+=". ")+t+u)}function df(t,e){return t.some((function(t){return t.isEqual(e)}))}var vf=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new kr(Ar.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return n=wr(t),r=qa(n.Kt)+"/documents",i={documents:e.map((function(t){return Fa(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){br(!!e.found),e.found.name,e.found.updateTime;var n=ja(t,e.found.name),r=Ma(e.found.updateTime),i=new Si({mapValue:{fields:e.found.fields}});return new Ai(n,r,i,{})}(t,e):"missing"in e?function(t,e){br(!!e.missing),br(!!e.readTime);var n=ja(t,e.missing),r=Ma(e.readTime);return new ki(n,r)}(t,e):_r()}(n.Kt,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());br(!!e),s.push(e)})),s)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof ki||t instanceof Ai?n.sf(t):_r()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Yo(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Qr.ft(n);e.mutations.push(new Qo(r,e.Gt(r)))})),[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return n=wr(t),r=qa(n.Kt)+"/documents",i={writes:e.map((function(t){return za(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Ai)e=t.version;else{if(!(t instanceof ki))throw _r();e=zr.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new kr(Ar.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Oo.updateTime(e):Oo.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(zr.min()))throw new kr(Ar.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oo.updateTime(e)}return Oo.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),yf=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Vc(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return(0,fr.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,fr.Jh)(this,(function(r){return t=new vf(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!ui(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!$o(e)}return!1},t}(),gf=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=Fr.UNAUTHENTICATED,this.clientId=Tr.t(),this._f=function(){},this.N=new ss,this.credentials.S((function(t){vr("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new kr(Ar.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new ss;return this.fs.Tf((function(){return(0,fr.mG)(t,void 0,void 0,(function(){var t,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=_s(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function mf(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i=this;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return t.fs.Af(),vr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.vo((function(){return(0,fr.mG)(i,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return[4,$u(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Vo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function _f(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,bf(t)];case 1:return n=i.sent(),vr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.vo((function(){return function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return(n=wr(t)).fs.Af(),vr("RemoteStore","RemoteStore received new credentials"),r=el(n),n.Fh.add(3),[4,Jc(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,Kc(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function bf(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(vr("FirestoreClient","Using default OfflineComponentProvider"),[4,mf(t,new dh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function wf(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(vr("FirestoreClient","Using default OnlineComponentProvider"),[4,_f(t,new gh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Ef(t){return bf(t).then((function(t){return t.persistence}))}function Tf(t){return bf(t).then((function(t){return t.Sh}))}function Sf(t){return wf(t).then((function(t){return t.gl}))}function xf(t){return wf(t).then((function(t){return t.fa}))}function If(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,wf(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Ll.bind(null,e.fa),n.Jh=jl.bind(null,e.fa),n)]}}))}))}function Cf(t,e,n){var r=this;void 0===n&&(n={});var i=new ss;return t.fs.ys((function(){return(0,fr.mG)(r,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new _h({next:function(o){e.ys((function(){return wl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new kr(Ar.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new kr(Ar.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new xl(Zi(n.path),o,{includeMetadataChanges:!0,sl:!0});return bl(t,a)},[4,If(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function Af(t,e,n){var r=this;void 0===n&&(n={});var i=new ss;return t.fs.ys((function(){return(0,fr.mG)(r,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new _h({next:function(n){e.ys((function(){return wl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new kr(Ar.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new xl(n,o,{includeMetadataChanges:!0,sl:!0});return bl(t,a)},[4,If(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var kf=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Vc(this,"async_queue_retry"),this.vf=function(){var e=jc();e&&vr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=jc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=jc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.vo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!ps(t=n.sent()))throw t;return vr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,yr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.mr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=ms.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&_r()},t.prototype.Af=function(){},t.prototype.Nf=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Nf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new kf,r.w_="name"in e?e.name:"[DEFAULT]",r}return(0,fr.ZT)(e,t),e.prototype.b_=function(){return this.Lf||Rf(this),this.Lf.terminate()},e}(Oh);function Pf(t){return t.Lf||Rf(t),t.Lf.df(),t.Lf}function Rf(t){var e=t.p_(),n=function(t,e,n){return new Dr(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new gf(t.m_,t.Mf,n)}function Of(t,e,n){var r=this,i=new ss;return t.fs.enqueue((function(){return(0,fr.mG)(r,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,mf(t,n)];case 1:return o.sent(),[4,_f(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ar.FAILED_PRECONDITION||t.code===Ar.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Mf(t){if(t.R_||t.P_)throw new kr(Ar.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Df=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),hi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ri(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(ii(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw _r()}},t.prototype.jf=function(t,e){var n=this,r={};return $r(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new qh(ri(t.latitude),ri(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=ai(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(si(t));default:return null}},t.prototype.Bf=function(t){var e=ni(t);return new Gr(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=Kr.ct(t);br(as(n));var r=new Lr(n.get(1),n.get(3)),i=new Qr(n.X(5));return r.isEqual(e)||yr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Lf=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Mh(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Ff(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(jf("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Lf);function jf(t,e){return"string"==typeof e?ff(t,e):e instanceof Pr?e._.d_:e.d_}function Uf(t){if(eo(t)&&0===t.Nt.length)throw new kr(Ar.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vf=function(){};function qf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Bf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return(0,fr.ZT)(e,t),e.prototype.Yf=function(t){var e=Jh(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new kr(Ar.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Yf(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(Jf(r,t,h))}s={arrayValue:{values:u}}}else s=Jf(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Yf(a,o),s=of(n,"where",a,"in"===o||"not-in"===o);var f=Li.create(i,o,s);return function(t,e){if(e.xt()){var n=ro(t);if(null!==n&&!n.isEqual(e.field))throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=no(t);null!==r&&Qf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new kr(Ar.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new kr(Ar.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Dh(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Vf),Hf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return(0,fr.ZT)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ki(e,n);return function(t,e){if(null===no(t)){var n=ro(t);null!==n&&Qf(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Dh(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Xi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Vf),Gf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return(0,fr.ZT)(e,t),e.prototype.Yf=function(t){return new Dh(t.firestore,t.v_,so(t.C_,this.nd,this.sd))},e}(Vf),zf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return(0,fr.ZT)(e,t),e.prototype.Yf=function(t){var e=Kf(t,this.type,this.rd,this.od);return new Dh(t.firestore,t.v_,function(t,e){return new Xi(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Vf),Wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return(0,fr.ZT)(e,t),e.prototype.Yf=function(t){var e=Kf(t,this.type,this.rd,this.od);return new Dh(t.firestore,t.v_,function(t,e){return new Xi(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Vf);function Kf(t,e,n,r){if(n[0]instanceof Pr&&(n[0]=n[0]._),n[0]instanceof Lf)return function(t,e,n,r,i){if(!r)throw new kr(Ar.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=oo(t);a<s.length;a++){var u=s[a];if(u.field.ht())o.push(mi(e,r.key));else{var c=r.field(u.field);if(oi(c))throw new kr(Ar.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.ot();throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new zi(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Jh(t.firestore);return function(t,e,n,r,i,o){var a=t.Nt;if(i.length>a.length)throw new kr(Ar.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.ht()){if("string"!=typeof c)throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!io(t)&&-1!==c.indexOf("/"))throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Kr.ct(c));if(!Qr.Et(l))throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Qr(l);s.push(mi(e,h))}else{var f=of(n,r,c);s.push(f)}}return new zi(s,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Jf(t,e,n){if(n instanceof Pr&&(n=n._),"string"==typeof n){if(""===n)throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!io(e)&&-1!==n.indexOf("/"))throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Kr.ct(n));if(!Qr.Et(r))throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return mi(t,new Qr(r))}if(n instanceof Mh)return mi(t,n.S_);throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ah(n)+".")}function Yf(t,e){if(!Array.isArray(t)||0===t.length)throw new kr(Ar.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new kr(Ar.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Qf(t,e,n){if(!n.isEqual(e))throw new kr(Ar.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Xf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function $f(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Zf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,fr.ZT)(e,t),e.prototype.Uf=function(t){return new Nr(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Mh(this.firestore,null,e)},e}(Df),tp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ep=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this).zf=e,s.ad=e,s.metadata=o,s}return(0,fr.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new np(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(jf("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Lf),np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ep),rp=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new tp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new np(n.zf,n.Hf,r.key,r,new tp(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new kr(Ar.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new np(t.zf,t.Hf,e.doc.key,e.doc,new tp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new np(t.zf,t.Hf,e.doc.key,e.doc,new tp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:ip(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function ip(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _r()}}function op(t,e){return t instanceof ep&&e instanceof ep?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof rp&&e instanceof rp&&t.zf===e.zf&&Vh(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var ap=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,fr.ZT)(e,t),e.prototype.Uf=function(t){return new Nr(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Mh(this.firestore,null,e)},e}(Df);function sp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=kh(t,Mh);var o=kh(t.firestore,Nf),a=Jh(o);return e instanceof Pr&&(e=e._),cp(o,[("string"==typeof e||e instanceof wh?rf(a,"updateDoc",t.S_,e,n,r):nf(a,"updateDoc",t.S_,e)).F_(t.S_,Oo.exists(!0))])}function up(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Pr&&(t=t._);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Xf(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(Xf(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Mh)c=kh(t.firestore,Nf),l=Zi(t.S_.path),u={next:function(e){i[s]&&i[s](lp(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=kh(t,Dh);c=kh(p.firestore,Nf),l=p.C_;var d=new ap(c);u={next:function(t){i[s]&&i[s](new rp(c,d,p,t))},error:i[s+1],complete:i[s+2]},Uf(t.C_)}return function(t,e,n,r){var i=this,o=new _h(r),a=new xl(e,o,n);return t.fs.ys((function(){return(0,fr.mG)(i,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=bl,[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return(0,fr.mG)(i,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=wl,[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Pf(c),l,h,u)}function cp(t,e){return function(t,e){var n=this,r=new ss;return t.fs.ys((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return n=Ul,[4,xf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Pf(t),e)}function lp(t,e,n){var r=n.docs.get(e.S_),i=new ap(t);return new ep(t,i,e.S_,r,new tp(n.hasPendingWrites,n.fromCache),e.v_)}var hp=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Jh(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=fp(t,this.zf),i=$f(r.v_,e,n),o=Yh(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Oo.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,a=fp(t,this.zf);return e instanceof Pr&&(e=e._),o="string"==typeof e||e instanceof wh?rf(this.wd,"WriteBatch.update",a.S_,e,n,r):nf(this.wd,"WriteBatch.update",a.S_,e),this.fd.push(o.F_(a.S_,Oo.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=fp(t,this.zf);return this.fd=this.fd.concat(new Yo(e.S_,Oo.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new kr(Ar.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function fp(t,e){if(t instanceof Pr&&(t=t._),t.firestore!==e)throw new kr(Ar.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var pp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return(0,fr.ZT)(e,t),e.prototype.get=function(e){var n=this,r=fp(e,this.zf),i=new ap(this.zf);return t.prototype.get.call(this,e).then((function(t){return new ep(n.zf,i,r.S_,t.Jf,new tp(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Jh(t)}return t.prototype.get=function(t){var e=this,n=fp(t,this.zf),r=new Zf(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return _r();var i=t[0];if(i instanceof ki)return new Lf(e.zf,r,n.S_,null,n.v_);if(i instanceof Ai)return new Lf(e.zf,r,i.key,i,n.v_);throw _r()}))},t.prototype.set=function(t,e,n){var r=fp(t,this.zf),i=$f(r.v_,e,n),o=Yh(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=fp(t,this.zf);return e instanceof Pr&&(e=e._),o="string"==typeof e||e instanceof wh?rf(this.wd,"Transaction.update",a.S_,e,n,r):nf(this.wd,"Transaction.update",a.S_,e),this.Td.update(a.S_,o),this},t.prototype.delete=function(t){var e=fp(t,this.zf);return this.Td.delete(e.S_),this},t}()),dp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Mf(t=kh(t,Nf));var n=Pf(t),r=t.p_(),i=new gh;return Of(n,i,new vh(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Mf(t=kh(t,Nf));var e=Pf(t),n=t.p_(),r=new gh;return Of(e,r,new yh(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new kr(Ar.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ss;return t.Mf.Tf((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return ls.Wn()?(e=t+"main",[4,ls.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Wu(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),vp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Lr||(i.md=e),i}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.V_().host&&gr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,Ef(t)];case 1:return e=r.sent(),[4,Sf(t)];case 2:return n=r.sent(),[2,(e.po(!0),function(t){var e=wr(t);return e.Fh.delete(0),Kc(e)}(n))]}}))}))}))}(Pf(kh(this._,Nf)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,Ef(t)];case 1:return e=r.sent(),[4,Sf(t)];case 2:return n=r.sent(),[2,(e.po(!1),function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return(e=wr(t)).Fh.add(0),[4,Jc(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Pf(kh(this._,Nf)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&xh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ss;return t.fs.ys((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return e=zl,[4,xf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Pf(kh(this._,Nf)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new _h(e);return t.fs.ys((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){wr(t).jh.add(e),e.next()},[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){wr(t).jh.delete(e)},[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Pf(t=kh(t,Nf)),Xf(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new kr(Ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ap(this,Fh(this._,t))}catch(t){throw bp(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new _p(this,jh(this._,t))}catch(t){throw bp(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new xp(this,function(t,e){if(t=kh(t,Oh),Th("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new kr(Ar.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Dh(t,null,function(t){return new Xi(Kr.at(),t)}(e))}(this._,t))}catch(t){throw bp(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ss;return t.fs.ys((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t){return wf(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new yf(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(Pf(t),(function(n){return e(new pp(t,n))}))}(this._,(function(n){return t(new gp(e,n))}))},e.prototype.batch=function(){var t=this;return Pf(this._),new mp(new hp(this._,(function(e){return cp(t._,e)})))},e.prototype.loadBundle=function(t){throw new kr(Ar.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new kr(Ar.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Pr),yp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,fr.ZT)(e,t),e.prototype.Uf=function(t){return new Mr(new Nr(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return _p.Ad(e,this.firestore,null)},e}(Df),gp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return(0,fr.ZT)(e,t),e.prototype.get=function(t){var e=this,n=kp(t);return this._.get(n).then((function(t){return new Tp(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=kp(t);return n?(Sh("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=kp(t);return 2===arguments.length?this._.update(a,e):(r=this._).update.apply(r,(0,fr.pr)([a,e,n],i)),this},e.prototype.delete=function(t){var e=kp(t);return this._.delete(e),this},e}(Pr),mp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.set=function(t,e,n){var r=kp(t);return n?(Sh("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=kp(t);return 2===arguments.length?this._.update(a,e):(r=this._).update.apply(r,(0,fr.pr)([a,e,n],i)),this},e.prototype.delete=function(t){var e=kp(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(Pr),_p=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new yp(e),r}return(0,fr.ZT)(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new kr(Ar.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Mh(n._,r,new Qr(t)))},e.Ad=function(t,n,r){return new e(n,new Mh(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ap(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ap(this.firestore,Fh(this._,t))}catch(t){throw bp(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Pr&&(t=t._),t instanceof Mh&&Uh(this._,t)},e.prototype.set=function(t,e){e=Sh("DocumentReference.set",e);try{return function(t,e,n){t=kh(t,Mh);var r=kh(t.firestore,Nf),i=$f(t.v_,e,n);return cp(r,[Yh(Jh(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Oo.Wt())])}(this._,t,e)}catch(t){throw bp(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?sp(this._,t):sp.apply(void 0,(0,fr.pr)([this._,t,e],n))}catch(t){throw bp(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return cp(kh((t=this._).firestore,Nf),[new Yo(t.S_,Oo.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=wp(e),i=Ep(e,(function(e){return new Tp(t.firestore,new ep(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return up(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=kh(t,Mh);var e=kh(t.firestore,Nf),n=Pf(e),r=new ap(e);return function(t,e){var n=this,r=new ss;return t.fs.ys((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Ai?n.resolve(i):i instanceof ki?n.resolve(null):n.reject(new kr(Ar.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=_s(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Tf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new ep(e,r,t.S_,n,new tp(n instanceof Ai&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=kh(t,Mh);var e=kh(t.firestore,Nf);return Cf(Pf(e),t.S_,{source:"server"}).then((function(n){return lp(e,t,n)}))}(this._):function(t){t=kh(t,Mh);var e=kh(t.firestore,Nf);return Cf(Pf(e),t.S_).then((function(n){return lp(e,t,n)}))}(this._)).then((function(t){return new Tp(e.firestore,new ep(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Pr);function bp(t,e,n){return t.message=t.message.replace(e,n),t}function wp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Xf(r))return r}return{}}function Ep(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Xf(t[0])?t[0]:Xf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Tp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new _p(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return op(this._,t._)},e}(Pr),Sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(Tp),xp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new yp(e),r}return(0,fr.ZT)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,qf(this._,function(t,e,n){var r=e,i=jf("where",t);return new Bf(i,r,n)}(t,n,r)))}catch(t){throw bp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,qf(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=jf("orderBy",t);return new Hf(r,n)}(t,n)))}catch(t){throw bp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,qf(this._,function(t){return Nh("limit",t),new Gf("limit",t,"F")}(t)))}catch(t){throw bp(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,qf(this._,function(t){return Nh("limitToLast",t),new Gf("limitToLast",t,"L")}(t)))}catch(t){throw bp(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qf(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zf("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw bp(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qf(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zf("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw bp(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qf(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wf("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw bp(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qf(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wf("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw bp(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Vh(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=kh(t,Dh);var e=kh(t.firestore,Nf),n=Pf(e),r=new ap(e);return function(t,e){var n=this,r=new ss;return t.fs.ys((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ac(t,e,!0)];case 1:return s=u.sent(),r=new Rl(e,s.Pc),i=r.dl(s.documents),o=r.Ti(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=_s(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Tf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new rp(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=kh(t,Dh);var e=kh(t.firestore,Nf),n=Pf(e),r=new ap(e);return Af(n,t.C_,{source:"server"}).then((function(n){return new rp(e,r,t,n)}))}(this._):function(t){t=kh(t,Dh);var e=kh(t.firestore,Nf),n=Pf(e),r=new ap(e);return Uf(t.C_),Af(n,t.C_).then((function(n){return new rp(e,r,t,n)}))}(this._)).then((function(t){return new Cp(e.firestore,new rp(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=wp(e),i=Ep(e,(function(e){return new Cp(t.firestore,new rp(t.firestore._,t.Hf,t._,e.ud))}));return up(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Pr),Ip=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Sp(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(Pr),Cp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new xp(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new Sp(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new Ip(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new Sp(n.zf,r))}))},e.prototype.isEqual=function(t){return op(this._,t._)},e}(Pr),Ap=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new _p(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new _p(this.firestore,void 0===t?jh(this._):jh(this._,t))}catch(t){throw bp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=kh(t.firestore,Nf),r=jh(t),i=$f(t.v_,e);return cp(n,[Yh(Jh(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Oo.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new _p(e.firestore,t)}))},e.prototype.isEqual=function(t){return Uh(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(xp);function kp(t){return t instanceof Pr&&(t=t._),kh(t,Mh)}var Np,Pp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(wh.bind.apply(wh,(0,fr.pr)([void 0],e))))||this}return(0,fr.ZT)(e,t),e.documentId=function(){return new e(Yr.lt().ot())},e.prototype.isEqual=function(t){return t instanceof Pr&&(t=t._),t instanceof wh&&this._.d_.isEqual(t.d_)},e}(Pr),Rp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.serverTimestamp=function(){var t=new $h("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Qh("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zh("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tf("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new ef("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(Pr),Op=function(){function t(){this.Pd={},this.yd=new ss,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.Wl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)},t}(),Mp=n(909),Dp={Firestore:vp,GeoPoint:qh,Timestamp:Gr,Blob:Mr,Transaction:gp,WriteBatch:mp,DocumentReference:_p,DocumentSnapshot:Tp,Query:xp,QueryDocumentSnapshot:Sp,QuerySnapshot:Cp,CollectionReference:Ap,FieldPath:Pp,FieldValue:Rp,setLogLevel:function(t){var e;e=t,pr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Mp.wA("firestore",(function(t){return function(t,e){return new vp(t,new Nf(t,e),new dp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Dp)))})(Np=r.Z),Np.registerVersion("@firebase/firestore","2.1.1"),function(t){t.prototype.loadBundle=function(t){return function(t,e){var n=new Op;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new bh(t,e)}(function(t,e){if(t instanceof Uint8Array)return mh(t,e);if(t instanceof ArrayBuffer)return mh(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,Uc(e));t.fs.ys((function(){return(0,fr.mG)(i,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=ph,[4,xf(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(Pf(t._),t.I_,e,n),n}(this,t)},t.prototype.namedQuery=function(t){return function(t,e){return function(t,e){var n=this;return t.fs.enqueue((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=wr(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.To.Bs(t,e)}))},[4,Tf(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Pf(t._),e).then((function(e){return e?new xp(t,new Dh(t._,null,e.query)):null}))}(this,t)}}(vp);var Lp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Fp=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,fr.ZT)(e,t),e}(Error),jp=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function Up(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Vp,qp,Bp,Hp=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Up(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Up(t,(function(t){return e.decode(t)})):t},t}(),Gp=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Hp,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new jp(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,p;return(0,fr.Jh)(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Fp("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(s),c=u.timer,l=u.promise,[4,Promise.race([zp(c,this.postJSON(r,i,o)),l,zp(c,this.cancelAllRequests)])];case 2:if(!(h=d.sent()))throw new Fp("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!Lp[s])return new Fp("internal","internal");r=Lp[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Fp(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new Fp("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new Fp("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function zp(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}Vp=r.Z,qp=fetch.bind(self),Bp={Functions:Gp},Vp.INTERNAL.registerComponent(new Mp.wA("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new Gp(n,r,i,e,qp)}),"PUBLIC").setServiceProps(Bp).setMultipleInstances(!0)),r.Z.registerVersion("@firebase/functions","0.6.1");var Wp,Kp=n(8676),Jp="w:0.4.19",Yp=((Wp={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Wp["not-registered"]="Firebase Installation is not registered.",Wp["installation-not-found"]="Firebase Installation not found.",Wp["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Wp["app-offline"]="Could not process request. Application offline.",Wp["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Wp),Qp=new o.LL("installations","Installations",Yp);function Xp(t){return t instanceof o.ZR&&t.code.includes("request-failed")}function $p(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Zp(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function td(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,Qp.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function ed(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function nd(t,e){var n=e.refreshToken,r=ed(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function rd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function id(t,e){var n=e.fid;return(0,fr.mG)(this,void 0,void 0,(function(){var e,r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return e=$p(t),r=ed(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:Jp},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,rd((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,{fid:(s=u.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Zp(s.authToken)}];case 3:return[4,td("Create Installation",a)];case 4:throw u.sent()}}))}))}function od(t){return new Promise((function(e){setTimeout(e,t)}))}var ad=/^[cdef][\w-]{21}$/;function sd(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,fr.fl)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return ad.test(e)?e:""}catch(t){return""}}function ud(t){return t.appName+"!"+t.appId}var cd=new Map;function ld(t,e){var n=ud(t);hd(n,e),function(t,e){var n=pd();n&&n.postMessage({key:t,fid:e}),dd()}(n,e)}function hd(t,e){var n,r,i=cd.get(t);if(i)try{for(var o=(0,fr.XA)(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var fd=null;function pd(){return!fd&&"BroadcastChannel"in self&&((fd=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){hd(t.data.key,t.data.fid)}),fd}function dd(){0===cd.size&&fd&&(fd.close(),fd=null)}var vd,yd="firebase-installations-store",gd=null;function md(){return gd||(gd=(0,Kp.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(yd)}}))),gd}function _d(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return n=ud(t),[4,md()];case 1:return r=s.sent(),i=r.transaction(yd,"readwrite"),[4,(o=i.objectStore(yd)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||ld(t,e.fid),[2,e]}}))}))}function bd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return e=ud(t),[4,md()];case 1:return n=i.sent(),[4,(r=n.transaction(yd,"readwrite")).objectStore(yd).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function wd(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return n=ud(t),[4,md()];case 1:return r=u.sent(),i=r.transaction(yd,"readwrite"),[4,(o=i.objectStore(yd)).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||ld(t,s.fid),[2,s]}}))}))}function Ed(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,wd(t,(function(n){var r=function(t){return xd(t||{fid:sd(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Qp.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,id(t,e)];case 1:return n=i.sent(),[2,_d(t,n)];case 2:return Xp(r=i.sent())&&409===r.customData.serverCode?[4,bd(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,_d(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Td(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Td(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,Sd(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,od(100)];case 3:return o.sent(),[4,Sd(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Ed(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Sd(t){return wd(t,(function(t){if(!t)throw Qp.create("installation-not-found");return xd(t)}))}function xd(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Id(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,fr.mG)(this,void 0,void 0,(function(){var t,i,o,a,s,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:return t=function(t,e){var n=e.fid;return $p(t)+"/"+n+"/authTokens:generate"}(n,e),i=nd(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:Jp}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,rd((function(){return fetch(t,s)}))];case 1:return(u=c.sent()).ok?[4,u.json()]:[3,3];case 2:return[2,Zp(c.sent())];case 3:return[4,td("Generate Auth Token",u)];case 4:throw c.sent()}}))}))}function Cd(t,e){return void 0===e&&(e=!1),(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,wd(t.appConfig,(function(r){if(!kd(r))throw Qp.create("not-registered");var i,o=r.authToken;if(!e&&(2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i)))return r;if(1===o.requestStatus)return n=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,Ad(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,od(100)];case 3:return i.sent(),[4,Ad(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Cd(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw Qp.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,fr.pi)((0,fr.pi)({},t),{authToken:e})}(r);return n=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Id(t,e)];case 1:return n=o.sent(),i=(0,fr.pi)((0,fr.pi)({},e),{authToken:n}),[4,_d(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!Xp(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,bd(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,fr.pi)((0,fr.pi)({},e),{authToken:{requestStatus:0}}),[4,_d(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,a),a}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Ad(t){return wd(t,(function(t){if(!kd(t))throw Qp.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?(0,fr.pi)((0,fr.pi)({},t),{authToken:{requestStatus:0}}):t}))}function kd(t){return void 0!==t&&2===t.registrationStatus}function Nd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,Ed(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Pd(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return $p(t)+"/"+n}(t,e),r=nd(t,e),i={method:"DELETE",headers:r},[4,rd((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,td("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function Rd(t){return Qp.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Mp.wA("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Rd("App Configuration");if(!t.name)throw Rd("App Name");try{for(var r=(0,fr.XA)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Rd(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,Ed(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Cd(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,Nd(t.appConfig)];case 1:return n.sent(),[4,Cd(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,wd(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Qp.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Qp.create("app-offline");case 3:return[4,Pd(e,n)];case 4:return r.sent(),[4,bd(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){pd();var n=ud(t),r=cd.get(n);r||(r=new Set,cd.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=ud(t),r=cd.get(n);r&&(r.delete(e),0===r.size&&cd.delete(n),dd())}(n,e)}}(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(r.Z);var Od,Md=((vd={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',vd["only-available-in-window"]="This method is available in a Window context.",vd["only-available-in-sw"]="This method is available in a service worker context.",vd["permission-default"]="The notification permission was not granted and dismissed instead.",vd["permission-blocked"]="The notification permission was not granted and blocked instead.",vd["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",vd["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",vd["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",vd["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",vd["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",vd["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",vd["token-update-no-token"]="FCM returned no token when updating the user to push.",vd["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",vd["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",vd["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",vd["invalid-vapid-key"]="The public VAPID key must be a string.",vd["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",vd),Dd=new o.LL("messaging","Messaging",Md),Ld="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function Fd(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,(0,fr.fl)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jd(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Od||(Od={}));var Ud="fcm_token_details_db",Vd="fcm_token_object_Store";function qd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(Ud))return[2,null];r.label=2;case 2:return e=null,[4,(0,Kp.openDb)(Ud,5,(function(r){return(0,fr.mG)(n,void 0,void 0,(function(){var n,i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Vd)?[4,(n=r.transaction.objectStore(Vd)).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:Fd(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Fd(o.auth),p256dh:Fd(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Fd(o.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,(0,Kp.deleteDb)(Ud)];case 4:return r.sent(),[4,(0,Kp.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,Kp.deleteDb)("undefined")];case 6:return r.sent(),[2,Bd(e)?e:null]}}))}))}function Bd(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var Hd="firebase-messaging-store",Gd=null;function zd(){return Gd||(Gd=(0,Kp.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Hd)}}))),Gd}function Wd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return e=Yd(t),[4,zd()];case 1:return[4,i.sent().transaction(Hd).objectStore(Hd).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,qd(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Kd(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Kd(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return n=Yd(t),[4,zd()];case 1:return r=o.sent(),[4,(i=r.transaction(Hd,"readwrite")).objectStore(Hd).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Jd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return e=Yd(t),[4,zd()];case 1:return n=i.sent(),[4,(r=n.transaction(Hd,"readwrite")).objectStore(Hd).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Yd(t){return t.appConfig.appId}function Qd(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return[4,tv(t)];case 1:n=u.sent(),r=ev(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Zd(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),Dd.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,Dd.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw Dd.create("token-subscribe-no-token");return[2,o.token]}}))}))}function Xd(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return[4,tv(t)];case 1:n=u.sent(),r=ev(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Zd(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),Dd.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,Dd.create("token-update-failed",{errorInfo:s});if(!o.token)throw Dd.create("token-update-no-token");return[2,o.token]}}))}))}function $d(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return[4,tv(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Zd(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,Dd.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),Dd.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function Zd(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function tv(t){var e=t.appConfig,n=t.installations;return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function ev(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==Ld&&(o.web.applicationPubKey=i),o}function nv(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw Dd.create("permission-blocked");return[4,av(e,n)];case 1:return r=s.sent(),[4,Wd(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Fd(r.getKey("auth")),p256dh:Fd(r.getKey("p256dh"))},i?[3,3]:[2,ov(t,o)];case 3:if(u=i.subscriptionOptions,l=(c=o).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,l&&h&&f&&p)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,$d(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,ov(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,iv({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l,h,f,p}))}))}function rv(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,Wd(t)];case 1:return(n=i.sent())?[4,$d(t,n.token)]:[3,4];case 2:return i.sent(),[4,Jd(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function iv(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,Xd(e,t)];case 1:return r=a.sent(),i=(0,fr.pi)((0,fr.pi)({},t),{token:r,createTime:Date.now()}),[4,Kd(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,rv(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function ov(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,Qd(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Kd(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function av(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jd(e)})]}}))}))}function sv(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function uv(t){return new Promise((function(e){setTimeout(e,t)}))}var cv=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Dd.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Wd(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Ld,r.label=2;case 2:return[2,nv(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return rv(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Dd.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Dd.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Dd.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Dd.create("only-available-in-window")},t.prototype.onMessage=function(){throw Dd.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Dd.create("only-available-in-window")},t.prototype.onPush=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,pv()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,fv(n,e)]:(r=!1,e.notification?[4,dv(lv(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,uv(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return(0,fr.mG)(this,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,rv(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Wd(this.firebaseDependencies)];case 3:return r=i.sent(),[4,rv(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,nv(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Ld)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(sv(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,hv(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,uv(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=Od.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function lv(t){var e,n=(0,fr.pi)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function hv(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return[4,pv()];case 1:e=u.sent();try{for(n=(0,fr.XA)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function fv(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Od.PUSH_RECEIVED;try{for(var i=(0,fr.XA)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function pv(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function dv(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var vv=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Od.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),sv(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Dd.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,nv(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Ld),[2]}))}))},t.prototype.updateSwReg=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Dd.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),Dd.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,rv(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?Dd.create("permission-blocked"):Dd.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Dd.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Dd.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Dd.create("invalid-sw-registration");if(this.swRegistration)throw Dd.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Dd.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Dd.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case Od.NOTIFICATION_CLICKED:return"notification_open";case Od.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function yv(t){return Dd.create("missing-app-config-values",{valueName:t})}var gv={isSupported:mv};function mv(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}r.Z.INTERNAL.registerComponent(new Mp.wA("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw yv("App Configuration Object");if(!t.name)throw yv("App Name");var r=t.options;try{for(var i=(0,fr.XA)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw yv(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!mv())throw Dd.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new cv(n):new vv(n)}),"PUBLIC").setServiceProps(gv));var _v="firebasestorage.googleapis.com",bv=function(t){function e(n,r){var i=t.call(this,Sv(n),"Firebase Storage: "+r+" ("+Sv(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return(0,fr.ZT)(e,t),e.prototype.codeEquals=function(t){return Sv(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(o.ZR),wv="canceled",Ev="invalid-argument",Tv="unsupported-environment";function Sv(t){return"storage/"+t}function xv(){return new bv("unknown","An unknown error occurred, please check the error payload for server response.")}function Iv(){return new bv(wv,"User canceled the upload/download.")}function Cv(){return new bv("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Av(t){return new bv(Ev,t)}function kv(){return new bv("app-deleted","The Firebase app was deleted.")}function Nv(t){return new bv("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pv(t,e){return new bv("invalid-format","String does not match format '"+t+"': "+e)}function Rv(t){throw new bv("internal-error","Internal error: "+t)}var Ov={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Mv=function(t,e){this.data=t,this.contentType=e||null};function Dv(t,e){switch(t){case Ov.RAW:return new Mv(Lv(e));case Ov.BASE64:case Ov.BASE64URL:return new Mv(Fv(t,e));case Ov.DATA_URL:return new Mv((n=new Uv(e)).base64?Fv(Ov.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Pv(Ov.DATA_URL,"Malformed data URL.")}return Lv(e)}(n.rest),new Uv(e).contentType)}var n;throw xv()}function Lv(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Fv(t,e){switch(t){case Ov.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Pv(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Ov.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Pv(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw Pv(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var jv,Uv=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Pv(Ov.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},Vv={STATE_CHANGED:"state_changed"},qv="running",Bv="pausing",Hv="paused",Gv="success",zv="canceling",Wv="canceled",Kv="error",Jv={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Yv(t){switch(t){case qv:case Bv:case zv:return Jv.RUNNING;case Hv:return Jv.PAUSED;case Gv:return Jv.SUCCESS;case Wv:return Jv.CANCELED;case Kv:default:return Jv.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(jv||(jv={}));var Qv=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=jv.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=jv.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=jv.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Rv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Rv("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Rv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Rv("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Xv=function(){function t(){}return t.prototype.createXhrIo=function(){return new Qv},t}();function $v(t){return"string"==typeof t||t instanceof String}function Zv(t){return ty()&&t instanceof Blob}function ty(){return"undefined"!=typeof Blob}function ey(t,e,n,r){if(r<e)throw new bv(Ev,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new bv(Ev,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function ny(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ry(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ny();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ty())return new Blob(t);throw new bv(Tv,"This browser doesn't seem to support creating Blobs")}var iy=function(){function t(t,e){var n=0,r="";Zv(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Zv(this.data_)){var r=(i=this.data_,o=e,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ty()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(ry.apply(null,r))}var i=e.map((function(t){return $v(t)?Dv(Ov.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),oy=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new bv("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=_v.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(e);if(l){var h=l[c.indices.bucket],f=l[c.indices.path];f||(f=""),n=new t(h,f),c.postModify(n);break}}if(null==n)throw function(t){return new bv("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function ay(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function sy(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function uy(t){return"https://"+_v+"/v0"+t}function cy(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function ly(t,e){return e}var hy=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||ly},fy=null;function py(){if(fy)return fy;var t=[];t.push(new hy("bucket")),t.push(new hy("generation")),t.push(new hy("metageneration")),t.push(new hy("name","fullPath",!0));var e=new hy("name");e.xform=function(t,e){return function(t){return!$v(t)||t.length<2?t:sy(t)}(e)},t.push(e);var n=new hy("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new hy("timeCreated")),t.push(new hy("updated")),t.push(new hy("md5Hash",null,!0)),t.push(new hy("cacheControl",null,!0)),t.push(new hy("contentDisposition",null,!0)),t.push(new hy("contentEncoding",null,!0)),t.push(new hy("contentLanguage",null,!0)),t.push(new hy("contentType",null,!0)),t.push(new hy("metadata","customMetadata",!0)),fy=t}function dy(t,e,n){var r=ay(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new oy(n,r);return e.makeStorageReference(i)}})}(r,t),r}(t,r,n)}function vy(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var yy=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function gy(t){if(!t)throw xv()}function my(t,e){return function(n,r){var i=dy(t,r,e);return gy(null!==i),i}}function _y(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new bv("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new bv("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new bv("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function by(t){var e=_y(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new bv("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function wy(t,e,n){var r=uy(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new yy(r,"GET",my(t,n),i);return o.errorHandler=by(e),o}function Ey(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=uy(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime,u=new yy(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=ay(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t.makeStorageReference(new oy(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t.makeStorageReference(new oy(e,l.name)),r.items.push(s)}return r}(t,e,r)}(t,e,r);return gy(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=_y(e),u}function Ty(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Sy=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function xy(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){gy(!1)}return gy(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Iy=262144;var Cy=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}},Ay=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function ky(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Ny=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=py(),this._resumable=this._shouldDoResumable(this._blob),this._state=qv,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(wv)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(Kv))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(wv)?r.completeTransitions_():(r._error=t,r._transition(Kv))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===qv&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case qv:t(n);break;case zv:e._transition(Wv);break;case Bv:e._transition(Hv)}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Ty(e,r,i),s={name:a.fullPath},u=uy(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=vy(a,n),h=t.maxUploadRetryTime,f=new yy(u,"POST",(function(t){var e;xy(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){gy(!1)}return gy($v(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=_y(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new yy(n,"POST",(function(t){var e=xy(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){gy(!1)}n||gy(!1);var i=Number(n);return gy(!isNaN(i)),new Sy(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=_y(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Iy*this._chunkMultiplier,n=new Sy(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new Sy(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new bv("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,f);if(null===d)throw Cv();var v=e.maxUploadRetryTime,y=new yy(n,"POST",(function(t,n){var i,a=xy(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?my(e,o)(t,n):null,new Sy(s,c,"final"===a,i)}),v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=s||null,y.errorHandler=_y(t),y}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition(Kv)}var a=t._ref.storage.makeRequest(o,i);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(Gv)):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Iy*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=wy(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition(Gv)}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Ty(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+vy(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=iy.getBlob(c,r,l);if(null===h)throw Cv();var f={name:u.fullPath},p=uy(o),d=t.maxUploadRetryTime,v=new yy(p,"POST",my(t,n),d);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=_y(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(Gv)}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case zv:case Bv:this._state=t,void 0!==this._request&&this._request.cancel();break;case qv:var e=this._state===Hv;this._state=t,e&&(this._notifyObservers(),this._start());break;case Hv:this._state=t,this._notifyObservers();break;case Wv:this._error=Iv(),this._state=t,this._notifyObservers();break;case Kv:case Gv:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case Bv:this._transition(Hv);break;case zv:this._transition(Wv);break;case qv:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Yv(this._state);return new Ay(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Cy(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Yv(this._state)){case Jv.SUCCESS:ky(this._resolve.bind(null,this.snapshot))();break;case Jv.CANCELED:case Jv.ERROR:ky(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Yv(this._state)){case Jv.RUNNING:case Jv.PAUSED:t.next&&ky(t.next.bind(t,this.snapshot))();break;case Jv.SUCCESS:t.complete&&ky(t.complete.bind(t))();break;case Jv.CANCELED:case Jv.ERROR:t.error&&ky(t.error.bind(t,this._error))();break;default:t.error&&ky(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===Hv||this._state===Bv;return t&&this._transition(qv),t},t.prototype.pause=function(){var t=this._state===qv;return t&&this._transition(Bv),t},t.prototype.cancel=function(){var t=this._state===qv||this._state===Bv;return t&&this._transition(zv),t},t}(),Py=function(){function t(t,e){this._service=t,this._location=e instanceof oy?e:oy.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new oy(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return sy(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new oy(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Nv(t)},t}();function Ry(t){var e={prefixes:[],items:[]};return Oy(t,e).then((function(){return e}))}function Oy(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return[4,My(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Oy(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function My(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&ey("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),r=e||{},i=Ey(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}}))}))}function Dy(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=uy(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new yy(r,"GET",function(t,e){return function(n,r){var i=dy(t,r,e);return gy(null!==i),function(t,e){var n=ay(e);if(null===n)return null;if(!$v(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return uy("/b/"+i(n)+"/o/"+i(r))+cy({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=by(e),o}(t.storage,t._location,py()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new bv("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Ly(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new oy(t._location.bucket,n);return new Py(t.storage,r)}var Fy=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),jy=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new Fy(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Fy(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Fy(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Fy(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Uy=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Vy(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Vy(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Vy=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Ly(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new jy(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new Ny(t,new iy(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=Ov.RAW),this._throwIfRoot("putString"),new jy(function(t,e,n,r){void 0===n&&(n=Ov.RAW),t._throwIfRoot("putString");var i=Dv(n,e),o=(0,fr.pi)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new Ny(t,new iy(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return Ry(this._delegate).then((function(e){return new Uy(e,t.storage)}))},t.prototype.list=function(t){var e=this;return My(this._delegate,t).then((function(t){return new Uy(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=wy(t.storage,t._location,py()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=uy(e.fullServerUrl()),o=vy(n,r),a=t.maxOperationRetryTime,s=new yy(i,"PATCH",my(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=by(e),s}(t.storage,t._location,e,py()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return Dy(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=uy(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new yy(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=by(e),i}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Nv(t)},t}(),qy=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),By=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(t){o(t)}else null!==a?((r=xv()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?kv():Iv()):o(r=new bv("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Hy(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Hy(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===jv.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Hy(a,n))}else{var s=n.getErrorCode()===jv.ABORT;e(!1,new Hy(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,fr.pr)([null,t],e));else{var r;u()||a?l.call.apply(l,(0,fr.pr)([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout((function(){a=!0,d(!0)}),r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Hy=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Gy(t){return/^[A-Za-z]+:\/\//.test(t)}function zy(t,e){if(t instanceof Ky){var n=t;if(null==n._bucket)throw new bv("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Py(n,n._bucket);return null!=e?zy(r,e):r}if(void 0!==e){if(e.includes(".."))throw Av('`path` param cannot contain ".."');return Ly(t,e)}return t}function Wy(t,e){if(e&&Gy(e)){if(t instanceof Ky)return new Py(t,e);throw Av("To use ref(service, url), the first argument must be a Storage instance.")}return zy(t,e)}var Ky=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?oy.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:oy.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){ey("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){ey("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new Py(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new qy(kv());var i=function(t,e,n,i){var o=cy(t.urlParams),a=t.url+o,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){var e=void 0!==r.Z?r.Z.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(s),new By(a,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,this._pool);return this._requests.add(i),i.getPromise().then((function(){return n._requests.delete(i)}),(function(){return n._requests.delete(i)})),i},t}(),Jy=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Gy(t))throw Av("ref() expected a child path but got a URL, use refFromURL instead.");return new Vy(Wy(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Gy(t))throw Av("refFromURL() expected a full URL but got a child path, use ref() instead.");try{oy.makeFromUrl(t)}catch(t){throw Av("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vy(Wy(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function Yy(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Jy(n,new Ky(n,r,new Xv,e))}!function(t){var e={TaskState:Jv,TaskEvent:Vv,StringFormat:Ov,Storage:Ky,Reference:Vy};t.INTERNAL.registerComponent(new Mp.wA("storage",Yy,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}(r.Z);var Qy,Xy,$y,Zy="0.4.5",tg=Zy,eg="FB-PERF-TRACE-MEASURE",ng="_wt_",rg="_fcp",ig="_fid",og="@firebase/performance/config",ag="@firebase/performance/configexpire",sg="Performance",ug=((Qy={})["trace started"]="Trace {$traceName} was started before.",Qy["trace stopped"]="Trace {$traceName} is not running.",Qy["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Qy["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Qy["no window"]="Window is not available.",Qy["no app id"]="App id is not available.",Qy["no project id"]="Project id is not available.",Qy["no api key"]="Api key is not available.",Qy["invalid cc log"]="Attempted to queue invalid cc event",Qy["FB not default"]="Performance can only start when Firebase app instance is the default one.",Qy["RC response not ok"]="RC response is not ok",Qy["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Qy["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Qy["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Qy["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Qy),cg=new o.LL("performance",sg,ug),lg=new i.Yd(sg);lg.logLevel=i.in.INFO;var hg,fg=function(){function t(t){if(this.window=t,!t)throw cg.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,o.hl)()||(lg.info("IndexedDB is not supported by current browswer"),!1):(lg.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===Xy&&(Xy=new t($y)),Xy},t}();function pg(t,e){var n=t.length-e.length;if(n<0||n>1)throw cg.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var dg,vg,yg=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=pg("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=pg("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw cg.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw cg.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw cg.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===hg&&(hg=new t),hg},t}();function gg(){return dg}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(vg||(vg={}));var mg=["firebase_","google_","ga_"],_g=new RegExp("^[a-zA-Z]\\w*$");function bg(){var t=fg.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function wg(){switch(fg.getInstance().document.visibilityState){case"visible":return vg.VISIBLE;case"hidden":return vg.HIDDEN;default:return vg.UNKNOWN}}function Eg(){var t=fg.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var Tg="Could not fetch config, will use default configs";function Sg(t){if(!t)return t;var e=yg.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=true,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=xg(e.tracesSamplingRate),e.logNetworkAfterSampling=xg(e.networkRequestsSamplingRate),t}function xg(t){return Math.random()<=t}var Ig,Cg=1;function Ag(){return Cg=2,Ig=Ig||function(){var t=fg.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=yg.getInstance().installationsService.getId()).then((function(t){dg=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=fg.getInstance().localStorage;if(t){var e=t.getItem(ag);if(e&&Number(e)>Date.now()){var n=t.getItem(og);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return e?(Sg(e),Promise.resolve()):function(t){return(e=yg.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+yg.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+yg.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:yg.getInstance().getAppId(),app_version:tg,sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw cg.create("RC response not ok")}))})).catch((function(){lg.info(Tg)}));var e}(t).then(Sg).then((function(t){return function(t){var e=fg.getInstance().localStorage;t&&e&&(e.setItem(og,JSON.stringify(t)),e.setItem(ag,String(Date.now()+60*yg.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return kg()}),(function(){return kg()}))}function kg(){Cg=3}var Ng,Pg=1e4,Rg=3,Og=[],Mg=!1;function Dg(t){setTimeout((function(){var t,e;if(0!==Rg)return Og.length?(e=(t=Og.splice(0,1e3)).map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=yg.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||lg.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=Pg;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Og=(0,fr.pr)(e,Og),lg.info("Retry transport request later.")),Rg=3,Dg(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:yg.getInstance().logSource,log_event:e},t).catch((function(){Og=(0,fr.pr)(t,Og),Rg--,lg.info("Tries left: "+Rg+"."),Dg(Pg)}))):Dg(Pg)}),t)}function Lg(t){if(!t.eventTime||!t.message)throw cg.create("invalid cc log");Og=(0,fr.pr)(Og,[t])}function Fg(t,e){Ng||(Ng=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Lg({message:t.apply(void 0,e),eventTime:Date.now()})}}(Vg)),Ng(t,e)}function jg(t){var e=yg.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&fg.getInstance().requiredApisAvailable()&&(t.isAuto&&wg()!==vg.VISIBLE||(3===Cg?Ug(t):Ag().then((function(){return Ug(t)}),(function(){return Ug(t)}))))}function Ug(t){if(gg()){var e=yg.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Fg(t,1)}),0)}}function Vg(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:qg(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:qg(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function qg(){return{google_app_id:yg.getInstance().getAppId(),app_instance_id:gg(),web_app_info:{sdk_version:tg,page_url:fg.getInstance().getUrl(),service_worker_status:bg(),visibility_state:wg(),effective_connection_type:Eg()},application_process_state:0}}var Bg=["_fp",rg,ig],Hg=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=fg.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw cg.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw cg.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),jg(this)},t.prototype.record=function(t,e,n){if(t<=0)throw cg.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw cg.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=(0,fr.pi)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}jg(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(ng)&&Bg.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw cg.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&lg.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||mg.some((function(e){return t.startsWith(e)}))||!t.match(_g))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw cg.create("invalid attribute name",{attributeName:t});if(!r)throw cg.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return(0,fr.pi)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=fg.getInstance().getUrl();if(i){var o=new t(ng+i,!0),a=Math.floor(1e3*fg.getInstance().getTimeOrigin());if(o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(rg,Math.floor(1e3*u.startTime)),r&&o.putMetric(ig,Math.floor(1e3*r))}jg(o)}},t.createUserTimingTrace=function(e){jg(new t(e,!1,e))},t}();function Gg(t){var e=t;if(e&&void 0!==e.responseStart){var n=fg.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=yg.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Fg(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function zg(){gg()&&(setTimeout((function(){return function(){var t=fg.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Hg.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Hg.createOobTrace(e,n,t))}))}else Hg.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=fg.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)Gg(n[e]);t.setupObserver("resource",Gg)}()}),0),setTimeout((function(){return function(){for(var t=fg.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)Wg(n[e]);t.setupObserver("measure",Wg)}()}),0))}function Wg(t){var e=t.name;e.substring(0,eg.length)!==eg&&Hg.createUserTimingTrace(e)}var Kg=function(){function t(t){this.app=t,fg.getInstance().requiredApisAvailable()&&(0,o.eu)().then((function(t){t&&(Mg||(Dg(5500),Mg=!0),Ag().then(zg,zg))})).catch((function(t){lg.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Hg(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return yg.getInstance().instrumentationEnabled},set:function(t){yg.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return yg.getInstance().dataCollectionEnabled},set:function(t){yg.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Mp.wA("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw cg.create("FB not default");if("undefined"==typeof window)throw cg.create("no window");return function(t){$y=t}(window),yg.getInstance().firebaseAppInstance=t,yg.getInstance().installationsService=e,new Kg(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance",Zy)}(r.Z);var Jg,Yg,Qg="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(Jg||(Jg={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(Yg||(Yg={}));var Xg,$g=new i.Yd("@firebase/analytics");function Zg(t,e,n,r,i,o){return(0,fr.mG)(this,void 0,void 0,(function(){var a,s,u,c;return(0,fr.Jh)(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),$g.error(c),[3,8];case 8:return t(Jg.CONFIG,i,o),[2]}}))}))}function tm(t,e,n,r,i){return(0,fr.mG)(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f;return(0,fr.Jh)(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&(h=l[c],"break"!==u(h));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(Jg.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),$g.error(f),[3,5];case 5:return[2]}}))}))}var em=((Xg={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Xg["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Xg["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Xg["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Xg["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Xg["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Xg["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Xg["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Xg["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Xg),nm=new o.LL("analytics","Analytics",em),rm=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function im(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function om(t){var e;return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:im(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw nm.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function am(t,e,n,r){var i=e.throttleEndTimeMillis,a=e.backoffCount;return void 0===r&&(r=rm),(0,fr.mG)(this,void 0,void 0,(function(){var e,s,u,c,l,h,f;return(0,fr.Jh)(this,(function(p){switch(p.label){case 0:e=t.appId,s=t.measurementId,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,sm(n,i)];case 2:return p.sent(),[3,4];case 3:if(u=p.sent(),s)return $g.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:e,measurementId:s}];throw u;case 4:return p.trys.push([4,6,,7]),[4,om(t)];case 5:return c=p.sent(),r.deleteThrottleMetadata(e),[2,c];case 6:if(!function(t){if(!(t instanceof o.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l=p.sent())){if(r.deleteThrottleMetadata(e),s)return $g.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:s}];throw l}return h=503===Number(l.customData.httpStatus)?(0,o.$s)(a,r.intervalMillis,30):(0,o.$s)(a,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},r.setThrottleMetadata(e,f),$g.debug("Calling attemptFetch again in "+h+" millis"),[2,am(t,f,n,r)];case 7:return[2]}}))}))}function sm(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(nm.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var um=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();var cm,lm,hm={},fm=[],pm={},dm="dataLayer",vm="gtag",ym=!1;function gm(t){if(ym)throw nm.create("already-initialized");t.dataLayerName&&(dm=t.dataLayerName),t.gtagName&&(vm=t.gtagName)}function mm(t,e){!function(){var t=[];if((0,o.ru)()&&t.push("This is a browser extension environment."),(0,o.zI)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=nm.create("invalid-analytics-context",{errorInfo:e});$g.warn(n.message)}}();var n=t.options.appId;if(!n)throw nm.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw nm.create("no-api-key");$g.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=hm[n])throw nm.create("already-exists",{id:n});if(!ym){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Qg))return r}return null})()||function(t){var e=document.createElement("script");e.src=Qg+"?l="+t,e.async=!0,document.head.appendChild(e)}(dm),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(dm);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return(0,fr.mG)(this,void 0,void 0,(function(){var s;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==Jg.EVENT?[3,2]:[4,tm(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==Jg.CONFIG?[3,4]:[4,Zg(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(Jg.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),$g.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(hm,fm,pm,dm,vm),i=r.wrappedGtag,a=r.gtagCore;lm=i,cm=a,ym=!0}return hm[n]=function(t,e,n,r,i){return(0,fr.mG)(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return(0,fr.Jh)(this,(function(p){switch(p.label){case 0:return(a=function(t,e,n){return void 0===e&&(e=rm),(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u=this;return(0,fr.Jh)(this,(function(c){if(n=t.options,r=n.appId,i=n.apiKey,o=n.measurementId,!r)throw nm.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw nm.create("no-api-key")}return a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new um,setTimeout((function(){return(0,fr.mG)(u,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return s.abort(),[2]}))}))}),6e4),[2,am({appId:r,apiKey:i,measurementId:o},a,s,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&$g.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return $g.error(t)})),e.push(a),s=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return(0,o.hl)()?[3,1]:($g.warn(nm.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,o.eu)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),$g.warn(nm.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=p.sent(),c=u[0],l=u[1],i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(Jg.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}(t,fm,pm,e,cm),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return(0,fr.mG)(this,void 0,void 0,(function(){var o,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(Jg.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=(0,fr.pi)((0,fr.pi)({},r),{send_to:o}),t(Jg.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(lm,hm[n],t,e,r).catch((function(t){return $g.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Jg.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Jg.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(lm,hm[n],t,e).catch((function(t){return $g.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Jg.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Jg.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(lm,hm[n],t,e).catch((function(t){return $g.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(Jg.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(Jg.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(lm,hm[n],t,e).catch((function(t){return $g.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(hm[n],t).catch((function(t){return $g.error(t)}))},INTERNAL:{delete:function(){return delete hm[n],Promise.resolve()}}}}var _m="analytics";function bm(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:if((0,o.ru)())return[2,!1];if(!(0,o.zI)())return[2,!1];if(!(0,o.hl)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,o.eu)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new Mp.wA(_m,(function(t){return mm(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:gm,EventName:Yg,isSupported:bm})),t.INTERNAL.registerComponent(new Mp.wA("analytics-internal",(function(t){try{return{logEvent:t.getProvider(_m).getImmediate().logEvent}}catch(t){throw nm.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(r.Z);var wm,Em=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),Tm=((wm={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",wm["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",wm["registration-api-key"]="Undefined API key. Check Firebase app initialization.",wm["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",wm["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",wm["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",wm["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",wm["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",wm["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",wm["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',wm["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',wm["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",wm["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",wm),Sm=new o.LL("remoteconfig","Remote Config",Tm),xm=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,p,d,v,y,g,m,_;return(0,fr.Jh)(this,(function(b){switch(b.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=b.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),b.label=2;case 2:return b.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return b.sent(),[4,c];case 4:return h=b.sent(),[3,6];case 5:throw f=b.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),Sm.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];m=void 0,b.label=7;case 7:return b.trys.push([7,9,,10]),[4,h.json()];case 8:return m=b.sent(),[3,10];case 9:throw _=b.sent(),Sm.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:y=m.entries,g=m.state,b.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?d=500:"NO_CHANGE"===g?d=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(y={}),304!==d&&200!==d)throw Sm.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:y}]}var w}))}))},t}(),Im=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),Cm=["1","true","t","yes","y","on"],Am=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&Cm.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),km=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=i.in.DEBUG;break;case"silent":this._logger.logLevel=i.in.SILENT;break;default:this._logger.logLevel=i.in.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r=this;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:t=new Im,setTimeout((function(){return(0,fr.mG)(r,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof o.ZR&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys((0,fr.pi)((0,fr.pi)({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Am("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Am("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Am("static"))},t}();function Nm(t,e){var n=t.target.error||void 0;return Sm.create(e,{originalErrorMessage:n&&n.message})}var Pm="app_namespace_store",Rm=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(Nm(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(Pm,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Pm],"readonly").objectStore(Pm),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(Nm(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(Sm.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([Pm],"readwrite").objectStore(Pm),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(Nm(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(Sm.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Pm],"readwrite").objectStore(Pm),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(Nm(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(t){i(Sm.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),Om=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i,o;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function Mm(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Sm.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Dm,Lm=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return(0,fr.mG)(this,void 0,void 0,(function(){var e,i,a;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return[4,Mm(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof o.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return a={throttleEndTimeMillis:Date.now()+(0,o.$s)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(a)];case 6:return s.sent(),[2,this.attemptFetch(t,a)];case 7:return[2]}}))}))},t}(),Fm="@firebase/remote-config";(Dm=r.Z).INTERNAL.registerComponent(new Mp.wA("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Sm.create("registration-window");var o=n.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw Sm.create("registration-project-id");if(!s)throw Sm.create("registration-api-key");if(!u)throw Sm.create("registration-app-id");e=e||"firebase";var c=new Rm(u,n.name,e),l=new Om(c),h=new i.Yd(Fm);h.logLevel=i.in.ERROR;var f=new xm(r,Dm.SDK_VERSION,e,a,s,u),p=new Lm(f,c),d=new Em(p,c,l,h),v=new km(n,d,l,c,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),Dm.registerVersion(Fm,"0.1.30"),r.Z.registerVersion("firebase","8.2.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),r.Z.registerVersion("firebase","8.2.1")},8676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},9908:()=>{},5666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return N()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",v={};function y(){}function g(){}function m(){}var _={};_[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(k([])));w&&w!==n&&r.call(w,o)&&(_=w);var E=m.prototype=y.prototype=Object.create(_);function T(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function x(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function k(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:N}}function N(){return{value:e,done:!0}}return g.prototype=E.constructor=m,m.constructor=g,g.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},T(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},T(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},655:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>a,Jh:()=>s,XA:()=>u,CR:()=>c,fl:()=>l,pr:()=>h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(6981),n(167),n(8655),n(6632),n(9908)})();